function IN(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in i)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(i,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();function Gx(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var vb={exports:{}},Em={};var fE;function LN(){if(fE)return Em;fE=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var d in a)d!=="key"&&(o[d]=a[d])}else o=a;return a=o.ref,{$$typeof:i,type:n,key:u,ref:a!==void 0?a:null,props:o}}return Em.Fragment=e,Em.jsx=t,Em.jsxs=t,Em}var dE;function UN(){return dE||(dE=1,vb.exports=LN()),vb.exports}var J=UN(),yb={exports:{}},xn={};var hE;function ON(){if(hE)return xn;hE=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),x=Symbol.iterator;function S(Y){return Y===null||typeof Y!="object"?null:(Y=x&&Y[x]||Y["@@iterator"],typeof Y=="function"?Y:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,T={};function M(Y,re,me){this.props=Y,this.context=re,this.refs=T,this.updater=me||E}M.prototype.isReactComponent={},M.prototype.setState=function(Y,re){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,re,"setState")},M.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function R(){}R.prototype=M.prototype;function I(Y,re,me){this.props=Y,this.context=re,this.refs=T,this.updater=me||E}var L=I.prototype=new R;L.constructor=I,C(L,M.prototype),L.isPureReactComponent=!0;var z=Array.isArray;function P(){}var V={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function O(Y,re,me){var Te=me.ref;return{$$typeof:i,type:Y,key:re,ref:Te!==void 0?Te:null,props:me}}function K(Y,re){return O(Y.type,re,Y.props)}function H(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===i}function te(Y){var re={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(me){return re[me]})}var ee=/\/+/g;function ae(Y,re){return typeof Y=="object"&&Y!==null&&Y.key!=null?te(""+Y.key):re.toString(36)}function se(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(P,P):(Y.status="pending",Y.then(function(re){Y.status==="pending"&&(Y.status="fulfilled",Y.value=re)},function(re){Y.status==="pending"&&(Y.status="rejected",Y.reason=re)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function G(Y,re,me,Te,Ke){var he=typeof Y;(he==="undefined"||he==="boolean")&&(Y=null);var De=!1;if(Y===null)De=!0;else switch(he){case"bigint":case"string":case"number":De=!0;break;case"object":switch(Y.$$typeof){case i:case e:De=!0;break;case y:return De=Y._init,G(De(Y._payload),re,me,Te,Ke)}}if(De)return Ke=Ke(Y),De=Te===""?"."+ae(Y,0):Te,z(Ke)?(me="",De!=null&&(me=De.replace(ee,"$&/")+"/"),G(Ke,re,me,"",function(It){return It})):Ke!=null&&(H(Ke)&&(Ke=K(Ke,me+(Ke.key==null||Y&&Y.key===Ke.key?"":(""+Ke.key).replace(ee,"$&/")+"/")+De)),re.push(Ke)),1;De=0;var ze=Te===""?".":Te+":";if(z(Y))for(var pt=0;pt<Y.length;pt++)Te=Y[pt],he=ze+ae(Te,pt),De+=G(Te,re,me,he,Ke);else if(pt=S(Y),typeof pt=="function")for(Y=pt.call(Y),pt=0;!(Te=Y.next()).done;)Te=Te.value,he=ze+ae(Te,pt++),De+=G(Te,re,me,he,Ke);else if(he==="object"){if(typeof Y.then=="function")return G(se(Y),re,me,Te,Ke);throw re=String(Y),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return De}function $(Y,re,me){if(Y==null)return Y;var Te=[],Ke=0;return G(Y,Te,"","",function(he){return re.call(me,he,Ke++)}),Te}function le(Y){if(Y._status===-1){var re=Y._result;re=re(),re.then(function(me){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=me)},function(me){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=me)}),Y._status===-1&&(Y._status=0,Y._result=re)}if(Y._status===1)return Y._result.default;throw Y._result}var be=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)},Ae={map:$,forEach:function(Y,re,me){$(Y,function(){re.apply(this,arguments)},me)},count:function(Y){var re=0;return $(Y,function(){re++}),re},toArray:function(Y){return $(Y,function(re){return re})||[]},only:function(Y){if(!H(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}};return xn.Activity=v,xn.Children=Ae,xn.Component=M,xn.Fragment=t,xn.Profiler=a,xn.PureComponent=I,xn.StrictMode=n,xn.Suspense=h,xn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,xn.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return V.H.useMemoCache(Y)}},xn.cache=function(Y){return function(){return Y.apply(null,arguments)}},xn.cacheSignal=function(){return null},xn.cloneElement=function(Y,re,me){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var Te=C({},Y.props),Ke=Y.key;if(re!=null)for(he in re.key!==void 0&&(Ke=""+re.key),re)!N.call(re,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&re.ref===void 0||(Te[he]=re[he]);var he=arguments.length-2;if(he===1)Te.children=me;else if(1<he){for(var De=Array(he),ze=0;ze<he;ze++)De[ze]=arguments[ze+2];Te.children=De}return O(Y.type,Ke,Te)},xn.createContext=function(Y){return Y={$$typeof:u,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:o,_context:Y},Y},xn.createElement=function(Y,re,me){var Te,Ke={},he=null;if(re!=null)for(Te in re.key!==void 0&&(he=""+re.key),re)N.call(re,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(Ke[Te]=re[Te]);var De=arguments.length-2;if(De===1)Ke.children=me;else if(1<De){for(var ze=Array(De),pt=0;pt<De;pt++)ze[pt]=arguments[pt+2];Ke.children=ze}if(Y&&Y.defaultProps)for(Te in De=Y.defaultProps,De)Ke[Te]===void 0&&(Ke[Te]=De[Te]);return O(Y,he,Ke)},xn.createRef=function(){return{current:null}},xn.forwardRef=function(Y){return{$$typeof:d,render:Y}},xn.isValidElement=H,xn.lazy=function(Y){return{$$typeof:y,_payload:{_status:-1,_result:Y},_init:le}},xn.memo=function(Y,re){return{$$typeof:p,type:Y,compare:re===void 0?null:re}},xn.startTransition=function(Y){var re=V.T,me={};V.T=me;try{var Te=Y(),Ke=V.S;Ke!==null&&Ke(me,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(P,be)}catch(he){be(he)}finally{re!==null&&me.types!==null&&(re.types=me.types),V.T=re}},xn.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},xn.use=function(Y){return V.H.use(Y)},xn.useActionState=function(Y,re,me){return V.H.useActionState(Y,re,me)},xn.useCallback=function(Y,re){return V.H.useCallback(Y,re)},xn.useContext=function(Y){return V.H.useContext(Y)},xn.useDebugValue=function(){},xn.useDeferredValue=function(Y,re){return V.H.useDeferredValue(Y,re)},xn.useEffect=function(Y,re){return V.H.useEffect(Y,re)},xn.useEffectEvent=function(Y){return V.H.useEffectEvent(Y)},xn.useId=function(){return V.H.useId()},xn.useImperativeHandle=function(Y,re,me){return V.H.useImperativeHandle(Y,re,me)},xn.useInsertionEffect=function(Y,re){return V.H.useInsertionEffect(Y,re)},xn.useLayoutEffect=function(Y,re){return V.H.useLayoutEffect(Y,re)},xn.useMemo=function(Y,re){return V.H.useMemo(Y,re)},xn.useOptimistic=function(Y,re){return V.H.useOptimistic(Y,re)},xn.useReducer=function(Y,re,me){return V.H.useReducer(Y,re,me)},xn.useRef=function(Y){return V.H.useRef(Y)},xn.useState=function(Y){return V.H.useState(Y)},xn.useSyncExternalStore=function(Y,re,me){return V.H.useSyncExternalStore(Y,re,me)},xn.useTransition=function(){return V.H.useTransition()},xn.version="19.2.3",xn}var pE;function Ag(){return pE||(pE=1,yb.exports=ON()),yb.exports}var j=Ag();const _t=Gx(j),y1=IN({__proto__:null,default:_t},[j]);var xb={exports:{}},wm={},_b={exports:{}},bb={};var mE;function PN(){return mE||(mE=1,(function(i){function e(G,$){var le=G.length;G.push($);e:for(;0<le;){var be=le-1>>>1,Ae=G[be];if(0<a(Ae,$))G[be]=$,G[le]=Ae,le=be;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var $=G[0],le=G.pop();if(le!==$){G[0]=le;e:for(var be=0,Ae=G.length,Y=Ae>>>1;be<Y;){var re=2*(be+1)-1,me=G[re],Te=re+1,Ke=G[Te];if(0>a(me,le))Te<Ae&&0>a(Ke,me)?(G[be]=Ke,G[Te]=le,be=Te):(G[be]=me,G[re]=le,be=re);else if(Te<Ae&&0>a(Ke,le))G[be]=Ke,G[Te]=le,be=Te;else break e}}return $}function a(G,$){var le=G.sortIndex-$.sortIndex;return le!==0?le:G.id-$.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();i.unstable_now=function(){return u.now()-d}}var h=[],p=[],y=1,v=null,x=3,S=!1,E=!1,C=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function L(G){for(var $=t(p);$!==null;){if($.callback===null)n(p);else if($.startTime<=G)n(p),$.sortIndex=$.expirationTime,e(h,$);else break;$=t(p)}}function z(G){if(C=!1,L(G),!E)if(t(h)!==null)E=!0,P||(P=!0,te());else{var $=t(p);$!==null&&se(z,$.startTime-G)}}var P=!1,V=-1,N=5,O=-1;function K(){return T?!0:!(i.unstable_now()-O<N)}function H(){if(T=!1,P){var G=i.unstable_now();O=G;var $=!0;try{e:{E=!1,C&&(C=!1,R(V),V=-1),S=!0;var le=x;try{t:{for(L(G),v=t(h);v!==null&&!(v.expirationTime>G&&K());){var be=v.callback;if(typeof be=="function"){v.callback=null,x=v.priorityLevel;var Ae=be(v.expirationTime<=G);if(G=i.unstable_now(),typeof Ae=="function"){v.callback=Ae,L(G),$=!0;break t}v===t(h)&&n(h),L(G)}else n(h);v=t(h)}if(v!==null)$=!0;else{var Y=t(p);Y!==null&&se(z,Y.startTime-G),$=!1}}break e}finally{v=null,x=le,S=!1}$=void 0}}finally{$?te():P=!1}}}var te;if(typeof I=="function")te=function(){I(H)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ae=ee.port2;ee.port1.onmessage=H,te=function(){ae.postMessage(null)}}else te=function(){M(H,0)};function se(G,$){V=M(function(){G(i.unstable_now())},$)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_next=function(G){switch(x){case 1:case 2:case 3:var $=3;break;default:$=x}var le=x;x=$;try{return G()}finally{x=le}},i.unstable_requestPaint=function(){T=!0},i.unstable_runWithPriority=function(G,$){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var le=x;x=G;try{return $()}finally{x=le}},i.unstable_scheduleCallback=function(G,$,le){var be=i.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?be+le:be):le=be,G){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=le+Ae,G={id:y++,callback:$,priorityLevel:G,startTime:le,expirationTime:Ae,sortIndex:-1},le>be?(G.sortIndex=le,e(p,G),t(h)===null&&G===t(p)&&(C?(R(V),V=-1):C=!0,se(z,le-be))):(G.sortIndex=Ae,e(h,G),E||S||(E=!0,P||(P=!0,te()))),G},i.unstable_shouldYield=K,i.unstable_wrapCallback=function(G){var $=x;return function(){var le=x;x=$;try{return G.apply(this,arguments)}finally{x=le}}}})(bb)),bb}var gE;function GT(){return gE||(gE=1,_b.exports=PN()),_b.exports}var Sb={exports:{}},fa={};var vE;function zN(){if(vE)return fa;vE=1;var i=Ag();function e(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:h,containerInfo:p,implementation:y}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return fa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,fa.createPortal=function(h,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(h,p,null,y)},fa.flushSync=function(h){var p=u.T,y=n.p;try{if(u.T=null,n.p=2,h)return h()}finally{u.T=p,n.p=y,n.d.f()}},fa.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(h,p))},fa.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},fa.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?n.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:S}):y==="script"&&n.d.X(h,{crossOrigin:v,integrity:x,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},fa.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);n.d.M(h,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(h)},fa.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin);n.d.L(h,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},fa.preloadModule=function(h,p){if(typeof h=="string")if(p){var y=d(p.as,p.crossOrigin);n.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(h)},fa.requestFormReset=function(h){n.d.r(h)},fa.unstable_batchedUpdates=function(h,p){return h(p)},fa.useFormState=function(h,p,y){return u.H.useFormState(h,p,y)},fa.useFormStatus=function(){return u.H.useHostTransitionStatus()},fa.version="19.2.3",fa}var yE;function WT(){if(yE)return Sb.exports;yE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Sb.exports=zN(),Sb.exports}var xE;function FN(){if(xE)return wm;xE=1;var i=GT(),e=Ag(),t=WT();function n(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)s+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var s=r,f=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(f=s.return),r=s.return;while(r)}return s.tag===3?f:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function h(r){if(o(r)!==r)throw Error(n(188))}function p(r){var s=r.alternate;if(!s){if(s=o(r),s===null)throw Error(n(188));return s!==r?null:r}for(var f=r,m=s;;){var b=f.return;if(b===null)break;var w=b.alternate;if(w===null){if(m=b.return,m!==null){f=m;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===f)return h(b),r;if(w===m)return h(b),s;w=w.sibling}throw Error(n(188))}if(f.return!==m.return)f=b,m=w;else{for(var U=!1,X=b.child;X;){if(X===f){U=!0,f=b,m=w;break}if(X===m){U=!0,m=b,f=w;break}X=X.sibling}if(!U){for(X=w.child;X;){if(X===f){U=!0,f=w,m=b;break}if(X===m){U=!0,m=w,f=b;break}X=X.sibling}if(!U)throw Error(n(189))}}if(f.alternate!==m)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?r:s}function y(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=y(r),s!==null)return s;r=r.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),I=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function te(r){return r===null||typeof r!="object"?null:(r=H&&r[H]||r["@@iterator"],typeof r=="function"?r:null)}var ee=Symbol.for("react.client.reference");function ae(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ee?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case M:return"Profiler";case T:return"StrictMode";case z:return"Suspense";case P:return"SuspenseList";case O:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case E:return"Portal";case I:return r.displayName||"Context";case R:return(r._context.displayName||"Context")+".Consumer";case L:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case V:return s=r.displayName||null,s!==null?s:ae(r.type)||"Memo";case N:s=r._payload,r=r._init;try{return ae(r(s))}catch{}}return null}var se=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},be=[],Ae=-1;function Y(r){return{current:r}}function re(r){0>Ae||(r.current=be[Ae],be[Ae]=null,Ae--)}function me(r,s){Ae++,be[Ae]=r.current,r.current=s}var Te=Y(null),Ke=Y(null),he=Y(null),De=Y(null);function ze(r,s){switch(me(he,s),me(Ke,r),me(Te,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?UM(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=UM(s),r=OM(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}re(Te),me(Te,r)}function pt(){re(Te),re(Ke),re(he)}function It(r){r.memoizedState!==null&&me(De,r);var s=Te.current,f=OM(s,r.type);s!==f&&(me(Ke,r),me(Te,f))}function zt(r){Ke.current===r&&(re(Te),re(Ke)),De.current===r&&(re(De),_m._currentValue=le)}var Jt,jt;function He(r){if(Jt===void 0)try{throw Error()}catch(f){var s=f.stack.trim().match(/\n( *(at )?)/);Jt=s&&s[1]||"",jt=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jt+r+jt}var nt=!1;function Xe(r,s){if(!r||nt)return"";nt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(s){var $e=function(){throw Error()};if(Object.defineProperty($e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($e,[])}catch(ke){var Le=ke}Reflect.construct(r,[],$e)}else{try{$e.call()}catch(ke){Le=ke}r.call($e.prototype)}}else{try{throw Error()}catch(ke){Le=ke}($e=r())&&typeof $e.catch=="function"&&$e.catch(function(){})}}catch(ke){if(ke&&Le&&typeof ke.stack=="string")return[ke.stack,Le.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),U=w[0],X=w[1];if(U&&X){var ue=U.split(`
`),Ne=X.split(`
`);for(b=m=0;m<ue.length&&!ue[m].includes("DetermineComponentFrameRoot");)m++;for(;b<Ne.length&&!Ne[b].includes("DetermineComponentFrameRoot");)b++;if(m===ue.length||b===Ne.length)for(m=ue.length-1,b=Ne.length-1;1<=m&&0<=b&&ue[m]!==Ne[b];)b--;for(;1<=m&&0<=b;m--,b--)if(ue[m]!==Ne[b]){if(m!==1||b!==1)do if(m--,b--,0>b||ue[m]!==Ne[b]){var We=`
`+ue[m].replace(" at new "," at ");return r.displayName&&We.includes("<anonymous>")&&(We=We.replace("<anonymous>",r.displayName)),We}while(1<=m&&0<=b);break}}}finally{nt=!1,Error.prepareStackTrace=f}return(f=r?r.displayName||r.name:"")?He(f):""}function mt(r,s){switch(r.tag){case 26:case 27:case 5:return He(r.type);case 16:return He("Lazy");case 13:return r.child!==s&&s!==null?He("Suspense Fallback"):He("Suspense");case 19:return He("SuspenseList");case 0:case 15:return Xe(r.type,!1);case 11:return Xe(r.type.render,!1);case 1:return Xe(r.type,!0);case 31:return He("Activity");default:return""}}function ne(r){try{var s="",f=null;do s+=mt(r,f),f=r,r=r.return;while(r);return s}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Lt=Object.prototype.hasOwnProperty,wt=i.unstable_scheduleCallback,kt=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Z=i.unstable_requestPaint,F=i.unstable_now,ye=i.unstable_getCurrentPriorityLevel,Ue=i.unstable_ImmediatePriority,je=i.unstable_UserBlockingPriority,Oe=i.unstable_NormalPriority,Mt=i.unstable_LowPriority,ct=i.unstable_IdlePriority,Ft=i.log,Bt=i.unstable_setDisableYieldValue,Qe=null,qe=null;function Tt(r){if(typeof Ft=="function"&&Bt(r),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Qe,r)}catch{}}var ie=Math.clz32?Math.clz32:oe,we=Math.log,tt=Math.LN2;function oe(r){return r>>>=0,r===0?32:31-(we(r)/tt|0)|0}var Me=256,et=262144,St=4194304;function rt(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function _e(r,s,f){var m=r.pendingLanes;if(m===0)return 0;var b=0,w=r.suspendedLanes,U=r.pingedLanes;r=r.warmLanes;var X=m&134217727;return X!==0?(m=X&~w,m!==0?b=rt(m):(U&=X,U!==0?b=rt(U):f||(f=X&~r,f!==0&&(b=rt(f))))):(X=m&~w,X!==0?b=rt(X):U!==0?b=rt(U):f||(f=m&~r,f!==0&&(b=rt(f)))),b===0?0:s!==0&&s!==b&&(s&w)===0&&(w=b&-b,f=s&-s,w>=f||w===32&&(f&4194048)!==0)?s:b}function ft(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Nt(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kt(){var r=St;return St<<=1,(St&62914560)===0&&(St=4194304),r}function cn(r){for(var s=[],f=0;31>f;f++)s.push(r);return s}function gn(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function kn(r,s,f,m,b,w){var U=r.pendingLanes;r.pendingLanes=f,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=f,r.entangledLanes&=f,r.errorRecoveryDisabledLanes&=f,r.shellSuspendCounter=0;var X=r.entanglements,ue=r.expirationTimes,Ne=r.hiddenUpdates;for(f=U&~f;0<f;){var We=31-ie(f),$e=1<<We;X[We]=0,ue[We]=-1;var Le=Ne[We];if(Le!==null)for(Ne[We]=null,We=0;We<Le.length;We++){var ke=Le[We];ke!==null&&(ke.lane&=-536870913)}f&=~$e}m!==0&&Dr(r,m,0),w!==0&&b===0&&r.tag!==0&&(r.suspendedLanes|=w&~(U&~s))}function Dr(r,s,f){r.pendingLanes|=s,r.suspendedLanes&=~s;var m=31-ie(s);r.entangledLanes|=s,r.entanglements[m]=r.entanglements[m]|1073741824|f&261930}function Si(r,s){var f=r.entangledLanes|=s;for(r=r.entanglements;f;){var m=31-ie(f),b=1<<m;b&s|r[m]&s&&(r[m]|=s),f&=~b}}function Li(r,s){var f=s&-s;return f=(f&42)!==0?1:ea(f),(f&(r.suspendedLanes|s))!==0?0:f}function ea(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Mi(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ar(){var r=$.p;return r!==0?r:(r=window.event,r===void 0?32:rE(r.type))}function on(r,s){var f=$.p;try{return $.p=r,s()}finally{$.p=f}}var Vr=Math.random().toString(36).slice(2),pi="__reactFiber$"+Vr,B="__reactProps$"+Vr,q="__reactContainer$"+Vr,ce="__reactEvents$"+Vr,Ce="__reactListeners$"+Vr,Be="__reactHandles$"+Vr,Ve="__reactResources$"+Vr,dt="__reactMarker$"+Vr;function st(r){delete r[pi],delete r[B],delete r[ce],delete r[Ce],delete r[Be]}function yt(r){var s=r[pi];if(s)return s;for(var f=r.parentNode;f;){if(s=f[q]||f[pi]){if(f=s.alternate,s.child!==null||f!==null&&f.child!==null)for(r=HM(r);r!==null;){if(f=r[pi])return f;r=HM(r)}return s}r=f,f=r.parentNode}return null}function vt(r){if(r=r[pi]||r[q]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function bt(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(n(33))}function k(r){var s=r[Ve];return s||(s=r[Ve]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function fe(r){r[dt]=!0}var ge=new Set,pe={};function ve(r,s){Ge(r,s),Ge(r+"Capture",s)}function Ge(r,s){for(pe[r]=s,r=0;r<s.length;r++)ge.add(s[r])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},lt={};function Ct(r){return Lt.call(lt,r)?!0:Lt.call(at,r)?!1:it.test(r)?lt[r]=!0:(at[r]=!0,!1)}function Dt(r,s,f){if(Ct(s))if(f===null)r.removeAttribute(s);else{switch(typeof f){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var m=s.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+f)}}function $t(r,s,f){if(f===null)r.removeAttribute(s);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+f)}}function gt(r,s,f,m){if(m===null)r.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(f);return}r.setAttributeNS(s,f,""+m)}}function qt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function On(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function qn(r,s,f){var m=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,w=m.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return b.call(this)},set:function(U){f=""+U,w.call(this,U)}}),Object.defineProperty(r,s,{enumerable:m.enumerable}),{getValue:function(){return f},setValue:function(U){f=""+U},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function un(r){if(!r._valueTracker){var s=On(r)?"checked":"value";r._valueTracker=qn(r,s,""+r[s])}}function Xt(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var f=s.getValue(),m="";return r&&(m=On(r)?r.checked?"true":"false":r.value),r=m,r!==f?(s.setValue(r),!0):!1}function ut(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var pn=/[\n"\\]/g;function At(r){return r.replace(pn,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Kn(r,s,f,m,b,w,U,X){r.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?r.type=U:r.removeAttribute("type"),s!=null?U==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+qt(s)):r.value!==""+qt(s)&&(r.value=""+qt(s)):U!=="submit"&&U!=="reset"||r.removeAttribute("value"),s!=null?Wn(r,U,qt(s)):f!=null?Wn(r,U,qt(f)):m!=null&&r.removeAttribute("value"),b==null&&w!=null&&(r.defaultChecked=!!w),b!=null&&(r.checked=b&&typeof b!="function"&&typeof b!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?r.name=""+qt(X):r.removeAttribute("name")}function Ei(r,s,f,m,b,w,U,X){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),s!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||s!=null)){un(r);return}f=f!=null?""+qt(f):"",s=s!=null?""+qt(s):f,X||s===r.value||(r.value=s),r.defaultValue=s}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,r.checked=X?r.checked:!!m,r.defaultChecked=!!m,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(r.name=U),un(r)}function Wn(r,s,f){s==="number"&&ut(r.ownerDocument)===r||r.defaultValue===""+f||(r.defaultValue=""+f)}function mi(r,s,f,m){if(r=r.options,s){s={};for(var b=0;b<f.length;b++)s["$"+f[b]]=!0;for(f=0;f<r.length;f++)b=s.hasOwnProperty("$"+r[f].value),r[f].selected!==b&&(r[f].selected=b),b&&m&&(r[f].defaultSelected=!0)}else{for(f=""+qt(f),s=null,b=0;b<r.length;b++){if(r[b].value===f){r[b].selected=!0,m&&(r[b].defaultSelected=!0);return}s!==null||r[b].disabled||(s=r[b])}s!==null&&(s.selected=!0)}}function Yn(r,s,f){if(s!=null&&(s=""+qt(s),s!==r.value&&(r.value=s),f==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=f!=null?""+qt(f):""}function Ui(r,s,f,m){if(s==null){if(m!=null){if(f!=null)throw Error(n(92));if(se(m)){if(1<m.length)throw Error(n(93));m=m[0]}f=m}f==null&&(f=""),s=f}f=qt(s),r.defaultValue=f,m=r.textContent,m===f&&m!==""&&m!==null&&(r.value=m),un(r)}function Ir(r,s){if(s){var f=r.firstChild;if(f&&f===r.lastChild&&f.nodeType===3){f.nodeValue=s;return}}r.textContent=s}var Hi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function za(r,s,f){var m=s.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":m?r.setProperty(s,f):typeof f!="number"||f===0||Hi.has(s)?s==="float"?r.cssFloat=f:r[s]=(""+f).trim():r[s]=f+"px"}function xs(r,s,f){if(s!=null&&typeof s!="object")throw Error(n(62));if(r=r.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||s!=null&&s.hasOwnProperty(m)||(m.indexOf("--")===0?r.setProperty(m,""):m==="float"?r.cssFloat="":r[m]="");for(var b in s)m=s[b],s.hasOwnProperty(b)&&f[b]!==m&&za(r,b,m)}else for(var w in s)s.hasOwnProperty(w)&&za(r,w,s[w])}function ml(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ep=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mu(r){return ep.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ks(){}var Vf=null;function Hf(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var gl=null,Ao=null;function tp(r){var s=vt(r);if(s&&(r=s.stateNode)){var f=r[B]||null;e:switch(r=s.stateNode,s.type){case"input":if(Kn(r,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),s=f.name,f.type==="radio"&&s!=null){for(f=r;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+At(""+s)+'"][type="radio"]'),s=0;s<f.length;s++){var m=f[s];if(m!==r&&m.form===r.form){var b=m[B]||null;if(!b)throw Error(n(90));Kn(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(s=0;s<f.length;s++)m=f[s],m.form===r.form&&Xt(m)}break e;case"textarea":Yn(r,f.value,f.defaultValue);break e;case"select":s=f.value,s!=null&&mi(r,!!f.multiple,s,!1)}}}var Gf=!1;function np(r,s,f){if(Gf)return r(s,f);Gf=!0;try{var m=r(s);return m}finally{if(Gf=!1,(gl!==null||Ao!==null)&&(us(),gl&&(s=gl,r=Ao,Ao=gl=null,tp(s),r)))for(s=0;s<r.length;s++)tp(r[s])}}function ic(r,s){var f=r.stateNode;if(f===null)return null;var m=f[B]||null;if(m===null)return null;f=m[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(f&&typeof f!="function")throw Error(n(231,s,typeof f));return f}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ip=!1;if(_s)try{var rc={};Object.defineProperty(rc,"passive",{get:function(){ip=!0}}),window.addEventListener("test",rc,rc),window.removeEventListener("test",rc,rc)}catch{ip=!1}var xa=null,Wf=null,vl=null;function gu(){if(vl)return vl;var r,s=Wf,f=s.length,m,b="value"in xa?xa.value:xa.textContent,w=b.length;for(r=0;r<f&&s[r]===b[r];r++);var U=f-r;for(m=1;m<=U&&s[f-m]===b[w-m];m++);return vl=b.slice(r,1<m?1-m:void 0)}function vu(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ac(){return!0}function qg(){return!1}function Hr(r){function s(f,m,b,w,U){this._reactName=f,this._targetInst=b,this.type=m,this.nativeEvent=w,this.target=U,this.currentTarget=null;for(var X in r)r.hasOwnProperty(X)&&(f=r[X],this[X]=f?f(w):w[X]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ac:qg,this.isPropagationStopped=qg,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=ac)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=ac)},persist:function(){},isPersistent:ac}),s}var Co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yu=Hr(Co),sc=v({},Co,{view:0,detail:0}),Yg=Hr(sc),xu,Xf,oc,lc=v({},sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zf,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==oc&&(oc&&r.type==="mousemove"?(xu=r.screenX-oc.screenX,Xf=r.screenY-oc.screenY):Xf=xu=0,oc=r),xu)},movementY:function(r){return"movementY"in r?r.movementY:Xf}}),rp=Hr(lc),Zg=v({},lc,{dataTransfer:0}),Kg=Hr(Zg),ap=v({},sc,{relatedTarget:0}),jf=Hr(ap),$g=v({},Co,{animationName:0,elapsedTime:0,pseudoElement:0}),z_=Hr($g),F_=v({},Co,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Qg=Hr(F_),_u=v({},Co,{data:0}),qf=Hr(_u),Yf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sp(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=e0[r])?!!s[r]:!1}function Zf(){return sp}var t0=v({},sc,{key:function(r){if(r.key){var s=Yf[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=vu(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Jg[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zf,charCode:function(r){return r.type==="keypress"?vu(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?vu(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),yl=Hr(t0),Kf=v({},lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),op=Hr(Kf),lp=v({},sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zf}),n0=Hr(lp),i0=v({},Co,{propertyName:0,elapsedTime:0,pseudoElement:0}),B_=Hr(i0),Sr=v({},lc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),r0=Hr(Sr),a0=v({},Co,{newState:0,oldState:0}),s0=Hr(a0),o0=[9,13,27,32],xl=_s&&"CompositionEvent"in window,cc=null;_s&&"documentMode"in document&&(cc=document.documentMode);var $f=_s&&"TextEvent"in window&&!cc,cp=_s&&(!xl||cc&&8<cc&&11>=cc),l0=" ",bu=!1;function Qf(r,s){switch(r){case"keyup":return o0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function up(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var _l=!1;function c0(r,s){switch(r){case"compositionend":return up(s);case"keypress":return s.which!==32?null:(bu=!0,l0);case"textInput":return r=s.data,r===l0&&bu?null:r;default:return null}}function fp(r,s){if(_l)return r==="compositionend"||!xl&&Qf(r,s)?(r=gu(),vl=Wf=xa=null,_l=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return cp&&s.locale!=="ko"?null:s.data;default:return null}}var dp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!dp[r.type]:s==="textarea"}function Jf(r,s,f,m){gl?Ao?Ao.push(m):Ao=[m]:gl=m,s=pv(s,"onChange"),0<s.length&&(f=new yu("onChange","change",null,f,m),r.push({event:f,listeners:s}))}var Ro=null,bl=null;function u0(r){CM(r,0)}function uc(r){var s=bt(r);if(Xt(s))return r}function pp(r,s){if(r==="change")return s}var bs=!1;if(_s){var Su;if(_s){var mp="oninput"in document;if(!mp){var gp=document.createElement("div");gp.setAttribute("oninput","return;"),mp=typeof gp.oninput=="function"}Su=mp}else Su=!1;bs=Su&&(!document.documentMode||9<document.documentMode)}function Fa(){Ro&&(Ro.detachEvent("onpropertychange",Mu),bl=Ro=null)}function Mu(r){if(r.propertyName==="value"&&uc(bl)){var s=[];Jf(s,bl,r,Hf(r)),np(u0,s)}}function f0(r,s,f){r==="focusin"?(Fa(),Ro=s,bl=f,Ro.attachEvent("onpropertychange",Mu)):r==="focusout"&&Fa()}function vp(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return uc(bl)}function d0(r,s){if(r==="click")return uc(s)}function h0(r,s){if(r==="input"||r==="change")return uc(s)}function yp(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Gr=typeof Object.is=="function"?Object.is:yp;function fc(r,s){if(Gr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var f=Object.keys(r),m=Object.keys(s);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var b=f[m];if(!Lt.call(s,b)||!Gr(r[b],s[b]))return!1}return!0}function Eu(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function dc(r,s){var f=Eu(r);r=0;for(var m;f;){if(f.nodeType===3){if(m=r+f.textContent.length,r<=s&&m>=s)return{node:f,offset:s-r};r=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Eu(f)}}function oi(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?oi(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function p0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=ut(r.document);s instanceof r.HTMLIFrameElement;){try{var f=typeof s.contentWindow.location.href=="string"}catch{f=!1}if(f)r=s.contentWindow;else break;s=ut(r.document)}return s}function xp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var m0=_s&&"documentMode"in document&&11>=document.documentMode,Ss=null,Ms=null,hc=null,ed=!1;function pc(r,s,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;ed||Ss==null||Ss!==ut(m)||(m=Ss,"selectionStart"in m&&xp(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),hc&&fc(hc,m)||(hc=m,m=pv(Ms,"onSelect"),0<m.length&&(s=new yu("onSelect","select",null,s,f),r.push({event:s,listeners:m}),s.target=Ss)))}function Lr(r,s){var f={};return f[r.toLowerCase()]=s.toLowerCase(),f["Webkit"+r]="webkit"+s,f["Moz"+r]="moz"+s,f}var Sl={animationend:Lr("Animation","AnimationEnd"),animationiteration:Lr("Animation","AnimationIteration"),animationstart:Lr("Animation","AnimationStart"),transitionrun:Lr("Transition","TransitionRun"),transitionstart:Lr("Transition","TransitionStart"),transitioncancel:Lr("Transition","TransitionCancel"),transitionend:Lr("Transition","TransitionEnd")},wu={},_p={};_s&&(_p=document.createElement("div").style,"AnimationEvent"in window||(delete Sl.animationend.animation,delete Sl.animationiteration.animation,delete Sl.animationstart.animation),"TransitionEvent"in window||delete Sl.transitionend.transition);function $s(r){if(wu[r])return wu[r];if(!Sl[r])return r;var s=Sl[r],f;for(f in s)if(s.hasOwnProperty(f)&&f in _p)return wu[r]=s[f];return r}var td=$s("animationend"),Tu=$s("animationiteration"),bp=$s("animationstart"),g0=$s("transitionrun"),k_=$s("transitionstart"),v0=$s("transitioncancel"),Sp=$s("transitionend"),Ba=new Map,Au="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Au.push("scrollEnd");function ka(r,s){Ba.set(r,s),ve(s,[r])}var Cu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Va=[],Qs=0,mr=0;function Ru(){for(var r=Qs,s=mr=Qs=0;s<r;){var f=Va[s];Va[s++]=null;var m=Va[s];Va[s++]=null;var b=Va[s];Va[s++]=null;var w=Va[s];if(Va[s++]=null,m!==null&&b!==null){var U=m.pending;U===null?b.next=b:(b.next=U.next,U.next=b),m.pending=b}w!==0&&No(f,b,w)}}function gr(r,s,f,m){Va[Qs++]=r,Va[Qs++]=s,Va[Qs++]=f,Va[Qs++]=m,mr|=m,r.lanes|=m,r=r.alternate,r!==null&&(r.lanes|=m)}function nd(r,s,f,m){return gr(r,s,f,m),Ha(r)}function Wr(r,s){return gr(r,null,null,s),Ha(r)}function No(r,s,f){r.lanes|=f;var m=r.alternate;m!==null&&(m.lanes|=f);for(var b=!1,w=r.return;w!==null;)w.childLanes|=f,m=w.alternate,m!==null&&(m.childLanes|=f),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(b=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,b&&s!==null&&(b=31-ie(f),r=w.hiddenUpdates,m=r[b],m===null?r[b]=[s]:m.push(s),s.lane=f|536870912),w):null}function Ha(r){if(50<Zo)throw Zo=0,Vl=null,Error(n(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Do={};function Mp(r,s,f,m){this.tag=r,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(r,s,f,m){return new Mp(r,s,f,m)}function id(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ta(r,s){var f=r.alternate;return f===null?(f=wi(r.tag,s,r.key,r.mode),f.elementType=r.elementType,f.type=r.type,f.stateNode=r.stateNode,f.alternate=r,r.alternate=f):(f.pendingProps=s,f.type=r.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=r.flags&65011712,f.childLanes=r.childLanes,f.lanes=r.lanes,f.child=r.child,f.memoizedProps=r.memoizedProps,f.memoizedState=r.memoizedState,f.updateQueue=r.updateQueue,s=r.dependencies,f.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},f.sibling=r.sibling,f.index=r.index,f.ref=r.ref,f.refCleanup=r.refCleanup,f}function mc(r,s){r.flags&=65011714;var f=r.alternate;return f===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=f.childLanes,r.lanes=f.lanes,r.child=f.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=f.memoizedProps,r.memoizedState=f.memoizedState,r.updateQueue=f.updateQueue,r.type=f.type,s=f.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Es(r,s,f,m,b,w){var U=0;if(m=r,typeof r=="function")id(r)&&(U=1);else if(typeof r=="string")U=_N(r,f,Te.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case O:return r=wi(31,f,s,b),r.elementType=O,r.lanes=w,r;case C:return Io(f.children,b,w,s);case T:U=8,b|=24;break;case M:return r=wi(12,f,s,b|2),r.elementType=M,r.lanes=w,r;case z:return r=wi(13,f,s,b),r.elementType=z,r.lanes=w,r;case P:return r=wi(19,f,s,b),r.elementType=P,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case I:U=10;break e;case R:U=9;break e;case L:U=11;break e;case V:U=14;break e;case N:U=16,m=null;break e}U=29,f=Error(n(130,r===null?"null":typeof r,"")),m=null}return s=wi(U,f,s,b),s.elementType=r,s.type=m,s.lanes=w,s}function Io(r,s,f,m){return r=wi(7,r,m,s),r.lanes=f,r}function rd(r,s,f){return r=wi(6,r,null,s),r.lanes=f,r}function gc(r){var s=wi(18,null,null,0);return s.stateNode=r,s}function ad(r,s,f){return s=wi(4,r.children!==null?r.children:[],r.key,s),s.lanes=f,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Nu=new WeakMap;function _a(r,s){if(typeof r=="object"&&r!==null){var f=Nu.get(r);return f!==void 0?f:(s={value:r,source:s,stack:ne(s)},Nu.set(r,s),s)}return{value:r,source:s,stack:ne(s)}}var Lo=[],Uo=0,vc=null,yc=0,na=[],yi=0,Js=null,Ti=1,ss="";function ws(r,s){Lo[Uo++]=yc,Lo[Uo++]=vc,vc=r,yc=s}function y0(r,s,f){na[yi++]=Ti,na[yi++]=ss,na[yi++]=Js,Js=r;var m=Ti;r=ss;var b=32-ie(m)-1;m&=~(1<<b),f+=1;var w=32-ie(s)+b;if(30<w){var U=b-b%5;w=(m&(1<<U)-1).toString(32),m>>=U,b-=U,Ti=1<<32-ie(s)+b|f<<b|m,ss=w+r}else Ti=1<<w|f<<b|m,ss=r}function Ts(r){r.return!==null&&(ws(r,1),y0(r,1,0))}function sd(r){for(;r===vc;)vc=Lo[--Uo],Lo[Uo]=null,yc=Lo[--Uo],Lo[Uo]=null;for(;r===Js;)Js=na[--yi],na[yi]=null,ss=na[--yi],na[yi]=null,Ti=na[--yi],na[yi]=null}function od(r,s){na[yi++]=Ti,na[yi++]=ss,na[yi++]=Js,Ti=s.id,ss=s.overflow,Js=r}var Oi=null,li=null,Pn=!1,eo=null,ba=!1,xc=Error(n(519));function As(r){var s=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cs(_a(s,r)),xc}function x0(r){var s=r.stateNode,f=r.type,m=r.memoizedProps;switch(s[pi]=r,s[B]=m,f){case"dialog":Bn("cancel",s),Bn("close",s);break;case"iframe":case"object":case"embed":Bn("load",s);break;case"video":case"audio":for(f=0;f<ts.length;f++)Bn(ts[f],s);break;case"source":Bn("error",s);break;case"img":case"image":case"link":Bn("error",s),Bn("load",s);break;case"details":Bn("toggle",s);break;case"input":Bn("invalid",s),Ei(s,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Bn("invalid",s);break;case"textarea":Bn("invalid",s),Ui(s,m.value,m.defaultValue,m.children)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||s.textContent===""+f||m.suppressHydrationWarning===!0||IM(s.textContent,f)?(m.popover!=null&&(Bn("beforetoggle",s),Bn("toggle",s)),m.onScroll!=null&&Bn("scroll",s),m.onScrollEnd!=null&&Bn("scrollend",s),m.onClick!=null&&(s.onclick=Ks),s=!0):s=!1,s||As(r,!0)}function _0(r){for(Oi=r.return;Oi;)switch(Oi.tag){case 5:case 31:case 13:ba=!1;return;case 27:case 3:ba=!0;return;default:Oi=Oi.return}}function _c(r){if(r!==Oi)return!1;if(!Pn)return _0(r),Pn=!0,!1;var s=r.tag,f;if((f=s!==3&&s!==27)&&((f=s===5)&&(f=r.type,f=!(f!=="form"&&f!=="button")||nb(r.type,r.memoizedProps)),f=!f),f&&li&&As(r),_0(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));li=VM(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));li=VM(r)}else s===27?(s=li,kc(r.type)?(r=ob,ob=null,li=r):li=s):li=Oi?Hs(r.stateNode.nextSibling):null;return!0}function Oo(){li=Oi=null,Pn=!1}function ld(){var r=eo;return r!==null&&(zi===null?zi=r:zi.push.apply(zi,r),eo=null),r}function Cs(r){eo===null?eo=[r]:eo.push(r)}var bc=Y(null),Po=null,Rs=null;function to(r,s,f){me(bc,s._currentValue),s._currentValue=f}function Ns(r){r._currentValue=bc.current,re(bc)}function cd(r,s,f){for(;r!==null;){var m=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,m!==null&&(m.childLanes|=s)):m!==null&&(m.childLanes&s)!==s&&(m.childLanes|=s),r===f)break;r=r.return}}function ud(r,s,f,m){var b=r.child;for(b!==null&&(b.return=r);b!==null;){var w=b.dependencies;if(w!==null){var U=b.child;w=w.firstContext;e:for(;w!==null;){var X=w;w=b;for(var ue=0;ue<s.length;ue++)if(X.context===s[ue]){w.lanes|=f,X=w.alternate,X!==null&&(X.lanes|=f),cd(w.return,f,r),m||(U=null);break e}w=X.next}}else if(b.tag===18){if(U=b.return,U===null)throw Error(n(341));U.lanes|=f,w=U.alternate,w!==null&&(w.lanes|=f),cd(U,f,r),U=null}else U=b.child;if(U!==null)U.return=b;else for(U=b;U!==null;){if(U===r){U=null;break}if(b=U.sibling,b!==null){b.return=U.return,U=b;break}U=U.return}b=U}}function Ds(r,s,f,m){r=null;for(var b=s,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var U=b.alternate;if(U===null)throw Error(n(387));if(U=U.memoizedProps,U!==null){var X=b.type;Gr(b.pendingProps.value,U.value)||(r!==null?r.push(X):r=[X])}}else if(b===De.current){if(U=b.alternate,U===null)throw Error(n(387));U.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(r!==null?r.push(_m):r=[_m])}b=b.return}r!==null&&ud(s,r,f,m),s.flags|=262144}function Du(r){for(r=r.firstContext;r!==null;){if(!Gr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function zo(r){Po=r,Rs=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function ln(r){return b0(Po,r)}function Sc(r,s){return Po===null&&zo(r),b0(r,s)}function b0(r,s){var f=s._currentValue;if(s={context:s,memoizedValue:f,next:null},Rs===null){if(r===null)throw Error(n(308));Rs=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Rs=Rs.next=s;return f}var S0=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(f,m){r.push(m)}};this.abort=function(){s.aborted=!0,r.forEach(function(f){return f()})}},V_=i.unstable_scheduleCallback,H_=i.unstable_NormalPriority,$i={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ep(){return{controller:new S0,data:new Map,refCount:0}}function Ml(r){r.refCount--,r.refCount===0&&V_(H_,function(){r.controller.abort()})}var Sa=null,fd=0,no=0,Ga=null;function wp(r,s){if(Sa===null){var f=Sa=[];fd=0,no=Pe(),Ga={status:"pending",value:void 0,then:function(m){f.push(m)}}}return fd++,s.then(Tp,Tp),s}function Tp(){if(--fd===0&&Sa!==null){Ga!==null&&(Ga.status="fulfilled");var r=Sa;Sa=null,no=0,Ga=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function Ap(r,s){var f=[],m={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return r.then(function(){m.status="fulfilled",m.value=s;for(var b=0;b<f.length;b++)(0,f[b])(s)},function(b){for(m.status="rejected",m.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),m}var M0=G.S;G.S=function(r,s){pm=F(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&wp(r,s),M0!==null&&M0(r,s)};var Fo=Y(null);function dd(){var r=Fo.current;return r!==null?r:dn.pooledCache}function Iu(r,s){s===null?me(Fo,Fo.current):me(Fo,s.pool)}function Cp(){var r=dd();return r===null?null:{parent:$i._currentValue,pool:r}}var El=Error(n(460)),Lu=Error(n(474)),Mn=Error(n(542)),hd={then:function(){}};function ia(r){return r=r.status,r==="fulfilled"||r==="rejected"}function pd(r,s,f){switch(f=r[f],f===void 0?r.push(s):f!==s&&(s.then(Ks,Ks),s=f),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Al(r),r;default:if(typeof s.status=="string")s.then(Ks,Ks);else{if(r=dn,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=s,r.status="pending",r.then(function(m){if(s.status==="pending"){var b=s;b.status="fulfilled",b.value=m}},function(m){if(s.status==="pending"){var b=s;b.status="rejected",b.reason=m}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Al(r),r}throw Is=s,El}}function wl(r){try{var s=r._init;return s(r._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Is=f,El):f}}var Is=null;function Tl(){if(Is===null)throw Error(n(459));var r=Is;return Is=null,r}function Al(r){if(r===El||r===Mn)throw Error(n(483))}var Cl=null,Rl=0;function Uu(r){var s=Rl;return Rl+=1,Cl===null&&(Cl=[]),pd(Cl,r,s)}function Wa(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Mc(r,s){throw s.$$typeof===x?Error(n(525)):(r=Object.prototype.toString.call(s),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function md(r){function s(Se,xe){if(r){var Re=Se.deletions;Re===null?(Se.deletions=[xe],Se.flags|=16):Re.push(xe)}}function f(Se,xe){if(!r)return null;for(;xe!==null;)s(Se,xe),xe=xe.sibling;return null}function m(Se){for(var xe=new Map;Se!==null;)Se.key!==null?xe.set(Se.key,Se):xe.set(Se.index,Se),Se=Se.sibling;return xe}function b(Se,xe){return Se=ta(Se,xe),Se.index=0,Se.sibling=null,Se}function w(Se,xe,Re){return Se.index=Re,r?(Re=Se.alternate,Re!==null?(Re=Re.index,Re<xe?(Se.flags|=67108866,xe):Re):(Se.flags|=67108866,xe)):(Se.flags|=1048576,xe)}function U(Se){return r&&Se.alternate===null&&(Se.flags|=67108866),Se}function X(Se,xe,Re,Ye){return xe===null||xe.tag!==6?(xe=rd(Re,Se.mode,Ye),xe.return=Se,xe):(xe=b(xe,Re),xe.return=Se,xe)}function ue(Se,xe,Re,Ye){var tn=Re.type;return tn===C?We(Se,xe,Re.props.children,Ye,Re.key):xe!==null&&(xe.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===N&&wl(tn)===xe.type)?(xe=b(xe,Re.props),Wa(xe,Re),xe.return=Se,xe):(xe=Es(Re.type,Re.key,Re.props,null,Se.mode,Ye),Wa(xe,Re),xe.return=Se,xe)}function Ne(Se,xe,Re,Ye){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==Re.containerInfo||xe.stateNode.implementation!==Re.implementation?(xe=ad(Re,Se.mode,Ye),xe.return=Se,xe):(xe=b(xe,Re.children||[]),xe.return=Se,xe)}function We(Se,xe,Re,Ye,tn){return xe===null||xe.tag!==7?(xe=Io(Re,Se.mode,Ye,tn),xe.return=Se,xe):(xe=b(xe,Re),xe.return=Se,xe)}function $e(Se,xe,Re){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return xe=rd(""+xe,Se.mode,Re),xe.return=Se,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case S:return Re=Es(xe.type,xe.key,xe.props,null,Se.mode,Re),Wa(Re,xe),Re.return=Se,Re;case E:return xe=ad(xe,Se.mode,Re),xe.return=Se,xe;case N:return xe=wl(xe),$e(Se,xe,Re)}if(se(xe)||te(xe))return xe=Io(xe,Se.mode,Re,null),xe.return=Se,xe;if(typeof xe.then=="function")return $e(Se,Uu(xe),Re);if(xe.$$typeof===I)return $e(Se,Sc(Se,xe),Re);Mc(Se,xe)}return null}function Le(Se,xe,Re,Ye){var tn=xe!==null?xe.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return tn!==null?null:X(Se,xe,""+Re,Ye);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case S:return Re.key===tn?ue(Se,xe,Re,Ye):null;case E:return Re.key===tn?Ne(Se,xe,Re,Ye):null;case N:return Re=wl(Re),Le(Se,xe,Re,Ye)}if(se(Re)||te(Re))return tn!==null?null:We(Se,xe,Re,Ye,null);if(typeof Re.then=="function")return Le(Se,xe,Uu(Re),Ye);if(Re.$$typeof===I)return Le(Se,xe,Sc(Se,Re),Ye);Mc(Se,Re)}return null}function ke(Se,xe,Re,Ye,tn){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Se=Se.get(Re)||null,X(xe,Se,""+Ye,tn);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case S:return Se=Se.get(Ye.key===null?Re:Ye.key)||null,ue(xe,Se,Ye,tn);case E:return Se=Se.get(Ye.key===null?Re:Ye.key)||null,Ne(xe,Se,Ye,tn);case N:return Ye=wl(Ye),ke(Se,xe,Re,Ye,tn)}if(se(Ye)||te(Ye))return Se=Se.get(Re)||null,We(xe,Se,Ye,tn,null);if(typeof Ye.then=="function")return ke(Se,xe,Re,Uu(Ye),tn);if(Ye.$$typeof===I)return ke(Se,xe,Re,Sc(xe,Ye),tn);Mc(xe,Ye)}return null}function Ht(Se,xe,Re,Ye){for(var tn=null,Jn=null,Yt=xe,An=xe=0,Hn=null;Yt!==null&&An<Re.length;An++){Yt.index>An?(Hn=Yt,Yt=null):Hn=Yt.sibling;var ei=Le(Se,Yt,Re[An],Ye);if(ei===null){Yt===null&&(Yt=Hn);break}r&&Yt&&ei.alternate===null&&s(Se,Yt),xe=w(ei,xe,An),Jn===null?tn=ei:Jn.sibling=ei,Jn=ei,Yt=Hn}if(An===Re.length)return f(Se,Yt),Pn&&ws(Se,An),tn;if(Yt===null){for(;An<Re.length;An++)Yt=$e(Se,Re[An],Ye),Yt!==null&&(xe=w(Yt,xe,An),Jn===null?tn=Yt:Jn.sibling=Yt,Jn=Yt);return Pn&&ws(Se,An),tn}for(Yt=m(Yt);An<Re.length;An++)Hn=ke(Yt,Se,An,Re[An],Ye),Hn!==null&&(r&&Hn.alternate!==null&&Yt.delete(Hn.key===null?An:Hn.key),xe=w(Hn,xe,An),Jn===null?tn=Hn:Jn.sibling=Hn,Jn=Hn);return r&&Yt.forEach(function(Xc){return s(Se,Xc)}),Pn&&ws(Se,An),tn}function sn(Se,xe,Re,Ye){if(Re==null)throw Error(n(151));for(var tn=null,Jn=null,Yt=xe,An=xe=0,Hn=null,ei=Re.next();Yt!==null&&!ei.done;An++,ei=Re.next()){Yt.index>An?(Hn=Yt,Yt=null):Hn=Yt.sibling;var Xc=Le(Se,Yt,ei.value,Ye);if(Xc===null){Yt===null&&(Yt=Hn);break}r&&Yt&&Xc.alternate===null&&s(Se,Yt),xe=w(Xc,xe,An),Jn===null?tn=Xc:Jn.sibling=Xc,Jn=Xc,Yt=Hn}if(ei.done)return f(Se,Yt),Pn&&ws(Se,An),tn;if(Yt===null){for(;!ei.done;An++,ei=Re.next())ei=$e(Se,ei.value,Ye),ei!==null&&(xe=w(ei,xe,An),Jn===null?tn=ei:Jn.sibling=ei,Jn=ei);return Pn&&ws(Se,An),tn}for(Yt=m(Yt);!ei.done;An++,ei=Re.next())ei=ke(Yt,Se,An,ei.value,Ye),ei!==null&&(r&&ei.alternate!==null&&Yt.delete(ei.key===null?An:ei.key),xe=w(ei,xe,An),Jn===null?tn=ei:Jn.sibling=ei,Jn=ei);return r&&Yt.forEach(function(DN){return s(Se,DN)}),Pn&&ws(Se,An),tn}function fi(Se,xe,Re,Ye){if(typeof Re=="object"&&Re!==null&&Re.type===C&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case S:e:{for(var tn=Re.key;xe!==null;){if(xe.key===tn){if(tn=Re.type,tn===C){if(xe.tag===7){f(Se,xe.sibling),Ye=b(xe,Re.props.children),Ye.return=Se,Se=Ye;break e}}else if(xe.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===N&&wl(tn)===xe.type){f(Se,xe.sibling),Ye=b(xe,Re.props),Wa(Ye,Re),Ye.return=Se,Se=Ye;break e}f(Se,xe);break}else s(Se,xe);xe=xe.sibling}Re.type===C?(Ye=Io(Re.props.children,Se.mode,Ye,Re.key),Ye.return=Se,Se=Ye):(Ye=Es(Re.type,Re.key,Re.props,null,Se.mode,Ye),Wa(Ye,Re),Ye.return=Se,Se=Ye)}return U(Se);case E:e:{for(tn=Re.key;xe!==null;){if(xe.key===tn)if(xe.tag===4&&xe.stateNode.containerInfo===Re.containerInfo&&xe.stateNode.implementation===Re.implementation){f(Se,xe.sibling),Ye=b(xe,Re.children||[]),Ye.return=Se,Se=Ye;break e}else{f(Se,xe);break}else s(Se,xe);xe=xe.sibling}Ye=ad(Re,Se.mode,Ye),Ye.return=Se,Se=Ye}return U(Se);case N:return Re=wl(Re),fi(Se,xe,Re,Ye)}if(se(Re))return Ht(Se,xe,Re,Ye);if(te(Re)){if(tn=te(Re),typeof tn!="function")throw Error(n(150));return Re=tn.call(Re),sn(Se,xe,Re,Ye)}if(typeof Re.then=="function")return fi(Se,xe,Uu(Re),Ye);if(Re.$$typeof===I)return fi(Se,xe,Sc(Se,Re),Ye);Mc(Se,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint"?(Re=""+Re,xe!==null&&xe.tag===6?(f(Se,xe.sibling),Ye=b(xe,Re),Ye.return=Se,Se=Ye):(f(Se,xe),Ye=rd(Re,Se.mode,Ye),Ye.return=Se,Se=Ye),U(Se)):f(Se,xe)}return function(Se,xe,Re,Ye){try{Rl=0;var tn=fi(Se,xe,Re,Ye);return Cl=null,tn}catch(Yt){if(Yt===El||Yt===Mn)throw Yt;var Jn=wi(29,Yt,null,Se.mode);return Jn.lanes=Ye,Jn.return=Se,Jn}}}var io=md(!0),gd=md(!1),Xr=!1;function Ou(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ro(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Bo(r,s,f){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(Zt&2)!==0){var b=m.pending;return b===null?s.next=s:(s.next=b.next,b.next=s),m.pending=s,s=Ha(r),No(r,null,f),s}return gr(r,m,s,f),Ha(r)}function ko(r,s,f){if(s=s.updateQueue,s!==null&&(s=s.shared,(f&4194048)!==0)){var m=s.lanes;m&=r.pendingLanes,f|=m,s.lanes=f,Si(r,f)}}function en(r,s){var f=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var b=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var U={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?b=w=U:w=w.next=U,f=f.next}while(f!==null);w===null?b=w=s:w=w.next=s}else b=w=s;f={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},r.updateQueue=f;return}r=f.lastBaseUpdate,r===null?f.firstBaseUpdate=s:r.next=s,f.lastBaseUpdate=s}var Np=!1;function Pu(){if(Np){var r=Ga;if(r!==null)throw r}}function Ec(r,s,f,m){Np=!1;var b=r.updateQueue;Xr=!1;var w=b.firstBaseUpdate,U=b.lastBaseUpdate,X=b.shared.pending;if(X!==null){b.shared.pending=null;var ue=X,Ne=ue.next;ue.next=null,U===null?w=Ne:U.next=Ne,U=ue;var We=r.alternate;We!==null&&(We=We.updateQueue,X=We.lastBaseUpdate,X!==U&&(X===null?We.firstBaseUpdate=Ne:X.next=Ne,We.lastBaseUpdate=ue))}if(w!==null){var $e=b.baseState;U=0,We=Ne=ue=null,X=w;do{var Le=X.lane&-536870913,ke=Le!==X.lane;if(ke?(bn&Le)===Le:(m&Le)===Le){Le!==0&&Le===no&&(Np=!0),We!==null&&(We=We.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var Ht=r,sn=X;Le=s;var fi=f;switch(sn.tag){case 1:if(Ht=sn.payload,typeof Ht=="function"){$e=Ht.call(fi,$e,Le);break e}$e=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=sn.payload,Le=typeof Ht=="function"?Ht.call(fi,$e,Le):Ht,Le==null)break e;$e=v({},$e,Le);break e;case 2:Xr=!0}}Le=X.callback,Le!==null&&(r.flags|=64,ke&&(r.flags|=8192),ke=b.callbacks,ke===null?b.callbacks=[Le]:ke.push(Le))}else ke={lane:Le,tag:X.tag,payload:X.payload,callback:X.callback,next:null},We===null?(Ne=We=ke,ue=$e):We=We.next=ke,U|=Le;if(X=X.next,X===null){if(X=b.shared.pending,X===null)break;ke=X,X=ke.next,ke.next=null,b.lastBaseUpdate=ke,b.shared.pending=null}}while(!0);We===null&&(ue=$e),b.baseState=ue,b.firstBaseUpdate=Ne,b.lastBaseUpdate=We,w===null&&(b.shared.lanes=0),Bs|=U,r.lanes=U,r.memoizedState=$e}}function wc(r,s){if(typeof r!="function")throw Error(n(191,r));r.call(s)}function E0(r,s){var f=r.callbacks;if(f!==null)for(r.callbacks=null,r=0;r<f.length;r++)wc(f[r],s)}var Tc=Y(null),vd=Y(0);function w0(r,s){r=Ta,me(vd,r),me(Tc,s),Ta=r|s.baseLanes}function Dp(){me(vd,Ta),me(Tc,Tc.current)}function zu(){Ta=vd.current,re(Tc),re(vd)}var ra=Y(null),jr=null;function ao(r){var s=r.alternate;me(zn,zn.current&1),me(ra,r),jr===null&&(s===null||Tc.current!==null||s.memoizedState!==null)&&(jr=r)}function Ip(r){me(zn,zn.current),me(ra,r),jr===null&&(jr=r)}function T0(r){r.tag===22?(me(zn,zn.current),me(ra,r),jr===null&&(jr=r)):aa()}function aa(){me(zn,zn.current),me(ra,ra.current)}function Gi(r){re(ra),jr===r&&(jr=null),re(zn)}var zn=Y(0);function Ma(r){for(var s=r;s!==null;){if(s.tag===13){var f=s.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||ab(f)||sb(f)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var xi=0,vn=null,ri=null,Dn=null,Xa=!1,Ac=!1,Nl=!1,yd=0,Fu=0,Cc=null,Lp=0;function Ai(){throw Error(n(321))}function Up(r,s){if(s===null)return!1;for(var f=0;f<s.length&&f<r.length;f++)if(!Gr(r[f],s[f]))return!1;return!0}function xd(r,s,f,m,b,w){return xi=w,vn=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,G.H=r===null||r.memoizedState===null?rv:em,Nl=!1,w=f(m,b),Nl=!1,Ac&&(w=Dl(s,f,m,b)),A0(r),w}function A0(r){G.H=Rc;var s=ri!==null&&ri.next!==null;if(xi=0,Dn=ri=vn=null,Xa=!1,Fu=0,Cc=null,s)throw Error(n(300));r===null||Qi||(r=r.dependencies,r!==null&&Du(r)&&(Qi=!0))}function Dl(r,s,f,m){vn=r;var b=0;do{if(Ac&&(Cc=null),Fu=0,Ac=!1,25<=b)throw Error(n(301));if(b+=1,Dn=ri=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}G.H=ja,w=s(f,m)}while(Ac);return w}function Il(){var r=G.H,s=r.useState()[0];return s=typeof s.then=="function"?Bu(s):s,r=r.useState()[0],(ri!==null?ri.memoizedState:null)!==r&&(vn.flags|=1024),s}function Op(){var r=yd!==0;return yd=0,r}function Pp(r,s,f){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f}function zp(r){if(Xa){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xa=!1}xi=0,Dn=ri=vn=null,Ac=!1,Fu=yd=0,Cc=null}function sr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?vn.memoizedState=Dn=r:Dn=Dn.next=r,Dn}function Wi(){if(ri===null){var r=vn.alternate;r=r!==null?r.memoizedState:null}else r=ri.next;var s=Dn===null?vn.memoizedState:Dn.next;if(s!==null)Dn=s,ri=r;else{if(r===null)throw vn.alternate===null?Error(n(467)):Error(n(310));ri=r,r={memoizedState:ri.memoizedState,baseState:ri.baseState,baseQueue:ri.baseQueue,queue:ri.queue,next:null},Dn===null?vn.memoizedState=Dn=r:Dn=Dn.next=r}return Dn}function _d(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bu(r){var s=Fu;return Fu+=1,Cc===null&&(Cc=[]),r=pd(Cc,r,s),s=vn,(Dn===null?s.memoizedState:Dn.next)===null&&(s=s.alternate,G.H=s===null||s.memoizedState===null?rv:em),r}function Vo(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Bu(r);if(r.$$typeof===I)return ln(r)}throw Error(n(438,String(r)))}function Fp(r){var s=null,f=vn.updateQueue;if(f!==null&&(s=f.memoCache),s==null){var m=vn.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(s={data:m.data.map(function(b){return b.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),f===null&&(f=_d(),vn.updateQueue=f),f.memoCache=s,f=s.data[s.index],f===void 0)for(f=s.data[s.index]=Array(r),m=0;m<r;m++)f[m]=K;return s.index++,f}function so(r,s){return typeof s=="function"?s(r):s}function bd(r){var s=Wi();return Bp(s,ri,r)}function Bp(r,s,f){var m=r.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=f;var b=r.baseQueue,w=m.pending;if(w!==null){if(b!==null){var U=b.next;b.next=w.next,w.next=U}s.baseQueue=b=w,m.pending=null}if(w=r.baseState,b===null)r.memoizedState=w;else{s=b.next;var X=U=null,ue=null,Ne=s,We=!1;do{var $e=Ne.lane&-536870913;if($e!==Ne.lane?(bn&$e)===$e:(xi&$e)===$e){var Le=Ne.revertLane;if(Le===0)ue!==null&&(ue=ue.next={lane:0,revertLane:0,gesture:null,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),$e===no&&(We=!0);else if((xi&Le)===Le){Ne=Ne.next,Le===no&&(We=!0);continue}else $e={lane:0,revertLane:Ne.revertLane,gesture:null,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},ue===null?(X=ue=$e,U=w):ue=ue.next=$e,vn.lanes|=Le,Bs|=Le;$e=Ne.action,Nl&&f(w,$e),w=Ne.hasEagerState?Ne.eagerState:f(w,$e)}else Le={lane:$e,revertLane:Ne.revertLane,gesture:Ne.gesture,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},ue===null?(X=ue=Le,U=w):ue=ue.next=Le,vn.lanes|=$e,Bs|=$e;Ne=Ne.next}while(Ne!==null&&Ne!==s);if(ue===null?U=w:ue.next=X,!Gr(w,r.memoizedState)&&(Qi=!0,We&&(f=Ga,f!==null)))throw f;r.memoizedState=w,r.baseState=U,r.baseQueue=ue,m.lastRenderedState=w}return b===null&&(m.lanes=0),[r.memoizedState,m.dispatch]}function kp(r){var s=Wi(),f=s.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=r;var m=f.dispatch,b=f.pending,w=s.memoizedState;if(b!==null){f.pending=null;var U=b=b.next;do w=r(w,U.action),U=U.next;while(U!==b);Gr(w,s.memoizedState)||(Qi=!0),s.memoizedState=w,s.baseQueue===null&&(s.baseState=w),f.lastRenderedState=w}return[w,m]}function C0(r,s,f){var m=vn,b=Wi(),w=Pn;if(w){if(f===void 0)throw Error(n(407));f=f()}else f=s();var U=!Gr((ri||b).memoizedState,f);if(U&&(b.memoizedState=f,Qi=!0),b=b.queue,Yp(D0.bind(null,m,b,r),[r]),b.getSnapshot!==s||U||Dn!==null&&Dn.memoizedState.tag&1){if(m.flags|=2048,Ho(9,{destroy:void 0},N0.bind(null,m,b,f,s),null),dn===null)throw Error(n(349));w||(xi&127)!==0||R0(m,s,f)}return f}function R0(r,s,f){r.flags|=16384,r={getSnapshot:s,value:f},s=vn.updateQueue,s===null?(s=_d(),vn.updateQueue=s,s.stores=[r]):(f=s.stores,f===null?s.stores=[r]:f.push(r))}function N0(r,s,f,m){s.value=f,s.getSnapshot=m,I0(s)&&L0(r)}function D0(r,s,f){return f(function(){I0(s)&&L0(r)})}function I0(r){var s=r.getSnapshot;r=r.value;try{var f=s();return!Gr(r,f)}catch{return!0}}function L0(r){var s=Wr(r,2);s!==null&&wn(s,r,2)}function Vp(r){var s=sr();if(typeof r=="function"){var f=r;if(r=f(),Nl){Tt(!0);try{f()}finally{Tt(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:r},s}function Hp(r,s,f,m){return r.baseState=f,Bp(r,ri,typeof m=="function"?m:so)}function G_(r,s,f,m,b){if(wd(r))throw Error(n(485));if(r=s.action,r!==null){var w={payload:b,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){w.listeners.push(U)}};G.T!==null?f(!0):w.isTransition=!1,m(w),f=s.pending,f===null?(w.next=s.pending=w,U0(s,w)):(w.next=f.next,s.pending=f.next=w)}}function U0(r,s){var f=s.action,m=s.payload,b=r.state;if(s.isTransition){var w=G.T,U={};G.T=U;try{var X=f(b,m),ue=G.S;ue!==null&&ue(U,X),O0(r,s,X)}catch(Ne){Gp(r,s,Ne)}finally{w!==null&&U.types!==null&&(w.types=U.types),G.T=w}}else try{w=f(b,m),O0(r,s,w)}catch(Ne){Gp(r,s,Ne)}}function O0(r,s,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){P0(r,s,m)},function(m){return Gp(r,s,m)}):P0(r,s,f)}function P0(r,s,f){s.status="fulfilled",s.value=f,z0(s),r.state=f,s=r.pending,s!==null&&(f=s.next,f===s?r.pending=null:(f=f.next,s.next=f,U0(r,f)))}function Gp(r,s,f){var m=r.pending;if(r.pending=null,m!==null){m=m.next;do s.status="rejected",s.reason=f,z0(s),s=s.next;while(s!==m)}r.action=null}function z0(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Wp(r,s){return s}function Xp(r,s){if(Pn){var f=dn.formState;if(f!==null){e:{var m=vn;if(Pn){if(li){t:{for(var b=li,w=ba;b.nodeType!==8;){if(!w){b=null;break t}if(b=Hs(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){li=Hs(b.nextSibling),m=b.data==="F!";break e}}As(m)}m=!1}m&&(s=f[0])}}return f=sr(),f.memoizedState=f.baseState=s,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wp,lastRenderedState:s},f.queue=m,f=tv.bind(null,vn,m),m.dispatch=f,m=Vp(!1),w=Jp.bind(null,vn,!1,m.queue),m=sr(),b={state:s,dispatch:null,action:r,pending:null},m.queue=b,f=G_.bind(null,vn,b,w,f),b.dispatch=f,m.memoizedState=r,[s,f,!1]}function F0(r){var s=Wi();return jp(s,ri,r)}function jp(r,s,f){if(s=Bp(r,s,Wp)[0],r=bd(so)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var m=Bu(s)}catch(U){throw U===El?Mn:U}else m=s;s=Wi();var b=s.queue,w=b.dispatch;return f!==s.memoizedState&&(vn.flags|=2048,Ho(9,{destroy:void 0},B0.bind(null,b,f),null)),[m,w,r]}function B0(r,s){r.action=s}function qp(r){var s=Wi(),f=ri;if(f!==null)return jp(s,f,r);Wi(),s=s.memoizedState,f=Wi();var m=f.queue.dispatch;return f.memoizedState=r,[s,m,!1]}function Ho(r,s,f,m){return r={tag:r,create:f,deps:m,inst:s,next:null},s=vn.updateQueue,s===null&&(s=_d(),vn.updateQueue=s),f=s.lastEffect,f===null?s.lastEffect=r.next=r:(m=f.next,f.next=r,r.next=m,s.lastEffect=r),r}function Sd(){return Wi().memoizedState}function Md(r,s,f,m){var b=sr();vn.flags|=r,b.memoizedState=Ho(1|s,{destroy:void 0},f,m===void 0?null:m)}function Ed(r,s,f,m){var b=Wi();m=m===void 0?null:m;var w=b.memoizedState.inst;ri!==null&&m!==null&&Up(m,ri.memoizedState.deps)?b.memoizedState=Ho(s,w,f,m):(vn.flags|=r,b.memoizedState=Ho(1|s,w,f,m))}function k0(r,s){Md(8390656,8,r,s)}function Yp(r,s){Ed(2048,8,r,s)}function V0(r){vn.flags|=4;var s=vn.updateQueue;if(s===null)s=_d(),vn.updateQueue=s,s.events=[r];else{var f=s.events;f===null?s.events=[r]:f.push(r)}}function H0(r){var s=Wi().memoizedState;return V0({ref:s,nextImpl:r}),function(){if((Zt&2)!==0)throw Error(n(440));return s.impl.apply(void 0,arguments)}}function G0(r,s){return Ed(4,2,r,s)}function W0(r,s){return Ed(4,4,r,s)}function X0(r,s){if(typeof s=="function"){r=r();var f=s(r);return function(){typeof f=="function"?f():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function j0(r,s,f){f=f!=null?f.concat([r]):null,Ed(4,4,X0.bind(null,s,r),f)}function Zp(){}function q0(r,s){var f=Wi();s=s===void 0?null:s;var m=f.memoizedState;return s!==null&&Up(s,m[1])?m[0]:(f.memoizedState=[r,s],r)}function Y0(r,s){var f=Wi();s=s===void 0?null:s;var m=f.memoizedState;if(s!==null&&Up(s,m[1]))return m[0];if(m=r(),Nl){Tt(!0);try{r()}finally{Tt(!1)}}return f.memoizedState=[m,s],m}function Kp(r,s,f){return f===void 0||(xi&1073741824)!==0&&(bn&261930)===0?r.memoizedState=s:(r.memoizedState=f,r=Rn(),vn.lanes|=r,Bs|=r,f)}function Z0(r,s,f,m){return Gr(f,s)?f:Tc.current!==null?(r=Kp(r,f,m),Gr(r,s)||(Qi=!0),r):(xi&42)===0||(xi&1073741824)!==0&&(bn&261930)===0?(Qi=!0,r.memoizedState=f):(r=Rn(),vn.lanes|=r,Bs|=r,s)}function K0(r,s,f,m,b){var w=$.p;$.p=w!==0&&8>w?w:8;var U=G.T,X={};G.T=X,Jp(r,!1,s,f);try{var ue=b(),Ne=G.S;if(Ne!==null&&Ne(X,ue),ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var We=Ap(ue,m);ku(r,s,We,Ca(r))}else ku(r,s,m,Ca(r))}catch($e){ku(r,s,{then:function(){},status:"rejected",reason:$e},Ca())}finally{$.p=w,U!==null&&X.types!==null&&(U.types=X.types),G.T=U}}function W_(){}function $p(r,s,f,m){if(r.tag!==5)throw Error(n(476));var b=$0(r).queue;K0(r,b,s,le,f===null?W_:function(){return Q0(r),f(m)})}function $0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:le},next:null};var f={};return s.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:f},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Q0(r){var s=$0(r);s.next===null&&(s=r.alternate.memoizedState),ku(r,s.next.queue,{},Ca())}function Qp(){return ln(_m)}function J0(){return Wi().memoizedState}function ev(){return Wi().memoizedState}function X_(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var f=Ca();r=ro(f);var m=Bo(s,r,f);m!==null&&(wn(m,s,f),ko(m,s,f)),s={cache:Ep()},r.payload=s;return}s=s.return}}function j_(r,s,f){var m=Ca();f={lane:m,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},wd(r)?nv(s,f):(f=nd(r,s,f,m),f!==null&&(wn(f,r,m),iv(f,s,m)))}function tv(r,s,f){var m=Ca();ku(r,s,f,m)}function ku(r,s,f,m){var b={lane:m,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(wd(r))nv(s,b);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=s.lastRenderedReducer,w!==null))try{var U=s.lastRenderedState,X=w(U,f);if(b.hasEagerState=!0,b.eagerState=X,Gr(X,U))return gr(r,s,b,0),dn===null&&Ru(),!1}catch{}if(f=nd(r,s,b,m),f!==null)return wn(f,r,m),iv(f,s,m),!0}return!1}function Jp(r,s,f,m){if(m={lane:2,revertLane:Pe(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},wd(r)){if(s)throw Error(n(479))}else s=nd(r,f,m,2),s!==null&&wn(s,r,2)}function wd(r){var s=r.alternate;return r===vn||s!==null&&s===vn}function nv(r,s){Ac=Xa=!0;var f=r.pending;f===null?s.next=s:(s.next=f.next,f.next=s),r.pending=s}function iv(r,s,f){if((f&4194048)!==0){var m=s.lanes;m&=r.pendingLanes,f|=m,s.lanes=f,Si(r,f)}}var Rc={readContext:ln,use:Vo,useCallback:Ai,useContext:Ai,useEffect:Ai,useImperativeHandle:Ai,useLayoutEffect:Ai,useInsertionEffect:Ai,useMemo:Ai,useReducer:Ai,useRef:Ai,useState:Ai,useDebugValue:Ai,useDeferredValue:Ai,useTransition:Ai,useSyncExternalStore:Ai,useId:Ai,useHostTransitionStatus:Ai,useFormState:Ai,useActionState:Ai,useOptimistic:Ai,useMemoCache:Ai,useCacheRefresh:Ai};Rc.useEffectEvent=Ai;var rv={readContext:ln,use:Vo,useCallback:function(r,s){return sr().memoizedState=[r,s===void 0?null:s],r},useContext:ln,useEffect:k0,useImperativeHandle:function(r,s,f){f=f!=null?f.concat([r]):null,Md(4194308,4,X0.bind(null,s,r),f)},useLayoutEffect:function(r,s){return Md(4194308,4,r,s)},useInsertionEffect:function(r,s){Md(4,2,r,s)},useMemo:function(r,s){var f=sr();s=s===void 0?null:s;var m=r();if(Nl){Tt(!0);try{r()}finally{Tt(!1)}}return f.memoizedState=[m,s],m},useReducer:function(r,s,f){var m=sr();if(f!==void 0){var b=f(s);if(Nl){Tt(!0);try{f(s)}finally{Tt(!1)}}}else b=s;return m.memoizedState=m.baseState=b,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:b},m.queue=r,r=r.dispatch=j_.bind(null,vn,r),[m.memoizedState,r]},useRef:function(r){var s=sr();return r={current:r},s.memoizedState=r},useState:function(r){r=Vp(r);var s=r.queue,f=tv.bind(null,vn,s);return s.dispatch=f,[r.memoizedState,f]},useDebugValue:Zp,useDeferredValue:function(r,s){var f=sr();return Kp(f,r,s)},useTransition:function(){var r=Vp(!1);return r=K0.bind(null,vn,r.queue,!0,!1),sr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,f){var m=vn,b=sr();if(Pn){if(f===void 0)throw Error(n(407));f=f()}else{if(f=s(),dn===null)throw Error(n(349));(bn&127)!==0||R0(m,s,f)}b.memoizedState=f;var w={value:f,getSnapshot:s};return b.queue=w,k0(D0.bind(null,m,w,r),[r]),m.flags|=2048,Ho(9,{destroy:void 0},N0.bind(null,m,w,f,s),null),f},useId:function(){var r=sr(),s=dn.identifierPrefix;if(Pn){var f=ss,m=Ti;f=(m&~(1<<32-ie(m)-1)).toString(32)+f,s="_"+s+"R_"+f,f=yd++,0<f&&(s+="H"+f.toString(32)),s+="_"}else f=Lp++,s="_"+s+"r_"+f.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Qp,useFormState:Xp,useActionState:Xp,useOptimistic:function(r){var s=sr();s.memoizedState=s.baseState=r;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=f,s=Jp.bind(null,vn,!0,f),f.dispatch=s,[r,s]},useMemoCache:Fp,useCacheRefresh:function(){return sr().memoizedState=X_.bind(null,vn)},useEffectEvent:function(r){var s=sr(),f={impl:r};return s.memoizedState=f,function(){if((Zt&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},em={readContext:ln,use:Vo,useCallback:q0,useContext:ln,useEffect:Yp,useImperativeHandle:j0,useInsertionEffect:G0,useLayoutEffect:W0,useMemo:Y0,useReducer:bd,useRef:Sd,useState:function(){return bd(so)},useDebugValue:Zp,useDeferredValue:function(r,s){var f=Wi();return Z0(f,ri.memoizedState,r,s)},useTransition:function(){var r=bd(so)[0],s=Wi().memoizedState;return[typeof r=="boolean"?r:Bu(r),s]},useSyncExternalStore:C0,useId:J0,useHostTransitionStatus:Qp,useFormState:F0,useActionState:F0,useOptimistic:function(r,s){var f=Wi();return Hp(f,ri,r,s)},useMemoCache:Fp,useCacheRefresh:ev};em.useEffectEvent=H0;var ja={readContext:ln,use:Vo,useCallback:q0,useContext:ln,useEffect:Yp,useImperativeHandle:j0,useInsertionEffect:G0,useLayoutEffect:W0,useMemo:Y0,useReducer:kp,useRef:Sd,useState:function(){return kp(so)},useDebugValue:Zp,useDeferredValue:function(r,s){var f=Wi();return ri===null?Kp(f,r,s):Z0(f,ri.memoizedState,r,s)},useTransition:function(){var r=kp(so)[0],s=Wi().memoizedState;return[typeof r=="boolean"?r:Bu(r),s]},useSyncExternalStore:C0,useId:J0,useHostTransitionStatus:Qp,useFormState:qp,useActionState:qp,useOptimistic:function(r,s){var f=Wi();return ri!==null?Hp(f,ri,r,s):(f.baseState=r,[r,f.queue.dispatch])},useMemoCache:Fp,useCacheRefresh:ev};ja.useEffectEvent=H0;function Td(r,s,f,m){s=r.memoizedState,f=f(m,s),f=f==null?s:v({},s,f),r.memoizedState=f,r.lanes===0&&(r.updateQueue.baseState=f)}var Vu={enqueueSetState:function(r,s,f){r=r._reactInternals;var m=Ca(),b=ro(m);b.payload=s,f!=null&&(b.callback=f),s=Bo(r,b,m),s!==null&&(wn(s,r,m),ko(s,r,m))},enqueueReplaceState:function(r,s,f){r=r._reactInternals;var m=Ca(),b=ro(m);b.tag=1,b.payload=s,f!=null&&(b.callback=f),s=Bo(r,b,m),s!==null&&(wn(s,r,m),ko(s,r,m))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var f=Ca(),m=ro(f);m.tag=2,s!=null&&(m.callback=s),s=Bo(r,m,f),s!==null&&(wn(s,r,f),ko(s,r,f))}};function tm(r,s,f,m,b,w,U){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,w,U):s.prototype&&s.prototype.isPureReactComponent?!fc(f,m)||!fc(b,w):!0}function nm(r,s,f,m){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(f,m),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(f,m),s.state!==r&&Vu.enqueueReplaceState(s,s.state,null)}function Go(r,s){var f=s;if("ref"in s){f={};for(var m in s)m!=="ref"&&(f[m]=s[m])}if(r=r.defaultProps){f===s&&(f=v({},f));for(var b in r)f[b]===void 0&&(f[b]=r[b])}return f}function av(r){Cu(r)}function im(r){console.error(r)}function rm(r){Cu(r)}function Ad(r,s){try{var f=r.onUncaughtError;f(s.value,{componentStack:s.stack})}catch(m){setTimeout(function(){throw m})}}function sv(r,s,f){try{var m=r.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function am(r,s,f){return f=ro(f),f.tag=3,f.payload={element:null},f.callback=function(){Ad(r,s)},f}function sm(r){return r=ro(r),r.tag=3,r}function ov(r,s,f,m){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var w=m.value;r.payload=function(){return b(w)},r.callback=function(){sv(s,f,m)}}var U=f.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(r.callback=function(){sv(s,f,m),typeof b!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var X=m.stack;this.componentDidCatch(m.value,{componentStack:X!==null?X:""})})}function or(r,s,f,m,b){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(s=f.alternate,s!==null&&Ds(s,f,b,!0),f=ra.current,f!==null){switch(f.tag){case 31:case 13:return jr===null?Pc():f.alternate===null&&Ci===0&&(Ci=3),f.flags&=-257,f.flags|=65536,f.lanes=b,m===hd?f.flags|=16384:(s=f.updateQueue,s===null?f.updateQueue=new Set([m]):s.add(m),Ju(r,m,b)),!1;case 22:return f.flags|=65536,m===hd?f.flags|=16384:(s=f.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=s):(f=s.retryQueue,f===null?s.retryQueue=new Set([m]):f.add(m)),Ju(r,m,b)),!1}throw Error(n(435,f.tag))}return Ju(r,m,b),Pc(),!1}if(Pn)return s=ra.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=b,m!==xc&&(r=Error(n(422),{cause:m}),Cs(_a(r,f)))):(m!==xc&&(s=Error(n(423),{cause:m}),Cs(_a(s,f))),r=r.current.alternate,r.flags|=65536,b&=-b,r.lanes|=b,m=_a(m,f),b=am(r.stateNode,m,b),en(r,b),Ci!==4&&(Ci=2)),!1;var w=Error(n(520),{cause:m});if(w=_a(w,f),kl===null?kl=[w]:kl.push(w),Ci!==4&&(Ci=2),s===null)return!0;m=_a(m,f),f=s;do{switch(f.tag){case 3:return f.flags|=65536,r=b&-b,f.lanes|=r,r=am(f.stateNode,m,r),en(f,r),!1;case 1:if(s=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(qi===null||!qi.has(w))))return f.flags|=65536,b&=-b,f.lanes|=b,b=sm(b),ov(b,r,f,m),en(f,b),!1}f=f.return}while(f!==null);return!1}var Cd=Error(n(461)),Qi=!1;function vr(r,s,f,m){s.child=r===null?gd(s,null,f,m):io(s,r.child,f,m)}function om(r,s,f,m,b){f=f.render;var w=s.ref;if("ref"in m){var U={};for(var X in m)X!=="ref"&&(U[X]=m[X])}else U=m;return zo(s),m=xd(r,s,f,U,w,b),X=Op(),r!==null&&!Qi?(Pp(r,s,b),Xi(r,s,b)):(Pn&&X&&Ts(s),s.flags|=1,vr(r,s,m,b),s.child)}function Ll(r,s,f,m,b){if(r===null){var w=f.type;return typeof w=="function"&&!id(w)&&w.defaultProps===void 0&&f.compare===null?(s.tag=15,s.type=w,Rd(r,s,w,m,b)):(r=Es(f.type,null,m,s,s.mode,b),r.ref=s.ref,r.return=s,s.child=r)}if(w=r.child,!Od(r,b)){var U=w.memoizedProps;if(f=f.compare,f=f!==null?f:fc,f(U,m)&&r.ref===s.ref)return Xi(r,s,b)}return s.flags|=1,r=ta(w,m),r.ref=s.ref,r.return=s,s.child=r}function Rd(r,s,f,m,b){if(r!==null){var w=r.memoizedProps;if(fc(w,m)&&r.ref===s.ref)if(Qi=!1,s.pendingProps=m=w,Od(r,b))(r.flags&131072)!==0&&(Qi=!0);else return s.lanes=r.lanes,Xi(r,s,b)}return Nc(r,s,f,m,b)}function Ul(r,s,f,m){var b=m.children,w=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((s.flags&128)!==0){if(w=w!==null?w.baseLanes|f:f,r!==null){for(m=s.child=r.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~w}else m=0,s.child=null;return sa(r,s,w,f,m)}if((f&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Iu(s,w!==null?w.cachePool:null),w!==null?w0(s,w):Dp(),T0(s);else return m=s.lanes=536870912,sa(r,s,w!==null?w.baseLanes|f:f,f,m)}else w!==null?(Iu(s,w.cachePool),w0(s,w),aa(),s.memoizedState=null):(r!==null&&Iu(s,null),Dp(),aa());return vr(r,s,b,f),s.child}function Ls(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function sa(r,s,f,m,b){var w=dd();return w=w===null?null:{parent:$i._currentValue,pool:w},s.memoizedState={baseLanes:f,cachePool:w},r!==null&&Iu(s,null),Dp(),T0(s),r!==null&&Ds(r,s,m,!0),s.childLanes=b,null}function Nd(r,s){return s=Ud({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function lv(r,s,f){return io(s,r.child,null,f),r=Nd(s,s.pendingProps),r.flags|=2,Gi(s),s.memoizedState=null,r}function Dd(r,s,f){var m=s.pendingProps,b=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(Pn){if(m.mode==="hidden")return r=Nd(s,m),s.lanes=536870912,Ls(null,r);if(Ip(s),(r=li)?(r=kM(r,ba),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Js!==null?{id:Ti,overflow:ss}:null,retryLane:536870912,hydrationErrors:null},f=gc(r),f.return=s,s.child=f,Oi=s,li=null)):r=null,r===null)throw As(s);return s.lanes=536870912,null}return Nd(s,m)}var w=r.memoizedState;if(w!==null){var U=w.dehydrated;if(Ip(s),b)if(s.flags&256)s.flags&=-257,s=lv(r,s,f);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(n(558));else if(Qi||Ds(r,s,f,!1),b=(f&r.childLanes)!==0,Qi||b){if(m=dn,m!==null&&(U=Li(m,f),U!==0&&U!==w.retryLane))throw w.retryLane=U,Wr(r,U),wn(m,r,U),Cd;Pc(),s=lv(r,s,f)}else r=w.treeContext,li=Hs(U.nextSibling),Oi=s,Pn=!0,eo=null,ba=!1,r!==null&&od(s,r),s=Nd(s,m),s.flags|=4096;return s}return r=ta(r.child,{mode:m.mode,children:m.children}),r.ref=s.ref,s.child=r,r.return=s,r}function Ol(r,s){var f=s.ref;if(f===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(r===null||r.ref!==f)&&(s.flags|=4194816)}}function Nc(r,s,f,m,b){return zo(s),f=xd(r,s,f,m,void 0,b),m=Op(),r!==null&&!Qi?(Pp(r,s,b),Xi(r,s,b)):(Pn&&m&&Ts(s),s.flags|=1,vr(r,s,f,b),s.child)}function Hu(r,s,f,m,b,w){return zo(s),s.updateQueue=null,f=Dl(s,m,f,b),A0(r),m=Op(),r!==null&&!Qi?(Pp(r,s,w),Xi(r,s,w)):(Pn&&m&&Ts(s),s.flags|=1,vr(r,s,f,w),s.child)}function Id(r,s,f,m,b){if(zo(s),s.stateNode===null){var w=Do,U=f.contextType;typeof U=="object"&&U!==null&&(w=ln(U)),w=new f(m,w),s.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Vu,s.stateNode=w,w._reactInternals=s,w=s.stateNode,w.props=m,w.state=s.memoizedState,w.refs={},Ou(s),U=f.contextType,w.context=typeof U=="object"&&U!==null?ln(U):Do,w.state=s.memoizedState,U=f.getDerivedStateFromProps,typeof U=="function"&&(Td(s,f,U,m),w.state=s.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(U=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),U!==w.state&&Vu.enqueueReplaceState(w,w.state,null),Ec(s,m,w,b),Pu(),w.state=s.memoizedState),typeof w.componentDidMount=="function"&&(s.flags|=4194308),m=!0}else if(r===null){w=s.stateNode;var X=s.memoizedProps,ue=Go(f,X);w.props=ue;var Ne=w.context,We=f.contextType;U=Do,typeof We=="object"&&We!==null&&(U=ln(We));var $e=f.getDerivedStateFromProps;We=typeof $e=="function"||typeof w.getSnapshotBeforeUpdate=="function",X=s.pendingProps!==X,We||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(X||Ne!==U)&&nm(s,w,m,U),Xr=!1;var Le=s.memoizedState;w.state=Le,Ec(s,m,w,b),Pu(),Ne=s.memoizedState,X||Le!==Ne||Xr?(typeof $e=="function"&&(Td(s,f,$e,m),Ne=s.memoizedState),(ue=Xr||tm(s,f,ue,m,Le,Ne,U))?(We||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=m,s.memoizedState=Ne),w.props=m,w.state=Ne,w.context=U,m=ue):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),m=!1)}else{w=s.stateNode,Rp(r,s),U=s.memoizedProps,We=Go(f,U),w.props=We,$e=s.pendingProps,Le=w.context,Ne=f.contextType,ue=Do,typeof Ne=="object"&&Ne!==null&&(ue=ln(Ne)),X=f.getDerivedStateFromProps,(Ne=typeof X=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U!==$e||Le!==ue)&&nm(s,w,m,ue),Xr=!1,Le=s.memoizedState,w.state=Le,Ec(s,m,w,b),Pu();var ke=s.memoizedState;U!==$e||Le!==ke||Xr||r!==null&&r.dependencies!==null&&Du(r.dependencies)?(typeof X=="function"&&(Td(s,f,X,m),ke=s.memoizedState),(We=Xr||tm(s,f,We,m,Le,ke,ue)||r!==null&&r.dependencies!==null&&Du(r.dependencies))?(Ne||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,ke,ue),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,ke,ue)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||U===r.memoizedProps&&Le===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||U===r.memoizedProps&&Le===r.memoizedState||(s.flags|=1024),s.memoizedProps=m,s.memoizedState=ke),w.props=m,w.state=ke,w.context=ue,m=We):(typeof w.componentDidUpdate!="function"||U===r.memoizedProps&&Le===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||U===r.memoizedProps&&Le===r.memoizedState||(s.flags|=1024),m=!1)}return w=m,Ol(r,s),m=(s.flags&128)!==0,w||m?(w=s.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:w.render(),s.flags|=1,r!==null&&m?(s.child=io(s,r.child,null,b),s.child=io(s,null,f,b)):vr(r,s,f,b),s.memoizedState=w.state,r=s.child):r=Xi(r,s,b),r}function cv(r,s,f,m){return Oo(),s.flags|=256,vr(r,s,f,m),s.child}var lm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ur(r){return{baseLanes:r,cachePool:Cp()}}function Ld(r,s,f){return r=r!==null?r.childLanes&~f:0,s&&(r|=Zr),r}function uv(r,s,f){var m=s.pendingProps,b=!1,w=(s.flags&128)!==0,U;if((U=w)||(U=r!==null&&r.memoizedState===null?!1:(zn.current&2)!==0),U&&(b=!0,s.flags&=-129),U=(s.flags&32)!==0,s.flags&=-33,r===null){if(Pn){if(b?ao(s):aa(),(r=li)?(r=kM(r,ba),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Js!==null?{id:Ti,overflow:ss}:null,retryLane:536870912,hydrationErrors:null},f=gc(r),f.return=s,s.child=f,Oi=s,li=null)):r=null,r===null)throw As(s);return sb(r)?s.lanes=32:s.lanes=536870912,null}var X=m.children;return m=m.fallback,b?(aa(),b=s.mode,X=Ud({mode:"hidden",children:X},b),m=Io(m,b,f,null),X.return=s,m.return=s,X.sibling=m,s.child=X,m=s.child,m.memoizedState=Ur(f),m.childLanes=Ld(r,U,f),s.memoizedState=lm,Ls(null,m)):(ao(s),Gu(s,X))}var ue=r.memoizedState;if(ue!==null&&(X=ue.dehydrated,X!==null)){if(w)s.flags&256?(ao(s),s.flags&=-257,s=cm(r,s,f)):s.memoizedState!==null?(aa(),s.child=r.child,s.flags|=128,s=null):(aa(),X=m.fallback,b=s.mode,m=Ud({mode:"visible",children:m.children},b),X=Io(X,b,f,null),X.flags|=2,m.return=s,X.return=s,m.sibling=X,s.child=m,io(s,r.child,null,f),m=s.child,m.memoizedState=Ur(f),m.childLanes=Ld(r,U,f),s.memoizedState=lm,s=Ls(null,m));else if(ao(s),sb(X)){if(U=X.nextSibling&&X.nextSibling.dataset,U)var Ne=U.dgst;U=Ne,m=Error(n(419)),m.stack="",m.digest=U,Cs({value:m,source:null,stack:null}),s=cm(r,s,f)}else if(Qi||Ds(r,s,f,!1),U=(f&r.childLanes)!==0,Qi||U){if(U=dn,U!==null&&(m=Li(U,f),m!==0&&m!==ue.retryLane))throw ue.retryLane=m,Wr(r,m),wn(U,r,m),Cd;ab(X)||Pc(),s=cm(r,s,f)}else ab(X)?(s.flags|=192,s.child=r.child,s=null):(r=ue.treeContext,li=Hs(X.nextSibling),Oi=s,Pn=!0,eo=null,ba=!1,r!==null&&od(s,r),s=Gu(s,m.children),s.flags|=4096);return s}return b?(aa(),X=m.fallback,b=s.mode,ue=r.child,Ne=ue.sibling,m=ta(ue,{mode:"hidden",children:m.children}),m.subtreeFlags=ue.subtreeFlags&65011712,Ne!==null?X=ta(Ne,X):(X=Io(X,b,f,null),X.flags|=2),X.return=s,m.return=s,m.sibling=X,s.child=m,Ls(null,m),m=s.child,X=r.child.memoizedState,X===null?X=Ur(f):(b=X.cachePool,b!==null?(ue=$i._currentValue,b=b.parent!==ue?{parent:ue,pool:ue}:b):b=Cp(),X={baseLanes:X.baseLanes|f,cachePool:b}),m.memoizedState=X,m.childLanes=Ld(r,U,f),s.memoizedState=lm,Ls(r.child,m)):(ao(s),f=r.child,r=f.sibling,f=ta(f,{mode:"visible",children:m.children}),f.return=s,f.sibling=null,r!==null&&(U=s.deletions,U===null?(s.deletions=[r],s.flags|=16):U.push(r)),s.child=f,s.memoizedState=null,f)}function Gu(r,s){return s=Ud({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Ud(r,s){return r=wi(22,r,null,s),r.lanes=0,r}function cm(r,s,f){return io(s,r.child,null,f),r=Gu(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function fv(r,s,f){r.lanes|=s;var m=r.alternate;m!==null&&(m.lanes|=s),cd(r.return,s,f)}function Pl(r,s,f,m,b,w){var U=r.memoizedState;U===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:b,treeForkCount:w}:(U.isBackwards=s,U.rendering=null,U.renderingStartTime=0,U.last=m,U.tail=f,U.tailMode=b,U.treeForkCount=w)}function oa(r,s,f){var m=s.pendingProps,b=m.revealOrder,w=m.tail;m=m.children;var U=zn.current,X=(U&2)!==0;if(X?(U=U&1|2,s.flags|=128):U&=1,me(zn,U),vr(r,s,m,f),m=Pn?yc:0,!X&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&fv(r,f,s);else if(r.tag===19)fv(r,f,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(b){case"forwards":for(f=s.child,b=null;f!==null;)r=f.alternate,r!==null&&Ma(r)===null&&(b=f),f=f.sibling;f=b,f===null?(b=s.child,s.child=null):(b=f.sibling,f.sibling=null),Pl(s,!1,b,f,w,m);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=s.child,s.child=null;b!==null;){if(r=b.alternate,r!==null&&Ma(r)===null){s.child=b;break}r=b.sibling,b.sibling=f,f=b,b=r}Pl(s,!0,f,null,w,m);break;case"together":Pl(s,!1,null,null,void 0,m);break;default:s.memoizedState=null}return s.child}function Xi(r,s,f){if(r!==null&&(s.dependencies=r.dependencies),Bs|=s.lanes,(f&s.childLanes)===0)if(r!==null){if(Ds(r,s,f,!1),(f&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(n(153));if(s.child!==null){for(r=s.child,f=ta(r,r.pendingProps),s.child=f,f.return=s;r.sibling!==null;)r=r.sibling,f=f.sibling=ta(r,r.pendingProps),f.return=s;f.sibling=null}return s.child}function Od(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Du(r)))}function q_(r,s,f){switch(s.tag){case 3:ze(s,s.stateNode.containerInfo),to(s,$i,r.memoizedState.cache),Oo();break;case 27:case 5:It(s);break;case 4:ze(s,s.stateNode.containerInfo);break;case 10:to(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ip(s),null;break;case 13:var m=s.memoizedState;if(m!==null)return m.dehydrated!==null?(ao(s),s.flags|=128,null):(f&s.child.childLanes)!==0?uv(r,s,f):(ao(s),r=Xi(r,s,f),r!==null?r.sibling:null);ao(s);break;case 19:var b=(r.flags&128)!==0;if(m=(f&s.childLanes)!==0,m||(Ds(r,s,f,!1),m=(f&s.childLanes)!==0),b){if(m)return oa(r,s,f);s.flags|=128}if(b=s.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),me(zn,zn.current),m)break;return null;case 22:return s.lanes=0,Ul(r,s,f,s.pendingProps);case 24:to(s,$i,r.memoizedState.cache)}return Xi(r,s,f)}function Pd(r,s,f){if(r!==null)if(r.memoizedProps!==s.pendingProps)Qi=!0;else{if(!Od(r,f)&&(s.flags&128)===0)return Qi=!1,q_(r,s,f);Qi=(r.flags&131072)!==0}else Qi=!1,Pn&&(s.flags&1048576)!==0&&y0(s,yc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var m=s.pendingProps;if(r=wl(s.elementType),s.type=r,typeof r=="function")id(r)?(m=Go(r,m),s.tag=1,s=Id(null,s,r,m,f)):(s.tag=0,s=Nc(null,s,r,m,f));else{if(r!=null){var b=r.$$typeof;if(b===L){s.tag=11,s=om(null,s,r,m,f);break e}else if(b===V){s.tag=14,s=Ll(null,s,r,m,f);break e}}throw s=ae(r)||r,Error(n(306,s,""))}}return s;case 0:return Nc(r,s,s.type,s.pendingProps,f);case 1:return m=s.type,b=Go(m,s.pendingProps),Id(r,s,m,b,f);case 3:e:{if(ze(s,s.stateNode.containerInfo),r===null)throw Error(n(387));m=s.pendingProps;var w=s.memoizedState;b=w.element,Rp(r,s),Ec(s,m,null,f);var U=s.memoizedState;if(m=U.cache,to(s,$i,m),m!==w.cache&&ud(s,[$i],f,!0),Pu(),m=U.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:U.cache},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){s=cv(r,s,m,f);break e}else if(m!==b){b=_a(Error(n(424)),s),Cs(b),s=cv(r,s,m,f);break e}else for(r=s.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,li=Hs(r.firstChild),Oi=s,Pn=!0,eo=null,ba=!0,f=gd(s,null,m,f),s.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Oo(),m===b){s=Xi(r,s,f);break e}vr(r,s,m,f)}s=s.child}return s;case 26:return Ol(r,s),r===null?(f=jM(s.type,null,s.pendingProps,null))?s.memoizedState=f:Pn||(f=s.type,r=s.pendingProps,m=mv(he.current).createElement(f),m[pi]=s,m[B]=r,$r(m,f,r),fe(m),s.stateNode=m):s.memoizedState=jM(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return It(s),r===null&&Pn&&(m=s.stateNode=GM(s.type,s.pendingProps,he.current),Oi=s,ba=!0,b=li,kc(s.type)?(ob=b,li=Hs(m.firstChild)):li=b),vr(r,s,s.pendingProps.children,f),Ol(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Pn&&((b=m=li)&&(m=oN(m,s.type,s.pendingProps,ba),m!==null?(s.stateNode=m,Oi=s,li=Hs(m.firstChild),ba=!1,b=!0):b=!1),b||As(s)),It(s),b=s.type,w=s.pendingProps,U=r!==null?r.memoizedProps:null,m=w.children,nb(b,w)?m=null:U!==null&&nb(b,U)&&(s.flags|=32),s.memoizedState!==null&&(b=xd(r,s,Il,null,null,f),_m._currentValue=b),Ol(r,s),vr(r,s,m,f),s.child;case 6:return r===null&&Pn&&((r=f=li)&&(f=lN(f,s.pendingProps,ba),f!==null?(s.stateNode=f,Oi=s,li=null,r=!0):r=!1),r||As(s)),null;case 13:return uv(r,s,f);case 4:return ze(s,s.stateNode.containerInfo),m=s.pendingProps,r===null?s.child=io(s,null,m,f):vr(r,s,m,f),s.child;case 11:return om(r,s,s.type,s.pendingProps,f);case 7:return vr(r,s,s.pendingProps,f),s.child;case 8:return vr(r,s,s.pendingProps.children,f),s.child;case 12:return vr(r,s,s.pendingProps.children,f),s.child;case 10:return m=s.pendingProps,to(s,s.type,m.value),vr(r,s,m.children,f),s.child;case 9:return b=s.type._context,m=s.pendingProps.children,zo(s),b=ln(b),m=m(b),s.flags|=1,vr(r,s,m,f),s.child;case 14:return Ll(r,s,s.type,s.pendingProps,f);case 15:return Rd(r,s,s.type,s.pendingProps,f);case 19:return oa(r,s,f);case 31:return Dd(r,s,f);case 22:return Ul(r,s,f,s.pendingProps);case 24:return zo(s),m=ln($i),r===null?(b=dd(),b===null&&(b=dn,w=Ep(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=f),b=w),s.memoizedState={parent:m,cache:b},Ou(s),to(s,$i,b)):((r.lanes&f)!==0&&(Rp(r,s),Ec(s,null,null,f),Pu()),b=r.memoizedState,w=s.memoizedState,b.parent!==m?(b={parent:m,cache:m},s.memoizedState=b,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=b),to(s,$i,m)):(m=w.cache,to(s,$i,m),m!==b.cache&&ud(s,[$i],f,!0))),vr(r,s,s.pendingProps.children,f),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function Us(r){r.flags|=4}function Wu(r,s,f,m,b){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(b&335544128)===b)if(r.stateNode.complete)r.flags|=8192;else if(Ni())r.flags|=8192;else throw Is=hd,Lu}else r.flags&=-16777217}function um(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!$M(s))if(Ni())r.flags|=8192;else throw Is=hd,Lu}function oo(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Kt():536870912,r.lanes|=s,gi|=s)}function Os(r,s){if(!Pn)switch(r.tailMode){case"hidden":s=r.tail;for(var f=null;s!==null;)s.alternate!==null&&(f=s),s=s.sibling;f===null?r.tail=null:f.sibling=null;break;case"collapsed":f=r.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function ai(r){var s=r.alternate!==null&&r.alternate.child===r.child,f=0,m=0;if(s)for(var b=r.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=r,b=b.sibling;else for(b=r.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=r,b=b.sibling;return r.subtreeFlags|=m,r.childLanes=f,s}function Xu(r,s,f){var m=s.pendingProps;switch(sd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ai(s),null;case 1:return ai(s),null;case 3:return f=s.stateNode,m=null,r!==null&&(m=r.memoizedState.cache),s.memoizedState.cache!==m&&(s.flags|=2048),Ns($i),pt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(_c(s)?Us(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ld())),ai(s),null;case 26:var b=s.type,w=s.memoizedState;return r===null?(Us(s),w!==null?(ai(s),um(s,w)):(ai(s),Wu(s,b,null,m,f))):w?w!==r.memoizedState?(Us(s),ai(s),um(s,w)):(ai(s),s.flags&=-16777217):(r=r.memoizedProps,r!==m&&Us(s),ai(s),Wu(s,b,r,m,f)),null;case 27:if(zt(s),f=he.current,b=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==m&&Us(s);else{if(!m){if(s.stateNode===null)throw Error(n(166));return ai(s),null}r=Te.current,_c(s)?x0(s):(r=GM(b,m,f),s.stateNode=r,Us(s))}return ai(s),null;case 5:if(zt(s),b=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==m&&Us(s);else{if(!m){if(s.stateNode===null)throw Error(n(166));return ai(s),null}if(w=Te.current,_c(s))x0(s);else{var U=mv(he.current);switch(w){case 1:w=U.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:w=U.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":w=U.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":w=U.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":w=U.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof m.is=="string"?U.createElement("select",{is:m.is}):U.createElement("select"),m.multiple?w.multiple=!0:m.size&&(w.size=m.size);break;default:w=typeof m.is=="string"?U.createElement(b,{is:m.is}):U.createElement(b)}}w[pi]=s,w[B]=m;e:for(U=s.child;U!==null;){if(U.tag===5||U.tag===6)w.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===s)break e;for(;U.sibling===null;){if(U.return===null||U.return===s)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}s.stateNode=w;e:switch($r(w,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Us(s)}}return ai(s),Wu(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,f),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==m&&Us(s);else{if(typeof m!="string"&&s.stateNode===null)throw Error(n(166));if(r=he.current,_c(s)){if(r=s.stateNode,f=s.memoizedProps,m=null,b=Oi,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}r[pi]=s,r=!!(r.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||IM(r.nodeValue,f)),r||As(s,!0)}else r=mv(r).createTextNode(m),r[pi]=s,s.stateNode=r}return ai(s),null;case 31:if(f=s.memoizedState,r===null||r.memoizedState!==null){if(m=_c(s),f!==null){if(r===null){if(!m)throw Error(n(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(557));r[pi]=s}else Oo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ai(s),r=!1}else f=ld(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),r=!0;if(!r)return s.flags&256?(Gi(s),s):(Gi(s),null);if((s.flags&128)!==0)throw Error(n(558))}return ai(s),null;case 13:if(m=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(b=_c(s),m!==null&&m.dehydrated!==null){if(r===null){if(!b)throw Error(n(318));if(b=s.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[pi]=s}else Oo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ai(s),b=!1}else b=ld(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=b),b=!0;if(!b)return s.flags&256?(Gi(s),s):(Gi(s),null)}return Gi(s),(s.flags&128)!==0?(s.lanes=f,s):(f=m!==null,r=r!==null&&r.memoizedState!==null,f&&(m=s.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),w=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==b&&(m.flags|=2048)),f!==r&&f&&(s.child.flags|=8192),oo(s,s.updateQueue),ai(s),null);case 4:return pt(),r===null&&$_(s.stateNode.containerInfo),ai(s),null;case 10:return Ns(s.type),ai(s),null;case 19:if(re(zn),m=s.memoizedState,m===null)return ai(s),null;if(b=(s.flags&128)!==0,w=m.rendering,w===null)if(b)Os(m,!1);else{if(Ci!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=Ma(r),w!==null){for(s.flags|=128,Os(m,!1),r=w.updateQueue,s.updateQueue=r,oo(s,r),s.subtreeFlags=0,r=f,f=s.child;f!==null;)mc(f,r),f=f.sibling;return me(zn,zn.current&1|2),Pn&&ws(s,m.treeForkCount),s.child}r=r.sibling}m.tail!==null&&F()>ji&&(s.flags|=128,b=!0,Os(m,!1),s.lanes=4194304)}else{if(!b)if(r=Ma(w),r!==null){if(s.flags|=128,b=!0,r=r.updateQueue,s.updateQueue=r,oo(s,r),Os(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Pn)return ai(s),null}else 2*F()-m.renderingStartTime>ji&&f!==536870912&&(s.flags|=128,b=!0,Os(m,!1),s.lanes=4194304);m.isBackwards?(w.sibling=s.child,s.child=w):(r=m.last,r!==null?r.sibling=w:s.child=w,m.last=w)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=F(),r.sibling=null,f=zn.current,me(zn,b?f&1|2:f&1),Pn&&ws(s,m.treeForkCount),r):(ai(s),null);case 22:case 23:return Gi(s),zu(),m=s.memoizedState!==null,r!==null?r.memoizedState!==null!==m&&(s.flags|=8192):m&&(s.flags|=8192),m?(f&536870912)!==0&&(s.flags&128)===0&&(ai(s),s.subtreeFlags&6&&(s.flags|=8192)):ai(s),f=s.updateQueue,f!==null&&oo(s,f.retryQueue),f=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),m=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),m!==f&&(s.flags|=2048),r!==null&&re(Fo),null;case 24:return f=null,r!==null&&(f=r.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),Ns($i),ai(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function qa(r,s){switch(sd(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ns($i),pt(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return zt(s),null;case 31:if(s.memoizedState!==null){if(Gi(s),s.alternate===null)throw Error(n(340));Oo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(Gi(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Oo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return re(zn),null;case 4:return pt(),null;case 10:return Ns(s.type),null;case 22:case 23:return Gi(s),zu(),r!==null&&re(Fo),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Ns($i),null;case 25:return null;default:return null}}function Ea(r,s){switch(sd(s),s.tag){case 3:Ns($i),pt();break;case 26:case 27:case 5:zt(s);break;case 4:pt();break;case 31:s.memoizedState!==null&&Gi(s);break;case 13:Gi(s);break;case 19:re(zn);break;case 10:Ns(s.type);break;case 22:case 23:Gi(s),zu(),r!==null&&re(Fo);break;case 24:Ns($i)}}function Ya(r,s){try{var f=s.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var b=m.next;f=b;do{if((f.tag&r)===r){m=void 0;var w=f.create,U=f.inst;m=w(),U.destroy=m}f=f.next}while(f!==b)}}catch(X){Xn(s,s.return,X)}}function Mr(r,s,f){try{var m=s.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var w=b.next;m=w;do{if((m.tag&r)===r){var U=m.inst,X=U.destroy;if(X!==void 0){U.destroy=void 0,b=s;var ue=f,Ne=X;try{Ne()}catch(We){Xn(b,ue,We)}}}m=m.next}while(m!==w)}}catch(We){Xn(s,s.return,We)}}function os(r){var s=r.updateQueue;if(s!==null){var f=r.stateNode;try{E0(s,f)}catch(m){Xn(r,r.return,m)}}}function yr(r,s,f){f.props=Go(r.type,r.memoizedProps),f.state=r.memoizedState;try{f.componentWillUnmount()}catch(m){Xn(r,s,m)}}function lo(r,s){try{var f=r.ref;if(f!==null){switch(r.tag){case 26:case 27:case 5:var m=r.stateNode;break;case 30:m=r.stateNode;break;default:m=r.stateNode}typeof f=="function"?r.refCleanup=f(m):f.current=m}}catch(b){Xn(r,s,b)}}function Er(r,s){var f=r.ref,m=r.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(b){Xn(r,s,b)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){Xn(r,s,b)}else f.current=null}function ju(r){var s=r.type,f=r.memoizedProps,m=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(b){Xn(r,r.return,b)}}function lr(r,s,f){try{var m=r.stateNode;tN(m,r.type,f,s),m[B]=s}catch(b){Xn(r,r.return,b)}}function _i(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&kc(r.type)||r.tag===4}function In(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||_i(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&kc(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ps(r,s,f){var m=r.tag;if(m===5||m===6)r=r.stateNode,s?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(r,s):(s=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,s.appendChild(r),f=f._reactRootContainer,f!=null||s.onclick!==null||(s.onclick=Ks));else if(m!==4&&(m===27&&kc(r.type)&&(f=r.stateNode,s=null),r=r.child,r!==null))for(Ps(r,s,f),r=r.sibling;r!==null;)Ps(r,s,f),r=r.sibling}function qr(r,s,f){var m=r.tag;if(m===5||m===6)r=r.stateNode,s?f.insertBefore(r,s):f.appendChild(r);else if(m!==4&&(m===27&&kc(r.type)&&(f=r.stateNode),r=r.child,r!==null))for(qr(r,s,f),r=r.sibling;r!==null;)qr(r,s,f),r=r.sibling}function zd(r){var s=r.stateNode,f=r.memoizedProps;try{for(var m=r.type,b=s.attributes;b.length;)s.removeAttributeNode(b[0]);$r(s,m,f),s[pi]=r,s[B]=f}catch(w){Xn(r,r.return,w)}}var Za=!1,ci=!1,ls=!1,dv=typeof WeakSet=="function"?WeakSet:Set,xr=null;function Y_(r,s){if(r=r.containerInfo,eb=Sv,r=p0(r),xp(r)){if("selectionStart"in r)var f={start:r.selectionStart,end:r.selectionEnd};else e:{f=(f=r.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var b=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break e}var U=0,X=-1,ue=-1,Ne=0,We=0,$e=r,Le=null;t:for(;;){for(var ke;$e!==f||b!==0&&$e.nodeType!==3||(X=U+b),$e!==w||m!==0&&$e.nodeType!==3||(ue=U+m),$e.nodeType===3&&(U+=$e.nodeValue.length),(ke=$e.firstChild)!==null;)Le=$e,$e=ke;for(;;){if($e===r)break t;if(Le===f&&++Ne===b&&(X=U),Le===w&&++We===m&&(ue=U),(ke=$e.nextSibling)!==null)break;$e=Le,Le=$e.parentNode}$e=ke}f=X===-1||ue===-1?null:{start:X,end:ue}}else f=null}f=f||{start:0,end:0}}else f=null;for(tb={focusedElem:r,selectionRange:f},Sv=!1,xr=s;xr!==null;)if(s=xr,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,xr=r;else for(;xr!==null;){switch(s=xr,w=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(f=0;f<r.length;f++)b=r[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&w!==null){r=void 0,f=s,b=w.memoizedProps,w=w.memoizedState,m=f.stateNode;try{var Ht=Go(f.type,b);r=m.getSnapshotBeforeUpdate(Ht,w),m.__reactInternalSnapshotBeforeUpdate=r}catch(sn){Xn(f,f.return,sn)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,f=r.nodeType,f===9)rb(r);else if(f===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":rb(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=s.sibling,r!==null){r.return=s.return,xr=r;break}xr=s.return}}function bi(r,s,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:Qa(r,f),m&4&&Ya(5,f);break;case 1:if(Qa(r,f),m&4)if(r=f.stateNode,s===null)try{r.componentDidMount()}catch(U){Xn(f,f.return,U)}else{var b=Go(f.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(b,s,r.__reactInternalSnapshotBeforeUpdate)}catch(U){Xn(f,f.return,U)}}m&64&&os(f),m&512&&lo(f,f.return);break;case 3:if(Qa(r,f),m&64&&(r=f.updateQueue,r!==null)){if(s=null,f.child!==null)switch(f.child.tag){case 27:case 5:s=f.child.stateNode;break;case 1:s=f.child.stateNode}try{E0(r,s)}catch(U){Xn(f,f.return,U)}}break;case 27:s===null&&m&4&&zd(f);case 26:case 5:Qa(r,f),s===null&&m&4&&ju(f),m&512&&lo(f,f.return);break;case 12:Qa(r,f);break;case 31:Qa(r,f),m&4&&Wo(r,f);break;case 13:Qa(r,f),m&4&&Dc(r,f),m&64&&(r=f.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(f=g.bind(null,f),cN(r,f))));break;case 22:if(m=f.memoizedState!==null||Za,!m){s=s!==null&&s.memoizedState!==null||ci,b=Za;var w=ci;Za=m,(ci=s)&&!w?Yr(r,f,(f.subtreeFlags&8772)!==0):Qa(r,f),Za=b,ci=w}break;case 30:break;default:Qa(r,f)}}function qu(r){var s=r.alternate;s!==null&&(r.alternate=null,qu(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&st(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ti=null,Or=!1;function Ka(r,s,f){for(f=f.child;f!==null;)Fd(r,s,f),f=f.sibling}function Fd(r,s,f){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Qe,f)}catch{}switch(f.tag){case 26:ci||Er(f,s),Ka(r,s,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:ci||Er(f,s);var m=ti,b=Or;kc(f.type)&&(ti=f.stateNode,Or=!1),Ka(r,s,f),vm(f.stateNode),ti=m,Or=b;break;case 5:ci||Er(f,s);case 6:if(m=ti,b=Or,ti=null,Ka(r,s,f),ti=m,Or=b,ti!==null)if(Or)try{(ti.nodeType===9?ti.body:ti.nodeName==="HTML"?ti.ownerDocument.body:ti).removeChild(f.stateNode)}catch(w){Xn(f,s,w)}else try{ti.removeChild(f.stateNode)}catch(w){Xn(f,s,w)}break;case 18:ti!==null&&(Or?(r=ti,FM(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,f.stateNode),jd(r)):FM(ti,f.stateNode));break;case 4:m=ti,b=Or,ti=f.stateNode.containerInfo,Or=!0,Ka(r,s,f),ti=m,Or=b;break;case 0:case 11:case 14:case 15:Mr(2,f,s),ci||Mr(4,f,s),Ka(r,s,f);break;case 1:ci||(Er(f,s),m=f.stateNode,typeof m.componentWillUnmount=="function"&&yr(f,s,m)),Ka(r,s,f);break;case 21:Ka(r,s,f);break;case 22:ci=(m=ci)||f.memoizedState!==null,Ka(r,s,f),ci=m;break;default:Ka(r,s,f)}}function Wo(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{jd(r)}catch(f){Xn(s,s.return,f)}}}function Dc(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{jd(r)}catch(f){Xn(s,s.return,f)}}function fm(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new dv),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new dv),s;default:throw Error(n(435,r.tag))}}function co(r,s){var f=fm(r);s.forEach(function(m){if(!f.has(m)){f.add(m);var b=_.bind(null,r,m);m.then(b,b)}})}function cr(r,s){var f=s.deletions;if(f!==null)for(var m=0;m<f.length;m++){var b=f[m],w=r,U=s,X=U;e:for(;X!==null;){switch(X.tag){case 27:if(kc(X.type)){ti=X.stateNode,Or=!1;break e}break;case 5:ti=X.stateNode,Or=!1;break e;case 3:case 4:ti=X.stateNode.containerInfo,Or=!0;break e}X=X.return}if(ti===null)throw Error(n(160));Fd(w,U,b),ti=null,Or=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Xo(s,r),s=s.sibling}var $a=null;function Xo(r,s){var f=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:cr(s,r),ur(r),m&4&&(Mr(3,r,r.return),Ya(3,r),Mr(5,r,r.return));break;case 1:cr(s,r),ur(r),m&512&&(ci||f===null||Er(f,f.return)),m&64&&Za&&(r=r.updateQueue,r!==null&&(m=r.callbacks,m!==null&&(f=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var b=$a;if(cr(s,r),ur(r),m&512&&(ci||f===null||Er(f,f.return)),m&4){var w=f!==null?f.memoizedState:null;if(m=r.memoizedState,f===null)if(m===null)if(r.stateNode===null){e:{m=r.type,f=r.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":w=b.getElementsByTagName("title")[0],(!w||w[dt]||w[pi]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(m),b.head.insertBefore(w,b.querySelector("head > title"))),$r(w,m,f),w[pi]=r,fe(w),m=w;break e;case"link":var U=ZM("link","href",b).get(m+(f.href||""));if(U){for(var X=0;X<U.length;X++)if(w=U[X],w.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){U.splice(X,1);break t}}w=b.createElement(m),$r(w,m,f),b.head.appendChild(w);break;case"meta":if(U=ZM("meta","content",b).get(m+(f.content||""))){for(X=0;X<U.length;X++)if(w=U[X],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){U.splice(X,1);break t}}w=b.createElement(m),$r(w,m,f),b.head.appendChild(w);break;default:throw Error(n(468,m))}w[pi]=r,fe(w),m=w}r.stateNode=m}else KM(b,r.type,r.stateNode);else r.stateNode=YM(b,m,r.memoizedProps);else w!==m?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,m===null?KM(b,r.type,r.stateNode):YM(b,m,r.memoizedProps)):m===null&&r.stateNode!==null&&lr(r,r.memoizedProps,f.memoizedProps)}break;case 27:cr(s,r),ur(r),m&512&&(ci||f===null||Er(f,f.return)),f!==null&&m&4&&lr(r,r.memoizedProps,f.memoizedProps);break;case 5:if(cr(s,r),ur(r),m&512&&(ci||f===null||Er(f,f.return)),r.flags&32){b=r.stateNode;try{Ir(b,"")}catch(Ht){Xn(r,r.return,Ht)}}m&4&&r.stateNode!=null&&(b=r.memoizedProps,lr(r,b,f!==null?f.memoizedProps:b)),m&1024&&(ls=!0);break;case 6:if(cr(s,r),ur(r),m&4){if(r.stateNode===null)throw Error(n(162));m=r.memoizedProps,f=r.stateNode;try{f.nodeValue=m}catch(Ht){Xn(r,r.return,Ht)}}break;case 3:if(yv=null,b=$a,$a=gv(s.containerInfo),cr(s,r),$a=b,ur(r),m&4&&f!==null&&f.memoizedState.isDehydrated)try{jd(s.containerInfo)}catch(Ht){Xn(r,r.return,Ht)}ls&&(ls=!1,Bd(r));break;case 4:m=$a,$a=gv(r.stateNode.containerInfo),cr(s,r),ur(r),$a=m;break;case 12:cr(s,r),ur(r);break;case 31:cr(s,r),ur(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,co(r,m)));break;case 13:cr(s,r),ur(r),r.child.flags&8192&&r.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Ic=F()),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,co(r,m)));break;case 22:b=r.memoizedState!==null;var ue=f!==null&&f.memoizedState!==null,Ne=Za,We=ci;if(Za=Ne||b,ci=We||ue,cr(s,r),ci=We,Za=Ne,ur(r),m&8192)e:for(s=r.stateNode,s._visibility=b?s._visibility&-2:s._visibility|1,b&&(f===null||ue||Za||ci||zs(r)),f=null,s=r;;){if(s.tag===5||s.tag===26){if(f===null){ue=f=s;try{if(w=ue.stateNode,b)U=w.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{X=ue.stateNode;var $e=ue.memoizedProps.style,Le=$e!=null&&$e.hasOwnProperty("display")?$e.display:null;X.style.display=Le==null||typeof Le=="boolean"?"":(""+Le).trim()}}catch(Ht){Xn(ue,ue.return,Ht)}}}else if(s.tag===6){if(f===null){ue=s;try{ue.stateNode.nodeValue=b?"":ue.memoizedProps}catch(Ht){Xn(ue,ue.return,Ht)}}}else if(s.tag===18){if(f===null){ue=s;try{var ke=ue.stateNode;b?BM(ke,!0):BM(ue.stateNode,!1)}catch(Ht){Xn(ue,ue.return,Ht)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;f===s&&(f=null),s=s.return}f===s&&(f=null),s.sibling.return=s.return,s=s.sibling}m&4&&(m=r.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,co(r,f))));break;case 19:cr(s,r),ur(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,co(r,m)));break;case 30:break;case 21:break;default:cr(s,r),ur(r)}}function ur(r){var s=r.flags;if(s&2){try{for(var f,m=r.return;m!==null;){if(_i(m)){f=m;break}m=m.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var b=f.stateNode,w=In(r);qr(r,w,b);break;case 5:var U=f.stateNode;f.flags&32&&(Ir(U,""),f.flags&=-33);var X=In(r);qr(r,X,U);break;case 3:case 4:var ue=f.stateNode.containerInfo,Ne=In(r);Ps(r,Ne,ue);break;default:throw Error(n(161))}}catch(We){Xn(r,r.return,We)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Bd(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;Bd(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Qa(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)bi(r,s.alternate,s),s=s.sibling}function zs(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Mr(4,s,s.return),zs(s);break;case 1:Er(s,s.return);var f=s.stateNode;typeof f.componentWillUnmount=="function"&&yr(s,s.return,f),zs(s);break;case 27:vm(s.stateNode);case 26:case 5:Er(s,s.return),zs(s);break;case 22:s.memoizedState===null&&zs(s);break;case 30:zs(s);break;default:zs(s)}r=r.sibling}}function Yr(r,s,f){for(f=f&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var m=s.alternate,b=r,w=s,U=w.flags;switch(w.tag){case 0:case 11:case 15:Yr(b,w,f),Ya(4,w);break;case 1:if(Yr(b,w,f),m=w,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Ne){Xn(m,m.return,Ne)}if(m=w,b=m.updateQueue,b!==null){var X=m.stateNode;try{var ue=b.shared.hiddenCallbacks;if(ue!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ue.length;b++)wc(ue[b],X)}catch(Ne){Xn(m,m.return,Ne)}}f&&U&64&&os(w),lo(w,w.return);break;case 27:zd(w);case 26:case 5:Yr(b,w,f),f&&m===null&&U&4&&ju(w),lo(w,w.return);break;case 12:Yr(b,w,f);break;case 31:Yr(b,w,f),f&&U&4&&Wo(b,w);break;case 13:Yr(b,w,f),f&&U&4&&Dc(b,w);break;case 22:w.memoizedState===null&&Yr(b,w,f),lo(w,w.return);break;case 30:break;default:Yr(b,w,f)}s=s.sibling}}function jo(r,s){var f=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==f&&(r!=null&&r.refCount++,f!=null&&Ml(f))}function zl(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ml(r))}function wr(r,s,f,m){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)dm(r,s,f,m),s=s.sibling}function dm(r,s,f,m){var b=s.flags;switch(s.tag){case 0:case 11:case 15:wr(r,s,f,m),b&2048&&Ya(9,s);break;case 1:wr(r,s,f,m);break;case 3:wr(r,s,f,m),b&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ml(r)));break;case 12:if(b&2048){wr(r,s,f,m),r=s.stateNode;try{var w=s.memoizedProps,U=w.id,X=w.onPostCommit;typeof X=="function"&&X(U,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ue){Xn(s,s.return,ue)}}else wr(r,s,f,m);break;case 31:wr(r,s,f,m);break;case 13:wr(r,s,f,m);break;case 23:break;case 22:w=s.stateNode,U=s.alternate,s.memoizedState!==null?w._visibility&2?wr(r,s,f,m):Fs(r,s):w._visibility&2?wr(r,s,f,m):(w._visibility|=2,Tr(r,s,f,m,(s.subtreeFlags&10256)!==0||!1)),b&2048&&jo(U,s);break;case 24:wr(r,s,f,m),b&2048&&zl(s.alternate,s);break;default:wr(r,s,f,m)}}function Tr(r,s,f,m,b){for(b=b&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var w=r,U=s,X=f,ue=m,Ne=U.flags;switch(U.tag){case 0:case 11:case 15:Tr(w,U,X,ue,b),Ya(8,U);break;case 23:break;case 22:var We=U.stateNode;U.memoizedState!==null?We._visibility&2?Tr(w,U,X,ue,b):Fs(w,U):(We._visibility|=2,Tr(w,U,X,ue,b)),b&&Ne&2048&&jo(U.alternate,U);break;case 24:Tr(w,U,X,ue,b),b&&Ne&2048&&zl(U.alternate,U);break;default:Tr(w,U,X,ue,b)}s=s.sibling}}function Fs(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var f=r,m=s,b=m.flags;switch(m.tag){case 22:Fs(f,m),b&2048&&jo(m.alternate,m);break;case 24:Fs(f,m),b&2048&&zl(m.alternate,m);break;default:Fs(f,m)}s=s.sibling}}var Fl=8192;function wa(r,s,f){if(r.subtreeFlags&Fl)for(r=r.child;r!==null;)kd(r,s,f),r=r.sibling}function kd(r,s,f){switch(r.tag){case 26:wa(r,s,f),r.flags&Fl&&r.memoizedState!==null&&bN(f,$a,r.memoizedState,r.memoizedProps);break;case 5:wa(r,s,f);break;case 3:case 4:var m=$a;$a=gv(r.stateNode.containerInfo),wa(r,s,f),$a=m;break;case 22:r.memoizedState===null&&(m=r.alternate,m!==null&&m.memoizedState!==null?(m=Fl,Fl=16777216,wa(r,s,f),Fl=m):wa(r,s,f));break;default:wa(r,s,f)}}function Bl(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function qo(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var f=0;f<s.length;f++){var m=s[f];xr=m,Pi(m,r)}Bl(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)la(r),r=r.sibling}function la(r){switch(r.tag){case 0:case 11:case 15:qo(r),r.flags&2048&&Mr(9,r,r.return);break;case 3:qo(r);break;case 12:qo(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,ca(r)):qo(r);break;default:qo(r)}}function ca(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var f=0;f<s.length;f++){var m=s[f];xr=m,Pi(m,r)}Bl(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Mr(8,s,s.return),ca(s);break;case 22:f=s.stateNode,f._visibility&2&&(f._visibility&=-3,ca(s));break;default:ca(s)}r=r.sibling}}function Pi(r,s){for(;xr!==null;){var f=xr;switch(f.tag){case 0:case 11:case 15:Mr(8,f,s);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Ml(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,xr=m;else e:for(f=r;xr!==null;){m=xr;var b=m.sibling,w=m.return;if(qu(m),m===f){xr=null;break e}if(b!==null){b.return=w,xr=b;break e}xr=w}}}var uo={getCacheForType:function(r){var s=ln($i),f=s.data.get(r);return f===void 0&&(f=r(),s.data.set(r,f)),f},cacheSignal:function(){return ln($i).controller.signal}},yn=typeof WeakMap=="function"?WeakMap:Map,Zt=0,dn=null,En=null,bn=0,Fn=0,Pr=null,Ja=!1,cs=!1,hm=!1,Ta=0,Ci=0,Bs=0,Yo=0,Yu=0,Zr=0,gi=0,kl=null,zi=null,Fi=!1,Ic=0,pm=0,ji=1/0,Ri=null,qi=null,ni=0,Aa=null,Lc=null,es=0,Uc=0,Oc=null,Zu=null,Zo=0,Vl=null;function Ca(){return(Zt&2)!==0&&bn!==0?bn&-bn:G.T!==null?Pe():ar()}function Rn(){if(Zr===0)if((bn&536870912)===0||Pn){var r=et;et<<=1,(et&3932160)===0&&(et=262144),Zr=r}else Zr=536870912;return r=ra.current,r!==null&&(r.flags|=32),Zr}function wn(r,s,f){(r===dn&&(Fn===2||Fn===9)||r.cancelPendingCommit!==null)&&($o(r,0),Ji(r,bn,Zr,!1)),gn(r,f),((Zt&2)===0||r!==dn)&&(r===dn&&((Zt&2)===0&&(Yo|=f),Ci===4&&Ji(r,bn,Zr,!1)),ht(r))}function Nn(r,s,f){if((Zt&6)!==0)throw Error(n(327));var m=!f&&(s&127)===0&&(s&r.expiredLanes)===0||ft(r,s),b=m?Ku(r,s):Kr(r,s,!0),w=m;do{if(b===0){cs&&!m&&Ji(r,s,0,!1);break}else{if(f=r.current.alternate,w&&!ii(f)){b=Kr(r,s,!1),w=!1;continue}if(b===2){if(w=s,r.errorRecoveryDisabledLanes&w)var U=0;else U=r.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){s=U;e:{var X=r;b=kl;var ue=X.current.memoizedState.isDehydrated;if(ue&&($o(X,U).flags|=256),U=Kr(X,U,!1),U!==2){if(hm&&!ue){X.errorRecoveryDisabledLanes|=w,Yo|=w,b=4;break e}w=zi,zi=b,w!==null&&(zi===null?zi=w:zi.push.apply(zi,w))}b=U}if(w=!1,b!==2)continue}}if(b===1){$o(r,0),Ji(r,s,0,!0);break}e:{switch(m=r,w=b,w){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:Ji(m,s,Zr,!Ja);break e;case 2:zi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(b=Ic+300-F(),10<b)){if(Ji(m,s,Zr,!Ja),_e(m,0,!0)!==0)break e;es=s,m.timeoutHandle=PM(Ln.bind(null,m,f,zi,Ri,Fi,s,Zr,Yo,gi,Ja,w,"Throttled",-0,0),b);break e}Ln(m,f,zi,Ri,Fi,s,Zr,Yo,gi,Ja,w,null,-0,0)}}break}while(!0);ht(r)}function Ln(r,s,f,m,b,w,U,X,ue,Ne,We,$e,Le,ke){if(r.timeoutHandle=-1,$e=s.subtreeFlags,$e&8192||($e&16785408)===16785408){$e={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ks},kd(s,w,$e);var Ht=(w&62914560)===w?Ic-F():(w&4194048)===w?pm-F():0;if(Ht=SN($e,Ht),Ht!==null){es=w,r.cancelPendingCommit=Ht(ho.bind(null,r,s,w,f,m,b,U,X,ue,We,$e,null,Le,ke)),Ji(r,w,U,!Ne);return}}ho(r,s,w,f,m,b,U,X,ue)}function ii(r){for(var s=r;;){var f=s.tag;if((f===0||f===11||f===15)&&s.flags&16384&&(f=s.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var b=f[m],w=b.getSnapshot;b=b.value;try{if(!Gr(w(),b))return!1}catch{return!1}}if(f=s.child,s.subtreeFlags&16384&&f!==null)f.return=s,s=f;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ji(r,s,f,m){s&=~Yu,s&=~Yo,r.suspendedLanes|=s,r.pingedLanes&=~s,m&&(r.warmLanes|=s),m=r.expirationTimes;for(var b=s;0<b;){var w=31-ie(b),U=1<<w;m[w]=-1,b&=~U}f!==0&&Dr(r,f,s)}function us(){return(Zt&6)===0?(Ot(0),!1):!0}function Ko(){if(En!==null){if(Fn===0)var r=En.return;else r=En,Rs=Po=null,zp(r),Cl=null,Rl=0,r=En;for(;r!==null;)Ea(r.alternate,r),r=r.return;En=null}}function $o(r,s){var f=r.timeoutHandle;f!==-1&&(r.timeoutHandle=-1,rN(f)),f=r.cancelPendingCommit,f!==null&&(r.cancelPendingCommit=null,f()),es=0,Ko(),dn=r,En=f=ta(r.current,null),bn=s,Fn=0,Pr=null,Ja=!1,cs=ft(r,s),hm=!1,gi=Zr=Yu=Yo=Bs=Ci=0,zi=kl=null,Fi=!1,(s&8)!==0&&(s|=s&32);var m=r.entangledLanes;if(m!==0)for(r=r.entanglements,m&=s;0<m;){var b=31-ie(m),w=1<<b;s|=r[b],m&=~w}return Ta=s,Ru(),f}function ks(r,s){vn=null,G.H=Rc,s===El||s===Mn?(s=Tl(),Fn=3):s===Lu?(s=Tl(),Fn=4):Fn=s===Cd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Pr=s,En===null&&(Ci=1,Ad(r,_a(s,r.current)))}function Ni(){var r=ra.current;return r===null?!0:(bn&4194048)===bn?jr===null:(bn&62914560)===bn||(bn&536870912)!==0?r===jr:!1}function fo(){var r=G.H;return G.H=Rc,r===null?Rc:r}function Qo(){var r=G.A;return G.A=uo,r}function Pc(){Ci=4,Ja||(bn&4194048)!==bn&&ra.current!==null||(cs=!0),(Bs&134217727)===0&&(Yo&134217727)===0||dn===null||Ji(dn,bn,Zr,!1)}function Kr(r,s,f){var m=Zt;Zt|=2;var b=fo(),w=Qo();(dn!==r||bn!==s)&&(Ri=null,$o(r,s)),s=!1;var U=Ci;e:do try{if(Fn!==0&&En!==null){var X=En,ue=Pr;switch(Fn){case 8:Ko(),U=6;break e;case 3:case 2:case 9:case 6:ra.current===null&&(s=!0);var Ne=Fn;if(Fn=0,Pr=null,Hl(r,X,ue,Ne),f&&cs){U=0;break e}break;default:Ne=Fn,Fn=0,Pr=null,Hl(r,X,ue,Ne)}}zc(),U=Ci;break}catch(We){ks(r,We)}while(!0);return s&&r.shellSuspendCounter++,Rs=Po=null,Zt=m,G.H=b,G.A=w,En===null&&(dn=null,bn=0,Ru()),U}function zc(){for(;En!==null;)Vd(En)}function Ku(r,s){var f=Zt;Zt|=2;var m=fo(),b=Qo();dn!==r||bn!==s?(Ri=null,ji=F()+500,$o(r,s)):cs=ft(r,s);e:do try{if(Fn!==0&&En!==null){s=En;var w=Pr;t:switch(Fn){case 1:Fn=0,Pr=null,Hl(r,s,w,1);break;case 2:case 9:if(ia(w)){Fn=0,Pr=null,$u(s);break}s=function(){Fn!==2&&Fn!==9||dn!==r||(Fn=7),ht(r)},w.then(s,s);break e;case 3:Fn=7;break e;case 4:Fn=5;break e;case 7:ia(w)?(Fn=0,Pr=null,$u(s)):(Fn=0,Pr=null,Hl(r,s,w,7));break;case 5:var U=null;switch(En.tag){case 26:U=En.memoizedState;case 5:case 27:var X=En;if(U?$M(U):X.stateNode.complete){Fn=0,Pr=null;var ue=X.sibling;if(ue!==null)En=ue;else{var Ne=X.return;Ne!==null?(En=Ne,Jo(Ne)):En=null}break t}}Fn=0,Pr=null,Hl(r,s,w,5);break;case 6:Fn=0,Pr=null,Hl(r,s,w,6);break;case 8:Ko(),Ci=6;break e;default:throw Error(n(462))}}ua();break}catch(We){ks(r,We)}while(!0);return Rs=Po=null,G.H=m,G.A=b,Zt=f,En!==null?0:(dn=null,bn=0,Ru(),Ci)}function ua(){for(;En!==null&&!Je();)Vd(En)}function Vd(r){var s=Pd(r.alternate,r,Ta);r.memoizedProps=r.pendingProps,s===null?Jo(r):En=s}function $u(r){var s=r,f=s.alternate;switch(s.tag){case 15:case 0:s=Hu(f,s,s.pendingProps,s.type,void 0,bn);break;case 11:s=Hu(f,s,s.pendingProps,s.type.render,s.ref,bn);break;case 5:zp(s);default:Ea(f,s),s=En=mc(s,Ta),s=Pd(f,s,Ta)}r.memoizedProps=r.pendingProps,s===null?Jo(r):En=s}function Hl(r,s,f,m){Rs=Po=null,zp(s),Cl=null,Rl=0;var b=s.return;try{if(or(r,b,s,f,bn)){Ci=1,Ad(r,_a(f,r.current)),En=null;return}}catch(w){if(b!==null)throw En=b,w;Ci=1,Ad(r,_a(f,r.current)),En=null;return}s.flags&32768?(Pn||m===1?r=!0:cs||(bn&536870912)!==0?r=!1:(Ja=r=!0,(m===2||m===9||m===3||m===6)&&(m=ra.current,m!==null&&m.tag===13&&(m.flags|=16384))),Qu(s,r)):Jo(s)}function Jo(r){var s=r;do{if((s.flags&32768)!==0){Qu(s,Ja);return}r=s.return;var f=Xu(s.alternate,s,Ta);if(f!==null){En=f;return}if(s=s.sibling,s!==null){En=s;return}En=s=r}while(s!==null);Ci===0&&(Ci=5)}function Qu(r,s){do{var f=qa(r.alternate,r);if(f!==null){f.flags&=32767,En=f;return}if(f=r.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!s&&(r=r.sibling,r!==null)){En=r;return}En=r=f}while(r!==null);Ci=6,En=null}function ho(r,s,f,m,b,w,U,X,ue){r.cancelPendingCommit=null;do Fc();while(ni!==0);if((Zt&6)!==0)throw Error(n(327));if(s!==null){if(s===r.current)throw Error(n(177));if(w=s.lanes|s.childLanes,w|=mr,kn(r,f,w,U,X,ue),r===dn&&(En=dn=null,bn=0),Lc=s,Aa=r,es=f,Uc=w,Oc=b,Zu=m,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,A(Oe,function(){return Hd(),null})):(r.callbackNode=null,r.callbackPriority=0),m=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||m){m=G.T,G.T=null,b=$.p,$.p=2,U=Zt,Zt|=4;try{Y_(r,s,f)}finally{Zt=U,$.p=b,G.T=m}}ni=1,er(),po(),Gl()}}function er(){if(ni===1){ni=0;var r=Aa,s=Lc,f=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||f){f=G.T,G.T=null;var m=$.p;$.p=2;var b=Zt;Zt|=4;try{Xo(s,r);var w=tb,U=p0(r.containerInfo),X=w.focusedElem,ue=w.selectionRange;if(U!==X&&X&&X.ownerDocument&&oi(X.ownerDocument.documentElement,X)){if(ue!==null&&xp(X)){var Ne=ue.start,We=ue.end;if(We===void 0&&(We=Ne),"selectionStart"in X)X.selectionStart=Ne,X.selectionEnd=Math.min(We,X.value.length);else{var $e=X.ownerDocument||document,Le=$e&&$e.defaultView||window;if(Le.getSelection){var ke=Le.getSelection(),Ht=X.textContent.length,sn=Math.min(ue.start,Ht),fi=ue.end===void 0?sn:Math.min(ue.end,Ht);!ke.extend&&sn>fi&&(U=fi,fi=sn,sn=U);var Se=dc(X,sn),xe=dc(X,fi);if(Se&&xe&&(ke.rangeCount!==1||ke.anchorNode!==Se.node||ke.anchorOffset!==Se.offset||ke.focusNode!==xe.node||ke.focusOffset!==xe.offset)){var Re=$e.createRange();Re.setStart(Se.node,Se.offset),ke.removeAllRanges(),sn>fi?(ke.addRange(Re),ke.extend(xe.node,xe.offset)):(Re.setEnd(xe.node,xe.offset),ke.addRange(Re))}}}}for($e=[],ke=X;ke=ke.parentNode;)ke.nodeType===1&&$e.push({element:ke,left:ke.scrollLeft,top:ke.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<$e.length;X++){var Ye=$e[X];Ye.element.scrollLeft=Ye.left,Ye.element.scrollTop=Ye.top}}Sv=!!eb,tb=eb=null}finally{Zt=b,$.p=m,G.T=f}}r.current=s,ni=2}}function po(){if(ni===2){ni=0;var r=Aa,s=Lc,f=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||f){f=G.T,G.T=null;var m=$.p;$.p=2;var b=Zt;Zt|=4;try{bi(r,s.alternate,s)}finally{Zt=b,$.p=m,G.T=f}}ni=3}}function Gl(){if(ni===4||ni===3){ni=0,Z();var r=Aa,s=Lc,f=es,m=Zu;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ni=5:(ni=0,Lc=Aa=null,Vs(r,r.pendingLanes));var b=r.pendingLanes;if(b===0&&(qi=null),Mi(f),s=s.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Qe,s,void 0,(s.current.flags&128)===128)}catch{}if(m!==null){s=G.T,b=$.p,$.p=2,G.T=null;try{for(var w=r.onRecoverableError,U=0;U<m.length;U++){var X=m[U];w(X.value,{componentStack:X.stack})}}finally{G.T=s,$.p=b}}(es&3)!==0&&Fc(),ht(r),b=r.pendingLanes,(f&261930)!==0&&(b&42)!==0?r===Vl?Zo++:(Zo=0,Vl=r):Zo=0,Ot(0)}}function Vs(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Ml(s)))}function Fc(){return er(),po(),Gl(),Hd()}function Hd(){if(ni!==5)return!1;var r=Aa,s=Uc;Uc=0;var f=Mi(es),m=G.T,b=$.p;try{$.p=32>f?32:f,G.T=null,f=Oc,Oc=null;var w=Aa,U=es;if(ni=0,Lc=Aa=null,es=0,(Zt&6)!==0)throw Error(n(331));var X=Zt;if(Zt|=4,la(w.current),dm(w,w.current,U,f),Zt=X,Ot(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Qe,w)}catch{}return!0}finally{$.p=b,G.T=m,Vs(r,s)}}function mm(r,s,f){s=_a(f,s),s=am(r.stateNode,s,2),r=Bo(r,s,2),r!==null&&(gn(r,2),ht(r))}function Xn(r,s,f){if(r.tag===3)mm(r,r,f);else for(;s!==null;){if(s.tag===3){mm(s,r,f);break}else if(s.tag===1){var m=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(qi===null||!qi.has(m))){r=_a(f,r),f=sm(2),m=Bo(s,f,2),m!==null&&(ov(f,m,s,r),gn(m,2),ht(m));break}}s=s.return}}function Ju(r,s,f){var m=r.pingCache;if(m===null){m=r.pingCache=new yn;var b=new Set;m.set(s,b)}else b=m.get(s),b===void 0&&(b=new Set,m.set(s,b));b.has(f)||(hm=!0,b.add(f),r=l.bind(null,r,s,f),s.then(r,r))}function l(r,s,f){var m=r.pingCache;m!==null&&m.delete(s),r.pingedLanes|=r.suspendedLanes&f,r.warmLanes&=~f,dn===r&&(bn&f)===f&&(Ci===4||Ci===3&&(bn&62914560)===bn&&300>F()-Ic?(Zt&2)===0&&$o(r,0):Yu|=f,gi===bn&&(gi=0)),ht(r)}function c(r,s){s===0&&(s=Kt()),r=Wr(r,s),r!==null&&(gn(r,s),ht(r))}function g(r){var s=r.memoizedState,f=0;s!==null&&(f=s.retryLane),c(r,f)}function _(r,s){var f=0;switch(r.tag){case 31:case 13:var m=r.stateNode,b=r.memoizedState;b!==null&&(f=b.retryLane);break;case 19:m=r.stateNode;break;case 22:m=r.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(s),c(r,f)}function A(r,s){return wt(r,s)}var D=null,W=null,de=!1,Fe=!1,ot=!1,Et=0;function ht(r){r!==W&&r.next===null&&(W===null?D=W=r:W=W.next=r),Fe=!0,de||(de=!0,Ee())}function Ot(r,s){if(!ot&&Fe){ot=!0;do for(var f=!1,m=D;m!==null;){if(r!==0){var b=m.pendingLanes;if(b===0)var w=0;else{var U=m.suspendedLanes,X=m.pingedLanes;w=(1<<31-ie(42|r)+1)-1,w&=b&~(U&~X),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(f=!0,Ie(m,w))}else w=bn,w=_e(m,m===dn?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||ft(m,w)||(f=!0,Ie(m,w));m=m.next}while(f);ot=!1}}function mn(){Yi()}function Yi(){Fe=de=!1;var r=0;Et!==0&&iN()&&(r=Et);for(var s=F(),f=null,m=D;m!==null;){var b=m.next,w=Bc(m,s);w===0?(m.next=null,f===null?D=b:f.next=b,b===null&&(W=f)):(f=m,(r!==0||(w&3)!==0)&&(Fe=!0)),m=b}ni!==0&&ni!==5||Ot(r),Et!==0&&(Et=0)}function Bc(r,s){for(var f=r.suspendedLanes,m=r.pingedLanes,b=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var U=31-ie(w),X=1<<U,ue=b[U];ue===-1?((X&f)===0||(X&m)!==0)&&(b[U]=Nt(X,s)):ue<=s&&(r.expiredLanes|=X),w&=~X}if(s=dn,f=bn,f=_e(r,r===s?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m=r.callbackNode,f===0||r===s&&(Fn===2||Fn===9)||r.cancelPendingCommit!==null)return m!==null&&m!==null&&kt(m),r.callbackNode=null,r.callbackPriority=0;if((f&3)===0||ft(r,f)){if(s=f&-f,s===r.callbackPriority)return s;switch(m!==null&&kt(m),Mi(f)){case 2:case 8:f=je;break;case 32:f=Oe;break;case 268435456:f=ct;break;default:f=Oe}return m=el.bind(null,r),f=wt(f,m),r.callbackPriority=s,r.callbackNode=f,s}return m!==null&&m!==null&&kt(m),r.callbackPriority=2,r.callbackNode=null,2}function el(r,s){if(ni!==0&&ni!==5)return r.callbackNode=null,r.callbackPriority=0,null;var f=r.callbackNode;if(Fc()&&r.callbackNode!==f)return null;var m=bn;return m=_e(r,r===dn?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m===0?null:(Nn(r,m,s),Bc(r,F()),r.callbackNode!=null&&r.callbackNode===f?el.bind(null,r):null)}function Ie(r,s){if(Fc())return null;Nn(r,s,!0)}function Ee(){aN(function(){(Zt&6)!==0?wt(Ue,mn):Yi()})}function Pe(){if(Et===0){var r=no;r===0&&(r=Me,Me<<=1,(Me&261888)===0&&(Me=256)),Et=r}return Et}function xt(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:mu(""+r)}function nn(r,s){var f=s.ownerDocument.createElement("input");return f.name=s.name,f.value=s.value,r.id&&f.setAttribute("form",r.id),s.parentNode.insertBefore(f,s),r=new FormData(r),f.parentNode.removeChild(f),r}function Di(r,s,f,m,b){if(s==="submit"&&f&&f.stateNode===b){var w=xt((b[B]||null).action),U=m.submitter;U&&(s=(s=U[B]||null)?xt(s.formAction):U.getAttribute("formAction"),s!==null&&(w=s,U=null));var X=new yu("action","action",null,m,b);r.push({event:X,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Et!==0){var ue=U?nn(b,U):new FormData(b);$p(f,{pending:!0,data:ue,method:b.method,action:w},null,ue)}}else typeof w=="function"&&(X.preventDefault(),ue=U?nn(b,U):new FormData(b),$p(f,{pending:!0,data:ue,method:b.method,action:w},w,ue))},currentTarget:b}]})}}for(var rn=0;rn<Au.length;rn++){var Vn=Au[rn],_r=Vn.toLowerCase(),Zn=Vn[0].toUpperCase()+Vn.slice(1);ka(_r,"on"+Zn)}ka(td,"onAnimationEnd"),ka(Tu,"onAnimationIteration"),ka(bp,"onAnimationStart"),ka("dblclick","onDoubleClick"),ka("focusin","onFocus"),ka("focusout","onBlur"),ka(g0,"onTransitionRun"),ka(k_,"onTransitionStart"),ka(v0,"onTransitionCancel"),ka(Sp,"onTransitionEnd"),Ge("onMouseEnter",["mouseout","mouseover"]),Ge("onMouseLeave",["mouseout","mouseover"]),Ge("onPointerEnter",["pointerout","pointerover"]),Ge("onPointerLeave",["pointerout","pointerover"]),ve("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ve("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ve("onBeforeInput",["compositionend","keypress","textInput","paste"]),ve("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ve("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ve("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ts));function CM(r,s){s=(s&4)!==0;for(var f=0;f<r.length;f++){var m=r[f],b=m.event;m=m.listeners;e:{var w=void 0;if(s)for(var U=m.length-1;0<=U;U--){var X=m[U],ue=X.instance,Ne=X.currentTarget;if(X=X.listener,ue!==w&&b.isPropagationStopped())break e;w=X,b.currentTarget=Ne;try{w(b)}catch(We){Cu(We)}b.currentTarget=null,w=ue}else for(U=0;U<m.length;U++){if(X=m[U],ue=X.instance,Ne=X.currentTarget,X=X.listener,ue!==w&&b.isPropagationStopped())break e;w=X,b.currentTarget=Ne;try{w(b)}catch(We){Cu(We)}b.currentTarget=null,w=ue}}}}function Bn(r,s){var f=s[ce];f===void 0&&(f=s[ce]=new Set);var m=r+"__bubble";f.has(m)||(RM(s,r,2,!1),f.add(m))}function K_(r,s,f){var m=0;s&&(m|=4),RM(f,r,m,s)}var hv="_reactListening"+Math.random().toString(36).slice(2);function $_(r){if(!r[hv]){r[hv]=!0,ge.forEach(function(f){f!=="selectionchange"&&(Z_.has(f)||K_(f,!1,r),K_(f,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[hv]||(s[hv]=!0,K_("selectionchange",!1,s))}}function RM(r,s,f,m){switch(rE(s)){case 2:var b=wN;break;case 8:b=TN;break;default:b=db}f=b.bind(null,s,f,r),b=void 0,!ip||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(b=!0),m?b!==void 0?r.addEventListener(s,f,{capture:!0,passive:b}):r.addEventListener(s,f,!0):b!==void 0?r.addEventListener(s,f,{passive:b}):r.addEventListener(s,f,!1)}function Q_(r,s,f,m,b){var w=m;if((s&1)===0&&(s&2)===0&&m!==null)e:for(;;){if(m===null)return;var U=m.tag;if(U===3||U===4){var X=m.stateNode.containerInfo;if(X===b)break;if(U===4)for(U=m.return;U!==null;){var ue=U.tag;if((ue===3||ue===4)&&U.stateNode.containerInfo===b)return;U=U.return}for(;X!==null;){if(U=yt(X),U===null)return;if(ue=U.tag,ue===5||ue===6||ue===26||ue===27){m=w=U;continue e}X=X.parentNode}}m=m.return}np(function(){var Ne=w,We=Hf(f),$e=[];e:{var Le=Ba.get(r);if(Le!==void 0){var ke=yu,Ht=r;switch(r){case"keypress":if(vu(f)===0)break e;case"keydown":case"keyup":ke=yl;break;case"focusin":Ht="focus",ke=jf;break;case"focusout":Ht="blur",ke=jf;break;case"beforeblur":case"afterblur":ke=jf;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ke=rp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ke=Kg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ke=n0;break;case td:case Tu:case bp:ke=z_;break;case Sp:ke=B_;break;case"scroll":case"scrollend":ke=Yg;break;case"wheel":ke=r0;break;case"copy":case"cut":case"paste":ke=Qg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ke=op;break;case"toggle":case"beforetoggle":ke=s0}var sn=(s&4)!==0,fi=!sn&&(r==="scroll"||r==="scrollend"),Se=sn?Le!==null?Le+"Capture":null:Le;sn=[];for(var xe=Ne,Re;xe!==null;){var Ye=xe;if(Re=Ye.stateNode,Ye=Ye.tag,Ye!==5&&Ye!==26&&Ye!==27||Re===null||Se===null||(Ye=ic(xe,Se),Ye!=null&&sn.push(gm(xe,Ye,Re))),fi)break;xe=xe.return}0<sn.length&&(Le=new ke(Le,Ht,null,f,We),$e.push({event:Le,listeners:sn}))}}if((s&7)===0){e:{if(Le=r==="mouseover"||r==="pointerover",ke=r==="mouseout"||r==="pointerout",Le&&f!==Vf&&(Ht=f.relatedTarget||f.fromElement)&&(yt(Ht)||Ht[q]))break e;if((ke||Le)&&(Le=We.window===We?We:(Le=We.ownerDocument)?Le.defaultView||Le.parentWindow:window,ke?(Ht=f.relatedTarget||f.toElement,ke=Ne,Ht=Ht?yt(Ht):null,Ht!==null&&(fi=o(Ht),sn=Ht.tag,Ht!==fi||sn!==5&&sn!==27&&sn!==6)&&(Ht=null)):(ke=null,Ht=Ne),ke!==Ht)){if(sn=rp,Ye="onMouseLeave",Se="onMouseEnter",xe="mouse",(r==="pointerout"||r==="pointerover")&&(sn=op,Ye="onPointerLeave",Se="onPointerEnter",xe="pointer"),fi=ke==null?Le:bt(ke),Re=Ht==null?Le:bt(Ht),Le=new sn(Ye,xe+"leave",ke,f,We),Le.target=fi,Le.relatedTarget=Re,Ye=null,yt(We)===Ne&&(sn=new sn(Se,xe+"enter",Ht,f,We),sn.target=Re,sn.relatedTarget=fi,Ye=sn),fi=Ye,ke&&Ht)t:{for(sn=QR,Se=ke,xe=Ht,Re=0,Ye=Se;Ye;Ye=sn(Ye))Re++;Ye=0;for(var tn=xe;tn;tn=sn(tn))Ye++;for(;0<Re-Ye;)Se=sn(Se),Re--;for(;0<Ye-Re;)xe=sn(xe),Ye--;for(;Re--;){if(Se===xe||xe!==null&&Se===xe.alternate){sn=Se;break t}Se=sn(Se),xe=sn(xe)}sn=null}else sn=null;ke!==null&&NM($e,Le,ke,sn,!1),Ht!==null&&fi!==null&&NM($e,fi,Ht,sn,!0)}}e:{if(Le=Ne?bt(Ne):window,ke=Le.nodeName&&Le.nodeName.toLowerCase(),ke==="select"||ke==="input"&&Le.type==="file")var Jn=pp;else if(hp(Le))if(bs)Jn=h0;else{Jn=vp;var Yt=f0}else ke=Le.nodeName,!ke||ke.toLowerCase()!=="input"||Le.type!=="checkbox"&&Le.type!=="radio"?Ne&&ml(Ne.elementType)&&(Jn=pp):Jn=d0;if(Jn&&(Jn=Jn(r,Ne))){Jf($e,Jn,f,We);break e}Yt&&Yt(r,Le,Ne),r==="focusout"&&Ne&&Le.type==="number"&&Ne.memoizedProps.value!=null&&Wn(Le,"number",Le.value)}switch(Yt=Ne?bt(Ne):window,r){case"focusin":(hp(Yt)||Yt.contentEditable==="true")&&(Ss=Yt,Ms=Ne,hc=null);break;case"focusout":hc=Ms=Ss=null;break;case"mousedown":ed=!0;break;case"contextmenu":case"mouseup":case"dragend":ed=!1,pc($e,f,We);break;case"selectionchange":if(m0)break;case"keydown":case"keyup":pc($e,f,We)}var An;if(xl)e:{switch(r){case"compositionstart":var Hn="onCompositionStart";break e;case"compositionend":Hn="onCompositionEnd";break e;case"compositionupdate":Hn="onCompositionUpdate";break e}Hn=void 0}else _l?Qf(r,f)&&(Hn="onCompositionEnd"):r==="keydown"&&f.keyCode===229&&(Hn="onCompositionStart");Hn&&(cp&&f.locale!=="ko"&&(_l||Hn!=="onCompositionStart"?Hn==="onCompositionEnd"&&_l&&(An=gu()):(xa=We,Wf="value"in xa?xa.value:xa.textContent,_l=!0)),Yt=pv(Ne,Hn),0<Yt.length&&(Hn=new qf(Hn,r,null,f,We),$e.push({event:Hn,listeners:Yt}),An?Hn.data=An:(An=up(f),An!==null&&(Hn.data=An)))),(An=$f?c0(r,f):fp(r,f))&&(Hn=pv(Ne,"onBeforeInput"),0<Hn.length&&(Yt=new qf("onBeforeInput","beforeinput",null,f,We),$e.push({event:Yt,listeners:Hn}),Yt.data=An)),Di($e,r,Ne,f,We)}CM($e,s)})}function gm(r,s,f){return{instance:r,listener:s,currentTarget:f}}function pv(r,s){for(var f=s+"Capture",m=[];r!==null;){var b=r,w=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=ic(r,f),b!=null&&m.unshift(gm(r,b,w)),b=ic(r,s),b!=null&&m.push(gm(r,b,w))),r.tag===3)return m;r=r.return}return[]}function QR(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function NM(r,s,f,m,b){for(var w=s._reactName,U=[];f!==null&&f!==m;){var X=f,ue=X.alternate,Ne=X.stateNode;if(X=X.tag,ue!==null&&ue===m)break;X!==5&&X!==26&&X!==27||Ne===null||(ue=Ne,b?(Ne=ic(f,w),Ne!=null&&U.unshift(gm(f,Ne,ue))):b||(Ne=ic(f,w),Ne!=null&&U.push(gm(f,Ne,ue)))),f=f.return}U.length!==0&&r.push({event:s,listeners:U})}var JR=/\r\n?/g,eN=/\u0000|\uFFFD/g;function DM(r){return(typeof r=="string"?r:""+r).replace(JR,`
`).replace(eN,"")}function IM(r,s){return s=DM(s),DM(r)===s}function ui(r,s,f,m,b,w){switch(f){case"children":typeof m=="string"?s==="body"||s==="textarea"&&m===""||Ir(r,m):(typeof m=="number"||typeof m=="bigint")&&s!=="body"&&Ir(r,""+m);break;case"className":$t(r,"class",m);break;case"tabIndex":$t(r,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":$t(r,f,m);break;case"style":xs(r,m,w);break;case"data":if(s!=="object"){$t(r,"data",m);break}case"src":case"href":if(m===""&&(s!=="a"||f!=="href")){r.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(f);break}m=mu(""+m),r.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){r.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(s!=="input"&&ui(r,s,"name",b.name,b,null),ui(r,s,"formEncType",b.formEncType,b,null),ui(r,s,"formMethod",b.formMethod,b,null),ui(r,s,"formTarget",b.formTarget,b,null)):(ui(r,s,"encType",b.encType,b,null),ui(r,s,"method",b.method,b,null),ui(r,s,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(f);break}m=mu(""+m),r.setAttribute(f,m);break;case"onClick":m!=null&&(r.onclick=Ks);break;case"onScroll":m!=null&&Bn("scroll",r);break;case"onScrollEnd":m!=null&&Bn("scrollend",r);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(f=m.__html,f!=null){if(b.children!=null)throw Error(n(60));r.innerHTML=f}}break;case"multiple":r.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":r.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){r.removeAttribute("xlink:href");break}f=mu(""+m),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(f,""+m):r.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(f,""):r.removeAttribute(f);break;case"capture":case"download":m===!0?r.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(f,m):r.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?r.setAttribute(f,m):r.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?r.removeAttribute(f):r.setAttribute(f,m);break;case"popover":Bn("beforetoggle",r),Bn("toggle",r),Dt(r,"popover",m);break;case"xlinkActuate":gt(r,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":gt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":gt(r,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":gt(r,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":gt(r,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":gt(r,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":gt(r,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":gt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":gt(r,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Dt(r,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=jg.get(f)||f,Dt(r,f,m))}}function J_(r,s,f,m,b,w){switch(f){case"style":xs(r,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(f=m.__html,f!=null){if(b.children!=null)throw Error(n(60));r.innerHTML=f}}break;case"children":typeof m=="string"?Ir(r,m):(typeof m=="number"||typeof m=="bigint")&&Ir(r,""+m);break;case"onScroll":m!=null&&Bn("scroll",r);break;case"onScrollEnd":m!=null&&Bn("scrollend",r);break;case"onClick":m!=null&&(r.onclick=Ks);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pe.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),s=f.slice(2,b?f.length-7:void 0),w=r[B]||null,w=w!=null?w[f]:null,typeof w=="function"&&r.removeEventListener(s,w,b),typeof m=="function")){typeof w!="function"&&w!==null&&(f in r?r[f]=null:r.hasAttribute(f)&&r.removeAttribute(f)),r.addEventListener(s,m,b);break e}f in r?r[f]=m:m===!0?r.setAttribute(f,""):Dt(r,f,m)}}}function $r(r,s,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bn("error",r),Bn("load",r);var m=!1,b=!1,w;for(w in f)if(f.hasOwnProperty(w)){var U=f[w];if(U!=null)switch(w){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:ui(r,s,w,U,f,null)}}b&&ui(r,s,"srcSet",f.srcSet,f,null),m&&ui(r,s,"src",f.src,f,null);return;case"input":Bn("invalid",r);var X=w=U=b=null,ue=null,Ne=null;for(m in f)if(f.hasOwnProperty(m)){var We=f[m];if(We!=null)switch(m){case"name":b=We;break;case"type":U=We;break;case"checked":ue=We;break;case"defaultChecked":Ne=We;break;case"value":w=We;break;case"defaultValue":X=We;break;case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(n(137,s));break;default:ui(r,s,m,We,f,null)}}Ei(r,w,X,ue,Ne,U,b,!1);return;case"select":Bn("invalid",r),m=U=w=null;for(b in f)if(f.hasOwnProperty(b)&&(X=f[b],X!=null))switch(b){case"value":w=X;break;case"defaultValue":U=X;break;case"multiple":m=X;default:ui(r,s,b,X,f,null)}s=w,f=U,r.multiple=!!m,s!=null?mi(r,!!m,s,!1):f!=null&&mi(r,!!m,f,!0);return;case"textarea":Bn("invalid",r),w=b=m=null;for(U in f)if(f.hasOwnProperty(U)&&(X=f[U],X!=null))switch(U){case"value":m=X;break;case"defaultValue":b=X;break;case"children":w=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(n(91));break;default:ui(r,s,U,X,f,null)}Ui(r,m,b,w);return;case"option":for(ue in f)f.hasOwnProperty(ue)&&(m=f[ue],m!=null)&&(ue==="selected"?r.selected=m&&typeof m!="function"&&typeof m!="symbol":ui(r,s,ue,m,f,null));return;case"dialog":Bn("beforetoggle",r),Bn("toggle",r),Bn("cancel",r),Bn("close",r);break;case"iframe":case"object":Bn("load",r);break;case"video":case"audio":for(m=0;m<ts.length;m++)Bn(ts[m],r);break;case"image":Bn("error",r),Bn("load",r);break;case"details":Bn("toggle",r);break;case"embed":case"source":case"link":Bn("error",r),Bn("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ne in f)if(f.hasOwnProperty(Ne)&&(m=f[Ne],m!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:ui(r,s,Ne,m,f,null)}return;default:if(ml(s)){for(We in f)f.hasOwnProperty(We)&&(m=f[We],m!==void 0&&J_(r,s,We,m,f,void 0));return}}for(X in f)f.hasOwnProperty(X)&&(m=f[X],m!=null&&ui(r,s,X,m,f,null))}function tN(r,s,f,m){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,U=null,X=null,ue=null,Ne=null,We=null;for(ke in f){var $e=f[ke];if(f.hasOwnProperty(ke)&&$e!=null)switch(ke){case"checked":break;case"value":break;case"defaultValue":ue=$e;default:m.hasOwnProperty(ke)||ui(r,s,ke,null,m,$e)}}for(var Le in m){var ke=m[Le];if($e=f[Le],m.hasOwnProperty(Le)&&(ke!=null||$e!=null))switch(Le){case"type":w=ke;break;case"name":b=ke;break;case"checked":Ne=ke;break;case"defaultChecked":We=ke;break;case"value":U=ke;break;case"defaultValue":X=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(n(137,s));break;default:ke!==$e&&ui(r,s,Le,ke,m,$e)}}Kn(r,U,X,ue,Ne,We,w,b);return;case"select":ke=U=X=Le=null;for(w in f)if(ue=f[w],f.hasOwnProperty(w)&&ue!=null)switch(w){case"value":break;case"multiple":ke=ue;default:m.hasOwnProperty(w)||ui(r,s,w,null,m,ue)}for(b in m)if(w=m[b],ue=f[b],m.hasOwnProperty(b)&&(w!=null||ue!=null))switch(b){case"value":Le=w;break;case"defaultValue":X=w;break;case"multiple":U=w;default:w!==ue&&ui(r,s,b,w,m,ue)}s=X,f=U,m=ke,Le!=null?mi(r,!!f,Le,!1):!!m!=!!f&&(s!=null?mi(r,!!f,s,!0):mi(r,!!f,f?[]:"",!1));return;case"textarea":ke=Le=null;for(X in f)if(b=f[X],f.hasOwnProperty(X)&&b!=null&&!m.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:ui(r,s,X,null,m,b)}for(U in m)if(b=m[U],w=f[U],m.hasOwnProperty(U)&&(b!=null||w!=null))switch(U){case"value":Le=b;break;case"defaultValue":ke=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==w&&ui(r,s,U,b,m,w)}Yn(r,Le,ke);return;case"option":for(var Ht in f)Le=f[Ht],f.hasOwnProperty(Ht)&&Le!=null&&!m.hasOwnProperty(Ht)&&(Ht==="selected"?r.selected=!1:ui(r,s,Ht,null,m,Le));for(ue in m)Le=m[ue],ke=f[ue],m.hasOwnProperty(ue)&&Le!==ke&&(Le!=null||ke!=null)&&(ue==="selected"?r.selected=Le&&typeof Le!="function"&&typeof Le!="symbol":ui(r,s,ue,Le,m,ke));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var sn in f)Le=f[sn],f.hasOwnProperty(sn)&&Le!=null&&!m.hasOwnProperty(sn)&&ui(r,s,sn,null,m,Le);for(Ne in m)if(Le=m[Ne],ke=f[Ne],m.hasOwnProperty(Ne)&&Le!==ke&&(Le!=null||ke!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(n(137,s));break;default:ui(r,s,Ne,Le,m,ke)}return;default:if(ml(s)){for(var fi in f)Le=f[fi],f.hasOwnProperty(fi)&&Le!==void 0&&!m.hasOwnProperty(fi)&&J_(r,s,fi,void 0,m,Le);for(We in m)Le=m[We],ke=f[We],!m.hasOwnProperty(We)||Le===ke||Le===void 0&&ke===void 0||J_(r,s,We,Le,m,ke);return}}for(var Se in f)Le=f[Se],f.hasOwnProperty(Se)&&Le!=null&&!m.hasOwnProperty(Se)&&ui(r,s,Se,null,m,Le);for($e in m)Le=m[$e],ke=f[$e],!m.hasOwnProperty($e)||Le===ke||Le==null&&ke==null||ui(r,s,$e,Le,m,ke)}function LM(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nN(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,f=performance.getEntriesByType("resource"),m=0;m<f.length;m++){var b=f[m],w=b.transferSize,U=b.initiatorType,X=b.duration;if(w&&X&&LM(U)){for(U=0,X=b.responseEnd,m+=1;m<f.length;m++){var ue=f[m],Ne=ue.startTime;if(Ne>X)break;var We=ue.transferSize,$e=ue.initiatorType;We&&LM($e)&&(ue=ue.responseEnd,U+=We*(ue<X?1:(X-Ne)/(ue-Ne)))}if(--m,s+=8*(w+U)/(b.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var eb=null,tb=null;function mv(r){return r.nodeType===9?r:r.ownerDocument}function UM(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function OM(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function nb(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ib=null;function iN(){var r=window.event;return r&&r.type==="popstate"?r===ib?!1:(ib=r,!0):(ib=null,!1)}var PM=typeof setTimeout=="function"?setTimeout:void 0,rN=typeof clearTimeout=="function"?clearTimeout:void 0,zM=typeof Promise=="function"?Promise:void 0,aN=typeof queueMicrotask=="function"?queueMicrotask:typeof zM<"u"?function(r){return zM.resolve(null).then(r).catch(sN)}:PM;function sN(r){setTimeout(function(){throw r})}function kc(r){return r==="head"}function FM(r,s){var f=s,m=0;do{var b=f.nextSibling;if(r.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(m===0){r.removeChild(b),jd(s);return}m--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")m++;else if(f==="html")vm(r.ownerDocument.documentElement);else if(f==="head"){f=r.ownerDocument.head,vm(f);for(var w=f.firstChild;w;){var U=w.nextSibling,X=w.nodeName;w[dt]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&w.rel.toLowerCase()==="stylesheet"||f.removeChild(w),w=U}}else f==="body"&&vm(r.ownerDocument.body);f=b}while(f);jd(s)}function BM(r,s){var f=r;r=0;do{var m=f.nextSibling;if(f.nodeType===1?s?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(s?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),m&&m.nodeType===8)if(f=m.data,f==="/$"){if(r===0)break;r--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||r++;f=m}while(f)}function rb(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var f=s;switch(s=s.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":rb(f),st(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}r.removeChild(f)}}function oN(r,s,f,m){for(;r.nodeType===1;){var b=f;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!m&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(m){if(!r[dt])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==b.rel||r.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||r.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||r.getAttribute("title")!==(b.title==null?null:b.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(b.src==null?null:b.src)||r.getAttribute("type")!==(b.type==null?null:b.type)||r.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=Hs(r.nextSibling),r===null)break}return null}function lN(r,s,f){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!f||(r=Hs(r.nextSibling),r===null))return null;return r}function kM(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Hs(r.nextSibling),r===null))return null;return r}function ab(r){return r.data==="$?"||r.data==="$~"}function sb(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function cN(r,s){var f=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||f.readyState!=="loading")s();else{var m=function(){s(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),r._reactRetry=m}}function Hs(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var ob=null;function VM(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var f=r.data;if(f==="/$"||f==="/&"){if(s===0)return Hs(r.nextSibling);s--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||s++}r=r.nextSibling}return null}function HM(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var f=r.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(s===0)return r;s--}else f!=="/$"&&f!=="/&"||s++}r=r.previousSibling}return null}function GM(r,s,f){switch(s=mv(f),r){case"html":if(r=s.documentElement,!r)throw Error(n(452));return r;case"head":if(r=s.head,!r)throw Error(n(453));return r;case"body":if(r=s.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function vm(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);st(r)}var Gs=new Map,WM=new Set;function gv(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Wl=$.d;$.d={f:uN,r:fN,D:dN,C:hN,L:pN,m:mN,X:vN,S:gN,M:yN};function uN(){var r=Wl.f(),s=us();return r||s}function fN(r){var s=vt(r);s!==null&&s.tag===5&&s.type==="form"?Q0(s):Wl.r(r)}var Gd=typeof document>"u"?null:document;function XM(r,s,f){var m=Gd;if(m&&typeof s=="string"&&s){var b=At(s);b='link[rel="'+r+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),WM.has(b)||(WM.add(b),r={rel:r,crossOrigin:f,href:s},m.querySelector(b)===null&&(s=m.createElement("link"),$r(s,"link",r),fe(s),m.head.appendChild(s)))}}function dN(r){Wl.D(r),XM("dns-prefetch",r,null)}function hN(r,s){Wl.C(r,s),XM("preconnect",r,s)}function pN(r,s,f){Wl.L(r,s,f);var m=Gd;if(m&&r&&s){var b='link[rel="preload"][as="'+At(s)+'"]';s==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+At(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+At(f.imageSizes)+'"]')):b+='[href="'+At(r)+'"]';var w=b;switch(s){case"style":w=Wd(r);break;case"script":w=Xd(r)}Gs.has(w)||(r=v({rel:"preload",href:s==="image"&&f&&f.imageSrcSet?void 0:r,as:s},f),Gs.set(w,r),m.querySelector(b)!==null||s==="style"&&m.querySelector(ym(w))||s==="script"&&m.querySelector(xm(w))||(s=m.createElement("link"),$r(s,"link",r),fe(s),m.head.appendChild(s)))}}function mN(r,s){Wl.m(r,s);var f=Gd;if(f&&r){var m=s&&typeof s.as=="string"?s.as:"script",b='link[rel="modulepreload"][as="'+At(m)+'"][href="'+At(r)+'"]',w=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Xd(r)}if(!Gs.has(w)&&(r=v({rel:"modulepreload",href:r},s),Gs.set(w,r),f.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(xm(w)))return}m=f.createElement("link"),$r(m,"link",r),fe(m),f.head.appendChild(m)}}}function gN(r,s,f){Wl.S(r,s,f);var m=Gd;if(m&&r){var b=k(m).hoistableStyles,w=Wd(r);s=s||"default";var U=b.get(w);if(!U){var X={loading:0,preload:null};if(U=m.querySelector(ym(w)))X.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":s},f),(f=Gs.get(w))&&lb(r,f);var ue=U=m.createElement("link");fe(ue),$r(ue,"link",r),ue._p=new Promise(function(Ne,We){ue.onload=Ne,ue.onerror=We}),ue.addEventListener("load",function(){X.loading|=1}),ue.addEventListener("error",function(){X.loading|=2}),X.loading|=4,vv(U,s,m)}U={type:"stylesheet",instance:U,count:1,state:X},b.set(w,U)}}}function vN(r,s){Wl.X(r,s);var f=Gd;if(f&&r){var m=k(f).hoistableScripts,b=Xd(r),w=m.get(b);w||(w=f.querySelector(xm(b)),w||(r=v({src:r,async:!0},s),(s=Gs.get(b))&&cb(r,s),w=f.createElement("script"),fe(w),$r(w,"link",r),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function yN(r,s){Wl.M(r,s);var f=Gd;if(f&&r){var m=k(f).hoistableScripts,b=Xd(r),w=m.get(b);w||(w=f.querySelector(xm(b)),w||(r=v({src:r,async:!0,type:"module"},s),(s=Gs.get(b))&&cb(r,s),w=f.createElement("script"),fe(w),$r(w,"link",r),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function jM(r,s,f,m){var b=(b=he.current)?gv(b):null;if(!b)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(s=Wd(f.href),f=k(b).hoistableStyles,m=f.get(s),m||(m={type:"style",instance:null,count:0,state:null},f.set(s,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){r=Wd(f.href);var w=k(b).hoistableStyles,U=w.get(r);if(U||(b=b.ownerDocument||b,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,U),(w=b.querySelector(ym(r)))&&!w._p&&(U.instance=w,U.state.loading=5),Gs.has(r)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Gs.set(r,f),w||xN(b,r,f,U.state))),s&&m===null)throw Error(n(528,""));return U}if(s&&m!==null)throw Error(n(529,""));return null;case"script":return s=f.async,f=f.src,typeof f=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xd(f),f=k(b).hoistableScripts,m=f.get(s),m||(m={type:"script",instance:null,count:0,state:null},f.set(s,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function Wd(r){return'href="'+At(r)+'"'}function ym(r){return'link[rel="stylesheet"]['+r+"]"}function qM(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function xN(r,s,f,m){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?m.loading=1:(s=r.createElement("link"),m.preload=s,s.addEventListener("load",function(){return m.loading|=1}),s.addEventListener("error",function(){return m.loading|=2}),$r(s,"link",f),fe(s),r.head.appendChild(s))}function Xd(r){return'[src="'+At(r)+'"]'}function xm(r){return"script[async]"+r}function YM(r,s,f){if(s.count++,s.instance===null)switch(s.type){case"style":var m=r.querySelector('style[data-href~="'+At(f.href)+'"]');if(m)return s.instance=m,fe(m),m;var b=v({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(r.ownerDocument||r).createElement("style"),fe(m),$r(m,"style",b),vv(m,f.precedence,r),s.instance=m;case"stylesheet":b=Wd(f.href);var w=r.querySelector(ym(b));if(w)return s.state.loading|=4,s.instance=w,fe(w),w;m=qM(f),(b=Gs.get(b))&&lb(m,b),w=(r.ownerDocument||r).createElement("link"),fe(w);var U=w;return U._p=new Promise(function(X,ue){U.onload=X,U.onerror=ue}),$r(w,"link",m),s.state.loading|=4,vv(w,f.precedence,r),s.instance=w;case"script":return w=Xd(f.src),(b=r.querySelector(xm(w)))?(s.instance=b,fe(b),b):(m=f,(b=Gs.get(w))&&(m=v({},f),cb(m,b)),r=r.ownerDocument||r,b=r.createElement("script"),fe(b),$r(b,"link",m),r.head.appendChild(b),s.instance=b);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(m=s.instance,s.state.loading|=4,vv(m,f.precedence,r));return s.instance}function vv(r,s,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,w=b,U=0;U<m.length;U++){var X=m[U];if(X.dataset.precedence===s)w=X;else if(w!==b)break}w?w.parentNode.insertBefore(r,w.nextSibling):(s=f.nodeType===9?f.head:f,s.insertBefore(r,s.firstChild))}function lb(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function cb(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var yv=null;function ZM(r,s,f){if(yv===null){var m=new Map,b=yv=new Map;b.set(f,m)}else b=yv,m=b.get(f),m||(m=new Map,b.set(f,m));if(m.has(r))return m;for(m.set(r,null),f=f.getElementsByTagName(r),b=0;b<f.length;b++){var w=f[b];if(!(w[dt]||w[pi]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var U=w.getAttribute(s)||"";U=r+U;var X=m.get(U);X?X.push(w):m.set(U,[w])}}return m}function KM(r,s,f){r=r.ownerDocument||r,r.head.insertBefore(f,s==="title"?r.querySelector("head > title"):null)}function _N(r,s,f){if(f===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(r=s.disabled,typeof s.precedence=="string"&&r==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function $M(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function bN(r,s,f,m){if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=Wd(m.href),w=s.querySelector(ym(b));if(w){s=w._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=xv.bind(r),s.then(r,r)),f.state.loading|=4,f.instance=w,fe(w);return}w=s.ownerDocument||s,m=qM(m),(b=Gs.get(b))&&lb(m,b),w=w.createElement("link"),fe(w);var U=w;U._p=new Promise(function(X,ue){U.onload=X,U.onerror=ue}),$r(w,"link",m),f.instance=w}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(f,s),(s=f.state.preload)&&(f.state.loading&3)===0&&(r.count++,f=xv.bind(r),s.addEventListener("load",f),s.addEventListener("error",f))}}var ub=0;function SN(r,s){return r.stylesheets&&r.count===0&&bv(r,r.stylesheets),0<r.count||0<r.imgCount?function(f){var m=setTimeout(function(){if(r.stylesheets&&bv(r,r.stylesheets),r.unsuspend){var w=r.unsuspend;r.unsuspend=null,w()}},6e4+s);0<r.imgBytes&&ub===0&&(ub=62500*nN());var b=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&bv(r,r.stylesheets),r.unsuspend)){var w=r.unsuspend;r.unsuspend=null,w()}},(r.imgBytes>ub?50:800)+s);return r.unsuspend=f,function(){r.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function xv(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bv(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var _v=null;function bv(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,_v=new Map,s.forEach(MN,r),_v=null,xv.call(r))}function MN(r,s){if(!(s.state.loading&4)){var f=_v.get(r);if(f)var m=f.get(null);else{f=new Map,_v.set(r,f);for(var b=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var U=b[w];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(f.set(U.dataset.precedence,U),m=U)}m&&f.set(null,m)}b=s.instance,U=b.getAttribute("data-precedence"),w=f.get(U)||m,w===m&&f.set(null,b),f.set(U,b),this.count++,m=xv.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),w?w.parentNode.insertBefore(b,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(b,r.firstChild)),s.state.loading|=4}}var _m={$$typeof:I,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function EN(r,s,f,m,b,w,U,X,ue){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cn(0),this.hiddenUpdates=cn(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function QM(r,s,f,m,b,w,U,X,ue,Ne,We,$e){return r=new EN(r,s,f,U,ue,Ne,We,$e,X),s=1,w===!0&&(s|=24),w=wi(3,null,null,s),r.current=w,w.stateNode=r,s=Ep(),s.refCount++,r.pooledCache=s,s.refCount++,w.memoizedState={element:m,isDehydrated:f,cache:s},Ou(w),r}function JM(r){return r?(r=Do,r):Do}function eE(r,s,f,m,b,w){b=JM(b),m.context===null?m.context=b:m.pendingContext=b,m=ro(s),m.payload={element:f},w=w===void 0?null:w,w!==null&&(m.callback=w),f=Bo(r,m,s),f!==null&&(wn(f,r,s),ko(f,r,s))}function tE(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var f=r.retryLane;r.retryLane=f!==0&&f<s?f:s}}function fb(r,s){tE(r,s),(r=r.alternate)&&tE(r,s)}function nE(r){if(r.tag===13||r.tag===31){var s=Wr(r,67108864);s!==null&&wn(s,r,67108864),fb(r,67108864)}}function iE(r){if(r.tag===13||r.tag===31){var s=Ca();s=ea(s);var f=Wr(r,s);f!==null&&wn(f,r,s),fb(r,s)}}var Sv=!0;function wN(r,s,f,m){var b=G.T;G.T=null;var w=$.p;try{$.p=2,db(r,s,f,m)}finally{$.p=w,G.T=b}}function TN(r,s,f,m){var b=G.T;G.T=null;var w=$.p;try{$.p=8,db(r,s,f,m)}finally{$.p=w,G.T=b}}function db(r,s,f,m){if(Sv){var b=hb(m);if(b===null)Q_(r,s,m,Mv,f),aE(r,m);else if(CN(b,r,s,f,m))m.stopPropagation();else if(aE(r,m),s&4&&-1<AN.indexOf(r)){for(;b!==null;){var w=vt(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var U=rt(w.pendingLanes);if(U!==0){var X=w;for(X.pendingLanes|=2,X.entangledLanes|=2;U;){var ue=1<<31-ie(U);X.entanglements[1]|=ue,U&=~ue}ht(w),(Zt&6)===0&&(ji=F()+500,Ot(0))}}break;case 31:case 13:X=Wr(w,2),X!==null&&wn(X,w,2),us(),fb(w,2)}if(w=hb(m),w===null&&Q_(r,s,m,Mv,f),w===b)break;b=w}b!==null&&m.stopPropagation()}else Q_(r,s,m,null,f)}}function hb(r){return r=Hf(r),pb(r)}var Mv=null;function pb(r){if(Mv=null,r=yt(r),r!==null){var s=o(r);if(s===null)r=null;else{var f=s.tag;if(f===13){if(r=u(s),r!==null)return r;r=null}else if(f===31){if(r=d(s),r!==null)return r;r=null}else if(f===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Mv=r,null}function rE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ye()){case Ue:return 2;case je:return 8;case Oe:case Mt:return 32;case ct:return 268435456;default:return 32}default:return 32}}var mb=!1,Vc=null,Hc=null,Gc=null,bm=new Map,Sm=new Map,Wc=[],AN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function aE(r,s){switch(r){case"focusin":case"focusout":Vc=null;break;case"dragenter":case"dragleave":Hc=null;break;case"mouseover":case"mouseout":Gc=null;break;case"pointerover":case"pointerout":bm.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sm.delete(s.pointerId)}}function Mm(r,s,f,m,b,w){return r===null||r.nativeEvent!==w?(r={blockedOn:s,domEventName:f,eventSystemFlags:m,nativeEvent:w,targetContainers:[b]},s!==null&&(s=vt(s),s!==null&&nE(s)),r):(r.eventSystemFlags|=m,s=r.targetContainers,b!==null&&s.indexOf(b)===-1&&s.push(b),r)}function CN(r,s,f,m,b){switch(s){case"focusin":return Vc=Mm(Vc,r,s,f,m,b),!0;case"dragenter":return Hc=Mm(Hc,r,s,f,m,b),!0;case"mouseover":return Gc=Mm(Gc,r,s,f,m,b),!0;case"pointerover":var w=b.pointerId;return bm.set(w,Mm(bm.get(w)||null,r,s,f,m,b)),!0;case"gotpointercapture":return w=b.pointerId,Sm.set(w,Mm(Sm.get(w)||null,r,s,f,m,b)),!0}return!1}function sE(r){var s=yt(r.target);if(s!==null){var f=o(s);if(f!==null){if(s=f.tag,s===13){if(s=u(f),s!==null){r.blockedOn=s,on(r.priority,function(){iE(f)});return}}else if(s===31){if(s=d(f),s!==null){r.blockedOn=s,on(r.priority,function(){iE(f)});return}}else if(s===3&&f.stateNode.current.memoizedState.isDehydrated){r.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ev(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var f=hb(r.nativeEvent);if(f===null){f=r.nativeEvent;var m=new f.constructor(f.type,f);Vf=m,f.target.dispatchEvent(m),Vf=null}else return s=vt(f),s!==null&&nE(s),r.blockedOn=f,!1;s.shift()}return!0}function oE(r,s,f){Ev(r)&&f.delete(s)}function RN(){mb=!1,Vc!==null&&Ev(Vc)&&(Vc=null),Hc!==null&&Ev(Hc)&&(Hc=null),Gc!==null&&Ev(Gc)&&(Gc=null),bm.forEach(oE),Sm.forEach(oE)}function wv(r,s){r.blockedOn===s&&(r.blockedOn=null,mb||(mb=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,RN)))}var Tv=null;function lE(r){Tv!==r&&(Tv=r,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Tv===r&&(Tv=null);for(var s=0;s<r.length;s+=3){var f=r[s],m=r[s+1],b=r[s+2];if(typeof m!="function"){if(pb(m||f)===null)continue;break}var w=vt(f);w!==null&&(r.splice(s,3),s-=3,$p(w,{pending:!0,data:b,method:f.method,action:m},m,b))}}))}function jd(r){function s(ue){return wv(ue,r)}Vc!==null&&wv(Vc,r),Hc!==null&&wv(Hc,r),Gc!==null&&wv(Gc,r),bm.forEach(s),Sm.forEach(s);for(var f=0;f<Wc.length;f++){var m=Wc[f];m.blockedOn===r&&(m.blockedOn=null)}for(;0<Wc.length&&(f=Wc[0],f.blockedOn===null);)sE(f),f.blockedOn===null&&Wc.shift();if(f=(r.ownerDocument||r).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var b=f[m],w=f[m+1],U=b[B]||null;if(typeof w=="function")U||lE(f);else if(U){var X=null;if(w&&w.hasAttribute("formAction")){if(b=w,U=w[B]||null)X=U.formAction;else if(pb(b)!==null)continue}else X=U.action;typeof X=="function"?f[m+1]=X:(f.splice(m,3),m-=3),lE(f)}}}function cE(){function r(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(U){return b=U})},focusReset:"manual",scroll:"manual"})}function s(){b!==null&&(b(),b=null),m||setTimeout(f,20)}function f(){if(!m&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(f,100),function(){m=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),b!==null&&(b(),b=null)}}}function gb(r){this._internalRoot=r}Av.prototype.render=gb.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(n(409));var f=s.current,m=Ca();eE(f,m,r,s,null,null)},Av.prototype.unmount=gb.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;eE(r.current,2,null,r,null,null),us(),s[q]=null}};function Av(r){this._internalRoot=r}Av.prototype.unstable_scheduleHydration=function(r){if(r){var s=ar();r={blockedOn:null,target:r,priority:s};for(var f=0;f<Wc.length&&s!==0&&s<Wc[f].priority;f++);Wc.splice(f,0,r),f===0&&sE(r)}};var uE=e.version;if(uE!=="19.2.3")throw Error(n(527,uE,"19.2.3"));$.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=p(s),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var NN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cv.isDisabled&&Cv.supportsFiber)try{Qe=Cv.inject(NN),qe=Cv}catch{}}return wm.createRoot=function(r,s){if(!a(r))throw Error(n(299));var f=!1,m="",b=av,w=im,U=rm;return s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(m=s.identifierPrefix),s.onUncaughtError!==void 0&&(b=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(U=s.onRecoverableError)),s=QM(r,1,!1,null,null,f,m,null,b,w,U,cE),r[q]=s.current,$_(r),new gb(s)},wm.hydrateRoot=function(r,s,f){if(!a(r))throw Error(n(299));var m=!1,b="",w=av,U=im,X=rm,ue=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(U=f.onCaughtError),f.onRecoverableError!==void 0&&(X=f.onRecoverableError),f.formState!==void 0&&(ue=f.formState)),s=QM(r,1,!0,s,f??null,m,b,ue,w,U,X,cE),s.context=JM(null),f=s.current,m=Ca(),m=ea(m),b=ro(m),b.callback=null,Bo(f,b,m),f=m,s.current.lanes=f,gn(s,f),ht(s),r[q]=s.current,$_(r),new Av(s)},wm.version="19.2.3",wm}var _E;function BN(){if(_E)return xb.exports;_E=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),xb.exports=FN(),xb.exports}var kN=BN();const VN=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HN=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),bE=i=>{const e=HN(i);return e.charAt(0).toUpperCase()+e.slice(1)},XT=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),GN=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var WN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const XN=j.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:u,...d},h)=>j.createElement("svg",{ref:h,...WN,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:XT("lucide",a),...!o&&!GN(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,y])=>j.createElement(p,y)),...Array.isArray(o)?o:[o]]));const Nr=(i,e)=>{const t=j.forwardRef(({className:n,...a},o)=>j.createElement(XN,{ref:o,iconNode:e,className:XT(`lucide-${VN(bE(i))}`,`lucide-${i}`,n),...a}));return t.displayName=bE(i),t};const jN=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],qN=Nr("box",jN);const YN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ZN=Nr("circle-check",YN);const KN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],$N=Nr("circle-dot",KN);const QN=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5v14a9 3 0 0 0 18 0V5",key:"aqi0yr"}]],JN=Nr("cylinder",QN);const eD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],OS=Nr("download",eD);const tD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],nD=Nr("image",tD);const iD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],rD=Nr("info",iD);const aD=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],SE=Nr("layers",aD);const sD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],oD=Nr("loader-circle",sD);const lD=[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],cD=Nr("octagon-x",lD);const uD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],fD=Nr("refresh-cw",uD);const dD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],hD=Nr("sparkles",dD);const pD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],mD=Nr("square",pD);const gD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vD=Nr("trash-2",gD);const yD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xD=Nr("triangle-alert",yD);const _D=[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]],bD=Nr("triangle",_D);const SD=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],MD=Nr("upload",SD);const ED=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wD=Nr("x",ED);const TD=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],AD=Nr("zoom-in",TD);function ME(i,e){if(typeof i=="function")return i(e);i!=null&&(i.current=e)}function Cg(...i){return e=>{let t=!1;const n=i.map(a=>{const o=ME(a,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():ME(i[a],null)}}}}function kr(...i){return j.useCallback(Cg(...i),i)}var CD=Symbol.for("react.lazy"),Hy=y1[" use ".trim().toString()];function RD(i){return typeof i=="object"&&i!==null&&"then"in i}function jT(i){return i!=null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===CD&&"_payload"in i&&RD(i._payload)}function qT(i){const e=DD(i),t=j.forwardRef((n,a)=>{let{children:o,...u}=n;jT(o)&&typeof Hy=="function"&&(o=Hy(o._payload));const d=j.Children.toArray(o),h=d.find(LD);if(h){const p=h.props.children,y=d.map(v=>v===h?j.Children.count(p)>1?j.Children.only(null):j.isValidElement(p)?p.props.children:null:v);return J.jsx(e,{...u,ref:a,children:j.isValidElement(p)?j.cloneElement(p,void 0,y):null})}return J.jsx(e,{...u,ref:a,children:o})});return t.displayName=`${i}.Slot`,t}var ND=qT("Slot");function DD(i){const e=j.forwardRef((t,n)=>{let{children:a,...o}=t;if(jT(a)&&typeof Hy=="function"&&(a=Hy(a._payload)),j.isValidElement(a)){const u=OD(a),d=UD(o,a.props);return a.type!==j.Fragment&&(d.ref=n?Cg(n,u):u),j.cloneElement(a,d)}return j.Children.count(a)>1?j.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var ID=Symbol("radix.slottable");function LD(i){return j.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===ID}function UD(i,e){const t={...e};for(const n in e){const a=i[n],o=e[n];/^on[A-Z]/.test(n)?a&&o?t[n]=(...d)=>{const h=o(...d);return a(...d),h}:a&&(t[n]=a):n==="style"?t[n]={...a,...o}:n==="className"&&(t[n]=[a,o].filter(Boolean).join(" "))}return{...i,...t}}function OD(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}function YT(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var a=i.length;for(e=0;e<a;e++)i[e]&&(t=YT(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function ZT(){for(var i,e,t=0,n="",a=arguments.length;t<a;t++)(i=arguments[t])&&(e=YT(i))&&(n&&(n+=" "),n+=e);return n}const EE=i=>typeof i=="boolean"?`${i}`:i===0?"0":i,wE=ZT,PD=(i,e)=>t=>{var n;if(e?.variants==null)return wE(i,t?.class,t?.className);const{variants:a,defaultVariants:o}=e,u=Object.keys(a).map(p=>{const y=t?.[p],v=o?.[p];if(y===null)return null;const x=EE(y)||EE(v);return a[p][x]}),d=t&&Object.entries(t).reduce((p,y)=>{let[v,x]=y;return x===void 0||(p[v]=x),p},{}),h=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((p,y)=>{let{class:v,className:x,...S}=y;return Object.entries(S).every(E=>{let[C,T]=E;return Array.isArray(T)?T.includes({...o,...d}[C]):{...o,...d}[C]===T})?[...p,v,x]:p},[]);return wE(i,u,h,t?.class,t?.className)},zD=(i,e)=>{const t=new Array(i.length+e.length);for(let n=0;n<i.length;n++)t[n]=i[n];for(let n=0;n<e.length;n++)t[i.length+n]=e[n];return t},FD=(i,e)=>({classGroupId:i,validator:e}),KT=(i=new Map,e=null,t)=>({nextPart:i,validators:e,classGroupId:t}),Gy="-",TE=[],BD="arbitrary..",kD=i=>{const e=HD(i),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=i;return{getClassGroupId:u=>{if(u.startsWith("[")&&u.endsWith("]"))return VD(u);const d=u.split(Gy),h=d[0]===""&&d.length>1?1:0;return $T(d,h,e)},getConflictingClassGroupIds:(u,d)=>{if(d){const h=n[u],p=t[u];return h?p?zD(p,h):h:p||TE}return t[u]||TE}}},$T=(i,e,t)=>{if(i.length-e===0)return t.classGroupId;const a=i[e],o=t.nextPart.get(a);if(o){const p=$T(i,e+1,o);if(p)return p}const u=t.validators;if(u===null)return;const d=e===0?i.join(Gy):i.slice(e).join(Gy),h=u.length;for(let p=0;p<h;p++){const y=u[p];if(y.validator(d))return y.classGroupId}},VD=i=>i.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=i.slice(1,-1),t=e.indexOf(":"),n=e.slice(0,t);return n?BD+n:void 0})(),HD=i=>{const{theme:e,classGroups:t}=i;return GD(t,e)},GD=(i,e)=>{const t=KT();for(const n in i){const a=i[n];x1(a,t,n,e)}return t},x1=(i,e,t,n)=>{const a=i.length;for(let o=0;o<a;o++){const u=i[o];WD(u,e,t,n)}},WD=(i,e,t,n)=>{if(typeof i=="string"){XD(i,e,t);return}if(typeof i=="function"){jD(i,e,t,n);return}qD(i,e,t,n)},XD=(i,e,t)=>{const n=i===""?e:QT(e,i);n.classGroupId=t},jD=(i,e,t,n)=>{if(YD(i)){x1(i(n),e,t,n);return}e.validators===null&&(e.validators=[]),e.validators.push(FD(t,i))},qD=(i,e,t,n)=>{const a=Object.entries(i),o=a.length;for(let u=0;u<o;u++){const[d,h]=a[u];x1(h,QT(e,d),t,n)}},QT=(i,e)=>{let t=i;const n=e.split(Gy),a=n.length;for(let o=0;o<a;o++){const u=n[o];let d=t.nextPart.get(u);d||(d=KT(),t.nextPart.set(u,d)),t=d}return t},YD=i=>"isThemeGetter"in i&&i.isThemeGetter===!0,ZD=i=>{if(i<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),n=Object.create(null);const a=(o,u)=>{t[o]=u,e++,e>i&&(e=0,n=t,t=Object.create(null))};return{get(o){let u=t[o];if(u!==void 0)return u;if((u=n[o])!==void 0)return a(o,u),u},set(o,u){o in t?t[o]=u:a(o,u)}}},PS="!",AE=":",KD=[],CE=(i,e,t,n,a)=>({modifiers:i,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:n,isExternal:a}),$D=i=>{const{prefix:e,experimentalParseClassName:t}=i;let n=a=>{const o=[];let u=0,d=0,h=0,p;const y=a.length;for(let C=0;C<y;C++){const T=a[C];if(u===0&&d===0){if(T===AE){o.push(a.slice(h,C)),h=C+1;continue}if(T==="/"){p=C;continue}}T==="["?u++:T==="]"?u--:T==="("?d++:T===")"&&d--}const v=o.length===0?a:a.slice(h);let x=v,S=!1;v.endsWith(PS)?(x=v.slice(0,-1),S=!0):v.startsWith(PS)&&(x=v.slice(1),S=!0);const E=p&&p>h?p-h:void 0;return CE(o,S,x,E)};if(e){const a=e+AE,o=n;n=u=>u.startsWith(a)?o(u.slice(a.length)):CE(KD,!1,u,void 0,!0)}if(t){const a=n;n=o=>t({className:o,parseClassName:a})}return n},QD=i=>{const e=new Map;return i.orderSensitiveModifiers.forEach((t,n)=>{e.set(t,1e6+n)}),t=>{const n=[];let a=[];for(let o=0;o<t.length;o++){const u=t[o],d=u[0]==="[",h=e.has(u);d||h?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(u)):a.push(u)}return a.length>0&&(a.sort(),n.push(...a)),n}},JD=i=>({cache:ZD(i.cacheSize),parseClassName:$D(i),sortModifiers:QD(i),...kD(i)}),eI=/\s+/,tI=(i,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:o}=e,u=[],d=i.trim().split(eI);let h="";for(let p=d.length-1;p>=0;p-=1){const y=d[p],{isExternal:v,modifiers:x,hasImportantModifier:S,baseClassName:E,maybePostfixModifierPosition:C}=t(y);if(v){h=y+(h.length>0?" "+h:h);continue}let T=!!C,M=n(T?E.substring(0,C):E);if(!M){if(!T){h=y+(h.length>0?" "+h:h);continue}if(M=n(E),!M){h=y+(h.length>0?" "+h:h);continue}T=!1}const R=x.length===0?"":x.length===1?x[0]:o(x).join(":"),I=S?R+PS:R,L=I+M;if(u.indexOf(L)>-1)continue;u.push(L);const z=a(M,T);for(let P=0;P<z.length;++P){const V=z[P];u.push(I+V)}h=y+(h.length>0?" "+h:h)}return h},nI=(...i)=>{let e=0,t,n,a="";for(;e<i.length;)(t=i[e++])&&(n=JT(t))&&(a&&(a+=" "),a+=n);return a},JT=i=>{if(typeof i=="string")return i;let e,t="";for(let n=0;n<i.length;n++)i[n]&&(e=JT(i[n]))&&(t&&(t+=" "),t+=e);return t},iI=(i,...e)=>{let t,n,a,o;const u=h=>{const p=e.reduce((y,v)=>v(y),i());return t=JD(p),n=t.cache.get,a=t.cache.set,o=d,d(h)},d=h=>{const p=n(h);if(p)return p;const y=tI(h,t);return a(h,y),y};return o=u,(...h)=>o(nI(...h))},rI=[],Ar=i=>{const e=t=>t[i]||rI;return e.isThemeGetter=!0,e},eA=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,tA=/^\((?:(\w[\w-]*):)?(.+)\)$/i,aI=/^\d+\/\d+$/,sI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,oI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,cI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qd=i=>aI.test(i),Un=i=>!!i&&!Number.isNaN(Number(i)),jc=i=>!!i&&Number.isInteger(Number(i)),Mb=i=>i.endsWith("%")&&Un(i.slice(0,-1)),Xl=i=>sI.test(i),fI=()=>!0,dI=i=>oI.test(i)&&!lI.test(i),nA=()=>!1,hI=i=>cI.test(i),pI=i=>uI.test(i),mI=i=>!Gt(i)&&!Wt(i),gI=i=>Wh(i,aA,nA),Gt=i=>eA.test(i),ef=i=>Wh(i,sA,dI),Eb=i=>Wh(i,bI,Un),RE=i=>Wh(i,iA,nA),vI=i=>Wh(i,rA,pI),Rv=i=>Wh(i,oA,hI),Wt=i=>tA.test(i),Tm=i=>Xh(i,sA),yI=i=>Xh(i,SI),NE=i=>Xh(i,iA),xI=i=>Xh(i,aA),_I=i=>Xh(i,rA),Nv=i=>Xh(i,oA,!0),Wh=(i,e,t)=>{const n=eA.exec(i);return n?n[1]?e(n[1]):t(n[2]):!1},Xh=(i,e,t=!1)=>{const n=tA.exec(i);return n?n[1]?e(n[1]):t:!1},iA=i=>i==="position"||i==="percentage",rA=i=>i==="image"||i==="url",aA=i=>i==="length"||i==="size"||i==="bg-size",sA=i=>i==="length",bI=i=>i==="number",SI=i=>i==="family-name",oA=i=>i==="shadow",MI=()=>{const i=Ar("color"),e=Ar("font"),t=Ar("text"),n=Ar("font-weight"),a=Ar("tracking"),o=Ar("leading"),u=Ar("breakpoint"),d=Ar("container"),h=Ar("spacing"),p=Ar("radius"),y=Ar("shadow"),v=Ar("inset-shadow"),x=Ar("text-shadow"),S=Ar("drop-shadow"),E=Ar("blur"),C=Ar("perspective"),T=Ar("aspect"),M=Ar("ease"),R=Ar("animate"),I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],z=()=>[...L(),Wt,Gt],P=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto","contain","none"],N=()=>[Wt,Gt,h],O=()=>[qd,"full","auto",...N()],K=()=>[jc,"none","subgrid",Wt,Gt],H=()=>["auto",{span:["full",jc,Wt,Gt]},jc,Wt,Gt],te=()=>[jc,"auto",Wt,Gt],ee=()=>["auto","min","max","fr",Wt,Gt],ae=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],se=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...N()],$=()=>[qd,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],le=()=>[i,Wt,Gt],be=()=>[...L(),NE,RE,{position:[Wt,Gt]}],Ae=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Y=()=>["auto","cover","contain",xI,gI,{size:[Wt,Gt]}],re=()=>[Mb,Tm,ef],me=()=>["","none","full",p,Wt,Gt],Te=()=>["",Un,Tm,ef],Ke=()=>["solid","dashed","dotted","double"],he=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],De=()=>[Un,Mb,NE,RE],ze=()=>["","none",E,Wt,Gt],pt=()=>["none",Un,Wt,Gt],It=()=>["none",Un,Wt,Gt],zt=()=>[Un,Wt,Gt],Jt=()=>[qd,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Xl],breakpoint:[Xl],color:[fI],container:[Xl],"drop-shadow":[Xl],ease:["in","out","in-out"],font:[mI],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Xl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Xl],shadow:[Xl],spacing:["px",Un],text:[Xl],"text-shadow":[Xl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",qd,Gt,Wt,T]}],container:["container"],columns:[{columns:[Un,Gt,Wt,d]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:z()}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:V()}],"overscroll-x":[{"overscroll-x":V()}],"overscroll-y":[{"overscroll-y":V()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[jc,"auto",Wt,Gt]}],basis:[{basis:[qd,"full","auto",d,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Un,qd,"auto","initial","none",Gt]}],grow:[{grow:["",Un,Wt,Gt]}],shrink:[{shrink:["",Un,Wt,Gt]}],order:[{order:[jc,"first","last","none",Wt,Gt]}],"grid-cols":[{"grid-cols":K()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":te()}],"col-end":[{"col-end":te()}],"grid-rows":[{"grid-rows":K()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":te()}],"row-end":[{"row-end":te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ee()}],"auto-rows":[{"auto-rows":ee()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...ae(),"normal"]}],"justify-items":[{"justify-items":[...se(),"normal"]}],"justify-self":[{"justify-self":["auto",...se()]}],"align-content":[{content:["normal",...ae()]}],"align-items":[{items:[...se(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...se(),{baseline:["","last"]}]}],"place-content":[{"place-content":ae()}],"place-items":[{"place-items":[...se(),"baseline"]}],"place-self":[{"place-self":["auto",...se()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:$()}],w:[{w:[d,"screen",...$()]}],"min-w":[{"min-w":[d,"screen","none",...$()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[u]},...$()]}],h:[{h:["screen","lh",...$()]}],"min-h":[{"min-h":["screen","lh","none",...$()]}],"max-h":[{"max-h":["screen","lh",...$()]}],"font-size":[{text:["base",t,Tm,ef]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Wt,Eb]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Mb,Gt]}],"font-family":[{font:[yI,Gt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Wt,Gt]}],"line-clamp":[{"line-clamp":[Un,"none",Wt,Eb]}],leading:[{leading:[o,...N()]}],"list-image":[{"list-image":["none",Wt,Gt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Wt,Gt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:le()}],"text-color":[{text:le()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ke(),"wavy"]}],"text-decoration-thickness":[{decoration:[Un,"from-font","auto",Wt,ef]}],"text-decoration-color":[{decoration:le()}],"underline-offset":[{"underline-offset":[Un,"auto",Wt,Gt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Wt,Gt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Wt,Gt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:be()}],"bg-repeat":[{bg:Ae()}],"bg-size":[{bg:Y()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},jc,Wt,Gt],radial:["",Wt,Gt],conic:[jc,Wt,Gt]},_I,vI]}],"bg-color":[{bg:le()}],"gradient-from-pos":[{from:re()}],"gradient-via-pos":[{via:re()}],"gradient-to-pos":[{to:re()}],"gradient-from":[{from:le()}],"gradient-via":[{via:le()}],"gradient-to":[{to:le()}],rounded:[{rounded:me()}],"rounded-s":[{"rounded-s":me()}],"rounded-e":[{"rounded-e":me()}],"rounded-t":[{"rounded-t":me()}],"rounded-r":[{"rounded-r":me()}],"rounded-b":[{"rounded-b":me()}],"rounded-l":[{"rounded-l":me()}],"rounded-ss":[{"rounded-ss":me()}],"rounded-se":[{"rounded-se":me()}],"rounded-ee":[{"rounded-ee":me()}],"rounded-es":[{"rounded-es":me()}],"rounded-tl":[{"rounded-tl":me()}],"rounded-tr":[{"rounded-tr":me()}],"rounded-br":[{"rounded-br":me()}],"rounded-bl":[{"rounded-bl":me()}],"border-w":[{border:Te()}],"border-w-x":[{"border-x":Te()}],"border-w-y":[{"border-y":Te()}],"border-w-s":[{"border-s":Te()}],"border-w-e":[{"border-e":Te()}],"border-w-t":[{"border-t":Te()}],"border-w-r":[{"border-r":Te()}],"border-w-b":[{"border-b":Te()}],"border-w-l":[{"border-l":Te()}],"divide-x":[{"divide-x":Te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ke(),"hidden","none"]}],"divide-style":[{divide:[...Ke(),"hidden","none"]}],"border-color":[{border:le()}],"border-color-x":[{"border-x":le()}],"border-color-y":[{"border-y":le()}],"border-color-s":[{"border-s":le()}],"border-color-e":[{"border-e":le()}],"border-color-t":[{"border-t":le()}],"border-color-r":[{"border-r":le()}],"border-color-b":[{"border-b":le()}],"border-color-l":[{"border-l":le()}],"divide-color":[{divide:le()}],"outline-style":[{outline:[...Ke(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Un,Wt,Gt]}],"outline-w":[{outline:["",Un,Tm,ef]}],"outline-color":[{outline:le()}],shadow:[{shadow:["","none",y,Nv,Rv]}],"shadow-color":[{shadow:le()}],"inset-shadow":[{"inset-shadow":["none",v,Nv,Rv]}],"inset-shadow-color":[{"inset-shadow":le()}],"ring-w":[{ring:Te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:le()}],"ring-offset-w":[{"ring-offset":[Un,ef]}],"ring-offset-color":[{"ring-offset":le()}],"inset-ring-w":[{"inset-ring":Te()}],"inset-ring-color":[{"inset-ring":le()}],"text-shadow":[{"text-shadow":["none",x,Nv,Rv]}],"text-shadow-color":[{"text-shadow":le()}],opacity:[{opacity:[Un,Wt,Gt]}],"mix-blend":[{"mix-blend":[...he(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":he()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Un]}],"mask-image-linear-from-pos":[{"mask-linear-from":De()}],"mask-image-linear-to-pos":[{"mask-linear-to":De()}],"mask-image-linear-from-color":[{"mask-linear-from":le()}],"mask-image-linear-to-color":[{"mask-linear-to":le()}],"mask-image-t-from-pos":[{"mask-t-from":De()}],"mask-image-t-to-pos":[{"mask-t-to":De()}],"mask-image-t-from-color":[{"mask-t-from":le()}],"mask-image-t-to-color":[{"mask-t-to":le()}],"mask-image-r-from-pos":[{"mask-r-from":De()}],"mask-image-r-to-pos":[{"mask-r-to":De()}],"mask-image-r-from-color":[{"mask-r-from":le()}],"mask-image-r-to-color":[{"mask-r-to":le()}],"mask-image-b-from-pos":[{"mask-b-from":De()}],"mask-image-b-to-pos":[{"mask-b-to":De()}],"mask-image-b-from-color":[{"mask-b-from":le()}],"mask-image-b-to-color":[{"mask-b-to":le()}],"mask-image-l-from-pos":[{"mask-l-from":De()}],"mask-image-l-to-pos":[{"mask-l-to":De()}],"mask-image-l-from-color":[{"mask-l-from":le()}],"mask-image-l-to-color":[{"mask-l-to":le()}],"mask-image-x-from-pos":[{"mask-x-from":De()}],"mask-image-x-to-pos":[{"mask-x-to":De()}],"mask-image-x-from-color":[{"mask-x-from":le()}],"mask-image-x-to-color":[{"mask-x-to":le()}],"mask-image-y-from-pos":[{"mask-y-from":De()}],"mask-image-y-to-pos":[{"mask-y-to":De()}],"mask-image-y-from-color":[{"mask-y-from":le()}],"mask-image-y-to-color":[{"mask-y-to":le()}],"mask-image-radial":[{"mask-radial":[Wt,Gt]}],"mask-image-radial-from-pos":[{"mask-radial-from":De()}],"mask-image-radial-to-pos":[{"mask-radial-to":De()}],"mask-image-radial-from-color":[{"mask-radial-from":le()}],"mask-image-radial-to-color":[{"mask-radial-to":le()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":L()}],"mask-image-conic-pos":[{"mask-conic":[Un]}],"mask-image-conic-from-pos":[{"mask-conic-from":De()}],"mask-image-conic-to-pos":[{"mask-conic-to":De()}],"mask-image-conic-from-color":[{"mask-conic-from":le()}],"mask-image-conic-to-color":[{"mask-conic-to":le()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:be()}],"mask-repeat":[{mask:Ae()}],"mask-size":[{mask:Y()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Wt,Gt]}],filter:[{filter:["","none",Wt,Gt]}],blur:[{blur:ze()}],brightness:[{brightness:[Un,Wt,Gt]}],contrast:[{contrast:[Un,Wt,Gt]}],"drop-shadow":[{"drop-shadow":["","none",S,Nv,Rv]}],"drop-shadow-color":[{"drop-shadow":le()}],grayscale:[{grayscale:["",Un,Wt,Gt]}],"hue-rotate":[{"hue-rotate":[Un,Wt,Gt]}],invert:[{invert:["",Un,Wt,Gt]}],saturate:[{saturate:[Un,Wt,Gt]}],sepia:[{sepia:["",Un,Wt,Gt]}],"backdrop-filter":[{"backdrop-filter":["","none",Wt,Gt]}],"backdrop-blur":[{"backdrop-blur":ze()}],"backdrop-brightness":[{"backdrop-brightness":[Un,Wt,Gt]}],"backdrop-contrast":[{"backdrop-contrast":[Un,Wt,Gt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Un,Wt,Gt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Un,Wt,Gt]}],"backdrop-invert":[{"backdrop-invert":["",Un,Wt,Gt]}],"backdrop-opacity":[{"backdrop-opacity":[Un,Wt,Gt]}],"backdrop-saturate":[{"backdrop-saturate":[Un,Wt,Gt]}],"backdrop-sepia":[{"backdrop-sepia":["",Un,Wt,Gt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Wt,Gt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Un,"initial",Wt,Gt]}],ease:[{ease:["linear","initial",M,Wt,Gt]}],delay:[{delay:[Un,Wt,Gt]}],animate:[{animate:["none",R,Wt,Gt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,Wt,Gt]}],"perspective-origin":[{"perspective-origin":z()}],rotate:[{rotate:pt()}],"rotate-x":[{"rotate-x":pt()}],"rotate-y":[{"rotate-y":pt()}],"rotate-z":[{"rotate-z":pt()}],scale:[{scale:It()}],"scale-x":[{"scale-x":It()}],"scale-y":[{"scale-y":It()}],"scale-z":[{"scale-z":It()}],"scale-3d":["scale-3d"],skew:[{skew:zt()}],"skew-x":[{"skew-x":zt()}],"skew-y":[{"skew-y":zt()}],transform:[{transform:[Wt,Gt,"","none","gpu","cpu"]}],"transform-origin":[{origin:z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Jt()}],"translate-x":[{"translate-x":Jt()}],"translate-y":[{"translate-y":Jt()}],"translate-z":[{"translate-z":Jt()}],"translate-none":["translate-none"],accent:[{accent:le()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:le()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Wt,Gt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Wt,Gt]}],fill:[{fill:["none",...le()]}],"stroke-w":[{stroke:[Un,Tm,ef,Eb]}],stroke:[{stroke:["none",...le()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},EI=iI(MI);function La(...i){return EI(ZT(i))}const wI=PD("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function Xs({className:i,variant:e="default",size:t="default",asChild:n=!1,...a}){const o=n?ND:"button";return J.jsx(o,{"code-path":"src/components/ui/button.tsx:52:5","data-slot":"button","data-variant":e,"data-size":t,className:La(wI({variant:e,size:t,className:i})),...a})}function bh({className:i,...e}){return J.jsx("div",{"code-path":"src/components/ui/card.tsx:7:5","data-slot":"card",className:La("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",i),...e})}function Wy({className:i,...e}){return J.jsx("div",{"code-path":"src/components/ui/card.tsx:66:5","data-slot":"card-content",className:La("px-6",i),...e})}function ki(i,e,{checkForDefaultPrevented:t=!0}={}){return function(a){if(i?.(a),t===!1||!a.defaultPrevented)return e?.(a)}}function TI(i,e){const t=j.createContext(e),n=o=>{const{children:u,...d}=o,h=j.useMemo(()=>d,Object.values(d));return J.jsx(t.Provider,{value:h,children:u})};n.displayName=i+"Provider";function a(o){const u=j.useContext(t);if(u)return u;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${i}\``)}return[n,a]}function jh(i,e=[]){let t=[];function n(o,u){const d=j.createContext(u),h=t.length;t=[...t,u];const p=v=>{const{scope:x,children:S,...E}=v,C=x?.[i]?.[h]||d,T=j.useMemo(()=>E,Object.values(E));return J.jsx(C.Provider,{value:T,children:S})};p.displayName=o+"Provider";function y(v,x){const S=x?.[i]?.[h]||d,E=j.useContext(S);if(E)return E;if(u!==void 0)return u;throw new Error(`\`${v}\` must be used within \`${o}\``)}return[p,y]}const a=()=>{const o=t.map(u=>j.createContext(u));return function(d){const h=d?.[i]||o;return j.useMemo(()=>({[`__scope${i}`]:{...d,[i]:h}}),[d,h])}};return a.scopeName=i,[n,AI(a,...e)]}function AI(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const u=n.reduce((d,{useScope:h,scopeName:p})=>{const v=h(o)[`__scope${p}`];return{...d,...v}},{});return j.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return t.scopeName=e.scopeName,t}function DE(i){const e=CI(i),t=j.forwardRef((n,a)=>{const{children:o,...u}=n,d=j.Children.toArray(o),h=d.find(NI);if(h){const p=h.props.children,y=d.map(v=>v===h?j.Children.count(p)>1?j.Children.only(null):j.isValidElement(p)?p.props.children:null:v);return J.jsx(e,{...u,ref:a,children:j.isValidElement(p)?j.cloneElement(p,void 0,y):null})}return J.jsx(e,{...u,ref:a,children:o})});return t.displayName=`${i}.Slot`,t}function CI(i){const e=j.forwardRef((t,n)=>{const{children:a,...o}=t;if(j.isValidElement(a)){const u=II(a),d=DI(o,a.props);return a.type!==j.Fragment&&(d.ref=n?Cg(n,u):u),j.cloneElement(a,d)}return j.Children.count(a)>1?j.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var RI=Symbol("radix.slottable");function NI(i){return j.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===RI}function DI(i,e){const t={...e};for(const n in e){const a=i[n],o=e[n];/^on[A-Z]/.test(n)?a&&o?t[n]=(...d)=>{const h=o(...d);return a(...d),h}:a&&(t[n]=a):n==="style"?t[n]={...a,...o}:n==="className"&&(t[n]=[a,o].filter(Boolean).join(" "))}return{...i,...t}}function II(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}function lA(i){const e=i+"CollectionProvider",[t,n]=jh(e),[a,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),u=C=>{const{scope:T,children:M}=C,R=_t.useRef(null),I=_t.useRef(new Map).current;return J.jsx(a,{scope:T,itemMap:I,collectionRef:R,children:M})};u.displayName=e;const d=i+"CollectionSlot",h=DE(d),p=_t.forwardRef((C,T)=>{const{scope:M,children:R}=C,I=o(d,M),L=kr(T,I.collectionRef);return J.jsx(h,{ref:L,children:R})});p.displayName=d;const y=i+"CollectionItemSlot",v="data-radix-collection-item",x=DE(y),S=_t.forwardRef((C,T)=>{const{scope:M,children:R,...I}=C,L=_t.useRef(null),z=kr(T,L),P=o(y,M);return _t.useEffect(()=>(P.itemMap.set(L,{ref:L,...I}),()=>{P.itemMap.delete(L)})),J.jsx(x,{[v]:"",ref:z,children:R})});S.displayName=y;function E(C){const T=o(i+"CollectionConsumer",C);return _t.useCallback(()=>{const R=T.collectionRef.current;if(!R)return[];const I=Array.from(R.querySelectorAll(`[${v}]`));return Array.from(T.itemMap.values()).sort((P,V)=>I.indexOf(P.ref.current)-I.indexOf(V.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:u,Slot:p,ItemSlot:S},E,n]}var Nh=globalThis?.document?j.useLayoutEffect:()=>{},LI=y1[" useId ".trim().toString()]||(()=>{}),UI=0;function Zm(i){const[e,t]=j.useState(LI());return Nh(()=>{t(n=>n??String(UI++))},[i]),i||(e?`radix-${e}`:"")}var cA=WT();const uA=Gx(cA);function OI(i){const e=PI(i),t=j.forwardRef((n,a)=>{const{children:o,...u}=n,d=j.Children.toArray(o),h=d.find(FI);if(h){const p=h.props.children,y=d.map(v=>v===h?j.Children.count(p)>1?j.Children.only(null):j.isValidElement(p)?p.props.children:null:v);return J.jsx(e,{...u,ref:a,children:j.isValidElement(p)?j.cloneElement(p,void 0,y):null})}return J.jsx(e,{...u,ref:a,children:o})});return t.displayName=`${i}.Slot`,t}function PI(i){const e=j.forwardRef((t,n)=>{const{children:a,...o}=t;if(j.isValidElement(a)){const u=kI(a),d=BI(o,a.props);return a.type!==j.Fragment&&(d.ref=n?Cg(n,u):u),j.cloneElement(a,d)}return j.Children.count(a)>1?j.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var zI=Symbol("radix.slottable");function FI(i){return j.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===zI}function BI(i,e){const t={...e};for(const n in e){const a=i[n],o=e[n];/^on[A-Z]/.test(n)?a&&o?t[n]=(...d)=>{const h=o(...d);return a(...d),h}:a&&(t[n]=a):n==="style"?t[n]={...a,...o}:n==="className"&&(t[n]=[a,o].filter(Boolean).join(" "))}return{...i,...t}}function kI(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}var VI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rr=VI.reduce((i,e)=>{const t=OI(`Primitive.${e}`),n=j.forwardRef((a,o)=>{const{asChild:u,...d}=a,h=u?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),J.jsx(h,{...d,ref:o})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{});function HI(i,e){i&&cA.flushSync(()=>i.dispatchEvent(e))}function Dh(i){const e=j.useRef(i);return j.useEffect(()=>{e.current=i}),j.useMemo(()=>(...t)=>e.current?.(...t),[])}var GI=y1[" useInsertionEffect ".trim().toString()]||Nh;function Rg({prop:i,defaultProp:e,onChange:t=()=>{},caller:n}){const[a,o,u]=WI({defaultProp:e,onChange:t}),d=i!==void 0,h=d?i:a;{const y=j.useRef(i!==void 0);j.useEffect(()=>{const v=y.current;v!==d&&console.warn(`${n} is changing from ${v?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),y.current=d},[d,n])}const p=j.useCallback(y=>{if(d){const v=XI(y)?y(i):y;v!==i&&u.current?.(v)}else o(y)},[d,i,o,u]);return[h,p]}function WI({defaultProp:i,onChange:e}){const[t,n]=j.useState(i),a=j.useRef(t),o=j.useRef(e);return GI(()=>{o.current=e},[e]),j.useEffect(()=>{a.current!==t&&(o.current?.(t),a.current=t)},[t,a]),[t,n,o]}function XI(i){return typeof i=="function"}var jI=j.createContext(void 0);function _1(i){const e=j.useContext(jI);return i||e||"ltr"}var wb="rovingFocusGroup.onEntryFocus",qI={bubbles:!1,cancelable:!0},Ng="RovingFocusGroup",[zS,fA,YI]=lA(Ng),[ZI,dA]=jh(Ng,[YI]),[KI,$I]=ZI(Ng),hA=j.forwardRef((i,e)=>J.jsx(zS.Provider,{scope:i.__scopeRovingFocusGroup,children:J.jsx(zS.Slot,{scope:i.__scopeRovingFocusGroup,children:J.jsx(QI,{...i,ref:e})})}));hA.displayName=Ng;var QI=j.forwardRef((i,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:a=!1,dir:o,currentTabStopId:u,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:y=!1,...v}=i,x=j.useRef(null),S=kr(e,x),E=_1(o),[C,T]=Rg({prop:u,defaultProp:d??null,onChange:h,caller:Ng}),[M,R]=j.useState(!1),I=Dh(p),L=fA(t),z=j.useRef(!1),[P,V]=j.useState(0);return j.useEffect(()=>{const N=x.current;if(N)return N.addEventListener(wb,I),()=>N.removeEventListener(wb,I)},[I]),J.jsx(KI,{scope:t,orientation:n,dir:E,loop:a,currentTabStopId:C,onItemFocus:j.useCallback(N=>T(N),[T]),onItemShiftTab:j.useCallback(()=>R(!0),[]),onFocusableItemAdd:j.useCallback(()=>V(N=>N+1),[]),onFocusableItemRemove:j.useCallback(()=>V(N=>N-1),[]),children:J.jsx(rr.div,{tabIndex:M||P===0?-1:0,"data-orientation":n,...v,ref:S,style:{outline:"none",...i.style},onMouseDown:ki(i.onMouseDown,()=>{z.current=!0}),onFocus:ki(i.onFocus,N=>{const O=!z.current;if(N.target===N.currentTarget&&O&&!M){const K=new CustomEvent(wb,qI);if(N.currentTarget.dispatchEvent(K),!K.defaultPrevented){const H=L().filter(G=>G.focusable),te=H.find(G=>G.active),ee=H.find(G=>G.id===C),se=[te,ee,...H].filter(Boolean).map(G=>G.ref.current);gA(se,y)}}z.current=!1}),onBlur:ki(i.onBlur,()=>R(!1))})})}),pA="RovingFocusGroupItem",mA=j.forwardRef((i,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:a=!1,tabStopId:o,children:u,...d}=i,h=Zm(),p=o||h,y=$I(pA,t),v=y.currentTabStopId===p,x=fA(t),{onFocusableItemAdd:S,onFocusableItemRemove:E,currentTabStopId:C}=y;return j.useEffect(()=>{if(n)return S(),()=>E()},[n,S,E]),J.jsx(zS.ItemSlot,{scope:t,id:p,focusable:n,active:a,children:J.jsx(rr.span,{tabIndex:v?0:-1,"data-orientation":y.orientation,...d,ref:e,onMouseDown:ki(i.onMouseDown,T=>{n?y.onItemFocus(p):T.preventDefault()}),onFocus:ki(i.onFocus,()=>y.onItemFocus(p)),onKeyDown:ki(i.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey){y.onItemShiftTab();return}if(T.target!==T.currentTarget)return;const M=tL(T,y.orientation,y.dir);if(M!==void 0){if(T.metaKey||T.ctrlKey||T.altKey||T.shiftKey)return;T.preventDefault();let I=x().filter(L=>L.focusable).map(L=>L.ref.current);if(M==="last")I.reverse();else if(M==="prev"||M==="next"){M==="prev"&&I.reverse();const L=I.indexOf(T.currentTarget);I=y.loop?nL(I,L+1):I.slice(L+1)}setTimeout(()=>gA(I))}}),children:typeof u=="function"?u({isCurrentTabStop:v,hasTabStop:C!=null}):u})})});mA.displayName=pA;var JI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function eL(i,e){return e!=="rtl"?i:i==="ArrowLeft"?"ArrowRight":i==="ArrowRight"?"ArrowLeft":i}function tL(i,e,t){const n=eL(i.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return JI[n]}function gA(i,e=!1){const t=document.activeElement;for(const n of i)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function nL(i,e){return i.map((t,n)=>i[(e+n)%i.length])}var iL=hA,rL=mA;function aL(i,e){return j.useReducer((t,n)=>e[t][n]??t,i)}var Dg=i=>{const{present:e,children:t}=i,n=sL(e),a=typeof t=="function"?t({present:n.isPresent}):j.Children.only(t),o=kr(n.ref,oL(a));return typeof t=="function"||n.isPresent?j.cloneElement(a,{ref:o}):null};Dg.displayName="Presence";function sL(i){const[e,t]=j.useState(),n=j.useRef(null),a=j.useRef(i),o=j.useRef("none"),u=i?"mounted":"unmounted",[d,h]=aL(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const p=Dv(n.current);o.current=d==="mounted"?p:"none"},[d]),Nh(()=>{const p=n.current,y=a.current;if(y!==i){const x=o.current,S=Dv(p);i?h("MOUNT"):S==="none"||p?.display==="none"?h("UNMOUNT"):h(y&&x!==S?"ANIMATION_OUT":"UNMOUNT"),a.current=i}},[i,h]),Nh(()=>{if(e){let p;const y=e.ownerDocument.defaultView??window,v=S=>{const C=Dv(n.current).includes(CSS.escape(S.animationName));if(S.target===e&&C&&(h("ANIMATION_END"),!a.current)){const T=e.style.animationFillMode;e.style.animationFillMode="forwards",p=y.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},x=S=>{S.target===e&&(o.current=Dv(n.current))};return e.addEventListener("animationstart",x),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{y.clearTimeout(p),e.removeEventListener("animationstart",x),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:j.useCallback(p=>{n.current=p?getComputedStyle(p):null,t(p)},[])}}function Dv(i){return i?.animationName||"none"}function oL(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}var Wx="Tabs",[lL]=jh(Wx,[dA]),vA=dA(),[cL,b1]=lL(Wx),yA=j.forwardRef((i,e)=>{const{__scopeTabs:t,value:n,onValueChange:a,defaultValue:o,orientation:u="horizontal",dir:d,activationMode:h="automatic",...p}=i,y=_1(d),[v,x]=Rg({prop:n,onChange:a,defaultProp:o??"",caller:Wx});return J.jsx(cL,{scope:t,baseId:Zm(),value:v,onValueChange:x,orientation:u,dir:y,activationMode:h,children:J.jsx(rr.div,{dir:y,"data-orientation":u,...p,ref:e})})});yA.displayName=Wx;var xA="TabsList",_A=j.forwardRef((i,e)=>{const{__scopeTabs:t,loop:n=!0,...a}=i,o=b1(xA,t),u=vA(t);return J.jsx(iL,{asChild:!0,...u,orientation:o.orientation,dir:o.dir,loop:n,children:J.jsx(rr.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:e})})});_A.displayName=xA;var bA="TabsTrigger",SA=j.forwardRef((i,e)=>{const{__scopeTabs:t,value:n,disabled:a=!1,...o}=i,u=b1(bA,t),d=vA(t),h=wA(u.baseId,n),p=TA(u.baseId,n),y=n===u.value;return J.jsx(rL,{asChild:!0,...d,focusable:!a,active:y,children:J.jsx(rr.button,{type:"button",role:"tab","aria-selected":y,"aria-controls":p,"data-state":y?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:h,...o,ref:e,onMouseDown:ki(i.onMouseDown,v=>{!a&&v.button===0&&v.ctrlKey===!1?u.onValueChange(n):v.preventDefault()}),onKeyDown:ki(i.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&u.onValueChange(n)}),onFocus:ki(i.onFocus,()=>{const v=u.activationMode!=="manual";!y&&!a&&v&&u.onValueChange(n)})})})});SA.displayName=bA;var MA="TabsContent",EA=j.forwardRef((i,e)=>{const{__scopeTabs:t,value:n,forceMount:a,children:o,...u}=i,d=b1(MA,t),h=wA(d.baseId,n),p=TA(d.baseId,n),y=n===d.value,v=j.useRef(y);return j.useEffect(()=>{const x=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(x)},[]),J.jsx(Dg,{present:a||y,children:({present:x})=>J.jsx(rr.div,{"data-state":y?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":h,hidden:!x,id:p,tabIndex:0,...u,ref:e,style:{...i.style,animationDuration:v.current?"0s":void 0},children:x&&o})})});EA.displayName=MA;function wA(i,e){return`${i}-trigger-${e}`}function TA(i,e){return`${i}-content-${e}`}var uL=yA,fL=_A,dL=SA,hL=EA;function pL({className:i,...e}){return J.jsx(uL,{"code-path":"src/components/ui/tabs.tsx:13:5","data-slot":"tabs",className:La("flex flex-col gap-2",i),...e})}function mL({className:i,...e}){return J.jsx(fL,{"code-path":"src/components/ui/tabs.tsx:26:5","data-slot":"tabs-list",className:La("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",i),...e})}function Am({className:i,...e}){return J.jsx(dL,{"code-path":"src/components/ui/tabs.tsx:42:5","data-slot":"tabs-trigger",className:La("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",i),...e})}function Cm({className:i,...e}){return J.jsx(hL,{"code-path":"src/components/ui/tabs.tsx:58:5","data-slot":"tabs-content",className:La("flex-1 outline-none",i),...e})}function AA(i,[e,t]){return Math.min(t,Math.max(e,i))}function CA(i){const e=j.useRef({value:i,previous:i});return j.useMemo(()=>(e.current.value!==i&&(e.current.previous=e.current.value,e.current.value=i),e.current.previous),[i])}function RA(i){const[e,t]=j.useState(void 0);return Nh(()=>{if(i){t({width:i.offsetWidth,height:i.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let u,d;if("borderBoxSize"in o){const h=o.borderBoxSize,p=Array.isArray(h)?h[0]:h;u=p.inlineSize,d=p.blockSize}else u=i.offsetWidth,d=i.offsetHeight;t({width:u,height:d})});return n.observe(i,{box:"border-box"}),()=>n.unobserve(i)}else t(void 0)},[i]),e}var NA=["PageUp","PageDown"],DA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],IA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},qh="Slider",[FS,gL,vL]=lA(qh),[LA]=jh(qh,[vL]),[yL,Xx]=LA(qh),UA=j.forwardRef((i,e)=>{const{name:t,min:n=0,max:a=100,step:o=1,orientation:u="horizontal",disabled:d=!1,minStepsBetweenThumbs:h=0,defaultValue:p=[n],value:y,onValueChange:v=()=>{},onValueCommit:x=()=>{},inverted:S=!1,form:E,...C}=i,T=j.useRef(new Set),M=j.useRef(0),I=u==="horizontal"?xL:_L,[L=[],z]=Rg({prop:y,defaultProp:p,onChange:H=>{[...T.current][M.current]?.focus(),v(H)}}),P=j.useRef(L);function V(H){const te=wL(L,H);K(H,te)}function N(H){K(H,M.current)}function O(){const H=P.current[M.current];L[M.current]!==H&&x(L)}function K(H,te,{commit:ee}={commit:!1}){const ae=RL(o),se=NL(Math.round((H-n)/o)*o+n,ae),G=AA(se,[n,a]);z(($=[])=>{const le=ML($,G,te);if(CL(le,h*o)){M.current=le.indexOf(G);const be=String(le)!==String($);return be&&ee&&x(le),be?le:$}else return $})}return J.jsx(yL,{scope:i.__scopeSlider,name:t,disabled:d,min:n,max:a,valueIndexToChangeRef:M,thumbs:T.current,values:L,orientation:u,form:E,children:J.jsx(FS.Provider,{scope:i.__scopeSlider,children:J.jsx(FS.Slot,{scope:i.__scopeSlider,children:J.jsx(I,{"aria-disabled":d,"data-disabled":d?"":void 0,...C,ref:e,onPointerDown:ki(C.onPointerDown,()=>{d||(P.current=L)}),min:n,max:a,inverted:S,onSlideStart:d?void 0:V,onSlideMove:d?void 0:N,onSlideEnd:d?void 0:O,onHomeKeyDown:()=>!d&&K(n,0,{commit:!0}),onEndKeyDown:()=>!d&&K(a,L.length-1,{commit:!0}),onStepKeyDown:({event:H,direction:te})=>{if(!d){const se=NA.includes(H.key)||H.shiftKey&&DA.includes(H.key)?10:1,G=M.current,$=L[G],le=o*se*te;K($+le,G,{commit:!0})}}})})})})});UA.displayName=qh;var[OA,PA]=LA(qh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),xL=j.forwardRef((i,e)=>{const{min:t,max:n,dir:a,inverted:o,onSlideStart:u,onSlideMove:d,onSlideEnd:h,onStepKeyDown:p,...y}=i,[v,x]=j.useState(null),S=kr(e,I=>x(I)),E=j.useRef(void 0),C=_1(a),T=C==="ltr",M=T&&!o||!T&&o;function R(I){const L=E.current||v.getBoundingClientRect(),z=[0,L.width],V=S1(z,M?[t,n]:[n,t]);return E.current=L,V(I-L.left)}return J.jsx(OA,{scope:i.__scopeSlider,startEdge:M?"left":"right",endEdge:M?"right":"left",direction:M?1:-1,size:"width",children:J.jsx(zA,{dir:C,"data-orientation":"horizontal",...y,ref:S,style:{...y.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:I=>{const L=R(I.clientX);u?.(L)},onSlideMove:I=>{const L=R(I.clientX);d?.(L)},onSlideEnd:()=>{E.current=void 0,h?.()},onStepKeyDown:I=>{const z=IA[M?"from-left":"from-right"].includes(I.key);p?.({event:I,direction:z?-1:1})}})})}),_L=j.forwardRef((i,e)=>{const{min:t,max:n,inverted:a,onSlideStart:o,onSlideMove:u,onSlideEnd:d,onStepKeyDown:h,...p}=i,y=j.useRef(null),v=kr(e,y),x=j.useRef(void 0),S=!a;function E(C){const T=x.current||y.current.getBoundingClientRect(),M=[0,T.height],I=S1(M,S?[n,t]:[t,n]);return x.current=T,I(C-T.top)}return J.jsx(OA,{scope:i.__scopeSlider,startEdge:S?"bottom":"top",endEdge:S?"top":"bottom",size:"height",direction:S?1:-1,children:J.jsx(zA,{"data-orientation":"vertical",...p,ref:v,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:C=>{const T=E(C.clientY);o?.(T)},onSlideMove:C=>{const T=E(C.clientY);u?.(T)},onSlideEnd:()=>{x.current=void 0,d?.()},onStepKeyDown:C=>{const M=IA[S?"from-bottom":"from-top"].includes(C.key);h?.({event:C,direction:M?-1:1})}})})}),zA=j.forwardRef((i,e)=>{const{__scopeSlider:t,onSlideStart:n,onSlideMove:a,onSlideEnd:o,onHomeKeyDown:u,onEndKeyDown:d,onStepKeyDown:h,...p}=i,y=Xx(qh,t);return J.jsx(rr.span,{...p,ref:e,onKeyDown:ki(i.onKeyDown,v=>{v.key==="Home"?(u(v),v.preventDefault()):v.key==="End"?(d(v),v.preventDefault()):NA.concat(DA).includes(v.key)&&(h(v),v.preventDefault())}),onPointerDown:ki(i.onPointerDown,v=>{const x=v.target;x.setPointerCapture(v.pointerId),v.preventDefault(),y.thumbs.has(x)?x.focus():n(v)}),onPointerMove:ki(i.onPointerMove,v=>{v.target.hasPointerCapture(v.pointerId)&&a(v)}),onPointerUp:ki(i.onPointerUp,v=>{const x=v.target;x.hasPointerCapture(v.pointerId)&&(x.releasePointerCapture(v.pointerId),o(v))})})}),FA="SliderTrack",BA=j.forwardRef((i,e)=>{const{__scopeSlider:t,...n}=i,a=Xx(FA,t);return J.jsx(rr.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:e})});BA.displayName=FA;var BS="SliderRange",kA=j.forwardRef((i,e)=>{const{__scopeSlider:t,...n}=i,a=Xx(BS,t),o=PA(BS,t),u=j.useRef(null),d=kr(e,u),h=a.values.length,p=a.values.map(x=>GA(x,a.min,a.max)),y=h>1?Math.min(...p):0,v=100-Math.max(...p);return J.jsx(rr.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:d,style:{...i.style,[o.startEdge]:y+"%",[o.endEdge]:v+"%"}})});kA.displayName=BS;var kS="SliderThumb",VA=j.forwardRef((i,e)=>{const t=gL(i.__scopeSlider),[n,a]=j.useState(null),o=kr(e,d=>a(d)),u=j.useMemo(()=>n?t().findIndex(d=>d.ref.current===n):-1,[t,n]);return J.jsx(bL,{...i,ref:o,index:u})}),bL=j.forwardRef((i,e)=>{const{__scopeSlider:t,index:n,name:a,...o}=i,u=Xx(kS,t),d=PA(kS,t),[h,p]=j.useState(null),y=kr(e,R=>p(R)),v=h?u.form||!!h.closest("form"):!0,x=RA(h),S=u.values[n],E=S===void 0?0:GA(S,u.min,u.max),C=EL(n,u.values.length),T=x?.[d.size],M=T?TL(T,E,d.direction):0;return j.useEffect(()=>{if(h)return u.thumbs.add(h),()=>{u.thumbs.delete(h)}},[h,u.thumbs]),J.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${E}% + ${M}px)`},children:[J.jsx(FS.ItemSlot,{scope:i.__scopeSlider,children:J.jsx(rr.span,{role:"slider","aria-label":i["aria-label"]||C,"aria-valuemin":u.min,"aria-valuenow":S,"aria-valuemax":u.max,"aria-orientation":u.orientation,"data-orientation":u.orientation,"data-disabled":u.disabled?"":void 0,tabIndex:u.disabled?void 0:0,...o,ref:y,style:S===void 0?{display:"none"}:i.style,onFocus:ki(i.onFocus,()=>{u.valueIndexToChangeRef.current=n})})}),v&&J.jsx(HA,{name:a??(u.name?u.name+(u.values.length>1?"[]":""):void 0),form:u.form,value:S},n)]})});VA.displayName=kS;var SL="RadioBubbleInput",HA=j.forwardRef(({__scopeSlider:i,value:e,...t},n)=>{const a=j.useRef(null),o=kr(a,n),u=CA(e);return j.useEffect(()=>{const d=a.current;if(!d)return;const h=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(h,"value").set;if(u!==e&&y){const v=new Event("input",{bubbles:!0});y.call(d,e),d.dispatchEvent(v)}},[u,e]),J.jsx(rr.input,{style:{display:"none"},...t,ref:o,defaultValue:e})});HA.displayName=SL;function ML(i=[],e,t){const n=[...i];return n[t]=e,n.sort((a,o)=>a-o)}function GA(i,e,t){const o=100/(t-e)*(i-e);return AA(o,[0,100])}function EL(i,e){return e>2?`Value ${i+1} of ${e}`:e===2?["Minimum","Maximum"][i]:void 0}function wL(i,e){if(i.length===1)return 0;const t=i.map(a=>Math.abs(a-e)),n=Math.min(...t);return t.indexOf(n)}function TL(i,e,t){const n=i/2,o=S1([0,50],[0,n]);return(n-o(e)*t)*t}function AL(i){return i.slice(0,-1).map((e,t)=>i[t+1]-e)}function CL(i,e){if(e>0){const t=AL(i);return Math.min(...t)>=e}return!0}function S1(i,e){return t=>{if(i[0]===i[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(i[1]-i[0]);return e[0]+n*(t-i[0])}}function RL(i){return(String(i).split(".")[1]||"").length}function NL(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}var DL=UA,IL=BA,LL=kA,UL=VA;function Iv({className:i,defaultValue:e,value:t,min:n=0,max:a=100,...o}){const u=j.useMemo(()=>Array.isArray(t)?t:Array.isArray(e)?e:[n,a],[t,e,n,a]);return J.jsxs(DL,{"code-path":"src/components/ui/slider.tsx:27:5","data-slot":"slider",defaultValue:e,value:t,min:n,max:a,className:La("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",i),...o,children:[J.jsx(IL,{"code-path":"src/components/ui/slider.tsx:39:7","data-slot":"slider-track",className:La("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:J.jsx(LL,{"code-path":"src/components/ui/slider.tsx:45:9","data-slot":"slider-range",className:La("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:u.length},(d,h)=>J.jsx(UL,{"code-path":"src/components/ui/slider.tsx:53:9","data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},h))]})}var jx="Switch",[OL]=jh(jx),[PL,zL]=OL(jx),WA=j.forwardRef((i,e)=>{const{__scopeSwitch:t,name:n,checked:a,defaultChecked:o,required:u,disabled:d,value:h="on",onCheckedChange:p,form:y,...v}=i,[x,S]=j.useState(null),E=kr(e,I=>S(I)),C=j.useRef(!1),T=x?y||!!x.closest("form"):!0,[M,R]=Rg({prop:a,defaultProp:o??!1,onChange:p,caller:jx});return J.jsxs(PL,{scope:t,checked:M,disabled:d,children:[J.jsx(rr.button,{type:"button",role:"switch","aria-checked":M,"aria-required":u,"data-state":YA(M),"data-disabled":d?"":void 0,disabled:d,value:h,...v,ref:E,onClick:ki(i.onClick,I=>{R(L=>!L),T&&(C.current=I.isPropagationStopped(),C.current||I.stopPropagation())})}),T&&J.jsx(qA,{control:x,bubbles:!C.current,name:n,value:h,checked:M,required:u,disabled:d,form:y,style:{transform:"translateX(-100%)"}})]})});WA.displayName=jx;var XA="SwitchThumb",jA=j.forwardRef((i,e)=>{const{__scopeSwitch:t,...n}=i,a=zL(XA,t);return J.jsx(rr.span,{"data-state":YA(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:e})});jA.displayName=XA;var FL="SwitchBubbleInput",qA=j.forwardRef(({__scopeSwitch:i,control:e,checked:t,bubbles:n=!0,...a},o)=>{const u=j.useRef(null),d=kr(u,o),h=CA(t),p=RA(e);return j.useEffect(()=>{const y=u.current;if(!y)return;const v=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(v,"checked").set;if(h!==t&&S){const E=new Event("click",{bubbles:n});S.call(y,t),y.dispatchEvent(E)}},[h,t,n]),J.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...a,tabIndex:-1,ref:d,style:{...a.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});qA.displayName=FL;function YA(i){return i?"checked":"unchecked"}var BL=WA,kL=jA;function VL({className:i,...e}){return J.jsx(BL,{"code-path":"src/components/ui/switch.tsx:13:5","data-slot":"switch",className:La("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",i),...e,children:J.jsx(kL,{"code-path":"src/components/ui/switch.tsx:21:7","data-slot":"switch-thumb",className:La("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var HL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],GL=HL.reduce((i,e)=>{const t=qT(`Primitive.${e}`),n=j.forwardRef((a,o)=>{const{asChild:u,...d}=a,h=u?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),J.jsx(h,{...d,ref:o})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{}),WL="Label",ZA=j.forwardRef((i,e)=>J.jsx(GL.label,{...i,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(i.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));ZA.displayName=WL;var XL=ZA;function Rm({className:i,...e}){return J.jsx(XL,{"code-path":"src/components/ui/label.tsx:13:5","data-slot":"label",className:La("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",i),...e})}function jL(i){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i))}const qL=i=>{switch(i){case"success":return KL;case"info":return QL;case"warning":return $L;case"error":return JL;default:return null}},YL=Array(12).fill(0),ZL=({visible:i,className:e})=>_t.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":i},_t.createElement("div",{className:"sonner-spinner"},YL.map((t,n)=>_t.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),KL=_t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_t.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),$L=_t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},_t.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),QL=_t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_t.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),JL=_t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_t.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),eU=_t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},_t.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_t.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),tU=()=>{const[i,e]=_t.useState(document.hidden);return _t.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),i};let VS=1;class nU{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...a}=e,o=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:VS++,u=this.toasts.find(h=>h.id===o),d=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),u?this.toasts=this.toasts.map(h=>h.id===o?(this.publish({...h,...e,id:o,title:n}),{...h,...e,id:o,dismissible:d,title:n}):h):this.addToast({title:n,...a,dismissible:d,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let o=n!==void 0,u;const d=a.then(async p=>{if(u=["resolve",p],_t.isValidElement(p))o=!1,this.create({id:n,type:"default",message:p});else if(rU(p)&&!p.ok){o=!1;const v=typeof t.error=="function"?await t.error(`HTTP error! status: ${p.status}`):t.error,x=typeof t.description=="function"?await t.description(`HTTP error! status: ${p.status}`):t.description,E=typeof v=="object"&&!_t.isValidElement(v)?v:{message:v};this.create({id:n,type:"error",description:x,...E})}else if(p instanceof Error){o=!1;const v=typeof t.error=="function"?await t.error(p):t.error,x=typeof t.description=="function"?await t.description(p):t.description,E=typeof v=="object"&&!_t.isValidElement(v)?v:{message:v};this.create({id:n,type:"error",description:x,...E})}else if(t.success!==void 0){o=!1;const v=typeof t.success=="function"?await t.success(p):t.success,x=typeof t.description=="function"?await t.description(p):t.description,E=typeof v=="object"&&!_t.isValidElement(v)?v:{message:v};this.create({id:n,type:"success",description:x,...E})}}).catch(async p=>{if(u=["reject",p],t.error!==void 0){o=!1;const y=typeof t.error=="function"?await t.error(p):t.error,v=typeof t.description=="function"?await t.description(p):t.description,S=typeof y=="object"&&!_t.isValidElement(y)?y:{message:y};this.create({id:n,type:"error",description:v,...S})}}).finally(()=>{o&&(this.dismiss(n),n=void 0),t.finally==null||t.finally.call(t)}),h=()=>new Promise((p,y)=>d.then(()=>u[0]==="reject"?y(u[1]):p(u[1])).catch(y));return typeof n!="string"&&typeof n!="number"?{unwrap:h}:Object.assign(n,{unwrap:h})},this.custom=(e,t)=>{const n=t?.id||VS++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const rs=new nU,iU=(i,e)=>{const t=e?.id||VS++;return rs.addToast({title:i,...e,id:t}),t},rU=i=>i&&typeof i=="object"&&"ok"in i&&typeof i.ok=="boolean"&&"status"in i&&typeof i.status=="number",aU=iU,sU=()=>rs.toasts,oU=()=>rs.getActiveToasts(),Lv=Object.assign(aU,{success:rs.success,info:rs.info,warning:rs.warning,error:rs.error,custom:rs.custom,message:rs.message,promise:rs.promise,dismiss:rs.dismiss,loading:rs.loading},{getHistory:sU,getToasts:oU});jL("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Uv(i){return i.label!==void 0}const lU=3,cU="24px",uU="16px",IE=4e3,fU=356,dU=14,hU=45,pU=200;function tl(...i){return i.filter(Boolean).join(" ")}function mU(i){const[e,t]=i.split("-"),n=[];return e&&n.push(e),t&&n.push(t),n}const gU=i=>{var e,t,n,a,o,u,d,h,p;const{invert:y,toast:v,unstyled:x,interacting:S,setHeights:E,visibleToasts:C,heights:T,index:M,toasts:R,expanded:I,removeToast:L,defaultRichColors:z,closeButton:P,style:V,cancelButtonStyle:N,actionButtonStyle:O,className:K="",descriptionClassName:H="",duration:te,position:ee,gap:ae,expandByDefault:se,classNames:G,icons:$,closeButtonAriaLabel:le="Close toast"}=i,[be,Ae]=_t.useState(null),[Y,re]=_t.useState(null),[me,Te]=_t.useState(!1),[Ke,he]=_t.useState(!1),[De,ze]=_t.useState(!1),[pt,It]=_t.useState(!1),[zt,Jt]=_t.useState(!1),[jt,He]=_t.useState(0),[nt,Xe]=_t.useState(0),mt=_t.useRef(v.duration||te||IE),ne=_t.useRef(null),Lt=_t.useRef(null),wt=M===0,kt=M+1<=C,Je=v.type,Z=v.dismissible!==!1,F=v.className||"",ye=v.descriptionClassName||"",Ue=_t.useMemo(()=>T.findIndex(_e=>_e.toastId===v.id)||0,[T,v.id]),je=_t.useMemo(()=>{var _e;return(_e=v.closeButton)!=null?_e:P},[v.closeButton,P]),Oe=_t.useMemo(()=>v.duration||te||IE,[v.duration,te]),Mt=_t.useRef(0),ct=_t.useRef(0),Ft=_t.useRef(0),Bt=_t.useRef(null),[Qe,qe]=ee.split("-"),Tt=_t.useMemo(()=>T.reduce((_e,ft,Nt)=>Nt>=Ue?_e:_e+ft.height,0),[T,Ue]),ie=tU(),we=v.invert||y,tt=Je==="loading";ct.current=_t.useMemo(()=>Ue*ae+Tt,[Ue,Tt]),_t.useEffect(()=>{mt.current=Oe},[Oe]),_t.useEffect(()=>{Te(!0)},[]),_t.useEffect(()=>{const _e=Lt.current;if(_e){const ft=_e.getBoundingClientRect().height;return Xe(ft),E(Nt=>[{toastId:v.id,height:ft,position:v.position},...Nt]),()=>E(Nt=>Nt.filter(Kt=>Kt.toastId!==v.id))}},[E,v.id]),_t.useLayoutEffect(()=>{if(!me)return;const _e=Lt.current,ft=_e.style.height;_e.style.height="auto";const Nt=_e.getBoundingClientRect().height;_e.style.height=ft,Xe(Nt),E(Kt=>Kt.find(gn=>gn.toastId===v.id)?Kt.map(gn=>gn.toastId===v.id?{...gn,height:Nt}:gn):[{toastId:v.id,height:Nt,position:v.position},...Kt])},[me,v.title,v.description,E,v.id,v.jsx,v.action,v.cancel]);const oe=_t.useCallback(()=>{he(!0),He(ct.current),E(_e=>_e.filter(ft=>ft.toastId!==v.id)),setTimeout(()=>{L(v)},pU)},[v,L,E,ct]);_t.useEffect(()=>{if(v.promise&&Je==="loading"||v.duration===1/0||v.type==="loading")return;let _e;return I||S||ie?(()=>{if(Ft.current<Mt.current){const Kt=new Date().getTime()-Mt.current;mt.current=mt.current-Kt}Ft.current=new Date().getTime()})():mt.current!==1/0&&(Mt.current=new Date().getTime(),_e=setTimeout(()=>{v.onAutoClose==null||v.onAutoClose.call(v,v),oe()},mt.current)),()=>clearTimeout(_e)},[I,S,v,Je,ie,oe]),_t.useEffect(()=>{v.delete&&(oe(),v.onDismiss==null||v.onDismiss.call(v,v))},[oe,v.delete]);function Me(){var _e;if($?.loading){var ft;return _t.createElement("div",{className:tl(G?.loader,v==null||(ft=v.classNames)==null?void 0:ft.loader,"sonner-loader"),"data-visible":Je==="loading"},$.loading)}return _t.createElement(ZL,{className:tl(G?.loader,v==null||(_e=v.classNames)==null?void 0:_e.loader),visible:Je==="loading"})}const et=v.icon||$?.[Je]||qL(Je);var St,rt;return _t.createElement("li",{tabIndex:0,ref:Lt,className:tl(K,F,G?.toast,v==null||(e=v.classNames)==null?void 0:e.toast,G?.default,G?.[Je],v==null||(t=v.classNames)==null?void 0:t[Je]),"data-sonner-toast":"","data-rich-colors":(St=v.richColors)!=null?St:z,"data-styled":!(v.jsx||v.unstyled||x),"data-mounted":me,"data-promise":!!v.promise,"data-swiped":zt,"data-removed":Ke,"data-visible":kt,"data-y-position":Qe,"data-x-position":qe,"data-index":M,"data-front":wt,"data-swiping":De,"data-dismissible":Z,"data-type":Je,"data-invert":we,"data-swipe-out":pt,"data-swipe-direction":Y,"data-expanded":!!(I||se&&me),"data-testid":v.testId,style:{"--index":M,"--toasts-before":M,"--z-index":R.length-M,"--offset":`${Ke?jt:ct.current}px`,"--initial-height":se?"auto":`${nt}px`,...V,...v.style},onDragEnd:()=>{ze(!1),Ae(null),Bt.current=null},onPointerDown:_e=>{_e.button!==2&&(tt||!Z||(ne.current=new Date,He(ct.current),_e.target.setPointerCapture(_e.pointerId),_e.target.tagName!=="BUTTON"&&(ze(!0),Bt.current={x:_e.clientX,y:_e.clientY})))},onPointerUp:()=>{var _e,ft,Nt;if(pt||!Z)return;Bt.current=null;const Kt=Number(((_e=Lt.current)==null?void 0:_e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),cn=Number(((ft=Lt.current)==null?void 0:ft.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),gn=new Date().getTime()-((Nt=ne.current)==null?void 0:Nt.getTime()),kn=be==="x"?Kt:cn,Dr=Math.abs(kn)/gn;if(Math.abs(kn)>=hU||Dr>.11){He(ct.current),v.onDismiss==null||v.onDismiss.call(v,v),re(be==="x"?Kt>0?"right":"left":cn>0?"down":"up"),oe(),It(!0);return}else{var Si,Li;(Si=Lt.current)==null||Si.style.setProperty("--swipe-amount-x","0px"),(Li=Lt.current)==null||Li.style.setProperty("--swipe-amount-y","0px")}Jt(!1),ze(!1),Ae(null)},onPointerMove:_e=>{var ft,Nt,Kt;if(!Bt.current||!Z||((ft=window.getSelection())==null?void 0:ft.toString().length)>0)return;const gn=_e.clientY-Bt.current.y,kn=_e.clientX-Bt.current.x;var Dr;const Si=(Dr=i.swipeDirections)!=null?Dr:mU(ee);!be&&(Math.abs(kn)>1||Math.abs(gn)>1)&&Ae(Math.abs(kn)>Math.abs(gn)?"x":"y");let Li={x:0,y:0};const ea=Mi=>1/(1.5+Math.abs(Mi)/20);if(be==="y"){if(Si.includes("top")||Si.includes("bottom"))if(Si.includes("top")&&gn<0||Si.includes("bottom")&&gn>0)Li.y=gn;else{const Mi=gn*ea(gn);Li.y=Math.abs(Mi)<Math.abs(gn)?Mi:gn}}else if(be==="x"&&(Si.includes("left")||Si.includes("right")))if(Si.includes("left")&&kn<0||Si.includes("right")&&kn>0)Li.x=kn;else{const Mi=kn*ea(kn);Li.x=Math.abs(Mi)<Math.abs(kn)?Mi:kn}(Math.abs(Li.x)>0||Math.abs(Li.y)>0)&&Jt(!0),(Nt=Lt.current)==null||Nt.style.setProperty("--swipe-amount-x",`${Li.x}px`),(Kt=Lt.current)==null||Kt.style.setProperty("--swipe-amount-y",`${Li.y}px`)}},je&&!v.jsx&&Je!=="loading"?_t.createElement("button",{"aria-label":le,"data-disabled":tt,"data-close-button":!0,onClick:tt||!Z?()=>{}:()=>{oe(),v.onDismiss==null||v.onDismiss.call(v,v)},className:tl(G?.closeButton,v==null||(n=v.classNames)==null?void 0:n.closeButton)},(rt=$?.close)!=null?rt:eU):null,(Je||v.icon||v.promise)&&v.icon!==null&&($?.[Je]!==null||v.icon)?_t.createElement("div",{"data-icon":"",className:tl(G?.icon,v==null||(a=v.classNames)==null?void 0:a.icon)},v.promise||v.type==="loading"&&!v.icon?v.icon||Me():null,v.type!=="loading"?et:null):null,_t.createElement("div",{"data-content":"",className:tl(G?.content,v==null||(o=v.classNames)==null?void 0:o.content)},_t.createElement("div",{"data-title":"",className:tl(G?.title,v==null||(u=v.classNames)==null?void 0:u.title)},v.jsx?v.jsx:typeof v.title=="function"?v.title():v.title),v.description?_t.createElement("div",{"data-description":"",className:tl(H,ye,G?.description,v==null||(d=v.classNames)==null?void 0:d.description)},typeof v.description=="function"?v.description():v.description):null),_t.isValidElement(v.cancel)?v.cancel:v.cancel&&Uv(v.cancel)?_t.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||N,onClick:_e=>{Uv(v.cancel)&&Z&&(v.cancel.onClick==null||v.cancel.onClick.call(v.cancel,_e),oe())},className:tl(G?.cancelButton,v==null||(h=v.classNames)==null?void 0:h.cancelButton)},v.cancel.label):null,_t.isValidElement(v.action)?v.action:v.action&&Uv(v.action)?_t.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||O,onClick:_e=>{Uv(v.action)&&(v.action.onClick==null||v.action.onClick.call(v.action,_e),!_e.defaultPrevented&&oe())},className:tl(G?.actionButton,v==null||(p=v.classNames)==null?void 0:p.actionButton)},v.action.label):null)};function LE(){if(typeof window>"u"||typeof document>"u")return"ltr";const i=document.documentElement.getAttribute("dir");return i==="auto"||!i?window.getComputedStyle(document.documentElement).direction:i}function vU(i,e){const t={};return[i,e].forEach((n,a)=>{const o=a===1,u=o?"--mobile-offset":"--offset",d=o?uU:cU;function h(p){["top","right","bottom","left"].forEach(y=>{t[`${u}-${y}`]=typeof p=="number"?`${p}px`:p})}typeof n=="number"||typeof n=="string"?h(n):typeof n=="object"?["top","right","bottom","left"].forEach(p=>{n[p]===void 0?t[`${u}-${p}`]=d:t[`${u}-${p}`]=typeof n[p]=="number"?`${n[p]}px`:n[p]}):h(d)}),t}const yU=_t.forwardRef(function(e,t){const{id:n,invert:a,position:o="bottom-right",hotkey:u=["altKey","KeyT"],expand:d,closeButton:h,className:p,offset:y,mobileOffset:v,theme:x="light",richColors:S,duration:E,style:C,visibleToasts:T=lU,toastOptions:M,dir:R=LE(),gap:I=dU,icons:L,containerAriaLabel:z="Notifications"}=e,[P,V]=_t.useState([]),N=_t.useMemo(()=>n?P.filter(me=>me.toasterId===n):P.filter(me=>!me.toasterId),[P,n]),O=_t.useMemo(()=>Array.from(new Set([o].concat(N.filter(me=>me.position).map(me=>me.position)))),[N,o]),[K,H]=_t.useState([]),[te,ee]=_t.useState(!1),[ae,se]=_t.useState(!1),[G,$]=_t.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),le=_t.useRef(null),be=u.join("+").replace(/Key/g,"").replace(/Digit/g,""),Ae=_t.useRef(null),Y=_t.useRef(!1),re=_t.useCallback(me=>{V(Te=>{var Ke;return(Ke=Te.find(he=>he.id===me.id))!=null&&Ke.delete||rs.dismiss(me.id),Te.filter(({id:he})=>he!==me.id)})},[]);return _t.useEffect(()=>rs.subscribe(me=>{if(me.dismiss){requestAnimationFrame(()=>{V(Te=>Te.map(Ke=>Ke.id===me.id?{...Ke,delete:!0}:Ke))});return}setTimeout(()=>{uA.flushSync(()=>{V(Te=>{const Ke=Te.findIndex(he=>he.id===me.id);return Ke!==-1?[...Te.slice(0,Ke),{...Te[Ke],...me},...Te.slice(Ke+1)]:[me,...Te]})})})}),[P]),_t.useEffect(()=>{if(x!=="system"){$(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;const me=window.matchMedia("(prefers-color-scheme: dark)");try{me.addEventListener("change",({matches:Te})=>{$(Te?"dark":"light")})}catch{me.addListener(({matches:Ke})=>{try{$(Ke?"dark":"light")}catch(he){console.error(he)}})}},[x]),_t.useEffect(()=>{P.length<=1&&ee(!1)},[P]),_t.useEffect(()=>{const me=Te=>{var Ke;if(u.every(ze=>Te[ze]||Te.code===ze)){var De;ee(!0),(De=le.current)==null||De.focus()}Te.code==="Escape"&&(document.activeElement===le.current||(Ke=le.current)!=null&&Ke.contains(document.activeElement))&&ee(!1)};return document.addEventListener("keydown",me),()=>document.removeEventListener("keydown",me)},[u]),_t.useEffect(()=>{if(le.current)return()=>{Ae.current&&(Ae.current.focus({preventScroll:!0}),Ae.current=null,Y.current=!1)}},[le.current]),_t.createElement("section",{ref:t,"aria-label":`${z} ${be}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((me,Te)=>{var Ke;const[he,De]=me.split("-");return N.length?_t.createElement("ol",{key:me,dir:R==="auto"?LE():R,tabIndex:-1,ref:le,className:p,"data-sonner-toaster":!0,"data-sonner-theme":G,"data-y-position":he,"data-x-position":De,style:{"--front-toast-height":`${((Ke=K[0])==null?void 0:Ke.height)||0}px`,"--width":`${fU}px`,"--gap":`${I}px`,...C,...vU(y,v)},onBlur:ze=>{Y.current&&!ze.currentTarget.contains(ze.relatedTarget)&&(Y.current=!1,Ae.current&&(Ae.current.focus({preventScroll:!0}),Ae.current=null))},onFocus:ze=>{ze.target instanceof HTMLElement&&ze.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,Ae.current=ze.relatedTarget)},onMouseEnter:()=>ee(!0),onMouseMove:()=>ee(!0),onMouseLeave:()=>{ae||ee(!1)},onDragEnd:()=>ee(!1),onPointerDown:ze=>{ze.target instanceof HTMLElement&&ze.target.dataset.dismissible==="false"||se(!0)},onPointerUp:()=>se(!1)},N.filter(ze=>!ze.position&&Te===0||ze.position===me).map((ze,pt)=>{var It,zt;return _t.createElement(gU,{key:ze.id,icons:L,index:pt,toast:ze,defaultRichColors:S,duration:(It=M?.duration)!=null?It:E,className:M?.className,descriptionClassName:M?.descriptionClassName,invert:a,visibleToasts:T,closeButton:(zt=M?.closeButton)!=null?zt:h,interacting:ae,position:me,style:M?.style,unstyled:M?.unstyled,classNames:M?.classNames,cancelButtonStyle:M?.cancelButtonStyle,actionButtonStyle:M?.actionButtonStyle,closeButtonAriaLabel:M?.closeButtonAriaLabel,removeToast:re,toasts:N.filter(Jt=>Jt.position==ze.position),heights:K.filter(Jt=>Jt.position==ze.position),setHeights:H,expandByDefault:d,gap:I,expanded:te,swipeDirections:e.swipeDirections})})):null}))});var xU=(i,e,t,n,a,o,u,d)=>{let h=document.documentElement,p=["light","dark"];function y(S){(Array.isArray(i)?i:[i]).forEach(E=>{let C=E==="class",T=C&&o?a.map(M=>o[M]||M):a;C?(h.classList.remove(...T),h.classList.add(o&&o[S]?o[S]:S)):h.setAttribute(E,S)}),v(S)}function v(S){d&&p.includes(S)&&(h.style.colorScheme=S)}function x(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)y(n);else try{let S=localStorage.getItem(e)||t,E=u&&S==="system"?x():S;y(E)}catch{}},_U=j.createContext(void 0),bU={setTheme:i=>{},themes:[]},SU=()=>{var i;return(i=j.useContext(_U))!=null?i:bU};j.memo(({forcedTheme:i,storageKey:e,attribute:t,enableSystem:n,enableColorScheme:a,defaultTheme:o,value:u,themes:d,nonce:h,scriptProps:p})=>{let y=JSON.stringify([t,e,o,i,d,u,n,a]).slice(1,-1);return j.createElement("script",{...p,suppressHydrationWarning:!0,nonce:typeof window>"u"?h:"",dangerouslySetInnerHTML:{__html:`(${xU.toString()})(${y})`}})});const MU=({...i})=>{const{theme:e="system"}=SU();return J.jsx(yU,{"code-path":"src/components/ui/sonner.tsx:15:5",theme:e,className:"toaster group",icons:{success:J.jsx(ZN,{"code-path":"src/components/ui/sonner.tsx:19:18",className:"size-4"}),info:J.jsx(rD,{"code-path":"src/components/ui/sonner.tsx:20:15",className:"size-4"}),warning:J.jsx(xD,{"code-path":"src/components/ui/sonner.tsx:21:18",className:"size-4"}),error:J.jsx(cD,{"code-path":"src/components/ui/sonner.tsx:22:16",className:"size-4"}),loading:J.jsx(oD,{"code-path":"src/components/ui/sonner.tsx:23:18",className:"size-4 animate-spin"})},style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)","--border-radius":"var(--radius)"},...i})};const Yh="183",gf={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},vf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},KA=0,HS=1,$A=2,EU=3,QA=0,wh=1,Km=2,_f=3,tc=0,ma=1,_o=2,So=0,Tf=1,GS=2,WS=3,XS=4,JA=5,wU=6,nu=100,eC=101,tC=102,nC=103,iC=104,rC=200,aC=201,sC=202,oC=203,Xy=204,jy=205,lC=206,cC=207,uC=208,fC=209,dC=210,hC=211,pC=212,mC=213,gC=214,qy=0,Yy=1,Zy=2,Rf=3,Ky=4,$y=5,Qy=6,Jy=7,Ig=0,vC=1,yC=2,qs=0,M1=1,E1=2,w1=3,qx=4,T1=5,A1=6,C1=7,jS="attached",xC="detached",ou=300,Mo=301,lu=302,Th=303,$m=304,Zh=306,Nf=1e3,nr=1001,lg=1002,hr=1003,R1=1004,TU=1004,Sh=1005,AU=1005,jn=1006,Qm=1007,CU=1007,cl=1008,qS=1008,Br=1009,Yx=1010,Zx=1011,Ih=1012,Lg=1013,vs=1014,Vi=1015,ir=1016,Kx=1017,$x=1018,Lh=1020,N1=35902,D1=35899,I1=1021,L1=1022,pr=1023,dl=1026,iu=1027,Ug=1028,Og=1029,Df=1030,Qx=1031,RU=1032,Jx=1033,Jm=33776,eg=33777,tg=33778,ng=33779,ex=35840,tx=35841,nx=35842,ix=35843,rx=36196,ax=37492,sx=37496,ox=37488,lx=37489,cx=37490,ux=37491,fx=37808,dx=37809,hx=37810,px=37811,mx=37812,gx=37813,vx=37814,yx=37815,xx=37816,_x=37817,bx=37818,Sx=37819,Mx=37820,Ex=37821,wx=36492,Tx=36494,Ax=36495,Cx=36283,Rx=36284,Nx=36285,Dx=36286,_C=2200,bC=2201,SC=2202,cg=2300,Ix=2301,Py=2302,YS=2303,bf=2400,Sf=2401,ug=2402,e_=2500,U1=2501,NU=0,DU=1,IU=2,MC=3200,LU=3201,UU=3202,OU=3203,fu=0,EC=1,Ql="",Fr="srgb",Eo="srgb-linear",fg="linear",si="srgb",PU="",zU="rg",FU="ga",BU=0,yf=7680,kU=7681,VU=7682,HU=7683,GU=34055,WU=34056,XU=5386,jU=512,qU=513,YU=514,ZU=515,KU=516,$U=517,QU=518,ZS=519,wC=512,TC=513,AC=514,t_=515,CC=516,RC=517,n_=518,NC=519,dg=35044,JU=35048,eO=35040,tO=35045,nO=35049,iO=35041,rO=35046,aO=35050,sO=35042,oO="100",KS="300 es",ps=2e3,If=2001,lO={COMPUTE:"compute",RENDER:"render"},cO={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},uO={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"},fO={TEXTURE_COMPARE:"depthTextureCompare"};function dO(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const hO={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Mh(i,e){return new hO[i](e)}function DC(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function hg(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function IC(){const i=hg("canvas");return i.style.display="block",i}const UE={};let cu=null;function pO(i){cu=i}function mO(){return cu}function pg(...i){const e="THREE."+i.shift();cu?cu("log",e,...i):console.log(e,...i)}function LC(i){const e=i[0];if(typeof e=="string"&&e.startsWith("TSL:")){const t=i[1];t&&t.isStackTrace?i[0]+=" "+t.getLocation():i[1]='Stack trace not available. Enable "THREE.Node.captureStackTrace" to capture stack traces.'}return i}function Rt(...i){i=LC(i);const e="THREE."+i.shift();if(cu)cu("warn",e,...i);else{const t=i[0];t&&t.isStackTrace?console.warn(t.getError(e)):console.warn(e,...i)}}function Qt(...i){i=LC(i);const e="THREE."+i.shift();if(cu)cu("error",e,...i);else{const t=i[0];t&&t.isStackTrace?console.error(t.getError(e)):console.error(e,...i)}}function mg(...i){const e=i.join(" ");e in UE||(UE[e]=!0,Rt(...i))}function gO(i,e,t){return new Promise(function(n,a){function o(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:a();break;case i.TIMEOUT_EXPIRED:setTimeout(o,t);break;default:n()}}setTimeout(o,t)})}const vO={[qy]:Yy,[Zy]:Qy,[Ky]:Jy,[Rf]:$y,[Yy]:qy,[Qy]:Zy,[Jy]:Ky,[$y]:Rf};let hl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const a=n[e];if(a!==void 0){const o=a.indexOf(t);o!==-1&&a.splice(o,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const a=n.slice(0);for(let o=0,u=a.length;o<u;o++)a[o].call(this,e);e.target=null}}};const da=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let OE=1234567;const Af=Math.PI/180,Uh=180/Math.PI;function ms(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(da[i&255]+da[i>>8&255]+da[i>>16&255]+da[i>>24&255]+"-"+da[e&255]+da[e>>8&255]+"-"+da[e>>16&15|64]+da[e>>24&255]+"-"+da[t&63|128]+da[t>>8&255]+"-"+da[t>>16&255]+da[t>>24&255]+da[n&255]+da[n>>8&255]+da[n>>16&255]+da[n>>24&255]).toLowerCase()}function fn(i,e,t){return Math.max(e,Math.min(t,i))}function O1(i,e){return(i%e+e)%e}function yO(i,e,t,n,a){return n+(i-e)*(a-n)/(t-e)}function xO(i,e,t){return i!==e?(t-i)/(e-i):0}function ig(i,e,t){return(1-t)*i+t*e}function _O(i,e,t,n){return ig(i,e,1-Math.exp(-t*n))}function bO(i,e=1){return e-Math.abs(O1(i,e*2)-e)}function SO(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function MO(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function EO(i,e){return i+Math.floor(Math.random()*(e-i+1))}function wO(i,e){return i+Math.random()*(e-i)}function TO(i){return i*(.5-Math.random())}function AO(i){i!==void 0&&(OE=i);let e=OE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function CO(i){return i*Af}function RO(i){return i*Uh}function NO(i){return(i&i-1)===0&&i!==0}function DO(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function IO(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function LO(i,e,t,n,a){const o=Math.cos,u=Math.sin,d=o(t/2),h=u(t/2),p=o((e+n)/2),y=u((e+n)/2),v=o((e-n)/2),x=u((e-n)/2),S=o((n-e)/2),E=u((n-e)/2);switch(a){case"XYX":i.set(d*y,h*v,h*x,d*p);break;case"YZY":i.set(h*x,d*y,h*v,d*p);break;case"ZXZ":i.set(h*v,h*x,d*y,d*p);break;case"XZX":i.set(d*y,h*E,h*S,d*p);break;case"YXY":i.set(h*S,d*y,h*E,d*p);break;case"ZYZ":i.set(h*E,h*S,d*y,d*p);break;default:Rt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function Ia(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Tn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const UC={DEG2RAD:Af,RAD2DEG:Uh,generateUUID:ms,clamp:fn,euclideanModulo:O1,mapLinear:yO,inverseLerp:xO,lerp:ig,damp:_O,pingpong:bO,smoothstep:SO,smootherstep:MO,randInt:EO,randFloat:wO,randFloatSpread:TO,seededRandom:AO,degToRad:CO,radToDeg:RO,isPowerOfTwo:NO,ceilPowerOfTwo:DO,floorPowerOfTwo:IO,setQuaternionFromProperEuler:LO,normalize:Tn,denormalize:Ia};class Ze{constructor(e=0,t=0){Ze.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6],this.y=a[1]*t+a[4]*n+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(fn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(fn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),a=Math.sin(t),o=this.x-e.x,u=this.y-e.y;return this.x=o*n-u*a+e.x,this.y=o*a+u*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Qr{constructor(e=0,t=0,n=0,a=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=a}static slerpFlat(e,t,n,a,o,u,d){let h=n[a+0],p=n[a+1],y=n[a+2],v=n[a+3],x=o[u+0],S=o[u+1],E=o[u+2],C=o[u+3];if(v!==C||h!==x||p!==S||y!==E){let T=h*x+p*S+y*E+v*C;T<0&&(x=-x,S=-S,E=-E,C=-C,T=-T);let M=1-d;if(T<.9995){const R=Math.acos(T),I=Math.sin(R);M=Math.sin(M*R)/I,d=Math.sin(d*R)/I,h=h*M+x*d,p=p*M+S*d,y=y*M+E*d,v=v*M+C*d}else{h=h*M+x*d,p=p*M+S*d,y=y*M+E*d,v=v*M+C*d;const R=1/Math.sqrt(h*h+p*p+y*y+v*v);h*=R,p*=R,y*=R,v*=R}}e[t]=h,e[t+1]=p,e[t+2]=y,e[t+3]=v}static multiplyQuaternionsFlat(e,t,n,a,o,u){const d=n[a],h=n[a+1],p=n[a+2],y=n[a+3],v=o[u],x=o[u+1],S=o[u+2],E=o[u+3];return e[t]=d*E+y*v+h*S-p*x,e[t+1]=h*E+y*x+p*v-d*S,e[t+2]=p*E+y*S+d*x-h*v,e[t+3]=y*E-d*v-h*x-p*S,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,a){return this._x=e,this._y=t,this._z=n,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,a=e._y,o=e._z,u=e._order,d=Math.cos,h=Math.sin,p=d(n/2),y=d(a/2),v=d(o/2),x=h(n/2),S=h(a/2),E=h(o/2);switch(u){case"XYZ":this._x=x*y*v+p*S*E,this._y=p*S*v-x*y*E,this._z=p*y*E+x*S*v,this._w=p*y*v-x*S*E;break;case"YXZ":this._x=x*y*v+p*S*E,this._y=p*S*v-x*y*E,this._z=p*y*E-x*S*v,this._w=p*y*v+x*S*E;break;case"ZXY":this._x=x*y*v-p*S*E,this._y=p*S*v+x*y*E,this._z=p*y*E+x*S*v,this._w=p*y*v-x*S*E;break;case"ZYX":this._x=x*y*v-p*S*E,this._y=p*S*v+x*y*E,this._z=p*y*E-x*S*v,this._w=p*y*v+x*S*E;break;case"YZX":this._x=x*y*v+p*S*E,this._y=p*S*v+x*y*E,this._z=p*y*E-x*S*v,this._w=p*y*v-x*S*E;break;case"XZY":this._x=x*y*v-p*S*E,this._y=p*S*v-x*y*E,this._z=p*y*E+x*S*v,this._w=p*y*v+x*S*E;break;default:Rt("Quaternion: .setFromEuler() encountered an unknown order: "+u)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,a=Math.sin(n);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],a=t[4],o=t[8],u=t[1],d=t[5],h=t[9],p=t[2],y=t[6],v=t[10],x=n+d+v;if(x>0){const S=.5/Math.sqrt(x+1);this._w=.25/S,this._x=(y-h)*S,this._y=(o-p)*S,this._z=(u-a)*S}else if(n>d&&n>v){const S=2*Math.sqrt(1+n-d-v);this._w=(y-h)/S,this._x=.25*S,this._y=(a+u)/S,this._z=(o+p)/S}else if(d>v){const S=2*Math.sqrt(1+d-n-v);this._w=(o-p)/S,this._x=(a+u)/S,this._y=.25*S,this._z=(h+y)/S}else{const S=2*Math.sqrt(1+v-n-d);this._w=(u-a)/S,this._x=(o+p)/S,this._y=(h+y)/S,this._z=.25*S}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(fn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const a=Math.min(1,t/n);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,a=e._y,o=e._z,u=e._w,d=t._x,h=t._y,p=t._z,y=t._w;return this._x=n*y+u*d+a*p-o*h,this._y=a*y+u*h+o*d-n*p,this._z=o*y+u*p+n*h-a*d,this._w=u*y-n*d-a*h-o*p,this._onChangeCallback(),this}slerp(e,t){let n=e._x,a=e._y,o=e._z,u=e._w,d=this.dot(e);d<0&&(n=-n,a=-a,o=-o,u=-u,d=-d);let h=1-t;if(d<.9995){const p=Math.acos(d),y=Math.sin(p);h=Math.sin(h*p)/y,t=Math.sin(t*p)/y,this._x=this._x*h+n*t,this._y=this._y*h+a*t,this._z=this._z*h+o*t,this._w=this._w*h+u*t,this._onChangeCallback()}else this._x=this._x*h+n*t,this._y=this._y*h+a*t,this._z=this._z*h+o*t,this._w=this._w*h+u*t,this.normalize();return this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),a=Math.sqrt(1-n),o=Math.sqrt(n);return this.set(a*Math.sin(e),a*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Q{constructor(e=0,t=0,n=0){Q.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(PE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(PE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,a=this.z,o=e.elements;return this.x=o[0]*t+o[3]*n+o[6]*a,this.y=o[1]*t+o[4]*n+o[7]*a,this.z=o[2]*t+o[5]*n+o[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,a=this.z,o=e.elements,u=1/(o[3]*t+o[7]*n+o[11]*a+o[15]);return this.x=(o[0]*t+o[4]*n+o[8]*a+o[12])*u,this.y=(o[1]*t+o[5]*n+o[9]*a+o[13])*u,this.z=(o[2]*t+o[6]*n+o[10]*a+o[14])*u,this}applyQuaternion(e){const t=this.x,n=this.y,a=this.z,o=e.x,u=e.y,d=e.z,h=e.w,p=2*(u*a-d*n),y=2*(d*t-o*a),v=2*(o*n-u*t);return this.x=t+h*p+u*v-d*y,this.y=n+h*y+d*p-o*v,this.z=a+h*v+o*y-u*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,a=this.z,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*a,this.y=o[1]*t+o[5]*n+o[9]*a,this.z=o[2]*t+o[6]*n+o[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this.z=fn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this.z=fn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(fn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,a=e.y,o=e.z,u=t.x,d=t.y,h=t.z;return this.x=a*h-o*d,this.y=o*u-n*h,this.z=n*d-a*u,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Tb.copy(this).projectOnVector(e),this.sub(Tb)}reflect(e){return this.sub(Tb.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(fn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,a=this.z-e.z;return t*t+n*n+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const a=Math.sin(t)*e;return this.x=a*Math.sin(n),this.y=Math.cos(t)*e,this.z=a*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=a,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Tb=new Q,PE=new Qr;class Sn{constructor(e,t,n,a,o,u,d,h,p){Sn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,a,o,u,d,h,p)}set(e,t,n,a,o,u,d,h,p){const y=this.elements;return y[0]=e,y[1]=a,y[2]=d,y[3]=t,y[4]=o,y[5]=h,y[6]=n,y[7]=u,y[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,a=t.elements,o=this.elements,u=n[0],d=n[3],h=n[6],p=n[1],y=n[4],v=n[7],x=n[2],S=n[5],E=n[8],C=a[0],T=a[3],M=a[6],R=a[1],I=a[4],L=a[7],z=a[2],P=a[5],V=a[8];return o[0]=u*C+d*R+h*z,o[3]=u*T+d*I+h*P,o[6]=u*M+d*L+h*V,o[1]=p*C+y*R+v*z,o[4]=p*T+y*I+v*P,o[7]=p*M+y*L+v*V,o[2]=x*C+S*R+E*z,o[5]=x*T+S*I+E*P,o[8]=x*M+S*L+E*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],a=e[2],o=e[3],u=e[4],d=e[5],h=e[6],p=e[7],y=e[8];return t*u*y-t*d*p-n*o*y+n*d*h+a*o*p-a*u*h}invert(){const e=this.elements,t=e[0],n=e[1],a=e[2],o=e[3],u=e[4],d=e[5],h=e[6],p=e[7],y=e[8],v=y*u-d*p,x=d*h-y*o,S=p*o-u*h,E=t*v+n*x+a*S;if(E===0)return this.set(0,0,0,0,0,0,0,0,0);const C=1/E;return e[0]=v*C,e[1]=(a*p-y*n)*C,e[2]=(d*n-a*u)*C,e[3]=x*C,e[4]=(y*t-a*h)*C,e[5]=(a*o-d*t)*C,e[6]=S*C,e[7]=(n*h-p*t)*C,e[8]=(u*t-n*o)*C,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,a,o,u,d){const h=Math.cos(o),p=Math.sin(o);return this.set(n*h,n*p,-n*(h*u+p*d)+u+e,-a*p,a*h,-a*(-p*u+h*d)+d+t,0,0,1),this}scale(e,t){return this.premultiply(Ab.makeScale(e,t)),this}rotate(e){return this.premultiply(Ab.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ab.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let a=0;a<9;a++)if(t[a]!==n[a])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Ab=new Sn,zE=new Sn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),FE=new Sn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function UO(){const i={enabled:!0,workingColorSpace:Eo,spaces:{},convert:function(a,o,u){return this.enabled===!1||o===u||!o||!u||(this.spaces[o].transfer===si&&(a.r=ec(a.r),a.g=ec(a.g),a.b=ec(a.b)),this.spaces[o].primaries!==this.spaces[u].primaries&&(a.applyMatrix3(this.spaces[o].toXYZ),a.applyMatrix3(this.spaces[u].fromXYZ)),this.spaces[u].transfer===si&&(a.r=Ah(a.r),a.g=Ah(a.g),a.b=Ah(a.b))),a},workingToColorSpace:function(a,o){return this.convert(a,this.workingColorSpace,o)},colorSpaceToWorking:function(a,o){return this.convert(a,o,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===Ql?fg:this.spaces[a].transfer},getToneMappingMode:function(a){return this.spaces[a].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(a,o=this.workingColorSpace){return a.fromArray(this.spaces[o].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,o,u){return a.copy(this.spaces[o].toXYZ).multiply(this.spaces[u].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,o){return mg("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(a,o)},toWorkingColorSpace:function(a,o){return mg("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(a,o)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Eo]:{primaries:e,whitePoint:n,transfer:fg,toXYZ:zE,fromXYZ:FE,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Fr},outputColorSpaceConfig:{drawingBufferColorSpace:Fr}},[Fr]:{primaries:e,whitePoint:n,transfer:si,toXYZ:zE,fromXYZ:FE,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Fr}}}),i}const Gn=UO();function ec(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Ah(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Yd;class OC{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Yd===void 0&&(Yd=hg("canvas")),Yd.width=e.width,Yd.height=e.height;const a=Yd.getContext("2d");e instanceof ImageData?a.putImageData(e,0,0):a.drawImage(e,0,0,e.width,e.height),n=Yd}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=hg("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const a=n.getImageData(0,0,e.width,e.height),o=a.data;for(let u=0;u<o.length;u++)o[u]=ec(o[u]/255)*255;return n.putImageData(a,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(ec(t[n]/255)*255):t[n]=ec(t[n]);return{data:t,width:e.width,height:e.height}}else return Rt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let OO=0;class ru{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:OO++}),this.uuid=ms(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},a=this.data;if(a!==null){let o;if(Array.isArray(a)){o=[];for(let u=0,d=a.length;u<d;u++)a[u].isDataTexture?o.push(Cb(a[u].image)):o.push(Cb(a[u]))}else o=Cb(a);n.url=o}return t||(e.images[this.uuid]=n),n}}function Cb(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?OC.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(Rt("Texture: Unable to serialize Texture."),{})}let PO=0;const Rb=new Q;class di extends hl{constructor(e=di.DEFAULT_IMAGE,t=di.DEFAULT_MAPPING,n=nr,a=nr,o=jn,u=cl,d=pr,h=Br,p=di.DEFAULT_ANISOTROPY,y=Ql){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:PO++}),this.uuid=ms(),this.name="",this.source=new ru(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=a,this.magFilter=o,this.minFilter=u,this.anisotropy=p,this.format=d,this.internalFormat=null,this.type=h,this.offset=new Ze(0,0),this.repeat=new Ze(1,1),this.center=new Ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Sn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=y,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Rb).x}get height(){return this.source.getSize(Rb).y}get depth(){return this.source.getSize(Rb).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){Rt(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){Rt(`Texture.setValues(): property '${t}' does not exist.`);continue}a&&n&&a.isVector2&&n.isVector2||a&&n&&a.isVector3&&n.isVector3||a&&n&&a.isMatrix3&&n.isMatrix3?a.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ou)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Nf:e.x=e.x-Math.floor(e.x);break;case nr:e.x=e.x<0?0:1;break;case lg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Nf:e.y=e.y-Math.floor(e.y);break;case nr:e.y=e.y<0?0:1;break;case lg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}di.DEFAULT_IMAGE=null;di.DEFAULT_MAPPING=ou;di.DEFAULT_ANISOTROPY=1;class vi{constructor(e=0,t=0,n=0,a=1){vi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,a){return this.x=e,this.y=t,this.z=n,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,a=this.z,o=this.w,u=e.elements;return this.x=u[0]*t+u[4]*n+u[8]*a+u[12]*o,this.y=u[1]*t+u[5]*n+u[9]*a+u[13]*o,this.z=u[2]*t+u[6]*n+u[10]*a+u[14]*o,this.w=u[3]*t+u[7]*n+u[11]*a+u[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,a,o;const h=e.elements,p=h[0],y=h[4],v=h[8],x=h[1],S=h[5],E=h[9],C=h[2],T=h[6],M=h[10];if(Math.abs(y-x)<.01&&Math.abs(v-C)<.01&&Math.abs(E-T)<.01){if(Math.abs(y+x)<.1&&Math.abs(v+C)<.1&&Math.abs(E+T)<.1&&Math.abs(p+S+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const I=(p+1)/2,L=(S+1)/2,z=(M+1)/2,P=(y+x)/4,V=(v+C)/4,N=(E+T)/4;return I>L&&I>z?I<.01?(n=0,a=.707106781,o=.707106781):(n=Math.sqrt(I),a=P/n,o=V/n):L>z?L<.01?(n=.707106781,a=0,o=.707106781):(a=Math.sqrt(L),n=P/a,o=N/a):z<.01?(n=.707106781,a=.707106781,o=0):(o=Math.sqrt(z),n=V/o,a=N/o),this.set(n,a,o,t),this}let R=Math.sqrt((T-E)*(T-E)+(v-C)*(v-C)+(x-y)*(x-y));return Math.abs(R)<.001&&(R=1),this.x=(T-E)/R,this.y=(v-C)/R,this.z=(x-y)/R,this.w=Math.acos((p+S+M-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this.z=fn(this.z,e.z,t.z),this.w=fn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this.z=fn(this.z,e,t),this.w=fn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(fn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class P1 extends hl{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:jn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new vi(0,0,e,t),this.scissorTest=!1,this.viewport=new vi(0,0,e,t),this.textures=[];const a={width:e,height:t,depth:n.depth},o=new di(a),u=n.count;for(let d=0;d<u;d++)this.textures[d]=o.clone(),this.textures[d].isRenderTargetTexture=!0,this.textures[d].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:jn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let a=0,o=this.textures.length;a<o;a++)this.textures[a].image.width=e,this.textures[a].image.height=t,this.textures[a].image.depth=n,this.textures[a].isData3DTexture!==!0&&(this.textures[a].isArrayTexture=this.textures[a].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const a=Object.assign({},e.textures[t].image);this.textures[t].source=new ru(a)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ua extends P1{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class i_ extends di{constructor(e=null,t=1,n=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:a},this.magFilter=hr,this.minFilter=hr,this.wrapR=nr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class zO extends Ua{constructor(e=1,t=1,n=1,a={}){super(e,t,a),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new i_(null,e,t,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class r_ extends di{constructor(e=null,t=1,n=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:a},this.magFilter=hr,this.minFilter=hr,this.wrapR=nr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class FO extends Ua{constructor(e=1,t=1,n=1,a={}){super(e,t,a),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new r_(null,e,t,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class hn{constructor(e,t,n,a,o,u,d,h,p,y,v,x,S,E,C,T){hn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,a,o,u,d,h,p,y,v,x,S,E,C,T)}set(e,t,n,a,o,u,d,h,p,y,v,x,S,E,C,T){const M=this.elements;return M[0]=e,M[4]=t,M[8]=n,M[12]=a,M[1]=o,M[5]=u,M[9]=d,M[13]=h,M[2]=p,M[6]=y,M[10]=v,M[14]=x,M[3]=S,M[7]=E,M[11]=C,M[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new hn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),n.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this)}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,n=e.elements,a=1/Zd.setFromMatrixColumn(e,0).length(),o=1/Zd.setFromMatrixColumn(e,1).length(),u=1/Zd.setFromMatrixColumn(e,2).length();return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=0,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=0,t[8]=n[8]*u,t[9]=n[9]*u,t[10]=n[10]*u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,a=e.y,o=e.z,u=Math.cos(n),d=Math.sin(n),h=Math.cos(a),p=Math.sin(a),y=Math.cos(o),v=Math.sin(o);if(e.order==="XYZ"){const x=u*y,S=u*v,E=d*y,C=d*v;t[0]=h*y,t[4]=-h*v,t[8]=p,t[1]=S+E*p,t[5]=x-C*p,t[9]=-d*h,t[2]=C-x*p,t[6]=E+S*p,t[10]=u*h}else if(e.order==="YXZ"){const x=h*y,S=h*v,E=p*y,C=p*v;t[0]=x+C*d,t[4]=E*d-S,t[8]=u*p,t[1]=u*v,t[5]=u*y,t[9]=-d,t[2]=S*d-E,t[6]=C+x*d,t[10]=u*h}else if(e.order==="ZXY"){const x=h*y,S=h*v,E=p*y,C=p*v;t[0]=x-C*d,t[4]=-u*v,t[8]=E+S*d,t[1]=S+E*d,t[5]=u*y,t[9]=C-x*d,t[2]=-u*p,t[6]=d,t[10]=u*h}else if(e.order==="ZYX"){const x=u*y,S=u*v,E=d*y,C=d*v;t[0]=h*y,t[4]=E*p-S,t[8]=x*p+C,t[1]=h*v,t[5]=C*p+x,t[9]=S*p-E,t[2]=-p,t[6]=d*h,t[10]=u*h}else if(e.order==="YZX"){const x=u*h,S=u*p,E=d*h,C=d*p;t[0]=h*y,t[4]=C-x*v,t[8]=E*v+S,t[1]=v,t[5]=u*y,t[9]=-d*y,t[2]=-p*y,t[6]=S*v+E,t[10]=x-C*v}else if(e.order==="XZY"){const x=u*h,S=u*p,E=d*h,C=d*p;t[0]=h*y,t[4]=-v,t[8]=p*y,t[1]=x*v+C,t[5]=u*y,t[9]=S*v-E,t[2]=E*v-S,t[6]=d*y,t[10]=C*v+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(BO,e,kO)}lookAt(e,t,n){const a=this.elements;return fs.subVectors(e,t),fs.lengthSq()===0&&(fs.z=1),fs.normalize(),qc.crossVectors(n,fs),qc.lengthSq()===0&&(Math.abs(n.z)===1?fs.x+=1e-4:fs.z+=1e-4,fs.normalize(),qc.crossVectors(n,fs)),qc.normalize(),Ov.crossVectors(fs,qc),a[0]=qc.x,a[4]=Ov.x,a[8]=fs.x,a[1]=qc.y,a[5]=Ov.y,a[9]=fs.y,a[2]=qc.z,a[6]=Ov.z,a[10]=fs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,a=t.elements,o=this.elements,u=n[0],d=n[4],h=n[8],p=n[12],y=n[1],v=n[5],x=n[9],S=n[13],E=n[2],C=n[6],T=n[10],M=n[14],R=n[3],I=n[7],L=n[11],z=n[15],P=a[0],V=a[4],N=a[8],O=a[12],K=a[1],H=a[5],te=a[9],ee=a[13],ae=a[2],se=a[6],G=a[10],$=a[14],le=a[3],be=a[7],Ae=a[11],Y=a[15];return o[0]=u*P+d*K+h*ae+p*le,o[4]=u*V+d*H+h*se+p*be,o[8]=u*N+d*te+h*G+p*Ae,o[12]=u*O+d*ee+h*$+p*Y,o[1]=y*P+v*K+x*ae+S*le,o[5]=y*V+v*H+x*se+S*be,o[9]=y*N+v*te+x*G+S*Ae,o[13]=y*O+v*ee+x*$+S*Y,o[2]=E*P+C*K+T*ae+M*le,o[6]=E*V+C*H+T*se+M*be,o[10]=E*N+C*te+T*G+M*Ae,o[14]=E*O+C*ee+T*$+M*Y,o[3]=R*P+I*K+L*ae+z*le,o[7]=R*V+I*H+L*se+z*be,o[11]=R*N+I*te+L*G+z*Ae,o[15]=R*O+I*ee+L*$+z*Y,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],a=e[8],o=e[12],u=e[1],d=e[5],h=e[9],p=e[13],y=e[2],v=e[6],x=e[10],S=e[14],E=e[3],C=e[7],T=e[11],M=e[15],R=h*S-p*x,I=d*S-p*v,L=d*x-h*v,z=u*S-p*y,P=u*x-h*y,V=u*v-d*y;return t*(C*R-T*I+M*L)-n*(E*R-T*z+M*P)+a*(E*I-C*z+M*V)-o*(E*L-C*P+T*V)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=t,a[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],a=e[2],o=e[3],u=e[4],d=e[5],h=e[6],p=e[7],y=e[8],v=e[9],x=e[10],S=e[11],E=e[12],C=e[13],T=e[14],M=e[15],R=t*d-n*u,I=t*h-a*u,L=t*p-o*u,z=n*h-a*d,P=n*p-o*d,V=a*p-o*h,N=y*C-v*E,O=y*T-x*E,K=y*M-S*E,H=v*T-x*C,te=v*M-S*C,ee=x*M-S*T,ae=R*ee-I*te+L*H+z*K-P*O+V*N;if(ae===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const se=1/ae;return e[0]=(d*ee-h*te+p*H)*se,e[1]=(a*te-n*ee-o*H)*se,e[2]=(C*V-T*P+M*z)*se,e[3]=(x*P-v*V-S*z)*se,e[4]=(h*K-u*ee-p*O)*se,e[5]=(t*ee-a*K+o*O)*se,e[6]=(T*L-E*V-M*I)*se,e[7]=(y*V-x*L+S*I)*se,e[8]=(u*te-d*K+p*N)*se,e[9]=(n*K-t*te-o*N)*se,e[10]=(E*P-C*L+M*R)*se,e[11]=(v*L-y*P-S*R)*se,e[12]=(d*O-u*H-h*N)*se,e[13]=(t*H-n*O+a*N)*se,e[14]=(C*I-E*z-T*R)*se,e[15]=(y*z-v*I+x*R)*se,this}scale(e){const t=this.elements,n=e.x,a=e.y,o=e.z;return t[0]*=n,t[4]*=a,t[8]*=o,t[1]*=n,t[5]*=a,t[9]*=o,t[2]*=n,t[6]*=a,t[10]*=o,t[3]*=n,t[7]*=a,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,a))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),a=Math.sin(t),o=1-n,u=e.x,d=e.y,h=e.z,p=o*u,y=o*d;return this.set(p*u+n,p*d-a*h,p*h+a*d,0,p*d+a*h,y*d+n,y*h-a*u,0,p*h-a*d,y*h+a*u,o*h*h+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,a,o,u){return this.set(1,n,o,0,e,1,u,0,t,a,1,0,0,0,0,1),this}compose(e,t,n){const a=this.elements,o=t._x,u=t._y,d=t._z,h=t._w,p=o+o,y=u+u,v=d+d,x=o*p,S=o*y,E=o*v,C=u*y,T=u*v,M=d*v,R=h*p,I=h*y,L=h*v,z=n.x,P=n.y,V=n.z;return a[0]=(1-(C+M))*z,a[1]=(S+L)*z,a[2]=(E-I)*z,a[3]=0,a[4]=(S-L)*P,a[5]=(1-(x+M))*P,a[6]=(T+R)*P,a[7]=0,a[8]=(E+I)*V,a[9]=(T-R)*V,a[10]=(1-(x+C))*V,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,t,n){const a=this.elements;e.x=a[12],e.y=a[13],e.z=a[14];const o=this.determinant();if(o===0)return n.set(1,1,1),t.identity(),this;let u=Zd.set(a[0],a[1],a[2]).length();const d=Zd.set(a[4],a[5],a[6]).length(),h=Zd.set(a[8],a[9],a[10]).length();o<0&&(u=-u),mo.copy(this);const p=1/u,y=1/d,v=1/h;return mo.elements[0]*=p,mo.elements[1]*=p,mo.elements[2]*=p,mo.elements[4]*=y,mo.elements[5]*=y,mo.elements[6]*=y,mo.elements[8]*=v,mo.elements[9]*=v,mo.elements[10]*=v,t.setFromRotationMatrix(mo),n.x=u,n.y=d,n.z=h,this}makePerspective(e,t,n,a,o,u,d=ps,h=!1){const p=this.elements,y=2*o/(t-e),v=2*o/(n-a),x=(t+e)/(t-e),S=(n+a)/(n-a);let E,C;if(h)E=o/(u-o),C=u*o/(u-o);else if(d===ps)E=-(u+o)/(u-o),C=-2*u*o/(u-o);else if(d===If)E=-u/(u-o),C=-u*o/(u-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+d);return p[0]=y,p[4]=0,p[8]=x,p[12]=0,p[1]=0,p[5]=v,p[9]=S,p[13]=0,p[2]=0,p[6]=0,p[10]=E,p[14]=C,p[3]=0,p[7]=0,p[11]=-1,p[15]=0,this}makeOrthographic(e,t,n,a,o,u,d=ps,h=!1){const p=this.elements,y=2/(t-e),v=2/(n-a),x=-(t+e)/(t-e),S=-(n+a)/(n-a);let E,C;if(h)E=1/(u-o),C=u/(u-o);else if(d===ps)E=-2/(u-o),C=-(u+o)/(u-o);else if(d===If)E=-1/(u-o),C=-o/(u-o);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+d);return p[0]=y,p[4]=0,p[8]=0,p[12]=x,p[1]=0,p[5]=v,p[9]=0,p[13]=S,p[2]=0,p[6]=0,p[10]=E,p[14]=C,p[3]=0,p[7]=0,p[11]=0,p[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let a=0;a<16;a++)if(t[a]!==n[a])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Zd=new Q,mo=new hn,BO=new Q(0,0,0),kO=new Q(1,1,1),qc=new Q,Ov=new Q,fs=new Q,BE=new hn,kE=new Qr;class ys{constructor(e=0,t=0,n=0,a=ys.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,a=this._order){return this._x=e,this._y=t,this._z=n,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const a=e.elements,o=a[0],u=a[4],d=a[8],h=a[1],p=a[5],y=a[9],v=a[2],x=a[6],S=a[10];switch(t){case"XYZ":this._y=Math.asin(fn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-y,S),this._z=Math.atan2(-u,o)):(this._x=Math.atan2(x,p),this._z=0);break;case"YXZ":this._x=Math.asin(-fn(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(d,S),this._z=Math.atan2(h,p)):(this._y=Math.atan2(-v,o),this._z=0);break;case"ZXY":this._x=Math.asin(fn(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-v,S),this._z=Math.atan2(-u,p)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-fn(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(x,S),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-u,p));break;case"YZX":this._z=Math.asin(fn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-y,p),this._y=Math.atan2(-v,o)):(this._x=0,this._y=Math.atan2(d,S));break;case"XZY":this._z=Math.asin(-fn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(x,p),this._y=Math.atan2(d,o)):(this._x=Math.atan2(-y,S),this._y=0);break;default:Rt("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return BE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(BE,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return kE.setFromEuler(this),this.setFromQuaternion(kE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ys.DEFAULT_ORDER="XYZ";class Oh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let VO=0;const VE=new Q,Kd=new Qr,jl=new hn,Pv=new Q,Nm=new Q,HO=new Q,GO=new Qr,HE=new Q(1,0,0),GE=new Q(0,1,0),WE=new Q(0,0,1),XE={type:"added"},WO={type:"removed"},$d={type:"childadded",child:null},Nb={type:"childremoved",child:null};class Qn extends hl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:VO++}),this.uuid=ms(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Qn.DEFAULT_UP.clone();const e=new Q,t=new ys,n=new Qr,a=new Q(1,1,1);function o(){n.setFromEuler(t,!1)}function u(){t.setFromQuaternion(n,void 0,!1)}t._onChange(o),n._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new hn},normalMatrix:{value:new Sn}}),this.matrix=new hn,this.matrixWorld=new hn,this.matrixAutoUpdate=Qn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Qn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Oh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.static=!1,this.userData={},this.pivot=null}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Kd.setFromAxisAngle(e,t),this.quaternion.multiply(Kd),this}rotateOnWorldAxis(e,t){return Kd.setFromAxisAngle(e,t),this.quaternion.premultiply(Kd),this}rotateX(e){return this.rotateOnAxis(HE,e)}rotateY(e){return this.rotateOnAxis(GE,e)}rotateZ(e){return this.rotateOnAxis(WE,e)}translateOnAxis(e,t){return VE.copy(e).applyQuaternion(this.quaternion),this.position.add(VE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(HE,e)}translateY(e){return this.translateOnAxis(GE,e)}translateZ(e){return this.translateOnAxis(WE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(jl.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Pv.copy(e):Pv.set(e,t,n);const a=this.parent;this.updateWorldMatrix(!0,!1),Nm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?jl.lookAt(Nm,Pv,this.up):jl.lookAt(Pv,Nm,this.up),this.quaternion.setFromRotationMatrix(jl),a&&(jl.extractRotation(a.matrixWorld),Kd.setFromRotationMatrix(jl),this.quaternion.premultiply(Kd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(Qt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(XE),$d.child=e,this.dispatchEvent($d),$d.child=null):Qt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(WO),Nb.child=e,this.dispatchEvent(Nb),Nb.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),jl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),jl.multiply(e.parent.matrixWorld)),e.applyMatrix4(jl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(XE),$d.child=e,this.dispatchEvent($d),$d.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,a=this.children.length;n<a;n++){const u=this.children[n].getObjectByProperty(e,t);if(u!==void 0)return u}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const a=this.children;for(let o=0,u=a.length;o<u;o++)a[o].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nm,e,HO),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nm,GO,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,a=t.length;n<a;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,a=t.length;n<a;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale);const e=this.pivot;if(e!==null){const t=e.x,n=e.y,a=e.z,o=this.matrix.elements;o[12]+=t-o[0]*t-o[4]*n-o[8]*a,o[13]+=n-o[1]*t-o[5]*n-o[9]*a,o[14]+=a-o[2]*t-o[6]*n-o[10]*a}this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,a=t.length;n<a;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const a=this.children;for(let o=0,u=a.length;o<u;o++)a[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),this.static!==!1&&(a.static=this.static),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.pivot!==null&&(a.pivot=this.pivot.toArray()),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.morphTargetDictionary!==void 0&&(a.morphTargetDictionary=Object.assign({},this.morphTargetDictionary)),this.morphTargetInfluences!==void 0&&(a.morphTargetInfluences=this.morphTargetInfluences.slice()),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(d=>({...d,boundingBox:d.boundingBox?d.boundingBox.toJSON():void 0,boundingSphere:d.boundingSphere?d.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(d=>({...d})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(e),a.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(a.boundingBox=this.boundingBox.toJSON()));function o(d,h){return d[h.uuid]===void 0&&(d[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=o(e.geometries,this.geometry);const d=this.geometry.parameters;if(d!==void 0&&d.shapes!==void 0){const h=d.shapes;if(Array.isArray(h))for(let p=0,y=h.length;p<y;p++){const v=h[p];o(e.shapes,v)}else o(e.shapes,h)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const d=[];for(let h=0,p=this.material.length;h<p;h++)d.push(o(e.materials,this.material[h]));a.material=d}else a.material=o(e.materials,this.material);if(this.children.length>0){a.children=[];for(let d=0;d<this.children.length;d++)a.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let d=0;d<this.animations.length;d++){const h=this.animations[d];a.animations.push(o(e.animations,h))}}if(t){const d=u(e.geometries),h=u(e.materials),p=u(e.textures),y=u(e.images),v=u(e.shapes),x=u(e.skeletons),S=u(e.animations),E=u(e.nodes);d.length>0&&(n.geometries=d),h.length>0&&(n.materials=h),p.length>0&&(n.textures=p),y.length>0&&(n.images=y),v.length>0&&(n.shapes=v),x.length>0&&(n.skeletons=x),S.length>0&&(n.animations=S),E.length>0&&(n.nodes=E)}return n.object=a,n;function u(d){const h=[];for(const p in d){const y=d[p];delete y.metadata,h.push(y)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),e.pivot!==null&&(this.pivot=e.pivot.clone()),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.static=e.static,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const a=e.children[n];this.add(a.clone())}return this}}Qn.DEFAULT_UP=new Q(0,1,0);Qn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Qn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;class Eh extends Qn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const XO={type:"move"};class zy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Eh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Eh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Eh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let a=null,o=null,u=null;const d=this._targetRay,h=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){u=!0;for(const C of e.hand.values()){const T=t.getJointPose(C,n),M=this._getHandJoint(p,C);T!==null&&(M.matrix.fromArray(T.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=T.radius),M.visible=T!==null}const y=p.joints["index-finger-tip"],v=p.joints["thumb-tip"],x=y.position.distanceTo(v.position),S=.02,E=.005;p.inputState.pinching&&x>S+E?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&x<=S-E&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,n),o!==null&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1));d!==null&&(a=t.getPose(e.targetRaySpace,n),a===null&&o!==null&&(a=o),a!==null&&(d.matrix.fromArray(a.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,a.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(a.linearVelocity)):d.hasLinearVelocity=!1,a.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(a.angularVelocity)):d.hasAngularVelocity=!1,this.dispatchEvent(XO)))}return d!==null&&(d.visible=a!==null),h!==null&&(h.visible=o!==null),p!==null&&(p.visible=u!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Eh;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const PC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Yc={h:0,s:0,l:0},zv={h:0,s:0,l:0};function Db(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class Pt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const a=e;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Fr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Gn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,a=Gn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Gn.colorSpaceToWorking(this,a),this}setHSL(e,t,n,a=Gn.workingColorSpace){if(e=O1(e,1),t=fn(t,0,1),n=fn(n,0,1),t===0)this.r=this.g=this.b=n;else{const o=n<=.5?n*(1+t):n+t-n*t,u=2*n-o;this.r=Db(u,o,e+1/3),this.g=Db(u,o,e),this.b=Db(u,o,e-1/3)}return Gn.colorSpaceToWorking(this,a),this}setStyle(e,t=Fr){function n(o){o!==void 0&&parseFloat(o)<1&&Rt("Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const u=a[1],d=a[2];switch(u){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:Rt("Color: Unknown color model "+e)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=a[1],u=o.length;if(u===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(u===6)return this.setHex(parseInt(o,16),t);Rt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Fr){const n=PC[e.toLowerCase()];return n!==void 0?this.setHex(n,t):Rt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ec(e.r),this.g=ec(e.g),this.b=ec(e.b),this}copyLinearToSRGB(e){return this.r=Ah(e.r),this.g=Ah(e.g),this.b=Ah(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Fr){return Gn.workingToColorSpace(ha.copy(this),e),Math.round(fn(ha.r*255,0,255))*65536+Math.round(fn(ha.g*255,0,255))*256+Math.round(fn(ha.b*255,0,255))}getHexString(e=Fr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Gn.workingColorSpace){Gn.workingToColorSpace(ha.copy(this),t);const n=ha.r,a=ha.g,o=ha.b,u=Math.max(n,a,o),d=Math.min(n,a,o);let h,p;const y=(d+u)/2;if(d===u)h=0,p=0;else{const v=u-d;switch(p=y<=.5?v/(u+d):v/(2-u-d),u){case n:h=(a-o)/v+(a<o?6:0);break;case a:h=(o-n)/v+2;break;case o:h=(n-a)/v+4;break}h/=6}return e.h=h,e.s=p,e.l=y,e}getRGB(e,t=Gn.workingColorSpace){return Gn.workingToColorSpace(ha.copy(this),t),e.r=ha.r,e.g=ha.g,e.b=ha.b,e}getStyle(e=Fr){Gn.workingToColorSpace(ha.copy(this),e);const t=ha.r,n=ha.g,a=ha.b;return e!==Fr?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(a*255)})`}offsetHSL(e,t,n){return this.getHSL(Yc),this.setHSL(Yc.h+e,Yc.s+t,Yc.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Yc),e.getHSL(zv);const n=ig(Yc.h,zv.h,t),a=ig(Yc.s,zv.s,t),o=ig(Yc.l,zv.l,t);return this.setHSL(n,a,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,a=this.b,o=e.elements;return this.r=o[0]*t+o[3]*n+o[6]*a,this.g=o[1]*t+o[4]*n+o[7]*a,this.b=o[2]*t+o[5]*n+o[8]*a,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ha=new Pt;Pt.NAMES=PC;class a_{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Pt(e),this.density=t}clone(){return new a_(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class s_{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Pt(e),this.near=t,this.far=n}clone(){return new s_(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let Pg=class extends Qn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ys,this.environmentIntensity=1,this.environmentRotation=new ys,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};const go=new Q,ql=new Q,Ib=new Q,Yl=new Q,Qd=new Q,Jd=new Q,jE=new Q,Lb=new Q,Ub=new Q,Ob=new Q,Pb=new vi,zb=new vi,Fb=new vi;class as{constructor(e=new Q,t=new Q,n=new Q){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,a){a.subVectors(n,t),go.subVectors(e,t),a.cross(go);const o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}static getBarycoord(e,t,n,a,o){go.subVectors(a,t),ql.subVectors(n,t),Ib.subVectors(e,t);const u=go.dot(go),d=go.dot(ql),h=go.dot(Ib),p=ql.dot(ql),y=ql.dot(Ib),v=u*p-d*d;if(v===0)return o.set(0,0,0),null;const x=1/v,S=(p*h-d*y)*x,E=(u*y-d*h)*x;return o.set(1-S-E,E,S)}static containsPoint(e,t,n,a){return this.getBarycoord(e,t,n,a,Yl)===null?!1:Yl.x>=0&&Yl.y>=0&&Yl.x+Yl.y<=1}static getInterpolation(e,t,n,a,o,u,d,h){return this.getBarycoord(e,t,n,a,Yl)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(o,Yl.x),h.addScaledVector(u,Yl.y),h.addScaledVector(d,Yl.z),h)}static getInterpolatedAttribute(e,t,n,a,o,u){return Pb.setScalar(0),zb.setScalar(0),Fb.setScalar(0),Pb.fromBufferAttribute(e,t),zb.fromBufferAttribute(e,n),Fb.fromBufferAttribute(e,a),u.setScalar(0),u.addScaledVector(Pb,o.x),u.addScaledVector(zb,o.y),u.addScaledVector(Fb,o.z),u}static isFrontFacing(e,t,n,a){return go.subVectors(n,t),ql.subVectors(e,t),go.cross(ql).dot(a)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,a){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,t,n,a){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return go.subVectors(this.c,this.b),ql.subVectors(this.a,this.b),go.cross(ql).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return as.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return as.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,a,o){return as.getInterpolation(e,this.a,this.b,this.c,t,n,a,o)}containsPoint(e){return as.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return as.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,a=this.b,o=this.c;let u,d;Qd.subVectors(a,n),Jd.subVectors(o,n),Lb.subVectors(e,n);const h=Qd.dot(Lb),p=Jd.dot(Lb);if(h<=0&&p<=0)return t.copy(n);Ub.subVectors(e,a);const y=Qd.dot(Ub),v=Jd.dot(Ub);if(y>=0&&v<=y)return t.copy(a);const x=h*v-y*p;if(x<=0&&h>=0&&y<=0)return u=h/(h-y),t.copy(n).addScaledVector(Qd,u);Ob.subVectors(e,o);const S=Qd.dot(Ob),E=Jd.dot(Ob);if(E>=0&&S<=E)return t.copy(o);const C=S*p-h*E;if(C<=0&&p>=0&&E<=0)return d=p/(p-E),t.copy(n).addScaledVector(Jd,d);const T=y*E-S*v;if(T<=0&&v-y>=0&&S-E>=0)return jE.subVectors(o,a),d=(v-y)/(v-y+(S-E)),t.copy(a).addScaledVector(jE,d);const M=1/(T+C+x);return u=C*M,d=x*M,t.copy(n).addScaledVector(Qd,u).addScaledVector(Jd,d)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}class ga{constructor(e=new Q(1/0,1/0,1/0),t=new Q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(vo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(vo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=vo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const o=n.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let u=0,d=o.count;u<d;u++)e.isMesh===!0?e.getVertexPosition(u,vo):vo.fromBufferAttribute(o,u),vo.applyMatrix4(e.matrixWorld),this.expandByPoint(vo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Fv.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Fv.copy(n.boundingBox)),Fv.applyMatrix4(e.matrixWorld),this.union(Fv)}const a=e.children;for(let o=0,u=a.length;o<u;o++)this.expandByObject(a[o],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,vo),vo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Dm),Bv.subVectors(this.max,Dm),eh.subVectors(e.a,Dm),th.subVectors(e.b,Dm),nh.subVectors(e.c,Dm),Zc.subVectors(th,eh),Kc.subVectors(nh,th),tf.subVectors(eh,nh);let t=[0,-Zc.z,Zc.y,0,-Kc.z,Kc.y,0,-tf.z,tf.y,Zc.z,0,-Zc.x,Kc.z,0,-Kc.x,tf.z,0,-tf.x,-Zc.y,Zc.x,0,-Kc.y,Kc.x,0,-tf.y,tf.x,0];return!Bb(t,eh,th,nh,Bv)||(t=[1,0,0,0,1,0,0,0,1],!Bb(t,eh,th,nh,Bv))?!1:(kv.crossVectors(Zc,Kc),t=[kv.x,kv.y,kv.z],Bb(t,eh,th,nh,Bv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,vo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(vo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Zl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Zl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Zl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Zl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Zl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Zl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Zl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Zl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Zl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Zl=[new Q,new Q,new Q,new Q,new Q,new Q,new Q,new Q],vo=new Q,Fv=new ga,eh=new Q,th=new Q,nh=new Q,Zc=new Q,Kc=new Q,tf=new Q,Dm=new Q,Bv=new Q,kv=new Q,nf=new Q;function Bb(i,e,t,n,a){for(let o=0,u=i.length-3;o<=u;o+=3){nf.fromArray(i,o);const d=a.x*Math.abs(nf.x)+a.y*Math.abs(nf.y)+a.z*Math.abs(nf.z),h=e.dot(nf),p=t.dot(nf),y=n.dot(nf);if(Math.max(-Math.max(h,p,y),Math.min(h,p,y))>d)return!1}return!0}const Jl=jO();function jO(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),a=new Uint32Array(512);for(let h=0;h<256;++h){const p=h-127;p<-27?(n[h]=0,n[h|256]=32768,a[h]=24,a[h|256]=24):p<-14?(n[h]=1024>>-p-14,n[h|256]=1024>>-p-14|32768,a[h]=-p-1,a[h|256]=-p-1):p<=15?(n[h]=p+15<<10,n[h|256]=p+15<<10|32768,a[h]=13,a[h|256]=13):p<128?(n[h]=31744,n[h|256]=64512,a[h]=24,a[h|256]=24):(n[h]=31744,n[h|256]=64512,a[h]=13,a[h|256]=13)}const o=new Uint32Array(2048),u=new Uint32Array(64),d=new Uint32Array(64);for(let h=1;h<1024;++h){let p=h<<13,y=0;for(;(p&8388608)===0;)p<<=1,y-=8388608;p&=-8388609,y+=947912704,o[h]=p|y}for(let h=1024;h<2048;++h)o[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)u[h]=h<<23;u[31]=1199570944,u[32]=2147483648;for(let h=33;h<63;++h)u[h]=2147483648+(h-32<<23);u[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(d[h]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:a,mantissaTable:o,exponentTable:u,offsetTable:d}}function is(i){Math.abs(i)>65504&&Rt("DataUtils.toHalfFloat(): Value out of range."),i=fn(i,-65504,65504),Jl.floatView[0]=i;const e=Jl.uint32View[0],t=e>>23&511;return Jl.baseTable[t]+((e&8388607)>>Jl.shiftTable[t])}function jm(i){const e=i>>10;return Jl.uint32View[0]=Jl.mantissaTable[Jl.offsetTable[e]+(i&1023)]+Jl.exponentTable[e],Jl.floatView[0]}class Mf{static toHalfFloat(e){return is(e)}static fromHalfFloat(e){return jm(e)}}const br=new Q,Vv=new Ze;let qO=0;class hi{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:qO++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=dg,this.updateRanges=[],this.gpuType=Vi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let a=0,o=this.itemSize;a<o;a++)this.array[e+a]=t.array[n+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Vv.fromBufferAttribute(this,t),Vv.applyMatrix3(e),this.setXY(t,Vv.x,Vv.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)br.fromBufferAttribute(this,t),br.applyMatrix3(e),this.setXYZ(t,br.x,br.y,br.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)br.fromBufferAttribute(this,t),br.applyMatrix4(e),this.setXYZ(t,br.x,br.y,br.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)br.fromBufferAttribute(this,t),br.applyNormalMatrix(e),this.setXYZ(t,br.x,br.y,br.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)br.fromBufferAttribute(this,t),br.transformDirection(e),this.setXYZ(t,br.x,br.y,br.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Ia(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Tn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ia(t,this.array)),t}setX(e,t){return this.normalized&&(t=Tn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ia(t,this.array)),t}setY(e,t){return this.normalized&&(t=Tn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ia(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Tn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ia(t,this.array)),t}setW(e,t){return this.normalized&&(t=Tn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Tn(t,this.array),n=Tn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,a){return e*=this.itemSize,this.normalized&&(t=Tn(t,this.array),n=Tn(n,this.array),a=Tn(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=a,this}setXYZW(e,t,n,a,o){return e*=this.itemSize,this.normalized&&(t=Tn(t,this.array),n=Tn(n,this.array),a=Tn(a,this.array),o=Tn(o,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=a,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==dg&&(e.usage=this.usage),e}}class YO extends hi{constructor(e,t,n){super(new Int8Array(e),t,n)}}class ZO extends hi{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class KO extends hi{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class $O extends hi{constructor(e,t,n){super(new Int16Array(e),t,n)}}class z1 extends hi{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class QO extends hi{constructor(e,t,n){super(new Int32Array(e),t,n)}}class F1 extends hi{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class JO extends hi{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=jm(this.array[e*this.itemSize]);return this.normalized&&(t=Ia(t,this.array)),t}setX(e,t){return this.normalized&&(t=Tn(t,this.array)),this.array[e*this.itemSize]=is(t),this}getY(e){let t=jm(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ia(t,this.array)),t}setY(e,t){return this.normalized&&(t=Tn(t,this.array)),this.array[e*this.itemSize+1]=is(t),this}getZ(e){let t=jm(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ia(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Tn(t,this.array)),this.array[e*this.itemSize+2]=is(t),this}getW(e){let t=jm(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ia(t,this.array)),t}setW(e,t){return this.normalized&&(t=Tn(t,this.array)),this.array[e*this.itemSize+3]=is(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Tn(t,this.array),n=Tn(n,this.array)),this.array[e+0]=is(t),this.array[e+1]=is(n),this}setXYZ(e,t,n,a){return e*=this.itemSize,this.normalized&&(t=Tn(t,this.array),n=Tn(n,this.array),a=Tn(a,this.array)),this.array[e+0]=is(t),this.array[e+1]=is(n),this.array[e+2]=is(a),this}setXYZW(e,t,n,a,o){return e*=this.itemSize,this.normalized&&(t=Tn(t,this.array),n=Tn(n,this.array),a=Tn(a,this.array),o=Tn(o,this.array)),this.array[e+0]=is(t),this.array[e+1]=is(n),this.array[e+2]=is(a),this.array[e+3]=is(o),this}}class Vt extends hi{constructor(e,t,n){super(new Float32Array(e),t,n)}}const eP=new ga,Im=new Q,kb=new Q;class Jr{constructor(e=new Q,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):eP.setFromPoints(e).getCenter(n);let a=0;for(let o=0,u=e.length;o<u;o++)a=Math.max(a,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Im.subVectors(e,this.center);const t=Im.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),a=(n-this.radius)*.5;this.center.addScaledVector(Im,a/n),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(kb.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Im.copy(e.center).add(kb)),this.expandByPoint(Im.copy(e.center).sub(kb))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}let tP=0;const Ws=new hn,Vb=new Qn,ih=new Q,ds=new ga,Lm=new ga,zr=new Q;class _n extends hl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:tP++}),this.uuid=ms(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(dO(e)?F1:z1)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const o=new Sn().getNormalMatrix(e);n.applyNormalMatrix(o),n.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ws.makeRotationFromQuaternion(e),this.applyMatrix4(Ws),this}rotateX(e){return Ws.makeRotationX(e),this.applyMatrix4(Ws),this}rotateY(e){return Ws.makeRotationY(e),this.applyMatrix4(Ws),this}rotateZ(e){return Ws.makeRotationZ(e),this.applyMatrix4(Ws),this}translate(e,t,n){return Ws.makeTranslation(e,t,n),this.applyMatrix4(Ws),this}scale(e,t,n){return Ws.makeScale(e,t,n),this.applyMatrix4(Ws),this}lookAt(e){return Vb.lookAt(e),Vb.updateMatrix(),this.applyMatrix4(Vb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ih).negate(),this.translate(ih.x,ih.y,ih.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let a=0,o=e.length;a<o;a++){const u=e[a];n.push(u.x,u.y,u.z||0)}this.setAttribute("position",new Vt(n,3))}else{const n=Math.min(e.length,t.count);for(let a=0;a<n;a++){const o=e[a];t.setXYZ(a,o.x,o.y,o.z||0)}e.length>t.count&&Rt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ga);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Qt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Q(-1/0,-1/0,-1/0),new Q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,a=t.length;n<a;n++){const o=t[n];ds.setFromBufferAttribute(o),this.morphTargetsRelative?(zr.addVectors(this.boundingBox.min,ds.min),this.boundingBox.expandByPoint(zr),zr.addVectors(this.boundingBox.max,ds.max),this.boundingBox.expandByPoint(zr)):(this.boundingBox.expandByPoint(ds.min),this.boundingBox.expandByPoint(ds.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Qt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Jr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Qt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Q,1/0);return}if(e){const n=this.boundingSphere.center;if(ds.setFromBufferAttribute(e),t)for(let o=0,u=t.length;o<u;o++){const d=t[o];Lm.setFromBufferAttribute(d),this.morphTargetsRelative?(zr.addVectors(ds.min,Lm.min),ds.expandByPoint(zr),zr.addVectors(ds.max,Lm.max),ds.expandByPoint(zr)):(ds.expandByPoint(Lm.min),ds.expandByPoint(Lm.max))}ds.getCenter(n);let a=0;for(let o=0,u=e.count;o<u;o++)zr.fromBufferAttribute(e,o),a=Math.max(a,n.distanceToSquared(zr));if(t)for(let o=0,u=t.length;o<u;o++){const d=t[o],h=this.morphTargetsRelative;for(let p=0,y=d.count;p<y;p++)zr.fromBufferAttribute(d,p),h&&(ih.fromBufferAttribute(e,p),zr.add(ih)),a=Math.max(a,n.distanceToSquared(zr))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&Qt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){Qt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,a=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new hi(new Float32Array(4*n.count),4));const u=this.getAttribute("tangent"),d=[],h=[];for(let N=0;N<n.count;N++)d[N]=new Q,h[N]=new Q;const p=new Q,y=new Q,v=new Q,x=new Ze,S=new Ze,E=new Ze,C=new Q,T=new Q;function M(N,O,K){p.fromBufferAttribute(n,N),y.fromBufferAttribute(n,O),v.fromBufferAttribute(n,K),x.fromBufferAttribute(o,N),S.fromBufferAttribute(o,O),E.fromBufferAttribute(o,K),y.sub(p),v.sub(p),S.sub(x),E.sub(x);const H=1/(S.x*E.y-E.x*S.y);isFinite(H)&&(C.copy(y).multiplyScalar(E.y).addScaledVector(v,-S.y).multiplyScalar(H),T.copy(v).multiplyScalar(S.x).addScaledVector(y,-E.x).multiplyScalar(H),d[N].add(C),d[O].add(C),d[K].add(C),h[N].add(T),h[O].add(T),h[K].add(T))}let R=this.groups;R.length===0&&(R=[{start:0,count:e.count}]);for(let N=0,O=R.length;N<O;++N){const K=R[N],H=K.start,te=K.count;for(let ee=H,ae=H+te;ee<ae;ee+=3)M(e.getX(ee+0),e.getX(ee+1),e.getX(ee+2))}const I=new Q,L=new Q,z=new Q,P=new Q;function V(N){z.fromBufferAttribute(a,N),P.copy(z);const O=d[N];I.copy(O),I.sub(z.multiplyScalar(z.dot(O))).normalize(),L.crossVectors(P,O);const H=L.dot(h[N])<0?-1:1;u.setXYZW(N,I.x,I.y,I.z,H)}for(let N=0,O=R.length;N<O;++N){const K=R[N],H=K.start,te=K.count;for(let ee=H,ae=H+te;ee<ae;ee+=3)V(e.getX(ee+0)),V(e.getX(ee+1)),V(e.getX(ee+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new hi(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let x=0,S=n.count;x<S;x++)n.setXYZ(x,0,0,0);const a=new Q,o=new Q,u=new Q,d=new Q,h=new Q,p=new Q,y=new Q,v=new Q;if(e)for(let x=0,S=e.count;x<S;x+=3){const E=e.getX(x+0),C=e.getX(x+1),T=e.getX(x+2);a.fromBufferAttribute(t,E),o.fromBufferAttribute(t,C),u.fromBufferAttribute(t,T),y.subVectors(u,o),v.subVectors(a,o),y.cross(v),d.fromBufferAttribute(n,E),h.fromBufferAttribute(n,C),p.fromBufferAttribute(n,T),d.add(y),h.add(y),p.add(y),n.setXYZ(E,d.x,d.y,d.z),n.setXYZ(C,h.x,h.y,h.z),n.setXYZ(T,p.x,p.y,p.z)}else for(let x=0,S=t.count;x<S;x+=3)a.fromBufferAttribute(t,x+0),o.fromBufferAttribute(t,x+1),u.fromBufferAttribute(t,x+2),y.subVectors(u,o),v.subVectors(a,o),y.cross(v),n.setXYZ(x+0,y.x,y.y,y.z),n.setXYZ(x+1,y.x,y.y,y.z),n.setXYZ(x+2,y.x,y.y,y.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)zr.fromBufferAttribute(e,t),zr.normalize(),e.setXYZ(t,zr.x,zr.y,zr.z)}toNonIndexed(){function e(d,h){const p=d.array,y=d.itemSize,v=d.normalized,x=new p.constructor(h.length*y);let S=0,E=0;for(let C=0,T=h.length;C<T;C++){d.isInterleavedBufferAttribute?S=h[C]*d.data.stride+d.offset:S=h[C]*y;for(let M=0;M<y;M++)x[E++]=p[S++]}return new hi(x,y,v)}if(this.index===null)return Rt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new _n,n=this.index.array,a=this.attributes;for(const d in a){const h=a[d],p=e(h,n);t.setAttribute(d,p)}const o=this.morphAttributes;for(const d in o){const h=[],p=o[d];for(let y=0,v=p.length;y<v;y++){const x=p[y],S=e(x,n);h.push(S)}t.morphAttributes[d]=h}t.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let d=0,h=u.length;d<h;d++){const p=u[d];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const p in h)h[p]!==void 0&&(e[p]=h[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const h in n){const p=n[h];e.data.attributes[h]=p.toJSON(e.data)}const a={};let o=!1;for(const h in this.morphAttributes){const p=this.morphAttributes[h],y=[];for(let v=0,x=p.length;v<x;v++){const S=p[v];y.push(S.toJSON(e.data))}y.length>0&&(a[h]=y,o=!0)}o&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(e.data.groups=JSON.parse(JSON.stringify(u)));const d=this.boundingSphere;return d!==null&&(e.data.boundingSphere=d.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const a=e.attributes;for(const p in a){const y=a[p];this.setAttribute(p,y.clone(t))}const o=e.morphAttributes;for(const p in o){const y=[],v=o[p];for(let x=0,S=v.length;x<S;x++)y.push(v[x].clone(t));this.morphAttributes[p]=y}this.morphTargetsRelative=e.morphTargetsRelative;const u=e.groups;for(let p=0,y=u.length;p<y;p++){const v=u[p];this.addGroup(v.start,v.count,v.materialIndex)}const d=e.boundingBox;d!==null&&(this.boundingBox=d.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}class o_{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=dg,this.updateRanges=[],this.version=0,this.uuid=ms()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let a=0,o=this.stride;a<o;a++)this.array[e+a]=t.array[n+a];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ra=new Q;class Lf{constructor(e,t,n,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Ra.fromBufferAttribute(this,t),Ra.applyMatrix4(e),this.setXYZ(t,Ra.x,Ra.y,Ra.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ra.fromBufferAttribute(this,t),Ra.applyNormalMatrix(e),this.setXYZ(t,Ra.x,Ra.y,Ra.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ra.fromBufferAttribute(this,t),Ra.transformDirection(e),this.setXYZ(t,Ra.x,Ra.y,Ra.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Ia(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Tn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Tn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Tn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Tn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Tn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ia(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ia(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ia(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ia(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Tn(t,this.array),n=Tn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Tn(t,this.array),n=Tn(n,this.array),a=Tn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=a,this}setXYZW(e,t,n,a,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=Tn(t,this.array),n=Tn(n,this.array),a=Tn(a,this.array),o=Tn(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=a,this.data.array[e+3]=o,this}clone(e){if(e===void 0){pg("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[a+o])}return new hi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Lf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){pg("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[a+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}let nP=0;class ya extends hl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:nP++}),this.uuid=ms(),this.name="",this.type="Material",this.blending=Tf,this.side=tc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Xy,this.blendDst=jy,this.blendEquation=nu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Pt(0,0,0),this.blendAlpha=0,this.depthFunc=Rf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ZS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=yf,this.stencilZFail=yf,this.stencilZPass=yf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){Rt(`Material: parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){Rt(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(n):a&&a.isVector3&&n&&n.isVector3?a.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Tf&&(n.blending=this.blending),this.side!==tc&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Xy&&(n.blendSrc=this.blendSrc),this.blendDst!==jy&&(n.blendDst=this.blendDst),this.blendEquation!==nu&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Rf&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ZS&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==yf&&(n.stencilFail=this.stencilFail),this.stencilZFail!==yf&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==yf&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.allowOverride===!1&&(n.allowOverride=!1),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function a(o){const u=[];for(const d in o){const h=o[d];delete h.metadata,u.push(h)}return u}if(t){const o=a(e.textures),u=a(e.images);o.length>0&&(n.textures=o),u.length>0&&(n.images=u)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const a=t.length;n=new Array(a);for(let o=0;o!==a;++o)n[o]=t[o].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class B1 extends ya{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Pt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let rh;const Um=new Q,ah=new Q,sh=new Q,oh=new Ze,Om=new Ze,zC=new hn,Hv=new Q,Pm=new Q,Gv=new Q,qE=new Ze,Hb=new Ze,YE=new Ze;class FC extends Qn{constructor(e=new B1){if(super(),this.isSprite=!0,this.type="Sprite",rh===void 0){rh=new _n;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new o_(t,5);rh.setIndex([0,1,2,0,2,3]),rh.setAttribute("position",new Lf(n,3,0,!1)),rh.setAttribute("uv",new Lf(n,2,3,!1))}this.geometry=rh,this.material=e,this.center=new Ze(.5,.5),this.count=1}raycast(e,t){e.camera===null&&Qt('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ah.setFromMatrixScale(this.matrixWorld),zC.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),sh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ah.multiplyScalar(-sh.z);const n=this.material.rotation;let a,o;n!==0&&(o=Math.cos(n),a=Math.sin(n));const u=this.center;Wv(Hv.set(-.5,-.5,0),sh,u,ah,a,o),Wv(Pm.set(.5,-.5,0),sh,u,ah,a,o),Wv(Gv.set(.5,.5,0),sh,u,ah,a,o),qE.set(0,0),Hb.set(1,0),YE.set(1,1);let d=e.ray.intersectTriangle(Hv,Pm,Gv,!1,Um);if(d===null&&(Wv(Pm.set(-.5,.5,0),sh,u,ah,a,o),Hb.set(0,1),d=e.ray.intersectTriangle(Hv,Gv,Pm,!1,Um),d===null))return;const h=e.ray.origin.distanceTo(Um);h<e.near||h>e.far||t.push({distance:h,point:Um.clone(),uv:as.getInterpolation(Um,Hv,Pm,Gv,qE,Hb,YE,new Ze),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Wv(i,e,t,n,a,o){oh.subVectors(i,t).addScalar(.5).multiply(n),a!==void 0?(Om.x=o*oh.x-a*oh.y,Om.y=a*oh.x+o*oh.y):Om.copy(oh),i.copy(e),i.x+=Om.x,i.y+=Om.y,i.applyMatrix4(zC)}const Xv=new Q,ZE=new Q;class BC extends Qn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,a=t.length;n<a;n++){const o=t[n];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const a=this.levels;let o;for(o=0;o<a.length&&!(t<a[o].distance);o++);return a.splice(o,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const a=t.splice(n,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,a;for(n=1,a=t.length;n<a;n++){let o=t[n].distance;if(t[n].object.visible&&(o-=o*t[n].hysteresis),e<o)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Xv.setFromMatrixPosition(this.matrixWorld);const a=e.ray.origin.distanceTo(Xv);this.getObjectForDistance(a).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Xv.setFromMatrixPosition(e.matrixWorld),ZE.setFromMatrixPosition(this.matrixWorld);const n=Xv.distanceTo(ZE)/e.zoom;t[0].object.visible=!0;let a,o;for(a=1,o=t.length;a<o;a++){let u=t[a].distance;if(t[a].object.visible&&(u-=u*t[a].hysteresis),n>=u)t[a-1].object.visible=!1,t[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<o;a++)t[a].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let a=0,o=n.length;a<o;a++){const u=n[a];t.object.levels.push({object:u.object.uuid,distance:u.distance,hysteresis:u.hysteresis})}return t}}const Kl=new Q,Gb=new Q,jv=new Q,$c=new Q,Wb=new Q,qv=new Q,Xb=new Q;class zf{constructor(e=new Q,t=new Q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Kl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Kl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Kl.copy(this.origin).addScaledVector(this.direction,t),Kl.distanceToSquared(e))}distanceSqToSegment(e,t,n,a){Gb.copy(e).add(t).multiplyScalar(.5),jv.copy(t).sub(e).normalize(),$c.copy(this.origin).sub(Gb);const o=e.distanceTo(t)*.5,u=-this.direction.dot(jv),d=$c.dot(this.direction),h=-$c.dot(jv),p=$c.lengthSq(),y=Math.abs(1-u*u);let v,x,S,E;if(y>0)if(v=u*h-d,x=u*d-h,E=o*y,v>=0)if(x>=-E)if(x<=E){const C=1/y;v*=C,x*=C,S=v*(v+u*x+2*d)+x*(u*v+x+2*h)+p}else x=o,v=Math.max(0,-(u*x+d)),S=-v*v+x*(x+2*h)+p;else x=-o,v=Math.max(0,-(u*x+d)),S=-v*v+x*(x+2*h)+p;else x<=-E?(v=Math.max(0,-(-u*o+d)),x=v>0?-o:Math.min(Math.max(-o,-h),o),S=-v*v+x*(x+2*h)+p):x<=E?(v=0,x=Math.min(Math.max(-o,-h),o),S=x*(x+2*h)+p):(v=Math.max(0,-(u*o+d)),x=v>0?o:Math.min(Math.max(-o,-h),o),S=-v*v+x*(x+2*h)+p);else x=u>0?-o:o,v=Math.max(0,-(u*x+d)),S=-v*v+x*(x+2*h)+p;return n&&n.copy(this.origin).addScaledVector(this.direction,v),a&&a.copy(Gb).addScaledVector(jv,x),S}intersectSphere(e,t){Kl.subVectors(e.center,this.origin);const n=Kl.dot(this.direction),a=Kl.dot(Kl)-n*n,o=e.radius*e.radius;if(a>o)return null;const u=Math.sqrt(o-a),d=n-u,h=n+u;return h<0?null:d<0?this.at(h,t):this.at(d,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,a,o,u,d,h;const p=1/this.direction.x,y=1/this.direction.y,v=1/this.direction.z,x=this.origin;return p>=0?(n=(e.min.x-x.x)*p,a=(e.max.x-x.x)*p):(n=(e.max.x-x.x)*p,a=(e.min.x-x.x)*p),y>=0?(o=(e.min.y-x.y)*y,u=(e.max.y-x.y)*y):(o=(e.max.y-x.y)*y,u=(e.min.y-x.y)*y),n>u||o>a||((o>n||isNaN(n))&&(n=o),(u<a||isNaN(a))&&(a=u),v>=0?(d=(e.min.z-x.z)*v,h=(e.max.z-x.z)*v):(d=(e.max.z-x.z)*v,h=(e.min.z-x.z)*v),n>h||d>a)||((d>n||n!==n)&&(n=d),(h<a||a!==a)&&(a=h),a<0)?null:this.at(n>=0?n:a,t)}intersectsBox(e){return this.intersectBox(e,Kl)!==null}intersectTriangle(e,t,n,a,o){Wb.subVectors(t,e),qv.subVectors(n,e),Xb.crossVectors(Wb,qv);let u=this.direction.dot(Xb),d;if(u>0){if(a)return null;d=1}else if(u<0)d=-1,u=-u;else return null;$c.subVectors(this.origin,e);const h=d*this.direction.dot(qv.crossVectors($c,qv));if(h<0)return null;const p=d*this.direction.dot(Wb.cross($c));if(p<0||h+p>u)return null;const y=-d*$c.dot(Xb);return y<0?null:this.at(y/u,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class nc extends ya{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ys,this.combine=Ig,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const KE=new hn,rf=new zf,Yv=new Jr,$E=new Q,Zv=new Q,Kv=new Q,$v=new Q,jb=new Q,Qv=new Q,QE=new Q,Jv=new Q;class Ki extends Qn{constructor(e=new _n,t=new nc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const a=t[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=a.length;o<u;o++){const d=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=o}}}}getVertexPosition(e,t){const n=this.geometry,a=n.attributes.position,o=n.morphAttributes.position,u=n.morphTargetsRelative;t.fromBufferAttribute(a,e);const d=this.morphTargetInfluences;if(o&&d){Qv.set(0,0,0);for(let h=0,p=o.length;h<p;h++){const y=d[h],v=o[h];y!==0&&(jb.fromBufferAttribute(v,e),u?Qv.addScaledVector(jb,y):Qv.addScaledVector(jb.sub(t),y))}t.add(Qv)}return t}raycast(e,t){const n=this.geometry,a=this.material,o=this.matrixWorld;a!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Yv.copy(n.boundingSphere),Yv.applyMatrix4(o),rf.copy(e.ray).recast(e.near),!(Yv.containsPoint(rf.origin)===!1&&(rf.intersectSphere(Yv,$E)===null||rf.origin.distanceToSquared($E)>(e.far-e.near)**2))&&(KE.copy(o).invert(),rf.copy(e.ray).applyMatrix4(KE),!(n.boundingBox!==null&&rf.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,rf)))}_computeIntersections(e,t,n){let a;const o=this.geometry,u=this.material,d=o.index,h=o.attributes.position,p=o.attributes.uv,y=o.attributes.uv1,v=o.attributes.normal,x=o.groups,S=o.drawRange;if(d!==null)if(Array.isArray(u))for(let E=0,C=x.length;E<C;E++){const T=x[E],M=u[T.materialIndex],R=Math.max(T.start,S.start),I=Math.min(d.count,Math.min(T.start+T.count,S.start+S.count));for(let L=R,z=I;L<z;L+=3){const P=d.getX(L),V=d.getX(L+1),N=d.getX(L+2);a=ey(this,M,e,n,p,y,v,P,V,N),a&&(a.faceIndex=Math.floor(L/3),a.face.materialIndex=T.materialIndex,t.push(a))}}else{const E=Math.max(0,S.start),C=Math.min(d.count,S.start+S.count);for(let T=E,M=C;T<M;T+=3){const R=d.getX(T),I=d.getX(T+1),L=d.getX(T+2);a=ey(this,u,e,n,p,y,v,R,I,L),a&&(a.faceIndex=Math.floor(T/3),t.push(a))}}else if(h!==void 0)if(Array.isArray(u))for(let E=0,C=x.length;E<C;E++){const T=x[E],M=u[T.materialIndex],R=Math.max(T.start,S.start),I=Math.min(h.count,Math.min(T.start+T.count,S.start+S.count));for(let L=R,z=I;L<z;L+=3){const P=L,V=L+1,N=L+2;a=ey(this,M,e,n,p,y,v,P,V,N),a&&(a.faceIndex=Math.floor(L/3),a.face.materialIndex=T.materialIndex,t.push(a))}}else{const E=Math.max(0,S.start),C=Math.min(h.count,S.start+S.count);for(let T=E,M=C;T<M;T+=3){const R=T,I=T+1,L=T+2;a=ey(this,u,e,n,p,y,v,R,I,L),a&&(a.faceIndex=Math.floor(T/3),t.push(a))}}}}function iP(i,e,t,n,a,o,u,d){let h;if(e.side===ma?h=n.intersectTriangle(u,o,a,!0,d):h=n.intersectTriangle(a,o,u,e.side===tc,d),h===null)return null;Jv.copy(d),Jv.applyMatrix4(i.matrixWorld);const p=t.ray.origin.distanceTo(Jv);return p<t.near||p>t.far?null:{distance:p,point:Jv.clone(),object:i}}function ey(i,e,t,n,a,o,u,d,h,p){i.getVertexPosition(d,Zv),i.getVertexPosition(h,Kv),i.getVertexPosition(p,$v);const y=iP(i,e,t,n,Zv,Kv,$v,QE);if(y){const v=new Q;as.getBarycoord(QE,Zv,Kv,$v,v),a&&(y.uv=as.getInterpolatedAttribute(a,d,h,p,v,new Ze)),o&&(y.uv1=as.getInterpolatedAttribute(o,d,h,p,v,new Ze)),u&&(y.normal=as.getInterpolatedAttribute(u,d,h,p,v,new Q),y.normal.dot(n.direction)>0&&y.normal.multiplyScalar(-1));const x={a:d,b:h,c:p,normal:new Q,materialIndex:0};as.getNormal(Zv,Kv,$v,x.normal),y.face=x,y.barycoord=v}return y}const JE=new Q,ew=new vi,tw=new vi,rP=new Q,nw=new hn,ty=new Q,qb=new Jr,iw=new hn,Yb=new zf;class kC extends Ki{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=jS,this.bindMatrix=new hn,this.bindMatrixInverse=new hn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ga),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,ty),this.boundingBox.expandByPoint(ty)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Jr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,ty),this.boundingSphere.expandByPoint(ty)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,a=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),qb.copy(this.boundingSphere),qb.applyMatrix4(a),e.ray.intersectsSphere(qb)!==!1&&(iw.copy(a).invert(),Yb.copy(e.ray).applyMatrix4(iw),!(this.boundingBox!==null&&Yb.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Yb)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new vi,t=this.geometry.attributes.skinWeight;for(let n=0,a=t.count;n<a;n++){e.fromBufferAttribute(t,n);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===jS?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===xC?this.bindMatrixInverse.copy(this.bindMatrix).invert():Rt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,a=this.geometry;ew.fromBufferAttribute(a.attributes.skinIndex,e),tw.fromBufferAttribute(a.attributes.skinWeight,e),JE.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const u=tw.getComponent(o);if(u!==0){const d=ew.getComponent(o);nw.multiplyMatrices(n.bones[d].matrixWorld,n.boneInverses[d]),t.addScaledVector(rP.copy(JE).applyMatrix4(nw),u)}}return t.applyMatrix4(this.bindMatrixInverse)}}class k1 extends Qn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ys extends di{constructor(e=null,t=1,n=1,a,o,u,d,h,p=hr,y=hr,v,x){super(null,u,d,h,p,y,a,o,v,x),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const rw=new hn,aP=new hn;class l_{constructor(e=[],t=[]){this.uuid=ms(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){Rt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,a=this.bones.length;n<a;n++)this.boneInverses.push(new hn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new hn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,a=this.boneTexture;for(let o=0,u=e.length;o<u;o++){const d=e[o]?e[o].matrixWorld:aP;rw.multiplyMatrices(d,t[o]),rw.toArray(n,o*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new l_(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Ys(t,e,e,pr,Vi);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const a=this.bones[t];if(a.name===e)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,a=e.bones.length;n<a;n++){const o=e.bones[n];let u=t[o];u===void 0&&(Rt("Skeleton: No bone found with UUID:",o),u=new k1),this.bones.push(u),this.boneInverses.push(new hn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let a=0,o=t.length;a<o;a++){const u=t[a];e.bones.push(u.uuid);const d=n[a];e.boneInverses.push(d.toArray())}return e}}class Ph extends hi{constructor(e,t,n,a=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const lh=new hn,aw=new hn,ny=[],sw=new ga,sP=new hn,zm=new Ki,Fm=new Jr;class VC extends Ki{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ph(new Float32Array(n*16),16),this.previousInstanceMatrix=null,this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<n;a++)this.setMatrixAt(a,sP)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ga),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,lh),sw.copy(e.boundingBox).applyMatrix4(lh),this.boundingBox.union(sw)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Jr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,lh),Fm.copy(e.boundingSphere).applyMatrix4(lh),this.boundingSphere.union(Fm)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.previousInstanceMatrix!==null&&(this.previousInstanceMatrix=e.previousInstanceMatrix.clone()),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,a=this.morphTexture.source.data.data,o=n.length+1,u=e*o+1;for(let d=0;d<n.length;d++)n[d]=a[u+d]}raycast(e,t){const n=this.matrixWorld,a=this.count;if(zm.geometry=this.geometry,zm.material=this.material,zm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Fm.copy(this.boundingSphere),Fm.applyMatrix4(n),e.ray.intersectsSphere(Fm)!==!1))for(let o=0;o<a;o++){this.getMatrixAt(o,lh),aw.multiplyMatrices(n,lh),zm.matrixWorld=aw,zm.raycast(e,ny);for(let u=0,d=ny.length;u<d;u++){const h=ny[u];h.instanceId=o,h.object=this,t.push(h)}ny.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Ph(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,a=n.length+1;this.morphTexture===null&&(this.morphTexture=new Ys(new Float32Array(a*this.count),a,this.count,Ug,Vi));const o=this.morphTexture.source.data.data;let u=0;for(let p=0;p<n.length;p++)u+=n[p];const d=this.geometry.morphTargetsRelative?1:1-u,h=a*e;o[h]=d,o.set(n,h+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const Zb=new Q,oP=new Q,lP=new Sn;class sl{constructor(e=new Q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,a){return this.normal.set(e,t,n),this.constant=a,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const a=Zb.subVectors(n,t).cross(oP.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Zb),a=this.normal.dot(n);if(a===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/a;return o<0||o>1?null:t.copy(e.start).addScaledVector(n,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||lP.getNormalMatrix(e),a=this.coplanarPoint(Zb).applyMatrix4(e),o=this.normal.applyMatrix3(n).normalize();return this.constant=-a.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const af=new Jr,cP=new Ze(.5,.5),iy=new Q;class Kh{constructor(e=new sl,t=new sl,n=new sl,a=new sl,o=new sl,u=new sl){this.planes=[e,t,n,a,o,u]}set(e,t,n,a,o,u){const d=this.planes;return d[0].copy(e),d[1].copy(t),d[2].copy(n),d[3].copy(a),d[4].copy(o),d[5].copy(u),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=ps,n=!1){const a=this.planes,o=e.elements,u=o[0],d=o[1],h=o[2],p=o[3],y=o[4],v=o[5],x=o[6],S=o[7],E=o[8],C=o[9],T=o[10],M=o[11],R=o[12],I=o[13],L=o[14],z=o[15];if(a[0].setComponents(p-u,S-y,M-E,z-R).normalize(),a[1].setComponents(p+u,S+y,M+E,z+R).normalize(),a[2].setComponents(p+d,S+v,M+C,z+I).normalize(),a[3].setComponents(p-d,S-v,M-C,z-I).normalize(),n)a[4].setComponents(h,x,T,L).normalize(),a[5].setComponents(p-h,S-x,M-T,z-L).normalize();else if(a[4].setComponents(p-h,S-x,M-T,z-L).normalize(),t===ps)a[5].setComponents(p+h,S+x,M+T,z+L).normalize();else if(t===If)a[5].setComponents(h,x,T,L).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),af.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),af.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(af)}intersectsSprite(e){af.center.set(0,0,0);const t=cP.distanceTo(e.center);return af.radius=.7071067811865476+t,af.applyMatrix4(e.matrixWorld),this.intersectsSphere(af)}intersectsSphere(e){const t=this.planes,n=e.center,a=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(n)<a)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const a=t[n];if(iy.x=a.normal.x>0?e.max.x:e.min.x,iy.y=a.normal.y>0?e.max.y:e.min.y,iy.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(iy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const nl=new hn,il=new Kh;class c_{constructor(){this.coordinateSystem=ps}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(nl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),il.setFromProjectionMatrix(nl,a.coordinateSystem,a.reversedDepth),il.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(nl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),il.setFromProjectionMatrix(nl,a.coordinateSystem,a.reversedDepth),il.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(nl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),il.setFromProjectionMatrix(nl,a.coordinateSystem,a.reversedDepth),il.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(nl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),il.setFromProjectionMatrix(nl,a.coordinateSystem,a.reversedDepth),il.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(nl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),il.setFromProjectionMatrix(nl,a.coordinateSystem,a.reversedDepth),il.containsPoint(e))return!0}return!1}clone(){return new c_}}function Kb(i,e){return i-e}function uP(i,e){return i.z-e.z}function fP(i,e){return e.z-i.z}class dP{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,a){const o=this.pool,u=this.list;this.index>=o.length&&o.push({start:-1,count:-1,z:-1,index:-1});const d=o[this.index];u.push(d),this.index++,d.start=e,d.count=t,d.z=n,d.index=a}reset(){this.list.length=0,this.index=0}}const ns=new hn,hP=new Pt(1,1,1),ow=new Kh,pP=new c_,ry=new ga,sf=new Jr,Bm=new Q,lw=new Q,mP=new Q,$b=new dP,pa=new Ki,ay=[];function gP(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const a=i.count;for(let o=0;o<a;o++)for(let u=0;u<n;u++)e.setComponent(o+t,u,i.getComponent(o,u))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function of(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class HC extends Ki{constructor(e,t,n=t*2,a){super(new _n,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Ys(t,e,e,pr,Vi);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Ys(t,e,e,Og,vs);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Ys(t,e,e,pr,Vi);n.colorSpace=Gn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in e.attributes){const u=e.getAttribute(o),{array:d,itemSize:h,normalized:p}=u,y=new d.constructor(n*h),v=new hi(y,h,p);t.setAttribute(o,v)}if(e.getIndex()!==null){const o=n>65535?new Uint32Array(a):new Uint16Array(a);t.setIndex(new hi(o,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const a=e.getAttribute(n),o=t.getAttribute(n);if(a.itemSize!==o.itemSize||a.normalized!==o.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ga);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,a=t.length;n<a;n++){if(t[n].active===!1)continue;const o=t[n].geometryIndex;this.getMatrixAt(n,ns),this.getBoundingBoxAt(o,ry).applyMatrix4(ns),e.union(ry)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Jr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,a=t.length;n<a;n++){if(t[n].active===!1)continue;const o=t[n].geometryIndex;this.getMatrixAt(n,ns),this.getBoundingSphereAt(o,sf).applyMatrix4(ns),e.union(sf)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let a=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Kb),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=n):(a=this._instanceInfo.length,this._instanceInfo.push(n));const o=this._matricesTexture;ns.identity().toArray(o.image.data,a*16),o.needsUpdate=!0;const u=this._colorsTexture;return u&&(hP.toArray(u.image.data,a*4),u.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},o=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const u=e.getIndex();if(u!==null&&(a.indexStart=this._nextIndexStart,a.reservedIndexCount=n===-1?u.count:n),a.indexStart!==-1&&a.indexStart+a.reservedIndexCount>this._maxIndexCount||a.vertexStart+a.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let h;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Kb),h=this._availableGeometryIds.shift(),o[h]=a):(h=this._geometryCount,this._geometryCount++,o.push(a)),this.setGeometryAt(h,e),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,h}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,a=n.getIndex()!==null,o=n.getIndex(),u=t.getIndex(),d=this._geometryInfo[e];if(a&&u.count>d.reservedIndexCount||t.attributes.position.count>d.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const h=d.vertexStart,p=d.reservedVertexCount;d.vertexCount=t.getAttribute("position").count;for(const y in n.attributes){const v=t.getAttribute(y),x=n.getAttribute(y);gP(v,x,h);const S=v.itemSize;for(let E=v.count,C=p;E<C;E++){const T=h+E;for(let M=0;M<S;M++)x.setComponent(T,M,0)}x.needsUpdate=!0,x.addUpdateRange(h*S,p*S)}if(a){const y=d.indexStart,v=d.reservedIndexCount;d.indexCount=t.getIndex().count;for(let x=0;x<u.count;x++)o.setX(y+x,h+u.getX(x));for(let x=u.count,S=v;x<S;x++)o.setX(y+x,h);o.needsUpdate=!0,o.addUpdateRange(y,d.reservedIndexCount)}return d.start=a?d.indexStart:d.vertexStart,d.count=a?d.indexCount:d.vertexCount,d.boundingBox=null,t.boundingBox!==null&&(d.boundingBox=t.boundingBox.clone()),d.boundingSphere=null,t.boundingSphere!==null&&(d.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let a=0,o=n.length;a<o;a++)n[a].active&&n[a].geometryIndex===e&&this.deleteInstance(a);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,a=n.map((u,d)=>d).sort((u,d)=>n[u].vertexStart-n[d].vertexStart),o=this.geometry;for(let u=0,d=n.length;u<d;u++){const h=a[u],p=n[h];if(p.active!==!1){if(o.index!==null){if(p.indexStart!==t){const{indexStart:y,vertexStart:v,reservedIndexCount:x}=p,S=o.index,E=S.array,C=e-v;for(let T=y;T<y+x;T++)E[T]=E[T]+C;S.array.copyWithin(t,y,y+x),S.addUpdateRange(t,x),S.needsUpdate=!0,p.indexStart=t}t+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:y,reservedVertexCount:v}=p,x=o.attributes;for(const S in x){const E=x[S],{array:C,itemSize:T}=E;C.copyWithin(e*T,y*T,(y+v)*T),E.addUpdateRange(e*T,v*T),E.needsUpdate=!0}p.vertexStart=e}e+=p.reservedVertexCount,p.start=o.index?p.indexStart:p.vertexStart}}return this._nextIndexStart=t,this._nextVertexStart=e,this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[e];if(a.boundingBox===null){const o=new ga,u=n.index,d=n.attributes.position;for(let h=a.start,p=a.start+a.count;h<p;h++){let y=h;u&&(y=u.getX(y)),o.expandByPoint(Bm.fromBufferAttribute(d,y))}a.boundingBox=o}return t.copy(a.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[e];if(a.boundingSphere===null){const o=new Jr;this.getBoundingBoxAt(e,ry),ry.getCenter(o.center);const u=n.index,d=n.attributes.position;let h=0;for(let p=a.start,y=a.start+a.count;p<y;p++){let v=p;u&&(v=u.getX(v)),Bm.fromBufferAttribute(d,v),h=Math.max(h,o.center.distanceToSquared(Bm))}o.radius=Math.sqrt(h),a.boundingSphere=o}return t.copy(a.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,a=this._matricesTexture.image.data;return t.toArray(a,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(Kb);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const a=new Int32Array(e),o=new Int32Array(e);of(this._multiDrawCounts,a),of(this._multiDrawStarts,o),this._multiDrawCounts=a,this._multiDrawStarts=o,this._maxInstanceCount=e;const u=this._indirectTexture,d=this._matricesTexture,h=this._colorsTexture;u.dispose(),this._initIndirectTexture(),of(u.image.data,this._indirectTexture.image.data),d.dispose(),this._initMatricesTexture(),of(d.image.data,this._matricesTexture.image.data),h&&(h.dispose(),this._initColorsTexture(),of(h.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(d=>d.active);if(Math.max(...n.map(d=>d.vertexStart+d.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(h=>h.indexStart+h.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const o=this.geometry;o.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new _n,this._initializeGeometry(o));const u=this.geometry;o.index&&of(o.index.array,u.index.array);for(const d in o.attributes)of(o.attributes[d].array,u.attributes[d].array)}raycast(e,t){const n=this._instanceInfo,a=this._geometryInfo,o=this.matrixWorld,u=this.geometry;pa.material=this.material,pa.geometry.index=u.index,pa.geometry.attributes=u.attributes,pa.geometry.boundingBox===null&&(pa.geometry.boundingBox=new ga),pa.geometry.boundingSphere===null&&(pa.geometry.boundingSphere=new Jr);for(let d=0,h=n.length;d<h;d++){if(!n[d].visible||!n[d].active)continue;const p=n[d].geometryIndex,y=a[p];pa.geometry.setDrawRange(y.start,y.count),this.getMatrixAt(d,pa.matrixWorld).premultiply(o),this.getBoundingBoxAt(p,pa.geometry.boundingBox),this.getBoundingSphereAt(p,pa.geometry.boundingSphere),pa.raycast(e,ay);for(let v=0,x=ay.length;v<x;v++){const S=ay[v];S.object=this,S.batchId=d,t.push(S)}ay.length=0}pa.material=null,pa.geometry.index=null,pa.geometry.attributes={},pa.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,a,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const u=a.getIndex();let d=u===null?1:u.array.BYTES_PER_ELEMENT,h=1;o.wireframe&&(h=2,d=a.attributes.position.count>65535?4:2);const p=this._instanceInfo,y=this._multiDrawStarts,v=this._multiDrawCounts,x=this._geometryInfo,S=this.perObjectFrustumCulled,E=this._indirectTexture,C=E.image.data,T=n.isArrayCamera?pP:ow;S&&!n.isArrayCamera&&(ns.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),ow.setFromProjectionMatrix(ns,n.coordinateSystem,n.reversedDepth));let M=0;if(this.sortObjects){ns.copy(this.matrixWorld).invert(),Bm.setFromMatrixPosition(n.matrixWorld).applyMatrix4(ns),lw.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(ns);for(let L=0,z=p.length;L<z;L++)if(p[L].visible&&p[L].active){const P=p[L].geometryIndex;this.getMatrixAt(L,ns),this.getBoundingSphereAt(P,sf).applyMatrix4(ns);let V=!1;if(S&&(V=!T.intersectsSphere(sf,n)),!V){const N=x[P],O=mP.subVectors(sf.center,Bm).dot(lw);$b.push(N.start,N.count,O,L)}}const R=$b.list,I=this.customSort;I===null?R.sort(o.transparent?fP:uP):I.call(this,R,n);for(let L=0,z=R.length;L<z;L++){const P=R[L];y[M]=P.start*d*h,v[M]=P.count*h,C[M]=P.index,M++}$b.reset()}else for(let R=0,I=p.length;R<I;R++)if(p[R].visible&&p[R].active){const L=p[R].geometryIndex;let z=!1;if(S&&(this.getMatrixAt(R,ns),this.getBoundingSphereAt(L,sf).applyMatrix4(ns),z=!T.intersectsSphere(sf,n)),!z){const P=x[L];y[M]=P.start*d*h,v[M]=P.count*h,C[M]=R,M++}}E.needsUpdate=!0,this._multiDrawCount=M,this._visibilityChanged=!1}onBeforeShadow(e,t,n,a,o,u){this.onBeforeRender(e,null,a,o,u)}}class Oa extends ya{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Pt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Lx=new Q,Ux=new Q,cw=new hn,km=new zf,sy=new Jr,Qb=new Q,uw=new Q;class uu extends Qn{constructor(e=new _n,t=new Oa){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let a=1,o=t.count;a<o;a++)Lx.fromBufferAttribute(t,a-1),Ux.fromBufferAttribute(t,a),n[a]=n[a-1],n[a]+=Lx.distanceTo(Ux);e.setAttribute("lineDistance",new Vt(n,1))}else Rt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,a=this.matrixWorld,o=e.params.Line.threshold,u=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),sy.copy(n.boundingSphere),sy.applyMatrix4(a),sy.radius+=o,e.ray.intersectsSphere(sy)===!1)return;cw.copy(a).invert(),km.copy(e.ray).applyMatrix4(cw);const d=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=d*d,p=this.isLineSegments?2:1,y=n.index,x=n.attributes.position;if(y!==null){const S=Math.max(0,u.start),E=Math.min(y.count,u.start+u.count);for(let C=S,T=E-1;C<T;C+=p){const M=y.getX(C),R=y.getX(C+1),I=oy(this,e,km,h,M,R,C);I&&t.push(I)}if(this.isLineLoop){const C=y.getX(E-1),T=y.getX(S),M=oy(this,e,km,h,C,T,E-1);M&&t.push(M)}}else{const S=Math.max(0,u.start),E=Math.min(x.count,u.start+u.count);for(let C=S,T=E-1;C<T;C+=p){const M=oy(this,e,km,h,C,C+1,C);M&&t.push(M)}if(this.isLineLoop){const C=oy(this,e,km,h,E-1,S,E-1);C&&t.push(C)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const a=t[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=a.length;o<u;o++){const d=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=o}}}}}function oy(i,e,t,n,a,o,u){const d=i.geometry.attributes.position;if(Lx.fromBufferAttribute(d,a),Ux.fromBufferAttribute(d,o),t.distanceSqToSegment(Lx,Ux,Qb,uw)>n)return;Qb.applyMatrix4(i.matrixWorld);const p=e.ray.origin.distanceTo(Qb);if(!(p<e.near||p>e.far))return{distance:p,point:uw.clone().applyMatrix4(i.matrixWorld),index:u,face:null,faceIndex:null,barycoord:null,object:i}}const fw=new Q,dw=new Q;class pl extends uu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let a=0,o=t.count;a<o;a+=2)fw.fromBufferAttribute(t,a),dw.fromBufferAttribute(t,a+1),n[a]=a===0?0:n[a-1],n[a+1]=n[a]+fw.distanceTo(dw);e.setAttribute("lineDistance",new Vt(n,1))}else Rt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class GC extends uu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class V1 extends ya{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Pt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const hw=new hn,$S=new zf,ly=new Jr,cy=new Q;class WC extends Qn{constructor(e=new _n,t=new V1){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,a=this.matrixWorld,o=e.params.Points.threshold,u=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),ly.copy(n.boundingSphere),ly.applyMatrix4(a),ly.radius+=o,e.ray.intersectsSphere(ly)===!1)return;hw.copy(a).invert(),$S.copy(e.ray).applyMatrix4(hw);const d=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=d*d,p=n.index,v=n.attributes.position;if(p!==null){const x=Math.max(0,u.start),S=Math.min(p.count,u.start+u.count);for(let E=x,C=S;E<C;E++){const T=p.getX(E);cy.fromBufferAttribute(v,T),pw(cy,T,h,a,e,t,this)}}else{const x=Math.max(0,u.start),S=Math.min(v.count,u.start+u.count);for(let E=x,C=S;E<C;E++)cy.fromBufferAttribute(v,E),pw(cy,E,h,a,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const a=t[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=a.length;o<u;o++){const d=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=o}}}}}function pw(i,e,t,n,a,o,u){const d=$S.distanceSqToPoint(i);if(d<t){const h=new Q;$S.closestPointToPoint(i,h),h.applyMatrix4(n);const p=a.ray.origin.distanceTo(h);if(p<a.near||p>a.far)return;o.push({distance:p,distanceToRay:Math.sqrt(d),point:h,index:e,face:null,faceIndex:null,barycoord:null,object:u})}}class XC extends di{constructor(e,t,n,a,o=jn,u=jn,d,h,p){super(e,t,n,a,o,u,d,h,p),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const y=this;function v(){y.needsUpdate=!0,y._requestVideoFrameCallbackId=e.requestVideoFrameCallback(v)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(v))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class vP extends XC{constructor(e,t,n,a,o,u,d,h){super({},e,t,n,a,o,u,d,h),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class yP extends di{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=hr,this.minFilter=hr,this.generateMipmaps=!1,this.needsUpdate=!0}}class u_ extends di{constructor(e,t,n,a,o,u,d,h,p,y,v,x){super(null,u,d,h,p,y,a,o,v,x),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class xP extends u_{constructor(e,t,n,a,o,u){super(e,t,n,o,u),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=nr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class _P extends u_{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Mo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class zg extends di{constructor(e=[],t=Mo,n,a,o,u,d,h,p,y){super(e,t,n,a,o,u,d,h,p,y),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class bP extends di{constructor(e,t,n,a,o,u,d,h,p){super(e,t,n,a,o,u,d,h,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class zh extends di{constructor(e,t,n=vs,a,o,u,d=hr,h=hr,p,y=dl,v=1){if(y!==dl&&y!==iu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const x={width:e,height:t,depth:v};super(x,a,o,u,d,h,y,n,p),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new ru(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class jC extends zh{constructor(e,t=vs,n=Mo,a,o,u=hr,d=hr,h,p=dl){const y={width:e,height:e,depth:1},v=[y,y,y,y,y,y];super(e,e,t,n,a,o,u,d,h,p),this.image=v,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class H1 extends di{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Ff extends _n{constructor(e=1,t=1,n=1,a=1,o=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:a,heightSegments:o,depthSegments:u};const d=this;a=Math.floor(a),o=Math.floor(o),u=Math.floor(u);const h=[],p=[],y=[],v=[];let x=0,S=0;E("z","y","x",-1,-1,n,t,e,u,o,0),E("z","y","x",1,-1,n,t,-e,u,o,1),E("x","z","y",1,1,e,n,t,a,u,2),E("x","z","y",1,-1,e,n,-t,a,u,3),E("x","y","z",1,-1,e,t,n,a,o,4),E("x","y","z",-1,-1,e,t,-n,a,o,5),this.setIndex(h),this.setAttribute("position",new Vt(p,3)),this.setAttribute("normal",new Vt(y,3)),this.setAttribute("uv",new Vt(v,2));function E(C,T,M,R,I,L,z,P,V,N,O){const K=L/V,H=z/N,te=L/2,ee=z/2,ae=P/2,se=V+1,G=N+1;let $=0,le=0;const be=new Q;for(let Ae=0;Ae<G;Ae++){const Y=Ae*H-ee;for(let re=0;re<se;re++){const me=re*K-te;be[C]=me*R,be[T]=Y*I,be[M]=ae,p.push(be.x,be.y,be.z),be[C]=0,be[T]=0,be[M]=P>0?1:-1,y.push(be.x,be.y,be.z),v.push(re/V),v.push(1-Ae/N),$+=1}}for(let Ae=0;Ae<N;Ae++)for(let Y=0;Y<V;Y++){const re=x+Y+se*Ae,me=x+Y+se*(Ae+1),Te=x+(Y+1)+se*(Ae+1),Ke=x+(Y+1)+se*Ae;h.push(re,me,Ke),h.push(me,Te,Ke),le+=6}d.addGroup(S,le,O),S+=le,x+=$}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ff(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}class f_ extends _n{constructor(e=1,t=1,n=4,a=8,o=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:a,heightSegments:o},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),a=Math.max(3,Math.floor(a)),o=Math.max(1,Math.floor(o));const u=[],d=[],h=[],p=[],y=t/2,v=Math.PI/2*e,x=t,S=2*v+x,E=n*2+o,C=a+1,T=new Q,M=new Q;for(let R=0;R<=E;R++){let I=0,L=0,z=0,P=0;if(R<=n){const O=R/n,K=O*Math.PI/2;L=-y-e*Math.cos(K),z=e*Math.sin(K),P=-e*Math.cos(K),I=O*v}else if(R<=n+o){const O=(R-n)/o;L=-y+O*t,z=e,P=0,I=v+O*x}else{const O=(R-n-o)/n,K=O*Math.PI/2;L=y+e*Math.sin(K),z=e*Math.cos(K),P=e*Math.sin(K),I=v+x+O*v}const V=Math.max(0,Math.min(1,I/S));let N=0;R===0?N=.5/a:R===E&&(N=-.5/a);for(let O=0;O<=a;O++){const K=O/a,H=K*Math.PI*2,te=Math.sin(H),ee=Math.cos(H);M.x=-z*ee,M.y=L,M.z=z*te,d.push(M.x,M.y,M.z),T.set(-z*ee,P,z*te),T.normalize(),h.push(T.x,T.y,T.z),p.push(K+N,V)}if(R>0){const O=(R-1)*C;for(let K=0;K<a;K++){const H=O+K,te=O+K+1,ee=R*C+K,ae=R*C+K+1;u.push(H,te,ee),u.push(te,ae,ee)}}}this.setIndex(u),this.setAttribute("position",new Vt(d,3)),this.setAttribute("normal",new Vt(h,3)),this.setAttribute("uv",new Vt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new f_(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class d_ extends _n{constructor(e=1,t=32,n=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:a},t=Math.max(3,t);const o=[],u=[],d=[],h=[],p=new Q,y=new Ze;u.push(0,0,0),d.push(0,0,1),h.push(.5,.5);for(let v=0,x=3;v<=t;v++,x+=3){const S=n+v/t*a;p.x=e*Math.cos(S),p.y=e*Math.sin(S),u.push(p.x,p.y,p.z),d.push(0,0,1),y.x=(u[x]/e+1)/2,y.y=(u[x+1]/e+1)/2,h.push(y.x,y.y)}for(let v=1;v<=t;v++)o.push(v,v+1,0);this.setIndex(o),this.setAttribute("position",new Vt(u,3)),this.setAttribute("normal",new Vt(d,3)),this.setAttribute("uv",new Vt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new d_(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Fg extends _n{constructor(e=1,t=1,n=1,a=32,o=1,u=!1,d=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:a,heightSegments:o,openEnded:u,thetaStart:d,thetaLength:h};const p=this;a=Math.floor(a),o=Math.floor(o);const y=[],v=[],x=[],S=[];let E=0;const C=[],T=n/2;let M=0;R(),u===!1&&(e>0&&I(!0),t>0&&I(!1)),this.setIndex(y),this.setAttribute("position",new Vt(v,3)),this.setAttribute("normal",new Vt(x,3)),this.setAttribute("uv",new Vt(S,2));function R(){const L=new Q,z=new Q;let P=0;const V=(t-e)/n;for(let N=0;N<=o;N++){const O=[],K=N/o,H=K*(t-e)+e;for(let te=0;te<=a;te++){const ee=te/a,ae=ee*h+d,se=Math.sin(ae),G=Math.cos(ae);z.x=H*se,z.y=-K*n+T,z.z=H*G,v.push(z.x,z.y,z.z),L.set(se,V,G).normalize(),x.push(L.x,L.y,L.z),S.push(ee,1-K),O.push(E++)}C.push(O)}for(let N=0;N<a;N++)for(let O=0;O<o;O++){const K=C[O][N],H=C[O+1][N],te=C[O+1][N+1],ee=C[O][N+1];(e>0||O!==0)&&(y.push(K,H,ee),P+=3),(t>0||O!==o-1)&&(y.push(H,te,ee),P+=3)}p.addGroup(M,P,0),M+=P}function I(L){const z=E,P=new Ze,V=new Q;let N=0;const O=L===!0?e:t,K=L===!0?1:-1;for(let te=1;te<=a;te++)v.push(0,T*K,0),x.push(0,K,0),S.push(.5,.5),E++;const H=E;for(let te=0;te<=a;te++){const ae=te/a*h+d,se=Math.cos(ae),G=Math.sin(ae);V.x=O*G,V.y=T*K,V.z=O*se,v.push(V.x,V.y,V.z),x.push(0,K,0),P.x=se*.5+.5,P.y=G*.5*K+.5,S.push(P.x,P.y),E++}for(let te=0;te<a;te++){const ee=z+te,ae=H+te;L===!0?y.push(ae,ae+1,ee):y.push(ae+1,ae,ee),N+=3}p.addGroup(M,N,L===!0?1:2),M+=N}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Bg extends Fg{constructor(e=1,t=1,n=32,a=1,o=!1,u=0,d=Math.PI*2){super(0,e,t,n,a,o,u,d),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:u,thetaLength:d}}static fromJSON(e){return new Bg(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class du extends _n{constructor(e=[],t=[],n=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:a};const o=[],u=[];d(a),p(n),y(),this.setAttribute("position",new Vt(o,3)),this.setAttribute("normal",new Vt(o.slice(),3)),this.setAttribute("uv",new Vt(u,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function d(R){const I=new Q,L=new Q,z=new Q;for(let P=0;P<t.length;P+=3)S(t[P+0],I),S(t[P+1],L),S(t[P+2],z),h(I,L,z,R)}function h(R,I,L,z){const P=z+1,V=[];for(let N=0;N<=P;N++){V[N]=[];const O=R.clone().lerp(L,N/P),K=I.clone().lerp(L,N/P),H=P-N;for(let te=0;te<=H;te++)te===0&&N===P?V[N][te]=O:V[N][te]=O.clone().lerp(K,te/H)}for(let N=0;N<P;N++)for(let O=0;O<2*(P-N)-1;O++){const K=Math.floor(O/2);O%2===0?(x(V[N][K+1]),x(V[N+1][K]),x(V[N][K])):(x(V[N][K+1]),x(V[N+1][K+1]),x(V[N+1][K]))}}function p(R){const I=new Q;for(let L=0;L<o.length;L+=3)I.x=o[L+0],I.y=o[L+1],I.z=o[L+2],I.normalize().multiplyScalar(R),o[L+0]=I.x,o[L+1]=I.y,o[L+2]=I.z}function y(){const R=new Q;for(let I=0;I<o.length;I+=3){R.x=o[I+0],R.y=o[I+1],R.z=o[I+2];const L=T(R)/2/Math.PI+.5,z=M(R)/Math.PI+.5;u.push(L,1-z)}E(),v()}function v(){for(let R=0;R<u.length;R+=6){const I=u[R+0],L=u[R+2],z=u[R+4],P=Math.max(I,L,z),V=Math.min(I,L,z);P>.9&&V<.1&&(I<.2&&(u[R+0]+=1),L<.2&&(u[R+2]+=1),z<.2&&(u[R+4]+=1))}}function x(R){o.push(R.x,R.y,R.z)}function S(R,I){const L=R*3;I.x=e[L+0],I.y=e[L+1],I.z=e[L+2]}function E(){const R=new Q,I=new Q,L=new Q,z=new Q,P=new Ze,V=new Ze,N=new Ze;for(let O=0,K=0;O<o.length;O+=9,K+=6){R.set(o[O+0],o[O+1],o[O+2]),I.set(o[O+3],o[O+4],o[O+5]),L.set(o[O+6],o[O+7],o[O+8]),P.set(u[K+0],u[K+1]),V.set(u[K+2],u[K+3]),N.set(u[K+4],u[K+5]),z.copy(R).add(I).add(L).divideScalar(3);const H=T(z);C(P,K+0,R,H),C(V,K+2,I,H),C(N,K+4,L,H)}}function C(R,I,L,z){z<0&&R.x===1&&(u[I]=R.x-1),L.x===0&&L.z===0&&(u[I]=z/2/Math.PI+.5)}function T(R){return Math.atan2(R.z,-R.x)}function M(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new du(e.vertices,e.indices,e.radius,e.detail)}}class h_ extends du{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,a=1/n,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-n,0,-a,n,0,a,-n,0,a,n,-a,-n,0,-a,n,0,a,-n,0,a,n,0,-n,0,-a,n,0,-a,-n,0,a,n,0,a],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,u,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new h_(e.radius,e.detail)}}const uy=new Q,fy=new Q,Jb=new Q,dy=new as;class qC extends _n{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const a=Math.pow(10,4),o=Math.cos(Af*t),u=e.getIndex(),d=e.getAttribute("position"),h=u?u.count:d.count,p=[0,0,0],y=["a","b","c"],v=new Array(3),x={},S=[];for(let E=0;E<h;E+=3){u?(p[0]=u.getX(E),p[1]=u.getX(E+1),p[2]=u.getX(E+2)):(p[0]=E,p[1]=E+1,p[2]=E+2);const{a:C,b:T,c:M}=dy;if(C.fromBufferAttribute(d,p[0]),T.fromBufferAttribute(d,p[1]),M.fromBufferAttribute(d,p[2]),dy.getNormal(Jb),v[0]=`${Math.round(C.x*a)},${Math.round(C.y*a)},${Math.round(C.z*a)}`,v[1]=`${Math.round(T.x*a)},${Math.round(T.y*a)},${Math.round(T.z*a)}`,v[2]=`${Math.round(M.x*a)},${Math.round(M.y*a)},${Math.round(M.z*a)}`,!(v[0]===v[1]||v[1]===v[2]||v[2]===v[0]))for(let R=0;R<3;R++){const I=(R+1)%3,L=v[R],z=v[I],P=dy[y[R]],V=dy[y[I]],N=`${L}_${z}`,O=`${z}_${L}`;O in x&&x[O]?(Jb.dot(x[O].normal)<=o&&(S.push(P.x,P.y,P.z),S.push(V.x,V.y,V.z)),x[O]=null):N in x||(x[N]={index0:p[R],index1:p[I],normal:Jb.clone()})}}for(const E in x)if(x[E]){const{index0:C,index1:T}=x[E];uy.fromBufferAttribute(d,C),fy.fromBufferAttribute(d,T),S.push(uy.x,uy.y,uy.z),S.push(fy.x,fy.y,fy.z)}this.setAttribute("position",new Vt(S,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class wo{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Rt("Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,a=this.getPoint(0),o=0;t.push(0);for(let u=1;u<=e;u++)n=this.getPoint(u/e),o+=n.distanceTo(a),t.push(o),a=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let a=0;const o=n.length;let u;t?u=t:u=e*n[o-1];let d=0,h=o-1,p;for(;d<=h;)if(a=Math.floor(d+(h-d)/2),p=n[a]-u,p<0)d=a+1;else if(p>0)h=a-1;else{h=a;break}if(a=h,n[a]===u)return a/(o-1);const y=n[a],x=n[a+1]-y,S=(u-y)/x;return(a+S)/(o-1)}getTangent(e,t){let a=e-1e-4,o=e+1e-4;a<0&&(a=0),o>1&&(o=1);const u=this.getPoint(a),d=this.getPoint(o),h=t||(u.isVector2?new Ze:new Q);return h.copy(d).sub(u).normalize(),h}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new Q,a=[],o=[],u=[],d=new Q,h=new hn;for(let S=0;S<=e;S++){const E=S/e;a[S]=this.getTangentAt(E,new Q)}o[0]=new Q,u[0]=new Q;let p=Number.MAX_VALUE;const y=Math.abs(a[0].x),v=Math.abs(a[0].y),x=Math.abs(a[0].z);y<=p&&(p=y,n.set(1,0,0)),v<=p&&(p=v,n.set(0,1,0)),x<=p&&n.set(0,0,1),d.crossVectors(a[0],n).normalize(),o[0].crossVectors(a[0],d),u[0].crossVectors(a[0],o[0]);for(let S=1;S<=e;S++){if(o[S]=o[S-1].clone(),u[S]=u[S-1].clone(),d.crossVectors(a[S-1],a[S]),d.length()>Number.EPSILON){d.normalize();const E=Math.acos(fn(a[S-1].dot(a[S]),-1,1));o[S].applyMatrix4(h.makeRotationAxis(d,E))}u[S].crossVectors(a[S],o[S])}if(t===!0){let S=Math.acos(fn(o[0].dot(o[e]),-1,1));S/=e,a[0].dot(d.crossVectors(o[0],o[e]))>0&&(S=-S);for(let E=1;E<=e;E++)o[E].applyMatrix4(h.makeRotationAxis(a[E],S*E)),u[E].crossVectors(a[E],o[E])}return{tangents:a,normals:o,binormals:u}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class p_ extends wo{constructor(e=0,t=0,n=1,a=1,o=0,u=Math.PI*2,d=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=a,this.aStartAngle=o,this.aEndAngle=u,this.aClockwise=d,this.aRotation=h}getPoint(e,t=new Ze){const n=t,a=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const u=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=a;for(;o>a;)o-=a;o<Number.EPSILON&&(u?o=0:o=a),this.aClockwise===!0&&!u&&(o===a?o=-a:o=o-a);const d=this.aStartAngle+e*o;let h=this.aX+this.xRadius*Math.cos(d),p=this.aY+this.yRadius*Math.sin(d);if(this.aRotation!==0){const y=Math.cos(this.aRotation),v=Math.sin(this.aRotation),x=h-this.aX,S=p-this.aY;h=x*y-S*v+this.aX,p=x*v+S*y+this.aY}return n.set(h,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class YC extends p_{constructor(e,t,n,a,o,u){super(e,t,n,n,a,o,u),this.isArcCurve=!0,this.type="ArcCurve"}}function G1(){let i=0,e=0,t=0,n=0;function a(o,u,d,h){i=o,e=d,t=-3*o+3*u-2*d-h,n=2*o-2*u+d+h}return{initCatmullRom:function(o,u,d,h,p){a(u,d,p*(d-o),p*(h-u))},initNonuniformCatmullRom:function(o,u,d,h,p,y,v){let x=(u-o)/p-(d-o)/(p+y)+(d-u)/y,S=(d-u)/y-(h-u)/(y+v)+(h-d)/v;x*=y,S*=y,a(u,d,x,S)},calc:function(o){const u=o*o,d=u*o;return i+e*o+t*u+n*d}}}const hy=new Q,eS=new G1,tS=new G1,nS=new G1;class ZC extends wo{constructor(e=[],t=!1,n="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=a}getPoint(e,t=new Q){const n=t,a=this.points,o=a.length,u=(o-(this.closed?0:1))*e;let d=Math.floor(u),h=u-d;this.closed?d+=d>0?0:(Math.floor(Math.abs(d)/o)+1)*o:h===0&&d===o-1&&(d=o-2,h=1);let p,y;this.closed||d>0?p=a[(d-1)%o]:(hy.subVectors(a[0],a[1]).add(a[0]),p=hy);const v=a[d%o],x=a[(d+1)%o];if(this.closed||d+2<o?y=a[(d+2)%o]:(hy.subVectors(a[o-1],a[o-2]).add(a[o-1]),y=hy),this.curveType==="centripetal"||this.curveType==="chordal"){const S=this.curveType==="chordal"?.5:.25;let E=Math.pow(p.distanceToSquared(v),S),C=Math.pow(v.distanceToSquared(x),S),T=Math.pow(x.distanceToSquared(y),S);C<1e-4&&(C=1),E<1e-4&&(E=C),T<1e-4&&(T=C),eS.initNonuniformCatmullRom(p.x,v.x,x.x,y.x,E,C,T),tS.initNonuniformCatmullRom(p.y,v.y,x.y,y.y,E,C,T),nS.initNonuniformCatmullRom(p.z,v.z,x.z,y.z,E,C,T)}else this.curveType==="catmullrom"&&(eS.initCatmullRom(p.x,v.x,x.x,y.x,this.tension),tS.initCatmullRom(p.y,v.y,x.y,y.y,this.tension),nS.initCatmullRom(p.z,v.z,x.z,y.z,this.tension));return n.set(eS.calc(h),tS.calc(h),nS.calc(h)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const a=this.points[t];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(new Q().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function mw(i,e,t,n,a){const o=(n-e)*.5,u=(a-t)*.5,d=i*i,h=i*d;return(2*t-2*n+o+u)*h+(-3*t+3*n-2*o-u)*d+o*i+t}function SP(i,e){const t=1-i;return t*t*e}function MP(i,e){return 2*(1-i)*i*e}function EP(i,e){return i*i*e}function rg(i,e,t,n){return SP(i,e)+MP(i,t)+EP(i,n)}function wP(i,e){const t=1-i;return t*t*t*e}function TP(i,e){const t=1-i;return 3*t*t*i*e}function AP(i,e){return 3*(1-i)*i*i*e}function CP(i,e){return i*i*i*e}function ag(i,e,t,n,a){return wP(i,e)+TP(i,t)+AP(i,n)+CP(i,a)}class W1 extends wo{constructor(e=new Ze,t=new Ze,n=new Ze,a=new Ze){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=a}getPoint(e,t=new Ze){const n=t,a=this.v0,o=this.v1,u=this.v2,d=this.v3;return n.set(ag(e,a.x,o.x,u.x,d.x),ag(e,a.y,o.y,u.y,d.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class KC extends wo{constructor(e=new Q,t=new Q,n=new Q,a=new Q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=a}getPoint(e,t=new Q){const n=t,a=this.v0,o=this.v1,u=this.v2,d=this.v3;return n.set(ag(e,a.x,o.x,u.x,d.x),ag(e,a.y,o.y,u.y,d.y),ag(e,a.z,o.z,u.z,d.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class X1 extends wo{constructor(e=new Ze,t=new Ze){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ze){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ze){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $C extends wo{constructor(e=new Q,t=new Q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Q){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Q){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class j1 extends wo{constructor(e=new Ze,t=new Ze,n=new Ze){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ze){const n=t,a=this.v0,o=this.v1,u=this.v2;return n.set(rg(e,a.x,o.x,u.x),rg(e,a.y,o.y,u.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class q1 extends wo{constructor(e=new Q,t=new Q,n=new Q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Q){const n=t,a=this.v0,o=this.v1,u=this.v2;return n.set(rg(e,a.x,o.x,u.x),rg(e,a.y,o.y,u.y),rg(e,a.z,o.z,u.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Y1 extends wo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ze){const n=t,a=this.points,o=(a.length-1)*e,u=Math.floor(o),d=o-u,h=a[u===0?u:u-1],p=a[u],y=a[u>a.length-2?a.length-1:u+1],v=a[u>a.length-3?a.length-1:u+2];return n.set(mw(d,h.x,p.x,y.x,v.x),mw(d,h.y,p.y,y.y,v.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const a=this.points[t];e.points.push(a.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(new Ze().fromArray(a))}return this}}var Ox=Object.freeze({__proto__:null,ArcCurve:YC,CatmullRomCurve3:ZC,CubicBezierCurve:W1,CubicBezierCurve3:KC,EllipseCurve:p_,LineCurve:X1,LineCurve3:$C,QuadraticBezierCurve:j1,QuadraticBezierCurve3:q1,SplineCurve:Y1});class QC extends wo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Ox[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),a=this.getCurveLengths();let o=0;for(;o<a.length;){if(a[o]>=n){const u=a[o]-n,d=this.curves[o],h=d.getLength(),p=h===0?0:1-u/h;return d.getPointAt(p,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,a=this.curves.length;n<a;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let a=0,o=this.curves;a<o.length;a++){const u=o[a],d=u.isEllipseCurve?e*2:u.isLineCurve||u.isLineCurve3?1:u.isSplineCurve?e*u.points.length:e,h=u.getPoints(d);for(let p=0;p<h.length;p++){const y=h[p];n&&n.equals(y)||(t.push(y),n=y)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const a=e.curves[t];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const a=this.curves[t];e.curves.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const a=e.curves[t];this.curves.push(new Ox[a.type]().fromJSON(a))}return this}}class Px extends QC{constructor(e){super(),this.type="Path",this.currentPoint=new Ze,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new X1(this.currentPoint.clone(),new Ze(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,a){const o=new j1(this.currentPoint.clone(),new Ze(e,t),new Ze(n,a));return this.curves.push(o),this.currentPoint.set(n,a),this}bezierCurveTo(e,t,n,a,o,u){const d=new W1(this.currentPoint.clone(),new Ze(e,t),new Ze(n,a),new Ze(o,u));return this.curves.push(d),this.currentPoint.set(o,u),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Y1(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,a,o,u){const d=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+d,t+h,n,a,o,u),this}absarc(e,t,n,a,o,u){return this.absellipse(e,t,n,n,a,o,u),this}ellipse(e,t,n,a,o,u,d,h){const p=this.currentPoint.x,y=this.currentPoint.y;return this.absellipse(e+p,t+y,n,a,o,u,d,h),this}absellipse(e,t,n,a,o,u,d,h){const p=new p_(e,t,n,a,o,u,d,h);if(this.curves.length>0){const v=p.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(p);const y=p.getPoint(1);return this.currentPoint.copy(y),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Cf extends Px{constructor(e){super(e),this.uuid=ms(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,a=this.holes.length;n<a;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const a=e.holes[t];this.holes.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const a=this.holes[t];e.holes.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const a=e.holes[t];this.holes.push(new Px().fromJSON(a))}return this}}function RP(i,e,t=2){const n=e&&e.length,a=n?e[0]*t:i.length;let o=JC(i,0,a,t,!0);const u=[];if(!o||o.next===o.prev)return u;let d,h,p;if(n&&(o=UP(i,e,o,t)),i.length>80*t){d=i[0],h=i[1];let y=d,v=h;for(let x=t;x<a;x+=t){const S=i[x],E=i[x+1];S<d&&(d=S),E<h&&(h=E),S>y&&(y=S),E>v&&(v=E)}p=Math.max(y-d,v-h),p=p!==0?32767/p:0}return gg(o,u,t,d,h,p,0),u}function JC(i,e,t,n,a){let o;if(a===XP(i,e,t,n)>0)for(let u=e;u<t;u+=n)o=gw(u/n|0,i[u],i[u+1],o);else for(let u=t-n;u>=e;u-=n)o=gw(u/n|0,i[u],i[u+1],o);return o&&Fh(o,o.next)&&(yg(o),o=o.next),o}function Uf(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(Fh(t,t.next)||Zi(t.prev,t,t.next)===0)){if(yg(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function gg(i,e,t,n,a,o,u){if(!i)return;!u&&o&&BP(i,n,a,o);let d=i;for(;i.prev!==i.next;){const h=i.prev,p=i.next;if(o?DP(i,n,a,o):NP(i)){e.push(h.i,i.i,p.i),yg(i),i=p.next,d=p.next;continue}if(i=p,i===d){u?u===1?(i=IP(Uf(i),e),gg(i,e,t,n,a,o,2)):u===2&&LP(i,e,t,n,a,o):gg(Uf(i),e,t,n,a,o,1);break}}}function NP(i){const e=i.prev,t=i,n=i.next;if(Zi(e,t,n)>=0)return!1;const a=e.x,o=t.x,u=n.x,d=e.y,h=t.y,p=n.y,y=Math.min(a,o,u),v=Math.min(d,h,p),x=Math.max(a,o,u),S=Math.max(d,h,p);let E=n.next;for(;E!==e;){if(E.x>=y&&E.x<=x&&E.y>=v&&E.y<=S&&qm(a,d,o,h,u,p,E.x,E.y)&&Zi(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function DP(i,e,t,n){const a=i.prev,o=i,u=i.next;if(Zi(a,o,u)>=0)return!1;const d=a.x,h=o.x,p=u.x,y=a.y,v=o.y,x=u.y,S=Math.min(d,h,p),E=Math.min(y,v,x),C=Math.max(d,h,p),T=Math.max(y,v,x),M=QS(S,E,e,t,n),R=QS(C,T,e,t,n);let I=i.prevZ,L=i.nextZ;for(;I&&I.z>=M&&L&&L.z<=R;){if(I.x>=S&&I.x<=C&&I.y>=E&&I.y<=T&&I!==a&&I!==u&&qm(d,y,h,v,p,x,I.x,I.y)&&Zi(I.prev,I,I.next)>=0||(I=I.prevZ,L.x>=S&&L.x<=C&&L.y>=E&&L.y<=T&&L!==a&&L!==u&&qm(d,y,h,v,p,x,L.x,L.y)&&Zi(L.prev,L,L.next)>=0))return!1;L=L.nextZ}for(;I&&I.z>=M;){if(I.x>=S&&I.x<=C&&I.y>=E&&I.y<=T&&I!==a&&I!==u&&qm(d,y,h,v,p,x,I.x,I.y)&&Zi(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;L&&L.z<=R;){if(L.x>=S&&L.x<=C&&L.y>=E&&L.y<=T&&L!==a&&L!==u&&qm(d,y,h,v,p,x,L.x,L.y)&&Zi(L.prev,L,L.next)>=0)return!1;L=L.nextZ}return!0}function IP(i,e){let t=i;do{const n=t.prev,a=t.next.next;!Fh(n,a)&&t3(n,t,t.next,a)&&vg(n,a)&&vg(a,n)&&(e.push(n.i,t.i,a.i),yg(t),yg(t.next),t=i=a),t=t.next}while(t!==i);return Uf(t)}function LP(i,e,t,n,a,o){let u=i;do{let d=u.next.next;for(;d!==u.prev;){if(u.i!==d.i&&HP(u,d)){let h=n3(u,d);u=Uf(u,u.next),h=Uf(h,h.next),gg(u,e,t,n,a,o,0),gg(h,e,t,n,a,o,0);return}d=d.next}u=u.next}while(u!==i)}function UP(i,e,t,n){const a=[];for(let o=0,u=e.length;o<u;o++){const d=e[o]*n,h=o<u-1?e[o+1]*n:i.length,p=JC(i,d,h,n,!1);p===p.next&&(p.steiner=!0),a.push(VP(p))}a.sort(OP);for(let o=0;o<a.length;o++)t=PP(a[o],t);return t}function OP(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),a=(e.next.y-e.y)/(e.next.x-e.x);t=n-a}return t}function PP(i,e){const t=zP(i,e);if(!t)return e;const n=n3(t,i);return Uf(n,n.next),Uf(t,t.next)}function zP(i,e){let t=e;const n=i.x,a=i.y;let o=-1/0,u;if(Fh(i,t))return t;do{if(Fh(i,t.next))return t.next;if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const v=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=n&&v>o&&(o=v,u=t.x<t.next.x?t:t.next,v===n))return u}t=t.next}while(t!==e);if(!u)return null;const d=u,h=u.x,p=u.y;let y=1/0;t=u;do{if(n>=t.x&&t.x>=h&&n!==t.x&&e3(a<p?n:o,a,h,p,a<p?o:n,a,t.x,t.y)){const v=Math.abs(a-t.y)/(n-t.x);vg(t,i)&&(v<y||v===y&&(t.x>u.x||t.x===u.x&&FP(u,t)))&&(u=t,y=v)}t=t.next}while(t!==d);return u}function FP(i,e){return Zi(i.prev,i,e.prev)<0&&Zi(e.next,i,i.next)<0}function BP(i,e,t,n){let a=i;do a.z===0&&(a.z=QS(a.x,a.y,e,t,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==i);a.prevZ.nextZ=null,a.prevZ=null,kP(a)}function kP(i){let e,t=1;do{let n=i,a;i=null;let o=null;for(e=0;n;){e++;let u=n,d=0;for(let p=0;p<t&&(d++,u=u.nextZ,!!u);p++);let h=t;for(;d>0||h>0&&u;)d!==0&&(h===0||!u||n.z<=u.z)?(a=n,n=n.nextZ,d--):(a=u,u=u.nextZ,h--),o?o.nextZ=a:i=a,a.prevZ=o,o=a;n=u}o.nextZ=null,t*=2}while(e>1);return i}function QS(i,e,t,n,a){return i=(i-t)*a|0,e=(e-n)*a|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function VP(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function e3(i,e,t,n,a,o,u,d){return(a-u)*(e-d)>=(i-u)*(o-d)&&(i-u)*(n-d)>=(t-u)*(e-d)&&(t-u)*(o-d)>=(a-u)*(n-d)}function qm(i,e,t,n,a,o,u,d){return!(i===u&&e===d)&&e3(i,e,t,n,a,o,u,d)}function HP(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!GP(i,e)&&(vg(i,e)&&vg(e,i)&&WP(i,e)&&(Zi(i.prev,i,e.prev)||Zi(i,e.prev,e))||Fh(i,e)&&Zi(i.prev,i,i.next)>0&&Zi(e.prev,e,e.next)>0)}function Zi(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Fh(i,e){return i.x===e.x&&i.y===e.y}function t3(i,e,t,n){const a=my(Zi(i,e,t)),o=my(Zi(i,e,n)),u=my(Zi(t,n,i)),d=my(Zi(t,n,e));return!!(a!==o&&u!==d||a===0&&py(i,t,e)||o===0&&py(i,n,e)||u===0&&py(t,i,n)||d===0&&py(t,e,n))}function py(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function my(i){return i>0?1:i<0?-1:0}function GP(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&t3(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function vg(i,e){return Zi(i.prev,i,i.next)<0?Zi(i,e,i.next)>=0&&Zi(i,i.prev,e)>=0:Zi(i,e,i.prev)<0||Zi(i,i.next,e)<0}function WP(i,e){let t=i,n=!1;const a=(i.x+e.x)/2,o=(i.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&a<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function n3(i,e){const t=JS(i.i,i.x,i.y),n=JS(e.i,e.x,e.y),a=i.next,o=e.prev;return i.next=e,e.prev=i,t.next=a,a.prev=t,n.next=t,t.prev=n,o.next=n,n.prev=o,n}function gw(i,e,t,n){const a=JS(i,e,t);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function yg(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function JS(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function XP(i,e,t,n){let a=0;for(let o=e,u=t-n;o<t;o+=n)a+=(i[u]-i[o])*(i[o+1]+i[u+1]),u=o;return a}class jP{static triangulate(e,t,n=2){return RP(e,t,n)}}class bo{static area(e){const t=e.length;let n=0;for(let a=t-1,o=0;o<t;a=o++)n+=e[a].x*e[o].y-e[o].x*e[a].y;return n*.5}static isClockWise(e){return bo.area(e)<0}static triangulateShape(e,t){const n=[],a=[],o=[];vw(e),yw(n,e);let u=e.length;t.forEach(vw);for(let h=0;h<t.length;h++)a.push(u),u+=t[h].length,yw(n,t[h]);const d=jP.triangulate(n,a);for(let h=0;h<d.length;h+=3)o.push(d.slice(h,h+3));return o}}function vw(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function yw(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class m_ extends _n{constructor(e=new Cf([new Ze(.5,.5),new Ze(-.5,.5),new Ze(-.5,-.5),new Ze(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,a=[],o=[];for(let d=0,h=e.length;d<h;d++){const p=e[d];u(p)}this.setAttribute("position",new Vt(a,3)),this.setAttribute("uv",new Vt(o,2)),this.computeVertexNormals();function u(d){const h=[],p=t.curveSegments!==void 0?t.curveSegments:12,y=t.steps!==void 0?t.steps:1,v=t.depth!==void 0?t.depth:1;let x=t.bevelEnabled!==void 0?t.bevelEnabled:!0,S=t.bevelThickness!==void 0?t.bevelThickness:.2,E=t.bevelSize!==void 0?t.bevelSize:S-.1,C=t.bevelOffset!==void 0?t.bevelOffset:0,T=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,R=t.UVGenerator!==void 0?t.UVGenerator:qP;let I,L=!1,z,P,V,N;if(M){I=M.getSpacedPoints(y),L=!0,x=!1;const He=M.isCatmullRomCurve3?M.closed:!1;z=M.computeFrenetFrames(y,He),P=new Q,V=new Q,N=new Q}x||(T=0,S=0,E=0,C=0);const O=d.extractPoints(p);let K=O.shape;const H=O.holes;if(!bo.isClockWise(K)){K=K.reverse();for(let He=0,nt=H.length;He<nt;He++){const Xe=H[He];bo.isClockWise(Xe)&&(H[He]=Xe.reverse())}}function ee(He){const Xe=10000000000000001e-36;let mt=He[0];for(let ne=1;ne<=He.length;ne++){const Lt=ne%He.length,wt=He[Lt],kt=wt.x-mt.x,Je=wt.y-mt.y,Z=kt*kt+Je*Je,F=Math.max(Math.abs(wt.x),Math.abs(wt.y),Math.abs(mt.x),Math.abs(mt.y)),ye=Xe*F*F;if(Z<=ye){He.splice(Lt,1),ne--;continue}mt=wt}}ee(K),H.forEach(ee);const ae=H.length,se=K;for(let He=0;He<ae;He++){const nt=H[He];K=K.concat(nt)}function G(He,nt,Xe){return nt||Qt("ExtrudeGeometry: vec does not exist"),He.clone().addScaledVector(nt,Xe)}const $=K.length;function le(He,nt,Xe){let mt,ne,Lt;const wt=He.x-nt.x,kt=He.y-nt.y,Je=Xe.x-He.x,Z=Xe.y-He.y,F=wt*wt+kt*kt,ye=wt*Z-kt*Je;if(Math.abs(ye)>Number.EPSILON){const Ue=Math.sqrt(F),je=Math.sqrt(Je*Je+Z*Z),Oe=nt.x-kt/Ue,Mt=nt.y+wt/Ue,ct=Xe.x-Z/je,Ft=Xe.y+Je/je,Bt=((ct-Oe)*Z-(Ft-Mt)*Je)/(wt*Z-kt*Je);mt=Oe+wt*Bt-He.x,ne=Mt+kt*Bt-He.y;const Qe=mt*mt+ne*ne;if(Qe<=2)return new Ze(mt,ne);Lt=Math.sqrt(Qe/2)}else{let Ue=!1;wt>Number.EPSILON?Je>Number.EPSILON&&(Ue=!0):wt<-Number.EPSILON?Je<-Number.EPSILON&&(Ue=!0):Math.sign(kt)===Math.sign(Z)&&(Ue=!0),Ue?(mt=-kt,ne=wt,Lt=Math.sqrt(F)):(mt=wt,ne=kt,Lt=Math.sqrt(F/2))}return new Ze(mt/Lt,ne/Lt)}const be=[];for(let He=0,nt=se.length,Xe=nt-1,mt=He+1;He<nt;He++,Xe++,mt++)Xe===nt&&(Xe=0),mt===nt&&(mt=0),be[He]=le(se[He],se[Xe],se[mt]);const Ae=[];let Y,re=be.concat();for(let He=0,nt=ae;He<nt;He++){const Xe=H[He];Y=[];for(let mt=0,ne=Xe.length,Lt=ne-1,wt=mt+1;mt<ne;mt++,Lt++,wt++)Lt===ne&&(Lt=0),wt===ne&&(wt=0),Y[mt]=le(Xe[mt],Xe[Lt],Xe[wt]);Ae.push(Y),re=re.concat(Y)}let me;if(T===0)me=bo.triangulateShape(se,H);else{const He=[],nt=[];for(let Xe=0;Xe<T;Xe++){const mt=Xe/T,ne=S*Math.cos(mt*Math.PI/2),Lt=E*Math.sin(mt*Math.PI/2)+C;for(let wt=0,kt=se.length;wt<kt;wt++){const Je=G(se[wt],be[wt],Lt);pt(Je.x,Je.y,-ne),mt===0&&He.push(Je)}for(let wt=0,kt=ae;wt<kt;wt++){const Je=H[wt];Y=Ae[wt];const Z=[];for(let F=0,ye=Je.length;F<ye;F++){const Ue=G(Je[F],Y[F],Lt);pt(Ue.x,Ue.y,-ne),mt===0&&Z.push(Ue)}mt===0&&nt.push(Z)}}me=bo.triangulateShape(He,nt)}const Te=me.length,Ke=E+C;for(let He=0;He<$;He++){const nt=x?G(K[He],re[He],Ke):K[He];L?(V.copy(z.normals[0]).multiplyScalar(nt.x),P.copy(z.binormals[0]).multiplyScalar(nt.y),N.copy(I[0]).add(V).add(P),pt(N.x,N.y,N.z)):pt(nt.x,nt.y,0)}for(let He=1;He<=y;He++)for(let nt=0;nt<$;nt++){const Xe=x?G(K[nt],re[nt],Ke):K[nt];L?(V.copy(z.normals[He]).multiplyScalar(Xe.x),P.copy(z.binormals[He]).multiplyScalar(Xe.y),N.copy(I[He]).add(V).add(P),pt(N.x,N.y,N.z)):pt(Xe.x,Xe.y,v/y*He)}for(let He=T-1;He>=0;He--){const nt=He/T,Xe=S*Math.cos(nt*Math.PI/2),mt=E*Math.sin(nt*Math.PI/2)+C;for(let ne=0,Lt=se.length;ne<Lt;ne++){const wt=G(se[ne],be[ne],mt);pt(wt.x,wt.y,v+Xe)}for(let ne=0,Lt=H.length;ne<Lt;ne++){const wt=H[ne];Y=Ae[ne];for(let kt=0,Je=wt.length;kt<Je;kt++){const Z=G(wt[kt],Y[kt],mt);L?pt(Z.x,Z.y+I[y-1].y,I[y-1].x+Xe):pt(Z.x,Z.y,v+Xe)}}}he(),De();function he(){const He=a.length/3;if(x){let nt=0,Xe=$*nt;for(let mt=0;mt<Te;mt++){const ne=me[mt];It(ne[2]+Xe,ne[1]+Xe,ne[0]+Xe)}nt=y+T*2,Xe=$*nt;for(let mt=0;mt<Te;mt++){const ne=me[mt];It(ne[0]+Xe,ne[1]+Xe,ne[2]+Xe)}}else{for(let nt=0;nt<Te;nt++){const Xe=me[nt];It(Xe[2],Xe[1],Xe[0])}for(let nt=0;nt<Te;nt++){const Xe=me[nt];It(Xe[0]+$*y,Xe[1]+$*y,Xe[2]+$*y)}}n.addGroup(He,a.length/3-He,0)}function De(){const He=a.length/3;let nt=0;ze(se,nt),nt+=se.length;for(let Xe=0,mt=H.length;Xe<mt;Xe++){const ne=H[Xe];ze(ne,nt),nt+=ne.length}n.addGroup(He,a.length/3-He,1)}function ze(He,nt){let Xe=He.length;for(;--Xe>=0;){const mt=Xe;let ne=Xe-1;ne<0&&(ne=He.length-1);for(let Lt=0,wt=y+T*2;Lt<wt;Lt++){const kt=$*Lt,Je=$*(Lt+1),Z=nt+mt+kt,F=nt+ne+kt,ye=nt+ne+Je,Ue=nt+mt+Je;zt(Z,F,ye,Ue)}}}function pt(He,nt,Xe){h.push(He),h.push(nt),h.push(Xe)}function It(He,nt,Xe){Jt(He),Jt(nt),Jt(Xe);const mt=a.length/3,ne=R.generateTopUV(n,a,mt-3,mt-2,mt-1);jt(ne[0]),jt(ne[1]),jt(ne[2])}function zt(He,nt,Xe,mt){Jt(He),Jt(nt),Jt(mt),Jt(nt),Jt(Xe),Jt(mt);const ne=a.length/3,Lt=R.generateSideWallUV(n,a,ne-6,ne-3,ne-2,ne-1);jt(Lt[0]),jt(Lt[1]),jt(Lt[3]),jt(Lt[1]),jt(Lt[2]),jt(Lt[3])}function Jt(He){a.push(h[He*3+0]),a.push(h[He*3+1]),a.push(h[He*3+2])}function jt(He){o.push(He.x),o.push(He.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return YP(t,n,e)}static fromJSON(e,t){const n=[];for(let o=0,u=e.shapes.length;o<u;o++){const d=t[e.shapes[o]];n.push(d)}const a=e.options.extrudePath;return a!==void 0&&(e.options.extrudePath=new Ox[a.type]().fromJSON(a)),new m_(n,e.options)}}const qP={generateTopUV:function(i,e,t,n,a){const o=e[t*3],u=e[t*3+1],d=e[n*3],h=e[n*3+1],p=e[a*3],y=e[a*3+1];return[new Ze(o,u),new Ze(d,h),new Ze(p,y)]},generateSideWallUV:function(i,e,t,n,a,o){const u=e[t*3],d=e[t*3+1],h=e[t*3+2],p=e[n*3],y=e[n*3+1],v=e[n*3+2],x=e[a*3],S=e[a*3+1],E=e[a*3+2],C=e[o*3],T=e[o*3+1],M=e[o*3+2];return Math.abs(d-y)<Math.abs(u-p)?[new Ze(u,1-h),new Ze(p,1-v),new Ze(x,1-E),new Ze(C,1-M)]:[new Ze(d,1-h),new Ze(y,1-v),new Ze(S,1-E),new Ze(T,1-M)]}};function YP(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,a=i.length;n<a;n++){const o=i[n];t.shapes.push(o.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class kg extends du{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,a=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new kg(e.radius,e.detail)}}class g_ extends _n{constructor(e=[new Ze(0,-.5),new Ze(.5,0),new Ze(0,.5)],t=12,n=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:a},t=Math.floor(t),a=fn(a,0,Math.PI*2);const o=[],u=[],d=[],h=[],p=[],y=1/t,v=new Q,x=new Ze,S=new Q,E=new Q,C=new Q;let T=0,M=0;for(let R=0;R<=e.length-1;R++)switch(R){case 0:T=e[R+1].x-e[R].x,M=e[R+1].y-e[R].y,S.x=M*1,S.y=-T,S.z=M*0,C.copy(S),S.normalize(),h.push(S.x,S.y,S.z);break;case e.length-1:h.push(C.x,C.y,C.z);break;default:T=e[R+1].x-e[R].x,M=e[R+1].y-e[R].y,S.x=M*1,S.y=-T,S.z=M*0,E.copy(S),S.x+=C.x,S.y+=C.y,S.z+=C.z,S.normalize(),h.push(S.x,S.y,S.z),C.copy(E)}for(let R=0;R<=t;R++){const I=n+R*y*a,L=Math.sin(I),z=Math.cos(I);for(let P=0;P<=e.length-1;P++){v.x=e[P].x*L,v.y=e[P].y,v.z=e[P].x*z,u.push(v.x,v.y,v.z),x.x=R/t,x.y=P/(e.length-1),d.push(x.x,x.y);const V=h[3*P+0]*L,N=h[3*P+1],O=h[3*P+0]*z;p.push(V,N,O)}}for(let R=0;R<t;R++)for(let I=0;I<e.length-1;I++){const L=I+R*e.length,z=L,P=L+e.length,V=L+e.length+1,N=L+1;o.push(z,P,N),o.push(V,N,P)}this.setIndex(o),this.setAttribute("position",new Vt(u,3)),this.setAttribute("uv",new Vt(d,2)),this.setAttribute("normal",new Vt(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new g_(e.points,e.segments,e.phiStart,e.phiLength)}}class Vg extends du{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,a,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Vg(e.radius,e.detail)}}class hu extends _n{constructor(e=1,t=1,n=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:a};const o=e/2,u=t/2,d=Math.floor(n),h=Math.floor(a),p=d+1,y=h+1,v=e/d,x=t/h,S=[],E=[],C=[],T=[];for(let M=0;M<y;M++){const R=M*x-u;for(let I=0;I<p;I++){const L=I*v-o;E.push(L,-R,0),C.push(0,0,1),T.push(I/d),T.push(1-M/h)}}for(let M=0;M<h;M++)for(let R=0;R<d;R++){const I=R+p*M,L=R+p*(M+1),z=R+1+p*(M+1),P=R+1+p*M;S.push(I,L,P),S.push(L,z,P)}this.setIndex(S),this.setAttribute("position",new Vt(E,3)),this.setAttribute("normal",new Vt(C,3)),this.setAttribute("uv",new Vt(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hu(e.width,e.height,e.widthSegments,e.heightSegments)}}class v_ extends _n{constructor(e=.5,t=1,n=32,a=1,o=0,u=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:a,thetaStart:o,thetaLength:u},n=Math.max(3,n),a=Math.max(1,a);const d=[],h=[],p=[],y=[];let v=e;const x=(t-e)/a,S=new Q,E=new Ze;for(let C=0;C<=a;C++){for(let T=0;T<=n;T++){const M=o+T/n*u;S.x=v*Math.cos(M),S.y=v*Math.sin(M),h.push(S.x,S.y,S.z),p.push(0,0,1),E.x=(S.x/t+1)/2,E.y=(S.y/t+1)/2,y.push(E.x,E.y)}v+=x}for(let C=0;C<a;C++){const T=C*(n+1);for(let M=0;M<n;M++){const R=M+T,I=R,L=R+n+1,z=R+n+2,P=R+1;d.push(I,L,P),d.push(L,z,P)}}this.setIndex(d),this.setAttribute("position",new Vt(h,3)),this.setAttribute("normal",new Vt(p,3)),this.setAttribute("uv",new Vt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new v_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class y_ extends _n{constructor(e=new Cf([new Ze(0,.5),new Ze(-.5,-.5),new Ze(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],a=[],o=[],u=[];let d=0,h=0;if(Array.isArray(e)===!1)p(e);else for(let y=0;y<e.length;y++)p(e[y]),this.addGroup(d,h,y),d+=h,h=0;this.setIndex(n),this.setAttribute("position",new Vt(a,3)),this.setAttribute("normal",new Vt(o,3)),this.setAttribute("uv",new Vt(u,2));function p(y){const v=a.length/3,x=y.extractPoints(t);let S=x.shape;const E=x.holes;bo.isClockWise(S)===!1&&(S=S.reverse());for(let T=0,M=E.length;T<M;T++){const R=E[T];bo.isClockWise(R)===!0&&(E[T]=R.reverse())}const C=bo.triangulateShape(S,E);for(let T=0,M=E.length;T<M;T++){const R=E[T];S=S.concat(R)}for(let T=0,M=S.length;T<M;T++){const R=S[T];a.push(R.x,R.y,0),o.push(0,0,1),u.push(R.x,R.y)}for(let T=0,M=C.length;T<M;T++){const R=C[T],I=R[0]+v,L=R[1]+v,z=R[2]+v;n.push(I,L,z),h+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return ZP(t,e)}static fromJSON(e,t){const n=[];for(let a=0,o=e.shapes.length;a<o;a++){const u=t[e.shapes[a]];n.push(u)}return new y_(n,e.curveSegments)}}function ZP(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const a=i[t];e.shapes.push(a.uuid)}else e.shapes.push(i.uuid);return e}class Hg extends _n{constructor(e=1,t=32,n=16,a=0,o=Math.PI*2,u=0,d=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:a,phiLength:o,thetaStart:u,thetaLength:d},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const h=Math.min(u+d,Math.PI);let p=0;const y=[],v=new Q,x=new Q,S=[],E=[],C=[],T=[];for(let M=0;M<=n;M++){const R=[],I=M/n;let L=0;M===0&&u===0?L=.5/t:M===n&&h===Math.PI&&(L=-.5/t);for(let z=0;z<=t;z++){const P=z/t;v.x=-e*Math.cos(a+P*o)*Math.sin(u+I*d),v.y=e*Math.cos(u+I*d),v.z=e*Math.sin(a+P*o)*Math.sin(u+I*d),E.push(v.x,v.y,v.z),x.copy(v).normalize(),C.push(x.x,x.y,x.z),T.push(P+L,1-I),R.push(p++)}y.push(R)}for(let M=0;M<n;M++)for(let R=0;R<t;R++){const I=y[M][R+1],L=y[M][R],z=y[M+1][R],P=y[M+1][R+1];(M!==0||u>0)&&S.push(I,L,P),(M!==n-1||h<Math.PI)&&S.push(L,z,P)}this.setIndex(S),this.setAttribute("position",new Vt(E,3)),this.setAttribute("normal",new Vt(C,3)),this.setAttribute("uv",new Vt(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class x_ extends du{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,a,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new x_(e.radius,e.detail)}}class __ extends _n{constructor(e=1,t=.4,n=12,a=48,o=Math.PI*2,u=0,d=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:a,arc:o,thetaStart:u,thetaLength:d},n=Math.floor(n),a=Math.floor(a);const h=[],p=[],y=[],v=[],x=new Q,S=new Q,E=new Q;for(let C=0;C<=n;C++){const T=u+C/n*d;for(let M=0;M<=a;M++){const R=M/a*o;S.x=(e+t*Math.cos(T))*Math.cos(R),S.y=(e+t*Math.cos(T))*Math.sin(R),S.z=t*Math.sin(T),p.push(S.x,S.y,S.z),x.x=e*Math.cos(R),x.y=e*Math.sin(R),E.subVectors(S,x).normalize(),y.push(E.x,E.y,E.z),v.push(M/a),v.push(C/n)}}for(let C=1;C<=n;C++)for(let T=1;T<=a;T++){const M=(a+1)*C+T-1,R=(a+1)*(C-1)+T-1,I=(a+1)*(C-1)+T,L=(a+1)*C+T;h.push(M,R,L),h.push(R,I,L)}this.setIndex(h),this.setAttribute("position",new Vt(p,3)),this.setAttribute("normal",new Vt(y,3)),this.setAttribute("uv",new Vt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new __(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class b_ extends _n{constructor(e=1,t=.4,n=64,a=8,o=2,u=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:a,p:o,q:u},n=Math.floor(n),a=Math.floor(a);const d=[],h=[],p=[],y=[],v=new Q,x=new Q,S=new Q,E=new Q,C=new Q,T=new Q,M=new Q;for(let I=0;I<=n;++I){const L=I/n*o*Math.PI*2;R(L,o,u,e,S),R(L+.01,o,u,e,E),T.subVectors(E,S),M.addVectors(E,S),C.crossVectors(T,M),M.crossVectors(C,T),C.normalize(),M.normalize();for(let z=0;z<=a;++z){const P=z/a*Math.PI*2,V=-t*Math.cos(P),N=t*Math.sin(P);v.x=S.x+(V*M.x+N*C.x),v.y=S.y+(V*M.y+N*C.y),v.z=S.z+(V*M.z+N*C.z),h.push(v.x,v.y,v.z),x.subVectors(v,S).normalize(),p.push(x.x,x.y,x.z),y.push(I/n),y.push(z/a)}}for(let I=1;I<=n;I++)for(let L=1;L<=a;L++){const z=(a+1)*(I-1)+(L-1),P=(a+1)*I+(L-1),V=(a+1)*I+L,N=(a+1)*(I-1)+L;d.push(z,P,N),d.push(P,V,N)}this.setIndex(d),this.setAttribute("position",new Vt(h,3)),this.setAttribute("normal",new Vt(p,3)),this.setAttribute("uv",new Vt(y,2));function R(I,L,z,P,V){const N=Math.cos(I),O=Math.sin(I),K=z/L*I,H=Math.cos(K);V.x=P*(2+H)*.5*N,V.y=P*(2+H)*O*.5,V.z=P*Math.sin(K)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new b_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class S_ extends _n{constructor(e=new q1(new Q(-1,-1,0),new Q(-1,1,0),new Q(1,1,0)),t=64,n=1,a=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:a,closed:o};const u=e.computeFrenetFrames(t,o);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;const d=new Q,h=new Q,p=new Ze;let y=new Q;const v=[],x=[],S=[],E=[];C(),this.setIndex(E),this.setAttribute("position",new Vt(v,3)),this.setAttribute("normal",new Vt(x,3)),this.setAttribute("uv",new Vt(S,2));function C(){for(let I=0;I<t;I++)T(I);T(o===!1?t:0),R(),M()}function T(I){y=e.getPointAt(I/t,y);const L=u.normals[I],z=u.binormals[I];for(let P=0;P<=a;P++){const V=P/a*Math.PI*2,N=Math.sin(V),O=-Math.cos(V);h.x=O*L.x+N*z.x,h.y=O*L.y+N*z.y,h.z=O*L.z+N*z.z,h.normalize(),x.push(h.x,h.y,h.z),d.x=y.x+n*h.x,d.y=y.y+n*h.y,d.z=y.z+n*h.z,v.push(d.x,d.y,d.z)}}function M(){for(let I=1;I<=t;I++)for(let L=1;L<=a;L++){const z=(a+1)*(I-1)+(L-1),P=(a+1)*I+(L-1),V=(a+1)*I+L,N=(a+1)*(I-1)+L;E.push(z,P,N),E.push(P,V,N)}}function R(){for(let I=0;I<=t;I++)for(let L=0;L<=a;L++)p.x=I/t,p.y=L/a,S.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new S_(new Ox[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class i3 extends _n{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,a=new Q,o=new Q;if(e.index!==null){const u=e.attributes.position,d=e.index;let h=e.groups;h.length===0&&(h=[{start:0,count:d.count,materialIndex:0}]);for(let p=0,y=h.length;p<y;++p){const v=h[p],x=v.start,S=v.count;for(let E=x,C=x+S;E<C;E+=3)for(let T=0;T<3;T++){const M=d.getX(E+T),R=d.getX(E+(T+1)%3);a.fromBufferAttribute(u,M),o.fromBufferAttribute(u,R),xw(a,o,n)===!0&&(t.push(a.x,a.y,a.z),t.push(o.x,o.y,o.z))}}}else{const u=e.attributes.position;for(let d=0,h=u.count/3;d<h;d++)for(let p=0;p<3;p++){const y=3*d+p,v=3*d+(p+1)%3;a.fromBufferAttribute(u,y),o.fromBufferAttribute(u,v),xw(a,o,n)===!0&&(t.push(a.x,a.y,a.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new Vt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function xw(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,a=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(a)===!0?!1:(t.add(n),t.add(a),!0)}var _w=Object.freeze({__proto__:null,BoxGeometry:Ff,CapsuleGeometry:f_,CircleGeometry:d_,ConeGeometry:Bg,CylinderGeometry:Fg,DodecahedronGeometry:h_,EdgesGeometry:qC,ExtrudeGeometry:m_,IcosahedronGeometry:kg,LatheGeometry:g_,OctahedronGeometry:Vg,PlaneGeometry:hu,PolyhedronGeometry:du,RingGeometry:v_,ShapeGeometry:y_,SphereGeometry:Hg,TetrahedronGeometry:x_,TorusGeometry:__,TorusKnotGeometry:b_,TubeGeometry:S_,WireframeGeometry:i3});class r3 extends ya{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Pt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}function Bh(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const a=i[t][n];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(Rt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=a.clone():Array.isArray(a)?e[t][n]=a.slice():e[t][n]=a}}return e}function Na(i){const e={};for(let t=0;t<i.length;t++){const n=Bh(i[t]);for(const a in n)e[a]=n[a]}return e}function KP(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function a3(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Gn.workingColorSpace}const Z1={clone:Bh,merge:Na};var $P=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,QP=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class va extends ya{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=$P,this.fragmentShader=QP,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Bh(e.uniforms),this.uniformsGroups=KP(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const a in this.uniforms){const u=this.uniforms[a].value;u&&u.isTexture?t.uniforms[a]={type:"t",value:u.toJSON(e).uuid}:u&&u.isColor?t.uniforms[a]={type:"c",value:u.getHex()}:u&&u.isVector2?t.uniforms[a]={type:"v2",value:u.toArray()}:u&&u.isVector3?t.uniforms[a]={type:"v3",value:u.toArray()}:u&&u.isVector4?t.uniforms[a]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?t.uniforms[a]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?t.uniforms[a]={type:"m4",value:u.toArray()}:t.uniforms[a]={value:u}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const a in this.extensions)this.extensions[a]===!0&&(n[a]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class K1 extends va{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class M_ extends ya{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Pt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ys,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class s3 extends M_{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ze(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return fn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Pt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Pt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Pt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class o3 extends ya{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Pt(16777215),this.specular=new Pt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ys,this.combine=Ig,this.reflectivity=1,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class l3 extends ya{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Pt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class c3 extends ya{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class u3 extends ya{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ys,this.combine=Ig,this.reflectivity=1,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $1 extends ya{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=MC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Q1 extends ya{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class f3 extends ya{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Pt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class d3 extends Oa{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ef(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function h3(i){function e(a,o){return i[a]-i[o]}const t=i.length,n=new Array(t);for(let a=0;a!==t;++a)n[a]=a;return n.sort(e),n}function e1(i,e,t){const n=i.length,a=new i.constructor(n);for(let o=0,u=0;u!==n;++o){const d=t[o]*e;for(let h=0;h!==e;++h)a[u++]=i[d+h]}return a}function J1(i,e,t,n){let a=1,o=i[0];for(;o!==void 0&&o[n]===void 0;)o=i[a++];if(o===void 0)return;let u=o[n];if(u!==void 0)if(Array.isArray(u))do u=o[n],u!==void 0&&(e.push(o.time),t.push(...u)),o=i[a++];while(o!==void 0);else if(u.toArray!==void 0)do u=o[n],u!==void 0&&(e.push(o.time),u.toArray(t,t.length)),o=i[a++];while(o!==void 0);else do u=o[n],u!==void 0&&(e.push(o.time),t.push(u)),o=i[a++];while(o!==void 0)}function JP(i,e,t,n,a=30){const o=i.clone();o.name=e;const u=[];for(let h=0;h<o.tracks.length;++h){const p=o.tracks[h],y=p.getValueSize(),v=[],x=[];for(let S=0;S<p.times.length;++S){const E=p.times[S]*a;if(!(E<t||E>=n)){v.push(p.times[S]);for(let C=0;C<y;++C)x.push(p.values[S*y+C])}}v.length!==0&&(p.times=Ef(v,p.times.constructor),p.values=Ef(x,p.values.constructor),u.push(p))}o.tracks=u;let d=1/0;for(let h=0;h<o.tracks.length;++h)d>o.tracks[h].times[0]&&(d=o.tracks[h].times[0]);for(let h=0;h<o.tracks.length;++h)o.tracks[h].shift(-1*d);return o.resetDuration(),o}function ez(i,e=0,t=i,n=30){n<=0&&(n=30);const a=t.tracks.length,o=e/n;for(let u=0;u<a;++u){const d=t.tracks[u],h=d.ValueTypeName;if(h==="bool"||h==="string")continue;const p=i.tracks.find(function(M){return M.name===d.name&&M.ValueTypeName===h});if(p===void 0)continue;let y=0;const v=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=v/3);let x=0;const S=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=S/3);const E=d.times.length-1;let C;if(o<=d.times[0]){const M=y,R=v-y;C=d.values.slice(M,R)}else if(o>=d.times[E]){const M=E*v+y,R=M+v-y;C=d.values.slice(M,R)}else{const M=d.createInterpolant(),R=y,I=v-y;M.evaluate(o),C=M.resultBuffer.slice(R,I)}h==="quaternion"&&new Qr().fromArray(C).normalize().conjugate().toArray(C);const T=p.times.length;for(let M=0;M<T;++M){const R=M*S+x;if(h==="quaternion")Qr.multiplyQuaternionsFlat(p.values,R,C,0,p.values,R);else{const I=S-x*2;for(let L=0;L<I;++L)p.values[R+L]-=C[L]}}}return i.blendMode=U1,i}class tz{static convertArray(e,t){return Ef(e,t)}static isTypedArray(e){return DC(e)}static getKeyframeOrder(e){return h3(e)}static sortedArray(e,t,n){return e1(e,t,n)}static flattenJSON(e,t,n,a){J1(e,t,n,a)}static subclip(e,t,n,a,o=30){return JP(e,t,n,a,o)}static makeClipAdditive(e,t=0,n=e,a=30){return ez(e,t,n,a)}}class $h{constructor(e,t,n,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,a=t[n],o=t[n-1];e:{t:{let u;n:{i:if(!(e<a)){for(let d=n+2;;){if(a===void 0){if(e<o)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===d)break;if(o=a,a=t[++n],e<a)break t}u=t.length;break n}if(!(e>=o)){const d=t[1];e<d&&(n=2,o=d);for(let h=n-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===h)break;if(a=o,o=t[--n-1],e>=o)break t}u=n,n=0;break n}break e}for(;n<u;){const d=n+u>>>1;e<t[d]?u=d:n=d+1}if(a=t[n],o=t[n-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,a)}return this.interpolate_(n,o,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=e*a;for(let u=0;u!==a;++u)t[u]=n[o+u];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class p3 extends $h{constructor(e,t,n,a){super(e,t,n,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:bf,endingEnd:bf}}intervalChanged_(e,t,n){const a=this.parameterPositions;let o=e-2,u=e+1,d=a[o],h=a[u];if(d===void 0)switch(this.getSettings_().endingStart){case Sf:o=e,d=2*t-n;break;case ug:o=a.length-2,d=t+a[o]-a[o+1];break;default:o=e,d=n}if(h===void 0)switch(this.getSettings_().endingEnd){case Sf:u=e,h=2*n-t;break;case ug:u=1,h=n+a[1]-a[0];break;default:u=e-1,h=t}const p=(n-t)*.5,y=this.valueSize;this._weightPrev=p/(t-d),this._weightNext=p/(h-n),this._offsetPrev=o*y,this._offsetNext=u*y}interpolate_(e,t,n,a){const o=this.resultBuffer,u=this.sampleValues,d=this.valueSize,h=e*d,p=h-d,y=this._offsetPrev,v=this._offsetNext,x=this._weightPrev,S=this._weightNext,E=(n-t)/(a-t),C=E*E,T=C*E,M=-x*T+2*x*C-x*E,R=(1+x)*T+(-1.5-2*x)*C+(-.5+x)*E+1,I=(-1-S)*T+(1.5+S)*C+.5*E,L=S*T-S*C;for(let z=0;z!==d;++z)o[z]=M*u[y+z]+R*u[p+z]+I*u[h+z]+L*u[v+z];return o}}class eM extends $h{constructor(e,t,n,a){super(e,t,n,a)}interpolate_(e,t,n,a){const o=this.resultBuffer,u=this.sampleValues,d=this.valueSize,h=e*d,p=h-d,y=(n-t)/(a-t),v=1-y;for(let x=0;x!==d;++x)o[x]=u[p+x]*v+u[h+x]*y;return o}}class m3 extends $h{constructor(e,t,n,a){super(e,t,n,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class g3 extends $h{interpolate_(e,t,n,a){const o=this.resultBuffer,u=this.sampleValues,d=this.valueSize,h=e*d,p=h-d,y=this.settings||this.DefaultSettings_,v=y.inTangents,x=y.outTangents;if(!v||!x){const C=(n-t)/(a-t),T=1-C;for(let M=0;M!==d;++M)o[M]=u[p+M]*T+u[h+M]*C;return o}const S=d*2,E=e-1;for(let C=0;C!==d;++C){const T=u[p+C],M=u[h+C],R=E*S+C*2,I=x[R],L=x[R+1],z=e*S+C*2,P=v[z],V=v[z+1];let N=(n-t)/(a-t),O,K,H,te,ee;for(let ae=0;ae<8;ae++){O=N*N,K=O*N,H=1-N,te=H*H,ee=te*H;const G=ee*t+3*te*N*I+3*H*O*P+K*a-n;if(Math.abs(G)<1e-10)break;const $=3*te*(I-t)+6*H*N*(P-I)+3*O*(a-P);if(Math.abs($)<1e-10)break;N=N-G/$,N=Math.max(0,Math.min(1,N))}o[C]=ee*T+3*te*N*L+3*H*O*V+K*M}return o}}class Zs{constructor(e,t,n,a){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ef(t,this.TimeBufferType),this.values=Ef(n,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Ef(e.times,Array),values:Ef(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(n.interpolation=a)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new m3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new eM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new p3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodBezier(e){const t=new g3(this.times,this.values,this.getValueSize(),e);return this.settings&&(t.settings=this.settings),t}setInterpolation(e){let t;switch(e){case cg:t=this.InterpolantFactoryMethodDiscrete;break;case Ix:t=this.InterpolantFactoryMethodLinear;break;case Py:t=this.InterpolantFactoryMethodSmooth;break;case YS:t=this.InterpolantFactoryMethodBezier;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return Rt("KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return cg;case this.InterpolantFactoryMethodLinear:return Ix;case this.InterpolantFactoryMethodSmooth:return Py;case this.InterpolantFactoryMethodBezier:return YS}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,a=t.length;n!==a;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,a=t.length;n!==a;++n)t[n]*=e}return this}trim(e,t){const n=this.times,a=n.length;let o=0,u=a-1;for(;o!==a&&n[o]<e;)++o;for(;u!==-1&&n[u]>t;)--u;if(++u,o!==0||u!==a){o>=u&&(u=Math.max(u,1),o=u-1);const d=this.getValueSize();this.times=n.slice(o,u),this.values=this.values.slice(o*d,u*d)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(Qt("KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,a=this.values,o=n.length;o===0&&(Qt("KeyframeTrack: Track is empty.",this),e=!1);let u=null;for(let d=0;d!==o;d++){const h=n[d];if(typeof h=="number"&&isNaN(h)){Qt("KeyframeTrack: Time is not a valid number.",this,d,h),e=!1;break}if(u!==null&&u>h){Qt("KeyframeTrack: Out of order keys.",this,d,h,u),e=!1;break}u=h}if(a!==void 0&&DC(a))for(let d=0,h=a.length;d!==h;++d){const p=a[d];if(isNaN(p)){Qt("KeyframeTrack: Value is not a valid number.",this,d,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),a=this.getInterpolation()===Py,o=e.length-1;let u=1;for(let d=1;d<o;++d){let h=!1;const p=e[d],y=e[d+1];if(p!==y&&(d!==1||p!==e[0]))if(a)h=!0;else{const v=d*n,x=v-n,S=v+n;for(let E=0;E!==n;++E){const C=t[v+E];if(C!==t[x+E]||C!==t[S+E]){h=!0;break}}}if(h){if(d!==u){e[u]=e[d];const v=d*n,x=u*n;for(let S=0;S!==n;++S)t[x+S]=t[v+S]}++u}}if(o>0){e[u]=e[o];for(let d=o*n,h=u*n,p=0;p!==n;++p)t[h+p]=t[d+p];++u}return u!==e.length?(this.times=e.slice(0,u),this.values=t.slice(0,u*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,a=new n(this.name,e,t);return a.createInterpolant=this.createInterpolant,a}}Zs.prototype.ValueTypeName="";Zs.prototype.TimeBufferType=Float32Array;Zs.prototype.ValueBufferType=Float32Array;Zs.prototype.DefaultInterpolation=Ix;class Bf extends Zs{constructor(e,t,n){super(e,t,n)}}Bf.prototype.ValueTypeName="bool";Bf.prototype.ValueBufferType=Array;Bf.prototype.DefaultInterpolation=cg;Bf.prototype.InterpolantFactoryMethodLinear=void 0;Bf.prototype.InterpolantFactoryMethodSmooth=void 0;class tM extends Zs{constructor(e,t,n,a){super(e,t,n,a)}}tM.prototype.ValueTypeName="color";class xg extends Zs{constructor(e,t,n,a){super(e,t,n,a)}}xg.prototype.ValueTypeName="number";class v3 extends $h{constructor(e,t,n,a){super(e,t,n,a)}interpolate_(e,t,n,a){const o=this.resultBuffer,u=this.sampleValues,d=this.valueSize,h=(n-t)/(a-t);let p=e*d;for(let y=p+d;p!==y;p+=4)Qr.slerpFlat(o,0,u,p-d,u,p,h);return o}}class Gg extends Zs{constructor(e,t,n,a){super(e,t,n,a)}InterpolantFactoryMethodLinear(e){return new v3(this.times,this.values,this.getValueSize(),e)}}Gg.prototype.ValueTypeName="quaternion";Gg.prototype.InterpolantFactoryMethodSmooth=void 0;class kf extends Zs{constructor(e,t,n){super(e,t,n)}}kf.prototype.ValueTypeName="string";kf.prototype.ValueBufferType=Array;kf.prototype.DefaultInterpolation=cg;kf.prototype.InterpolantFactoryMethodLinear=void 0;kf.prototype.InterpolantFactoryMethodSmooth=void 0;class _g extends Zs{constructor(e,t,n,a){super(e,t,n,a)}}_g.prototype.ValueTypeName="vector";class bg{constructor(e="",t=-1,n=[],a=e_){this.name=e,this.tracks=n,this.duration=t,this.blendMode=a,this.uuid=ms(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,a=1/(e.fps||1);for(let u=0,d=n.length;u!==d;++u)t.push(iz(n[u]).scale(a));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o.userData=JSON.parse(e.userData||"{}"),o}static toJSON(e){const t=[],n=e.tracks,a={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let o=0,u=n.length;o!==u;++o)t.push(Zs.toJSON(n[o]));return a}static CreateFromMorphTargetSequence(e,t,n,a){const o=t.length,u=[];for(let d=0;d<o;d++){let h=[],p=[];h.push((d+o-1)%o,d,(d+1)%o),p.push(0,1,0);const y=h3(h);h=e1(h,1,y),p=e1(p,1,y),!a&&h[0]===0&&(h.push(o),p.push(p[0])),u.push(new xg(".morphTargetInfluences["+t[d].name+"]",h,p).scale(1/n))}return new this(e,-1,u)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const a=e;n=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<n.length;a++)if(n[a].name===t)return n[a];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const a={},o=/^([\w-]*?)([\d]+)$/;for(let d=0,h=e.length;d<h;d++){const p=e[d],y=p.name.match(o);if(y&&y.length>1){const v=y[1];let x=a[v];x||(a[v]=x=[]),x.push(p)}}const u=[];for(const d in a)u.push(this.CreateFromMorphTargetSequence(d,a[d],t,n));return u}static parseAnimation(e,t){if(Rt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Qt("AnimationClip: No animation in JSONLoader data."),null;const n=function(v,x,S,E,C){if(S.length!==0){const T=[],M=[];J1(S,T,M,E),T.length!==0&&C.push(new v(x,T,M))}},a=[],o=e.name||"default",u=e.fps||30,d=e.blendMode;let h=e.length||-1;const p=e.hierarchy||[];for(let v=0;v<p.length;v++){const x=p[v].keys;if(!(!x||x.length===0))if(x[0].morphTargets){const S={};let E;for(E=0;E<x.length;E++)if(x[E].morphTargets)for(let C=0;C<x[E].morphTargets.length;C++)S[x[E].morphTargets[C]]=-1;for(const C in S){const T=[],M=[];for(let R=0;R!==x[E].morphTargets.length;++R){const I=x[E];T.push(I.time),M.push(I.morphTarget===C?1:0)}a.push(new xg(".morphTargetInfluence["+C+"]",T,M))}h=S.length*u}else{const S=".bones["+t[v].name+"]";n(_g,S+".position",x,"pos",a),n(Gg,S+".quaternion",x,"rot",a),n(_g,S+".scale",x,"scl",a)}}return a.length===0?null:new this(o,h,a,d)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,a=e.length;n!==a;++n){const o=this.tracks[n];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function nz(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return xg;case"vector":case"vector2":case"vector3":case"vector4":return _g;case"color":return tM;case"quaternion":return Gg;case"bool":case"boolean":return Bf;case"string":return kf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function iz(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=nz(i.type);if(i.times===void 0){const t=[],n=[];J1(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const ul={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(bw(i)||(this.files[i]=e))},get:function(i){if(this.enabled!==!1&&!bw(i))return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};function bw(i){try{const e=i.slice(i.indexOf(":")+1);return new URL(e).protocol==="blob:"}catch{return!1}}class E_{constructor(e,t,n){const a=this;let o=!1,u=0,d=0,h;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this._abortController=null,this.itemStart=function(y){d++,o===!1&&a.onStart!==void 0&&a.onStart(y,u,d),o=!0},this.itemEnd=function(y){u++,a.onProgress!==void 0&&a.onProgress(y,u,d),u===d&&(o=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(y){a.onError!==void 0&&a.onError(y)},this.resolveURL=function(y){return h?h(y):y},this.setURLModifier=function(y){return h=y,this},this.addHandler=function(y,v){return p.push(y,v),this},this.removeHandler=function(y){const v=p.indexOf(y);return v!==-1&&p.splice(v,2),this},this.getHandler=function(y){for(let v=0,x=p.length;v<x;v+=2){const S=p[v],E=p[v+1];if(S.global&&(S.lastIndex=0),S.test(y))return E}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const y3=new E_;class Pa{constructor(e){this.manager=e!==void 0?e:y3,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}load(){}loadAsync(e,t){const n=this;return new Promise(function(a,o){n.load(e,a,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Pa.DEFAULT_MATERIAL_NAME="__DEFAULT";const $l={};class rz extends Error{constructor(e,t){super(e),this.response=t}}class gs extends Pa{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=ul.get(`file:${e}`);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if($l[e]!==void 0){$l[e].push({onLoad:t,onProgress:n,onError:a});return}$l[e]=[],$l[e].push({onLoad:t,onProgress:n,onError:a});const u=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),d=this.mimeType,h=this.responseType;fetch(u).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&Rt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const y=$l[e],v=p.body.getReader(),x=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),S=x?parseInt(x):0,E=S!==0;let C=0;const T=new ReadableStream({start(M){R();function R(){v.read().then(({done:I,value:L})=>{if(I)M.close();else{C+=L.byteLength;const z=new ProgressEvent("progress",{lengthComputable:E,loaded:C,total:S});for(let P=0,V=y.length;P<V;P++){const N=y[P];N.onProgress&&N.onProgress(z)}M.enqueue(L),R()}},I=>{M.error(I)})}}});return new Response(T)}else throw new rz(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(h){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(y=>new DOMParser().parseFromString(y,d));case"json":return p.json();default:if(d==="")return p.text();{const v=/charset="?([^;"\s]*)"?/i.exec(d),x=v&&v[1]?v[1].toLowerCase():void 0,S=new TextDecoder(x);return p.arrayBuffer().then(E=>S.decode(E))}}}).then(p=>{ul.add(`file:${e}`,p);const y=$l[e];delete $l[e];for(let v=0,x=y.length;v<x;v++){const S=y[v];S.onLoad&&S.onLoad(p)}}).catch(p=>{const y=$l[e];if(y===void 0)throw this.manager.itemError(e),p;delete $l[e];for(let v=0,x=y.length;v<x;v++){const S=y[v];S.onError&&S.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class az extends Pa{constructor(e){super(e)}load(e,t,n,a){const o=this,u=new gs(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(d){try{t(o.parse(JSON.parse(d)))}catch(h){a?a(h):Qt(h),o.manager.itemError(e)}},n,a)}parse(e){const t=[];for(let n=0;n<e.length;n++){const a=bg.parse(e[n]);t.push(a)}return t}}class sz extends Pa{constructor(e){super(e)}load(e,t,n,a){const o=this,u=[],d=new u_,h=new gs(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(o.withCredentials);let p=0;function y(v){h.load(e[v],function(x){const S=o.parse(x,!0);u[v]={width:S.width,height:S.height,format:S.format,mipmaps:S.mipmaps},p+=1,p===6&&(S.mipmapCount===1&&(d.minFilter=jn),d.image=u,d.format=S.format,d.needsUpdate=!0,t&&t(d))},n,a)}if(Array.isArray(e))for(let v=0,x=e.length;v<x;++v)y(v);else h.load(e,function(v){const x=o.parse(v,!0);if(x.isCubemap){const S=x.mipmaps.length/x.mipmapCount;for(let E=0;E<S;E++){u[E]={mipmaps:[]};for(let C=0;C<x.mipmapCount;C++)u[E].mipmaps.push(x.mipmaps[E*x.mipmapCount+C]),u[E].format=x.format,u[E].width=x.width,u[E].height=x.height}d.image=u}else d.image.width=x.width,d.image.height=x.height,d.mipmaps=x.mipmaps;x.mipmapCount===1&&(d.minFilter=jn),d.format=x.format,d.needsUpdate=!0,t&&t(d)},n,a);return d}}const ch=new WeakMap;class Sg extends Pa{constructor(e){super(e)}load(e,t,n,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,u=ul.get(`image:${e}`);if(u!==void 0){if(u.complete===!0)o.manager.itemStart(e),setTimeout(function(){t&&t(u),o.manager.itemEnd(e)},0);else{let v=ch.get(u);v===void 0&&(v=[],ch.set(u,v)),v.push({onLoad:t,onError:a})}return u}const d=hg("img");function h(){y(),t&&t(this);const v=ch.get(this)||[];for(let x=0;x<v.length;x++){const S=v[x];S.onLoad&&S.onLoad(this)}ch.delete(this),o.manager.itemEnd(e)}function p(v){y(),a&&a(v),ul.remove(`image:${e}`);const x=ch.get(this)||[];for(let S=0;S<x.length;S++){const E=x[S];E.onError&&E.onError(v)}ch.delete(this),o.manager.itemError(e),o.manager.itemEnd(e)}function y(){d.removeEventListener("load",h,!1),d.removeEventListener("error",p,!1)}return d.addEventListener("load",h,!1),d.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(d.crossOrigin=this.crossOrigin),ul.add(`image:${e}`,d),o.manager.itemStart(e),d.src=e,d}}class x3 extends Pa{constructor(e){super(e)}load(e,t,n,a){const o=new zg;o.colorSpace=Fr;const u=new Sg(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let d=0;function h(p){u.load(e[p],function(y){o.images[p]=y,d++,d===6&&(o.needsUpdate=!0,t&&t(o))},void 0,a)}for(let p=0;p<e.length;++p)h(p);return o}}class nM extends Pa{constructor(e){super(e)}load(e,t,n,a){const o=this,u=new Ys,d=new gs(this.manager);return d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setPath(this.path),d.setWithCredentials(o.withCredentials),d.load(e,function(h){let p;try{p=o.parse(h)}catch(y){if(a!==void 0)a(y);else{y(y);return}}p.image!==void 0?u.image=p.image:p.data!==void 0&&(u.image.width=p.width,u.image.height=p.height,u.image.data=p.data),u.wrapS=p.wrapS!==void 0?p.wrapS:nr,u.wrapT=p.wrapT!==void 0?p.wrapT:nr,u.magFilter=p.magFilter!==void 0?p.magFilter:jn,u.minFilter=p.minFilter!==void 0?p.minFilter:jn,u.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(u.colorSpace=p.colorSpace),p.flipY!==void 0&&(u.flipY=p.flipY),p.format!==void 0&&(u.format=p.format),p.type!==void 0&&(u.type=p.type),p.mipmaps!==void 0&&(u.mipmaps=p.mipmaps,u.minFilter=cl),p.mipmapCount===1&&(u.minFilter=jn),p.generateMipmaps!==void 0&&(u.generateMipmaps=p.generateMipmaps),u.needsUpdate=!0,t&&t(u,p)},n,a),u}}class _3 extends Pa{constructor(e){super(e)}load(e,t,n,a){const o=new di,u=new Sg(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(e,function(d){o.image=d,o.needsUpdate=!0,t!==void 0&&t(o)},n,a),o}}class pu extends Qn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Pt(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class b3 extends pu{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Qn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Pt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const iS=new hn,Sw=new Q,Mw=new Q;class iM{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.biasNode=null,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ze(512,512),this.mapType=Br,this.map=null,this.mapPass=null,this.matrix=new hn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Kh,this._frameExtents=new Ze(1,1),this._viewportCount=1,this._viewports=[new vi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Sw.setFromMatrixPosition(e.matrixWorld),t.position.copy(Sw),Mw.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Mw),t.updateMatrixWorld(),iS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(iS,t.coordinateSystem,t.reversedDepth),t.coordinateSystem===If||t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(iS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this.biasNode=e.biasNode,this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}const gy=new Q,vy=new Qr,rl=new Q;class w_ extends Qn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new hn,this.projectionMatrix=new hn,this.projectionMatrixInverse=new hn,this.coordinateSystem=ps,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorld.decompose(gy,vy,rl),rl.x===1&&rl.y===1&&rl.z===1?this.matrixWorldInverse.copy(this.matrixWorld).invert():this.matrixWorldInverse.compose(gy,vy,rl.set(1,1,1)).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorld.decompose(gy,vy,rl),rl.x===1&&rl.y===1&&rl.z===1?this.matrixWorldInverse.copy(this.matrixWorld).invert():this.matrixWorldInverse.compose(gy,vy,rl.set(1,1,1)).invert()}clone(){return new this.constructor().copy(this)}}const Qc=new Q,Ew=new Ze,ww=new Ze;class dr extends w_{constructor(e=50,t=1,n=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=a,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Uh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Af*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Uh*2*Math.atan(Math.tan(Af*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Qc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Qc.x,Qc.y).multiplyScalar(-e/Qc.z),Qc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Qc.x,Qc.y).multiplyScalar(-e/Qc.z)}getViewSize(e,t){return this.getViewBounds(e,Ew,ww),t.subVectors(ww,Ew)}setViewOffset(e,t,n,a,o,u){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=a,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Af*.5*this.fov)/this.zoom,n=2*t,a=this.aspect*n,o=-.5*a;const u=this.view;if(this.view!==null&&this.view.enabled){const h=u.fullWidth,p=u.fullHeight;o+=u.offsetX*a/h,t-=u.offsetY*n/p,a*=u.width/h,n*=u.height/p}const d=this.filmOffset;d!==0&&(o+=e*d/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+a,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class oz extends iM{constructor(){super(new dr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=Uh*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height*this.aspect,o=e.distance||t.far;(n!==t.fov||a!==t.aspect||o!==t.far)&&(t.fov=n,t.aspect=a,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class S3 extends pu{constructor(e,t,n=0,a=Math.PI/3,o=0,u=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Qn.DEFAULT_UP),this.updateMatrix(),this.target=new Qn,this.distance=n,this.angle=a,this.penumbra=o,this.decay=u,this.map=null,this.shadow=new oz}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class lz extends iM{constructor(){super(new dr(90,1,.5,500)),this.isPointLightShadow=!0}}class M3 extends pu{constructor(e,t,n=0,a=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=a,this.shadow=new lz}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class fl extends w_{constructor(e=-1,t=1,n=1,a=-1,o=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=a,this.near=o,this.far=u,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,a,o,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=a,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let o=n-e,u=n+e,d=a+t,h=a-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=p*this.view.offsetX,u=o+p*this.view.width,d-=y*this.view.offsetY,h=d-y*this.view.height}this.projectionMatrix.makeOrthographic(o,u,d,h,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class cz extends iM{constructor(){super(new fl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class E3 extends pu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Qn.DEFAULT_UP),this.updateMatrix(),this.target=new Qn,this.shadow=new cz}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class w3 extends pu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class T3 extends pu{constructor(e,t,n=10,a=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class rM{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Q)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,a=e.y,o=e.z,u=this.coefficients;return t.copy(u[0]).multiplyScalar(.282095),t.addScaledVector(u[1],.488603*a),t.addScaledVector(u[2],.488603*o),t.addScaledVector(u[3],.488603*n),t.addScaledVector(u[4],1.092548*(n*a)),t.addScaledVector(u[5],1.092548*(a*o)),t.addScaledVector(u[6],.315392*(3*o*o-1)),t.addScaledVector(u[7],1.092548*(n*o)),t.addScaledVector(u[8],.546274*(n*n-a*a)),t}getIrradianceAt(e,t){const n=e.x,a=e.y,o=e.z,u=this.coefficients;return t.copy(u[0]).multiplyScalar(.886227),t.addScaledVector(u[1],2*.511664*a),t.addScaledVector(u[2],2*.511664*o),t.addScaledVector(u[3],2*.511664*n),t.addScaledVector(u[4],2*.429043*n*a),t.addScaledVector(u[5],2*.429043*a*o),t.addScaledVector(u[6],.743125*o*o-.247708),t.addScaledVector(u[7],2*.429043*n*o),t.addScaledVector(u[8],.429043*(n*n-a*a)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].fromArray(e,t+a*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].toArray(e,t+a*3);return e}static getBasisAt(e,t){const n=e.x,a=e.y,o=e.z;t[0]=.282095,t[1]=.488603*a,t[2]=.488603*o,t[3]=.488603*n,t[4]=1.092548*n*a,t[5]=1.092548*a*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*n*o,t[8]=.546274*(n*n-a*a)}}class A3 extends pu{constructor(e=new rM,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class T_ extends Pa{constructor(e){super(e),this.textures={}}load(e,t,n,a){const o=this,u=new gs(o.manager);u.setPath(o.path),u.setRequestHeader(o.requestHeader),u.setWithCredentials(o.withCredentials),u.load(e,function(d){try{t(o.parse(JSON.parse(d)))}catch(h){a?a(h):Qt(h),o.manager.itemError(e)}},n,a)}parse(e){const t=this.textures;function n(o){return t[o]===void 0&&Rt("MaterialLoader: Undefined texture",o),t[o]}const a=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(a.uuid=e.uuid),e.name!==void 0&&(a.name=e.name),e.color!==void 0&&a.color!==void 0&&a.color.setHex(e.color),e.roughness!==void 0&&(a.roughness=e.roughness),e.metalness!==void 0&&(a.metalness=e.metalness),e.sheen!==void 0&&(a.sheen=e.sheen),e.sheenColor!==void 0&&(a.sheenColor=new Pt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(a.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(e.emissive),e.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(e.specular),e.specularIntensity!==void 0&&(a.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(a.shininess=e.shininess),e.clearcoat!==void 0&&(a.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(a.dispersion=e.dispersion),e.iridescence!==void 0&&(a.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(a.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(a.transmission=e.transmission),e.thickness!==void 0&&(a.thickness=e.thickness),e.attenuationDistance!==void 0&&(a.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(a.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(a.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(a.fog=e.fog),e.flatShading!==void 0&&(a.flatShading=e.flatShading),e.blending!==void 0&&(a.blending=e.blending),e.combine!==void 0&&(a.combine=e.combine),e.side!==void 0&&(a.side=e.side),e.shadowSide!==void 0&&(a.shadowSide=e.shadowSide),e.opacity!==void 0&&(a.opacity=e.opacity),e.transparent!==void 0&&(a.transparent=e.transparent),e.alphaTest!==void 0&&(a.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(a.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(a.depthFunc=e.depthFunc),e.depthTest!==void 0&&(a.depthTest=e.depthTest),e.depthWrite!==void 0&&(a.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(a.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(a.blendSrc=e.blendSrc),e.blendDst!==void 0&&(a.blendDst=e.blendDst),e.blendEquation!==void 0&&(a.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(a.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(a.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(a.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(a.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(a.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(a.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(a.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(a.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(a.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(a.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(a.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(a.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(a.rotation=e.rotation),e.linewidth!==void 0&&(a.linewidth=e.linewidth),e.dashSize!==void 0&&(a.dashSize=e.dashSize),e.gapSize!==void 0&&(a.gapSize=e.gapSize),e.scale!==void 0&&(a.scale=e.scale),e.polygonOffset!==void 0&&(a.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(a.dithering=e.dithering),e.alphaToCoverage!==void 0&&(a.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(a.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(a.allowOverride=e.allowOverride),e.visible!==void 0&&(a.visible=e.visible),e.toneMapped!==void 0&&(a.toneMapped=e.toneMapped),e.userData!==void 0&&(a.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?a.vertexColors=e.vertexColors>0:a.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const u=e.uniforms[o];switch(a.uniforms[o]={},u.type){case"t":a.uniforms[o].value=n(u.value);break;case"c":a.uniforms[o].value=new Pt().setHex(u.value);break;case"v2":a.uniforms[o].value=new Ze().fromArray(u.value);break;case"v3":a.uniforms[o].value=new Q().fromArray(u.value);break;case"v4":a.uniforms[o].value=new vi().fromArray(u.value);break;case"m3":a.uniforms[o].value=new Sn().fromArray(u.value);break;case"m4":a.uniforms[o].value=new hn().fromArray(u.value);break;default:a.uniforms[o].value=u.value}}if(e.defines!==void 0&&(a.defines=e.defines),e.vertexShader!==void 0&&(a.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(a.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(a.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)a.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(a.lights=e.lights),e.clipping!==void 0&&(a.clipping=e.clipping),e.size!==void 0&&(a.size=e.size),e.sizeAttenuation!==void 0&&(a.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(a.map=n(e.map)),e.matcap!==void 0&&(a.matcap=n(e.matcap)),e.alphaMap!==void 0&&(a.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(a.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(a.bumpScale=e.bumpScale),e.normalMap!==void 0&&(a.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(a.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),a.normalScale=new Ze().fromArray(o)}return e.displacementMap!==void 0&&(a.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(a.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(a.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(a.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(a.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(a.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(a.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(a.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(a.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(a.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(a.envMap=n(e.envMap)),e.envMapRotation!==void 0&&a.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(a.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(a.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(a.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(a.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(a.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(a.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(a.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(a.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(a.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new Ze().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(a.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(a.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(a.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(a.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(a.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=n(e.sheenRoughnessMap)),a}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return T_.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:r3,SpriteMaterial:B1,RawShaderMaterial:K1,ShaderMaterial:va,PointsMaterial:V1,MeshPhysicalMaterial:s3,MeshStandardMaterial:M_,MeshPhongMaterial:o3,MeshToonMaterial:l3,MeshNormalMaterial:c3,MeshLambertMaterial:u3,MeshDepthMaterial:$1,MeshDistanceMaterial:Q1,MeshBasicMaterial:nc,MeshMatcapMaterial:f3,LineDashedMaterial:d3,LineBasicMaterial:Oa,Material:ya};return new t[e]}}class t1{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class C3 extends _n{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class R3 extends Pa{constructor(e){super(e)}load(e,t,n,a){const o=this,u=new gs(o.manager);u.setPath(o.path),u.setRequestHeader(o.requestHeader),u.setWithCredentials(o.withCredentials),u.load(e,function(d){try{t(o.parse(JSON.parse(d)))}catch(h){a?a(h):Qt(h),o.manager.itemError(e)}},n,a)}parse(e){const t={},n={};function a(S,E){if(t[E]!==void 0)return t[E];const T=S.interleavedBuffers[E],M=o(S,T.buffer),R=Mh(T.type,M),I=new o_(R,T.stride);return I.uuid=T.uuid,t[E]=I,I}function o(S,E){if(n[E]!==void 0)return n[E];const T=S.arrayBuffers[E],M=new Uint32Array(T).buffer;return n[E]=M,M}const u=e.isInstancedBufferGeometry?new C3:new _n,d=e.data.index;if(d!==void 0){const S=Mh(d.type,d.array);u.setIndex(new hi(S,1))}const h=e.data.attributes;for(const S in h){const E=h[S];let C;if(E.isInterleavedBufferAttribute){const T=a(e.data,E.data);C=new Lf(T,E.itemSize,E.offset,E.normalized)}else{const T=Mh(E.type,E.array),M=E.isInstancedBufferAttribute?Ph:hi;C=new M(T,E.itemSize,E.normalized)}E.name!==void 0&&(C.name=E.name),E.usage!==void 0&&C.setUsage(E.usage),u.setAttribute(S,C)}const p=e.data.morphAttributes;if(p)for(const S in p){const E=p[S],C=[];for(let T=0,M=E.length;T<M;T++){const R=E[T];let I;if(R.isInterleavedBufferAttribute){const L=a(e.data,R.data);I=new Lf(L,R.itemSize,R.offset,R.normalized)}else{const L=Mh(R.type,R.array);I=new hi(L,R.itemSize,R.normalized)}R.name!==void 0&&(I.name=R.name),C.push(I)}u.morphAttributes[S]=C}e.data.morphTargetsRelative&&(u.morphTargetsRelative=!0);const v=e.data.groups||e.data.drawcalls||e.data.offsets;if(v!==void 0)for(let S=0,E=v.length;S!==E;++S){const C=v[S];u.addGroup(C.start,C.count,C.materialIndex)}const x=e.data.boundingSphere;return x!==void 0&&(u.boundingSphere=new Jr().fromJSON(x)),e.name&&(u.name=e.name),e.userData&&(u.userData=e.userData),u}}class uz extends Pa{constructor(e){super(e)}load(e,t,n,a){const o=this,u=this.path===""?t1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||u;const d=new gs(this.manager);d.setPath(this.path),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(e,function(h){let p=null;try{p=JSON.parse(h)}catch(v){a!==void 0&&a(v),v("ObjectLoader: Can't parse "+e+".",v.message);return}const y=p.metadata;if(y===void 0||y.type===void 0||y.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+e)),Qt("ObjectLoader: Can't load "+e);return}o.parse(p,t)},n,a)}async loadAsync(e,t){const n=this,a=this.path===""?t1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new gs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const u=await o.loadAsync(e,t);let d;try{d=JSON.parse(u)}catch(p){throw new Error("ObjectLoader: Can't parse "+e+". "+p.message)}const h=d.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(d)}parse(e,t){const n=this.parseAnimations(e.animations),a=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,a),u=this.parseImages(e.images,function(){t!==void 0&&t(p)}),d=this.parseTextures(e.textures,u),h=this.parseMaterials(e.materials,d),p=this.parseObject(e.object,o,h,d,n),y=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,y),this.bindLightTargets(p),t!==void 0){let v=!1;for(const x in u)if(u[x].data instanceof HTMLImageElement){v=!0;break}v===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,n),o=await this.parseImagesAsync(e.images),u=this.parseTextures(e.textures,o),d=this.parseMaterials(e.materials,u),h=this.parseObject(e.object,a,d,u,t),p=this.parseSkeletons(e.skeletons,h);return this.bindSkeletons(h,p),this.bindLightTargets(h),h}parseShapes(e){const t={};if(e!==void 0)for(let n=0,a=e.length;n<a;n++){const o=new Cf().fromJSON(e[n]);t[o.uuid]=o}return t}parseSkeletons(e,t){const n={},a={};if(t.traverse(function(o){o.isBone&&(a[o.uuid]=o)}),e!==void 0)for(let o=0,u=e.length;o<u;o++){const d=new l_().fromJSON(e[o],a);n[d.uuid]=d}return n}parseGeometries(e,t){const n={};if(e!==void 0){const a=new R3;for(let o=0,u=e.length;o<u;o++){let d;const h=e[o];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":d=a.parse(h);break;default:h.type in _w?d=_w[h.type].fromJSON(h,t):Rt(`ObjectLoader: Unsupported geometry type "${h.type}"`)}d.uuid=h.uuid,h.name!==void 0&&(d.name=h.name),h.userData!==void 0&&(d.userData=h.userData),n[h.uuid]=d}}return n}parseMaterials(e,t){const n={},a={};if(e!==void 0){const o=new T_;o.setTextures(t);for(let u=0,d=e.length;u<d;u++){const h=e[u];n[h.uuid]===void 0&&(n[h.uuid]=o.parse(h)),a[h.uuid]=n[h.uuid]}}return a}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const a=e[n],o=bg.parse(a);t[o.uuid]=o}return t}parseImages(e,t){const n=this,a={};let o;function u(h){return n.manager.itemStart(h),o.load(h,function(){n.manager.itemEnd(h)},void 0,function(){n.manager.itemError(h),n.manager.itemEnd(h)})}function d(h){if(typeof h=="string"){const p=h,y=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;return u(y)}else return h.data?{data:Mh(h.type,h.data),width:h.width,height:h.height}:null}if(e!==void 0&&e.length>0){const h=new E_(t);o=new Sg(h),o.setCrossOrigin(this.crossOrigin);for(let p=0,y=e.length;p<y;p++){const v=e[p],x=v.url;if(Array.isArray(x)){const S=[];for(let E=0,C=x.length;E<C;E++){const T=x[E],M=d(T);M!==null&&(M instanceof HTMLImageElement?S.push(M):S.push(new Ys(M.data,M.width,M.height)))}a[v.uuid]=new ru(S)}else{const S=d(v.url);a[v.uuid]=new ru(S)}}}return a}async parseImagesAsync(e){const t=this,n={};let a;async function o(u){if(typeof u=="string"){const d=u,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:t.resourcePath+d;return await a.loadAsync(h)}else return u.data?{data:Mh(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){a=new Sg(this.manager),a.setCrossOrigin(this.crossOrigin);for(let u=0,d=e.length;u<d;u++){const h=e[u],p=h.url;if(Array.isArray(p)){const y=[];for(let v=0,x=p.length;v<x;v++){const S=p[v],E=await o(S);E!==null&&(E instanceof HTMLImageElement?y.push(E):y.push(new Ys(E.data,E.width,E.height)))}n[h.uuid]=new ru(y)}else{const y=await o(h.url);n[h.uuid]=new ru(y)}}}return n}parseTextures(e,t){function n(o,u){return typeof o=="number"?o:(Rt("ObjectLoader.parseTexture: Constant should be in numeric form.",o),u[o])}const a={};if(e!==void 0)for(let o=0,u=e.length;o<u;o++){const d=e[o];d.image===void 0&&Rt('ObjectLoader: No "image" specified for',d.uuid),t[d.image]===void 0&&Rt("ObjectLoader: Undefined image",d.image);const h=t[d.image],p=h.data;let y;Array.isArray(p)?(y=new zg,p.length===6&&(y.needsUpdate=!0)):(p&&p.data?y=new Ys:y=new di,p&&(y.needsUpdate=!0)),y.source=h,y.uuid=d.uuid,d.name!==void 0&&(y.name=d.name),d.mapping!==void 0&&(y.mapping=n(d.mapping,fz)),d.channel!==void 0&&(y.channel=d.channel),d.offset!==void 0&&y.offset.fromArray(d.offset),d.repeat!==void 0&&y.repeat.fromArray(d.repeat),d.center!==void 0&&y.center.fromArray(d.center),d.rotation!==void 0&&(y.rotation=d.rotation),d.wrap!==void 0&&(y.wrapS=n(d.wrap[0],Tw),y.wrapT=n(d.wrap[1],Tw)),d.format!==void 0&&(y.format=d.format),d.internalFormat!==void 0&&(y.internalFormat=d.internalFormat),d.type!==void 0&&(y.type=d.type),d.colorSpace!==void 0&&(y.colorSpace=d.colorSpace),d.minFilter!==void 0&&(y.minFilter=n(d.minFilter,Aw)),d.magFilter!==void 0&&(y.magFilter=n(d.magFilter,Aw)),d.anisotropy!==void 0&&(y.anisotropy=d.anisotropy),d.flipY!==void 0&&(y.flipY=d.flipY),d.generateMipmaps!==void 0&&(y.generateMipmaps=d.generateMipmaps),d.premultiplyAlpha!==void 0&&(y.premultiplyAlpha=d.premultiplyAlpha),d.unpackAlignment!==void 0&&(y.unpackAlignment=d.unpackAlignment),d.compareFunction!==void 0&&(y.compareFunction=d.compareFunction),d.userData!==void 0&&(y.userData=d.userData),a[d.uuid]=y}return a}parseObject(e,t,n,a,o){let u;function d(x){return t[x]===void 0&&Rt("ObjectLoader: Undefined geometry",x),t[x]}function h(x){if(x!==void 0){if(Array.isArray(x)){const S=[];for(let E=0,C=x.length;E<C;E++){const T=x[E];n[T]===void 0&&Rt("ObjectLoader: Undefined material",T),S.push(n[T])}return S}return n[x]===void 0&&Rt("ObjectLoader: Undefined material",x),n[x]}}function p(x){return a[x]===void 0&&Rt("ObjectLoader: Undefined texture",x),a[x]}let y,v;switch(e.type){case"Scene":u=new Pg,e.background!==void 0&&(Number.isInteger(e.background)?u.background=new Pt(e.background):u.background=p(e.background)),e.environment!==void 0&&(u.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?u.fog=new s_(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(u.fog=new a_(e.fog.color,e.fog.density)),e.fog.name!==""&&(u.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(u.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(u.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&u.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(u.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&u.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":u=new dr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(u.focus=e.focus),e.zoom!==void 0&&(u.zoom=e.zoom),e.filmGauge!==void 0&&(u.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(u.filmOffset=e.filmOffset),e.view!==void 0&&(u.view=Object.assign({},e.view));break;case"OrthographicCamera":u=new fl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(u.zoom=e.zoom),e.view!==void 0&&(u.view=Object.assign({},e.view));break;case"AmbientLight":u=new w3(e.color,e.intensity);break;case"DirectionalLight":u=new E3(e.color,e.intensity),u.target=e.target||"";break;case"PointLight":u=new M3(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":u=new T3(e.color,e.intensity,e.width,e.height);break;case"SpotLight":u=new S3(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),u.target=e.target||"";break;case"HemisphereLight":u=new b3(e.color,e.groundColor,e.intensity);break;case"LightProbe":const x=new rM().fromArray(e.sh);u=new A3(x,e.intensity);break;case"SkinnedMesh":y=d(e.geometry),v=h(e.material),u=new kC(y,v),e.bindMode!==void 0&&(u.bindMode=e.bindMode),e.bindMatrix!==void 0&&u.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(u.skeleton=e.skeleton);break;case"Mesh":y=d(e.geometry),v=h(e.material),u=new Ki(y,v);break;case"InstancedMesh":y=d(e.geometry),v=h(e.material);const S=e.count,E=e.instanceMatrix,C=e.instanceColor;u=new VC(y,v,S),u.instanceMatrix=new Ph(new Float32Array(E.array),16),C!==void 0&&(u.instanceColor=new Ph(new Float32Array(C.array),C.itemSize));break;case"BatchedMesh":y=d(e.geometry),v=h(e.material),u=new HC(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,v),u.geometry=y,u.perObjectFrustumCulled=e.perObjectFrustumCulled,u.sortObjects=e.sortObjects,u._drawRanges=e.drawRanges,u._reservedRanges=e.reservedRanges,u._geometryInfo=e.geometryInfo.map(T=>{let M=null,R=null;return T.boundingBox!==void 0&&(M=new ga().fromJSON(T.boundingBox)),T.boundingSphere!==void 0&&(R=new Jr().fromJSON(T.boundingSphere)),{...T,boundingBox:M,boundingSphere:R}}),u._instanceInfo=e.instanceInfo,u._availableInstanceIds=e._availableInstanceIds,u._availableGeometryIds=e._availableGeometryIds,u._nextIndexStart=e.nextIndexStart,u._nextVertexStart=e.nextVertexStart,u._geometryCount=e.geometryCount,u._maxInstanceCount=e.maxInstanceCount,u._maxVertexCount=e.maxVertexCount,u._maxIndexCount=e.maxIndexCount,u._geometryInitialized=e.geometryInitialized,u._matricesTexture=p(e.matricesTexture.uuid),u._indirectTexture=p(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(u._colorsTexture=p(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(u.boundingSphere=new Jr().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(u.boundingBox=new ga().fromJSON(e.boundingBox));break;case"LOD":u=new BC;break;case"Line":u=new uu(d(e.geometry),h(e.material));break;case"LineLoop":u=new GC(d(e.geometry),h(e.material));break;case"LineSegments":u=new pl(d(e.geometry),h(e.material));break;case"PointCloud":case"Points":u=new WC(d(e.geometry),h(e.material));break;case"Sprite":u=new FC(h(e.material));break;case"Group":u=new Eh;break;case"Bone":u=new k1;break;default:u=new Qn}if(u.uuid=e.uuid,e.name!==void 0&&(u.name=e.name),e.matrix!==void 0?(u.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(u.matrixAutoUpdate=e.matrixAutoUpdate),u.matrixAutoUpdate&&u.matrix.decompose(u.position,u.quaternion,u.scale)):(e.position!==void 0&&u.position.fromArray(e.position),e.rotation!==void 0&&u.rotation.fromArray(e.rotation),e.quaternion!==void 0&&u.quaternion.fromArray(e.quaternion),e.scale!==void 0&&u.scale.fromArray(e.scale)),e.up!==void 0&&u.up.fromArray(e.up),e.pivot!==void 0&&(u.pivot=new Q().fromArray(e.pivot)),e.morphTargetDictionary!==void 0&&(u.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),e.morphTargetInfluences!==void 0&&(u.morphTargetInfluences=e.morphTargetInfluences.slice()),e.castShadow!==void 0&&(u.castShadow=e.castShadow),e.receiveShadow!==void 0&&(u.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(u.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(u.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(u.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(u.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&u.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(u.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(u.visible=e.visible),e.frustumCulled!==void 0&&(u.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(u.renderOrder=e.renderOrder),e.static!==void 0&&(u.static=e.static),e.userData!==void 0&&(u.userData=e.userData),e.layers!==void 0&&(u.layers.mask=e.layers),e.children!==void 0){const x=e.children;for(let S=0;S<x.length;S++)u.add(this.parseObject(x[S],t,n,a,o))}if(e.animations!==void 0){const x=e.animations;for(let S=0;S<x.length;S++){const E=x[S];u.animations.push(o[E])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(u.autoUpdate=e.autoUpdate);const x=e.levels;for(let S=0;S<x.length;S++){const E=x[S],C=u.getObjectByProperty("uuid",E.object);C!==void 0&&u.addLevel(C,E.distance,E.hysteresis)}}return u}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const a=t[n.skeleton];a===void 0?Rt("ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(a,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,a=e.getObjectByProperty("uuid",n);a!==void 0?t.target=a:t.target=new Qn}})}}const fz={UVMapping:ou,CubeReflectionMapping:Mo,CubeRefractionMapping:lu,EquirectangularReflectionMapping:Th,EquirectangularRefractionMapping:$m,CubeUVReflectionMapping:Zh},Tw={RepeatWrapping:Nf,ClampToEdgeWrapping:nr,MirroredRepeatWrapping:lg},Aw={NearestFilter:hr,NearestMipmapNearestFilter:R1,NearestMipmapLinearFilter:Sh,LinearFilter:jn,LinearMipmapNearestFilter:Qm,LinearMipmapLinearFilter:cl},rS=new WeakMap;class dz extends Pa{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&Rt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&Rt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,u=ul.get(`image-bitmap:${e}`);if(u!==void 0){if(o.manager.itemStart(e),u.then){u.then(p=>{if(rS.has(u)===!0)a&&a(rS.get(u)),o.manager.itemError(e),o.manager.itemEnd(e);else return t&&t(p),o.manager.itemEnd(e),p});return}return setTimeout(function(){t&&t(u),o.manager.itemEnd(e)},0),u}const d={};d.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",d.headers=this.requestHeader,d.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const h=fetch(e,d).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(p){return ul.add(`image-bitmap:${e}`,p),t&&t(p),o.manager.itemEnd(e),p}).catch(function(p){a&&a(p),rS.set(h,p),ul.remove(`image-bitmap:${e}`),o.manager.itemError(e),o.manager.itemEnd(e)});ul.add(`image-bitmap:${e}`,h),o.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let yy;class aM{static getContext(){return yy===void 0&&(yy=new(window.AudioContext||window.webkitAudioContext)),yy}static setContext(e){yy=e}}class hz extends Pa{constructor(e){super(e)}load(e,t,n,a){const o=this,u=new gs(this.manager);u.setResponseType("arraybuffer"),u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){try{const p=h.slice(0);aM.getContext().decodeAudioData(p,function(v){t(v)}).catch(d)}catch(p){d(p)}},n,a);function d(h){a?a(h):Qt(h),o.manager.itemError(e)}}}const Cw=new hn,Rw=new hn,lf=new hn;class pz{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new dr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new dr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,lf.copy(e.projectionMatrix);const a=t.eyeSep/2,o=a*t.near/t.focus,u=t.near*Math.tan(Af*t.fov*.5)/t.zoom;let d,h;Rw.elements[12]=-a,Cw.elements[12]=a,d=-u*t.aspect+o,h=u*t.aspect+o,lf.elements[0]=2*t.near/(h-d),lf.elements[8]=(h+d)/(h-d),this.cameraL.projectionMatrix.copy(lf),d=-u*t.aspect-o,h=u*t.aspect-o,lf.elements[0]=2*t.near/(h-d),lf.elements[8]=(h+d)/(h-d),this.cameraR.projectionMatrix.copy(lf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Rw),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Cw)}}const uh=-90,fh=1;class N3 extends Qn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new dr(uh,fh,e,t);a.layers=this.layers,this.add(a);const o=new dr(uh,fh,e,t);o.layers=this.layers,this.add(o);const u=new dr(uh,fh,e,t);u.layers=this.layers,this.add(u);const d=new dr(uh,fh,e,t);d.layers=this.layers,this.add(d);const h=new dr(uh,fh,e,t);h.layers=this.layers,this.add(h);const p=new dr(uh,fh,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,a,o,u,d,h]=t;for(const p of t)this.remove(p);if(e===ps)n.up.set(0,1,0),n.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),d.up.set(0,1,0),d.lookAt(0,0,1),h.up.set(0,1,0),h.lookAt(0,0,-1);else if(e===If)n.up.set(0,-1,0),n.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),d.up.set(0,-1,0),d.lookAt(0,0,1),h.up.set(0,-1,0),h.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:a}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,u,d,h,p,y]=this.children,v=e.getRenderTarget(),x=e.getActiveCubeFace(),S=e.getActiveMipmapLevel(),E=e.xr.enabled;e.xr.enabled=!1;const C=n.texture.generateMipmaps;n.texture.generateMipmaps=!1;let T=!1;e.isWebGLRenderer===!0?T=e.state.buffers.depth.getReversed():T=e.reversedDepthBuffer,e.setRenderTarget(n,0,a),T&&e.autoClear===!1&&e.clearDepth(),e.render(t,o),e.setRenderTarget(n,1,a),T&&e.autoClear===!1&&e.clearDepth(),e.render(t,u),e.setRenderTarget(n,2,a),T&&e.autoClear===!1&&e.clearDepth(),e.render(t,d),e.setRenderTarget(n,3,a),T&&e.autoClear===!1&&e.clearDepth(),e.render(t,h),e.setRenderTarget(n,4,a),T&&e.autoClear===!1&&e.clearDepth(),e.render(t,p),n.texture.generateMipmaps=C,e.setRenderTarget(n,5,a),T&&e.autoClear===!1&&e.clearDepth(),e.render(t,y),e.setRenderTarget(v,x,S),e.xr.enabled=E,n.texture.needsPMREMUpdate=!0}}class D3 extends dr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class I3{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=mz.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function mz(){this._document.hidden===!1&&this.reset()}const cf=new Q,aS=new Qr,gz=new Q,uf=new Q,ff=new Q;class vz extends Qn{constructor(){super(),this.type="AudioListener",this.context=aM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._timer=new I3}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e),this._timer.update();const t=this.context.listener;if(this.timeDelta=this._timer.getDelta(),this.matrixWorld.decompose(cf,aS,gz),uf.set(0,0,-1).applyQuaternion(aS),ff.set(0,1,0).applyQuaternion(aS),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(cf.x,n),t.positionY.linearRampToValueAtTime(cf.y,n),t.positionZ.linearRampToValueAtTime(cf.z,n),t.forwardX.linearRampToValueAtTime(uf.x,n),t.forwardY.linearRampToValueAtTime(uf.y,n),t.forwardZ.linearRampToValueAtTime(uf.z,n),t.upX.linearRampToValueAtTime(ff.x,n),t.upY.linearRampToValueAtTime(ff.y,n),t.upZ.linearRampToValueAtTime(ff.z,n)}else t.setPosition(cf.x,cf.y,cf.z),t.setOrientation(uf.x,uf.y,uf.z,ff.x,ff.y,ff.z)}}class L3 extends Qn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){Rt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(Rt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(Rt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const df=new Q,Nw=new Qr,yz=new Q,hf=new Q;class xz extends L3{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(df,Nw,yz),hf.set(0,0,1).applyQuaternion(Nw);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(df.x,n),t.positionY.linearRampToValueAtTime(df.y,n),t.positionZ.linearRampToValueAtTime(df.z,n),t.orientationX.linearRampToValueAtTime(hf.x,n),t.orientationY.linearRampToValueAtTime(hf.y,n),t.orientationZ.linearRampToValueAtTime(hf.z,n)}else t.setPosition(df.x,df.y,df.z),t.setOrientation(hf.x,hf.y,hf.z)}}class _z{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class U3{constructor(e,t,n){this.binding=e,this.valueSize=n;let a,o,u;switch(t){case"quaternion":a=this._slerp,o=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":a=this._select,o=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:a=this._lerp,o=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=o,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,a=this.valueSize,o=e*a+a;let u=this.cumulativeWeight;if(u===0){for(let d=0;d!==a;++d)n[o+d]=n[d];u=t}else{u+=t;const d=t/u;this._mixBufferRegion(n,o,0,d,a)}this.cumulativeWeight=u}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,a=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,a,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,a=e*t+t,o=this.cumulativeWeight,u=this.cumulativeWeightAdditive,d=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const h=t*this._origIndex;this._mixBufferRegion(n,a,h,1-o,t)}u>0&&this._mixBufferRegionAdditive(n,a,this._addIndex*t,1,t);for(let h=t,p=t+t;h!==p;++h)if(n[h]!==n[h+t]){d.setValue(n,a);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,a=n*this._origIndex;e.getValue(t,a);for(let o=n,u=a;o!==u;++o)t[o]=t[a+o%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,a,o){if(a>=.5)for(let u=0;u!==o;++u)e[t+u]=e[n+u]}_slerp(e,t,n,a){Qr.slerpFlat(e,t,e,t,e,n,a)}_slerpAdditive(e,t,n,a,o){const u=this._workIndex*o;Qr.multiplyQuaternionsFlat(e,u,e,t,e,n),Qr.slerpFlat(e,t,e,t,e,u,a)}_lerp(e,t,n,a,o){const u=1-a;for(let d=0;d!==o;++d){const h=t+d;e[h]=e[h]*u+e[n+d]*a}}_lerpAdditive(e,t,n,a,o){for(let u=0;u!==o;++u){const d=t+u;e[d]=e[d]+e[n+u]*a}}}const sM="\\[\\]\\.:\\/",bz=new RegExp("["+sM+"]","g"),oM="[^"+sM+"]",Sz="[^"+sM.replace("\\.","")+"]",Mz=/((?:WC+[\/:])*)/.source.replace("WC",oM),Ez=/(WCOD+)?/.source.replace("WCOD",Sz),wz=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",oM),Tz=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",oM),Az=new RegExp("^"+Mz+Ez+wz+Tz+"$"),Cz=["material","materials","bones","map"];class Rz{constructor(e,t,n){const a=n||$n.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,a)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,a=this._bindings[n];a!==void 0&&a.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let a=this._targetGroup.nCachedObjects_,o=n.length;a!==o;++a)n[a].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class $n{constructor(e,t,n){this.path=t,this.parsedPath=n||$n.parseTrackName(t),this.node=$n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new $n.Composite(e,t,n):new $n(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(bz,"")}static parseTrackName(e){const t=Az.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},a=n.nodeName&&n.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const o=n.nodeName.substring(a+1);Cz.indexOf(o)!==-1&&(n.nodeName=n.nodeName.substring(0,a),n.objectName=o)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(o){for(let u=0;u<o.length;u++){const d=o[u];if(d.name===t||d.uuid===t)return d;const h=n(d.children);if(h)return h}return null},a=n(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)e[t++]=n[a]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)n[a]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)n[a]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)n[a]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,a=t.propertyName;let o=t.propertyIndex;if(e||(e=$n.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){Rt("PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let p=t.objectIndex;switch(n){case"materials":if(!e.material){Qt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Qt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Qt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let y=0;y<e.length;y++)if(e[y].name===p){p=y;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Qt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Qt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){Qt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(p!==void 0){if(e[p]===void 0){Qt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const u=e[a];if(u===void 0){const p=t.nodeName;Qt("PropertyBinding: Trying to update property for track: "+p+"."+a+" but it wasn't found.",e);return}let d=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?d=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(d=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(o!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){Qt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Qt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=o}else u.fromArray!==void 0&&u.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(h=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=a;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][d]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}$n.Composite=Rz;$n.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$n.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$n.prototype.GetterByBindingType=[$n.prototype._getValue_direct,$n.prototype._getValue_array,$n.prototype._getValue_arrayElement,$n.prototype._getValue_toArray];$n.prototype.SetterByBindingTypeAndVersioning=[[$n.prototype._setValue_direct,$n.prototype._setValue_direct_setNeedsUpdate,$n.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$n.prototype._setValue_array,$n.prototype._setValue_array_setNeedsUpdate,$n.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$n.prototype._setValue_arrayElement,$n.prototype._setValue_arrayElement_setNeedsUpdate,$n.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$n.prototype._setValue_fromArray,$n.prototype._setValue_fromArray_setNeedsUpdate,$n.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Nz{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ms(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,a=arguments.length;n!==a;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,a=this._parsedPaths,o=this._bindings,u=o.length;let d,h=e.length,p=this.nCachedObjects_;for(let y=0,v=arguments.length;y!==v;++y){const x=arguments[y],S=x.uuid;let E=t[S];if(E===void 0){E=h++,t[S]=E,e.push(x);for(let C=0,T=u;C!==T;++C)o[C].push(new $n(x,n[C],a[C]))}else if(E<p){d=e[E];const C=--p,T=e[C];t[T.uuid]=E,e[E]=T,t[S]=C,e[C]=x;for(let M=0,R=u;M!==R;++M){const I=o[M],L=I[C];let z=I[E];I[E]=L,z===void 0&&(z=new $n(x,n[M],a[M])),I[C]=z}}else e[E]!==d&&Qt("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,a=n.length;let o=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const h=arguments[u],p=h.uuid,y=t[p];if(y!==void 0&&y>=o){const v=o++,x=e[v];t[x.uuid]=y,e[y]=x,t[p]=v,e[v]=h;for(let S=0,E=a;S!==E;++S){const C=n[S],T=C[v],M=C[y];C[y]=T,C[v]=M}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,a=n.length;let o=this.nCachedObjects_,u=e.length;for(let d=0,h=arguments.length;d!==h;++d){const p=arguments[d],y=p.uuid,v=t[y];if(v!==void 0)if(delete t[y],v<o){const x=--o,S=e[x],E=--u,C=e[E];t[S.uuid]=v,e[v]=S,t[C.uuid]=x,e[x]=C,e.pop();for(let T=0,M=a;T!==M;++T){const R=n[T],I=R[x],L=R[E];R[v]=I,R[x]=L,R.pop()}}else{const x=--u,S=e[x];x>0&&(t[S.uuid]=v),e[v]=S,e.pop();for(let E=0,C=a;E!==C;++E){const T=n[E];T[v]=T[x],T.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const n=this._bindingsIndicesByPath;let a=n[e];const o=this._bindings;if(a!==void 0)return o[a];const u=this._paths,d=this._parsedPaths,h=this._objects,p=h.length,y=this.nCachedObjects_,v=new Array(p);a=o.length,n[e]=a,u.push(e),d.push(t),o.push(v);for(let x=y,S=h.length;x!==S;++x){const E=h[x];v[x]=new $n(E,e,t)}return v}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const a=this._paths,o=this._parsedPaths,u=this._bindings,d=u.length-1,h=u[d],p=e[d];t[p]=n,u[n]=h,u.pop(),o[n]=o[d],o.pop(),a[n]=a[d],a.pop()}}}class O3{constructor(e,t,n=null,a=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=a;const o=t.tracks,u=o.length,d=new Array(u),h={endingStart:bf,endingEnd:bf};for(let p=0;p!==u;++p){const y=o[p].createInterpolant(null);d[p]=y,y.settings=h}this._interpolantSettings=h,this._interpolants=d,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=bC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const a=this._clip.duration,o=e._clip.duration,u=o/a,d=a/o;e.warp(1,u,t),this.warp(d,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const a=this._mixer,o=a.time,u=this.timeScale;let d=this._timeScaleInterpolant;d===null&&(d=a._lendControlInterpolant(),this._timeScaleInterpolant=d);const h=d.parameterPositions,p=d.sampleValues;return h[0]=o,h[1]=o+n,p[0]=e/u,p[1]=t/u,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,a){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const h=(e-o)*n;h<0||n===0?t=0:(this._startTime=null,t=n*h)}t*=this._updateTimeScale(e);const u=this._updateTime(t),d=this._updateWeight(e);if(d>0){const h=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case U1:for(let y=0,v=h.length;y!==v;++y)h[y].evaluate(u),p[y].accumulateAdditive(d);break;case e_:default:for(let y=0,v=h.length;y!==v;++y)h[y].evaluate(u),p[y].accumulate(a,d)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const a=n.evaluate(e)[0];t*=a,e>n.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const a=n.evaluate(e)[0];t*=a,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let a=this.time+e,o=this._loopCount;const u=n===SC;if(e===0)return o===-1?a:u&&(o&1)===1?t-a:a;if(n===_C){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=t)a=t;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,u)):this._setEndings(this.repetitions===0,!0,u)),a>=t||a<0){const d=Math.floor(a/t);a-=t*d,o+=Math.abs(d);const h=this.repetitions-o;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?t:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){const p=e<0;this._setEndings(p,!p,u)}else this._setEndings(!1,!1,u);this._loopCount=o,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:d})}}else this.time=a;if(u&&(o&1)===1)return t-a}return a}_setEndings(e,t,n){const a=this._interpolantSettings;n?(a.endingStart=Sf,a.endingEnd=Sf):(e?a.endingStart=this.zeroSlopeAtStart?Sf:bf:a.endingStart=ug,t?a.endingEnd=this.zeroSlopeAtEnd?Sf:bf:a.endingEnd=ug)}_scheduleFading(e,t,n){const a=this._mixer,o=a.time;let u=this._weightInterpolant;u===null&&(u=a._lendControlInterpolant(),this._weightInterpolant=u);const d=u.parameterPositions,h=u.sampleValues;return d[0]=o,h[0]=t,d[1]=o+e,h[1]=n,this}}const Dz=new Float32Array(1);class Iz extends hl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}_bindAction(e,t){const n=e._localRoot||this._root,a=e._clip.tracks,o=a.length,u=e._propertyBindings,d=e._interpolants,h=n.uuid,p=this._bindingsByRootAndName;let y=p[h];y===void 0&&(y={},p[h]=y);for(let v=0;v!==o;++v){const x=a[v],S=x.name;let E=y[S];if(E!==void 0)++E.referenceCount,u[v]=E;else{if(E=u[v],E!==void 0){E._cacheIndex===null&&(++E.referenceCount,this._addInactiveBinding(E,h,S));continue}const C=t&&t._propertyBindings[v].binding.parsedPath;E=new U3($n.create(n,S,C),x.ValueTypeName,x.getValueSize()),++E.referenceCount,this._addInactiveBinding(E,h,S),u[v]=E}d[v].resultBuffer=E.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,a=e._clip.uuid,o=this._actionsByClip[a];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,a,n)}const t=e._propertyBindings;for(let n=0,a=t.length;n!==a;++n){const o=t[n];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,a=t.length;n!==a;++n){const o=t[n];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const a=this._actions,o=this._actionsByClip;let u=o[t];if(u===void 0)u={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=u;else{const d=u.knownActions;e._byClipCacheIndex=d.length,d.push(e)}e._cacheIndex=a.length,a.push(e),u.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],a=e._cacheIndex;n._cacheIndex=a,t[a]=n,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,u=this._actionsByClip,d=u[o],h=d.knownActions,p=h[h.length-1],y=e._byClipCacheIndex;p._byClipCacheIndex=y,h[y]=p,h.pop(),e._byClipCacheIndex=null;const v=d.actionByRoot,x=(e._localRoot||this._root).uuid;delete v[x],h.length===0&&delete u[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,a=t.length;n!==a;++n){const o=t[n];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,a=this._nActiveActions++,o=t[a];e._cacheIndex=a,t[a]=e,o._cacheIndex=n,t[n]=o}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,a=--this._nActiveActions,o=t[a];e._cacheIndex=a,t[a]=e,o._cacheIndex=n,t[n]=o}_addInactiveBinding(e,t,n){const a=this._bindingsByRootAndName,o=this._bindings;let u=a[t];u===void 0&&(u={},a[t]=u),u[n]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,a=n.rootNode.uuid,o=n.path,u=this._bindingsByRootAndName,d=u[a],h=t[t.length-1],p=e._cacheIndex;h._cacheIndex=p,t[p]=h,t.pop(),delete d[o],Object.keys(d).length===0&&delete u[a]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,a=this._nActiveBindings++,o=t[a];e._cacheIndex=a,t[a]=e,o._cacheIndex=n,t[n]=o}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,a=--this._nActiveBindings,o=t[a];e._cacheIndex=a,t[a]=e,o._cacheIndex=n,t[n]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new eM(new Float32Array(2),new Float32Array(2),1,Dz),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,a=--this._nActiveControlInterpolants,o=t[a];e.__cacheIndex=a,t[a]=e,o.__cacheIndex=n,t[n]=o}clipAction(e,t,n){const a=t||this._root,o=a.uuid;let u=typeof e=="string"?bg.findByName(a,e):e;const d=u!==null?u.uuid:e,h=this._actionsByClip[d];let p=null;if(n===void 0&&(u!==null?n=u.blendMode:n=e_),h!==void 0){const v=h.actionByRoot[o];if(v!==void 0&&v.blendMode===n)return v;p=h.knownActions[0],u===null&&(u=p._clip)}if(u===null)return null;const y=new O3(this,u,t,n);return this._bindAction(y,p),this._addInactiveAction(y,d,o),y}existingAction(e,t){const n=t||this._root,a=n.uuid,o=typeof e=="string"?bg.findByName(n,e):e,u=o?o.uuid:e,d=this._actionsByClip[u];return d!==void 0&&d.actionByRoot[a]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,a=this.time+=e,o=Math.sign(e),u=this._accuIndex^=1;for(let p=0;p!==n;++p)t[p]._update(a,e,o,u);const d=this._bindings,h=this._nActiveBindings;for(let p=0;p!==h;++p)d[p].apply(u);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,a=this._actionsByClip,o=a[n];if(o!==void 0){const u=o.knownActions;for(let d=0,h=u.length;d!==h;++d){const p=u[d];this._deactivateAction(p);const y=p._cacheIndex,v=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,v._cacheIndex=y,t[y]=v,t.pop(),this._removeInactiveBindingsForAction(p)}delete a[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const u in n){const d=n[u].actionByRoot,h=d[t];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const a=this._bindingsByRootAndName,o=a[t];if(o!==void 0)for(const u in o){const d=o[u];d.restoreOriginalState(),this._removeInactiveBinding(d)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Lz extends P1{constructor(e=1,t=1,n=1,a={}){super(e,t,a),this.isRenderTarget3D=!0,this.depth=n,this.texture=new r_(null,e,t,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class A_{constructor(e){this.value=e}clone(){return new A_(this.value.clone===void 0?this.value:this.value.clone())}}let Uz=0;class Oz extends hl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Uz++}),this.name="",this.usage=dg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,a=t.length;n<a;n++){const o=Array.isArray(t[n])?t[n]:[t[n]];for(let u=0;u<o.length;u++)this.uniforms.push(o[u].clone())}return this}clone(){return new this.constructor().copy(this)}}class Pz extends o_{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class zz{constructor(e,t,n,a,o,u=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=a,this.count=o,this.normalized=u,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Dw=new hn;class lM{constructor(e,t,n=0,a=1/0){this.ray=new zf(e,t),this.near=n,this.far=a,this.camera=null,this.layers=new Oh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Qt("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Dw.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Dw),this}intersectObject(e,t=!0,n=[]){return n1(e,this,n,t),n.sort(Iw),n}intersectObjects(e,t=!0,n=[]){for(let a=0,o=e.length;a<o;a++)n1(e[a],this,n,t);return n.sort(Iw),n}}function Iw(i,e){return i.distance-e.distance}function n1(i,e,t,n){let a=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(a=!1),a===!0&&n===!0){const o=i.children;for(let u=0,d=o.length;u<d;u++)n1(o[u],e,t,!0)}}class P3{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1,Rt("THREE.Clock: This module has been deprecated. Please use THREE.Timer instead.")}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}class i1{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=fn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(fn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Fz{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class cM{constructor(e,t,n,a){cM.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,a)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,a){const o=this.elements;return o[0]=e,o[2]=t,o[1]=n,o[3]=a,this}}const Lw=new Ze;class Bz{constructor(e=new Ze(1/0,1/0),t=new Ze(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Lw.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Lw).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Uw=new Q,xy=new Q,dh=new Q,hh=new Q,sS=new Q,kz=new Q,Vz=new Q;class Hz{constructor(e=new Q,t=new Q){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Uw.subVectors(e,this.start),xy.subVectors(this.end,this.start);const n=xy.dot(xy);let o=xy.dot(Uw)/n;return t&&(o=fn(o,0,1)),o}closestPointToPoint(e,t,n){const a=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(a).add(this.start)}distanceSqToLine3(e,t=kz,n=Vz){const a=10000000000000001e-32;let o,u;const d=this.start,h=e.start,p=this.end,y=e.end;dh.subVectors(p,d),hh.subVectors(y,h),sS.subVectors(d,h);const v=dh.dot(dh),x=hh.dot(hh),S=hh.dot(sS);if(v<=a&&x<=a)return t.copy(d),n.copy(h),t.sub(n),t.dot(t);if(v<=a)o=0,u=S/x,u=fn(u,0,1);else{const E=dh.dot(sS);if(x<=a)u=0,o=fn(-E/v,0,1);else{const C=dh.dot(hh),T=v*x-C*C;T!==0?o=fn((C*S-E*x)/T,0,1):o=0,u=(C*o+S)/x,u<0?(u=0,o=fn(-E/v,0,1)):u>1&&(u=1,o=fn((C-E)/v,0,1))}}return t.copy(d).addScaledVector(dh,o),n.copy(h).addScaledVector(hh,u),t.distanceToSquared(n)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Ow=new Q;class Gz extends Qn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new _n,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let u=0,d=1,h=32;u<h;u++,d++){const p=u/h*Math.PI*2,y=d/h*Math.PI*2;a.push(Math.cos(p),Math.sin(p),1,Math.cos(y),Math.sin(y),1)}n.setAttribute("position",new Vt(a,3));const o=new Oa({fog:!1,toneMapped:!1});this.cone=new pl(n,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Ow.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Ow),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Jc=new Q,_y=new hn,oS=new hn;class Wz extends pl{constructor(e){const t=z3(e),n=new _n,a=[],o=[];for(let p=0;p<t.length;p++){const y=t[p];y.parent&&y.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),o.push(0,0,0),o.push(0,0,0))}n.setAttribute("position",new Vt(a,3)),n.setAttribute("color",new Vt(o,3));const u=new Oa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const d=new Pt(255),h=new Pt(65280);this.setColors(d,h)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,a=n.getAttribute("position");oS.copy(this.root.matrixWorld).invert();for(let o=0,u=0;o<t.length;o++){const d=t[o];d.parent&&d.parent.isBone&&(_y.multiplyMatrices(oS,d.matrixWorld),Jc.setFromMatrixPosition(_y),a.setXYZ(u,Jc.x,Jc.y,Jc.z),_y.multiplyMatrices(oS,d.parent.matrixWorld),Jc.setFromMatrixPosition(_y),a.setXYZ(u+1,Jc.x,Jc.y,Jc.z),u+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const a=this.geometry.getAttribute("color");for(let o=0;o<a.count;o+=2)a.setXYZ(o,e.r,e.g,e.b),a.setXYZ(o+1,t.r,t.g,t.b);return a.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function z3(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...z3(i.children[t]));return e}class Xz extends Ki{constructor(e,t,n){const a=new Hg(t,4,2),o=new nc({wireframe:!0,fog:!1,toneMapped:!1});super(a,o),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const jz=new Q,Pw=new Pt,zw=new Pt;class qz extends Qn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const a=new Vg(t);a.rotateY(Math.PI*.5),this.material=new nc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=a.getAttribute("position"),u=new Float32Array(o.count*3);a.setAttribute("color",new hi(u,3)),this.add(new Ki(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Pw.copy(this.light.color),zw.copy(this.light.groundColor);for(let n=0,a=t.count;n<a;n++){const o=n<a/2?Pw:zw;t.setXYZ(n,o.r,o.g,o.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(jz.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Yz extends pl{constructor(e=10,t=10,n=4473924,a=8947848){n=new Pt(n),a=new Pt(a);const o=t/2,u=e/t,d=e/2,h=[],p=[];for(let x=0,S=0,E=-d;x<=t;x++,E+=u){h.push(-d,0,E,d,0,E),h.push(E,0,-d,E,0,d);const C=x===o?n:a;C.toArray(p,S),S+=3,C.toArray(p,S),S+=3,C.toArray(p,S),S+=3,C.toArray(p,S),S+=3}const y=new _n;y.setAttribute("position",new Vt(h,3)),y.setAttribute("color",new Vt(p,3));const v=new Oa({vertexColors:!0,toneMapped:!1});super(y,v),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Zz extends pl{constructor(e=10,t=16,n=8,a=64,o=4473924,u=8947848){o=new Pt(o),u=new Pt(u);const d=[],h=[];if(t>1)for(let v=0;v<t;v++){const x=v/t*(Math.PI*2),S=Math.sin(x)*e,E=Math.cos(x)*e;d.push(0,0,0),d.push(S,0,E);const C=v&1?o:u;h.push(C.r,C.g,C.b),h.push(C.r,C.g,C.b)}for(let v=0;v<n;v++){const x=v&1?o:u,S=e-e/n*v;for(let E=0;E<a;E++){let C=E/a*(Math.PI*2),T=Math.sin(C)*S,M=Math.cos(C)*S;d.push(T,0,M),h.push(x.r,x.g,x.b),C=(E+1)/a*(Math.PI*2),T=Math.sin(C)*S,M=Math.cos(C)*S,d.push(T,0,M),h.push(x.r,x.g,x.b)}}const p=new _n;p.setAttribute("position",new Vt(d,3)),p.setAttribute("color",new Vt(h,3));const y=new Oa({vertexColors:!0,toneMapped:!1});super(p,y),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Fw=new Q,by=new Q,Bw=new Q;class Kz extends Qn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let a=new _n;a.setAttribute("position",new Vt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new Oa({fog:!1,toneMapped:!1});this.lightPlane=new uu(a,o),this.add(this.lightPlane),a=new _n,a.setAttribute("position",new Vt([0,0,0,0,0,1],3)),this.targetLine=new uu(a,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Fw.setFromMatrixPosition(this.light.matrixWorld),by.setFromMatrixPosition(this.light.target.matrixWorld),Bw.subVectors(by,Fw),this.lightPlane.lookAt(by),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(by),this.targetLine.scale.z=Bw.length()}}const Sy=new Q,tr=new w_;class $z extends pl{constructor(e){const t=new _n,n=new Oa({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],o=[],u={};d("n1","n2"),d("n2","n4"),d("n4","n3"),d("n3","n1"),d("f1","f2"),d("f2","f4"),d("f4","f3"),d("f3","f1"),d("n1","f1"),d("n2","f2"),d("n3","f3"),d("n4","f4"),d("p","n1"),d("p","n2"),d("p","n3"),d("p","n4"),d("u1","u2"),d("u2","u3"),d("u3","u1"),d("c","t"),d("p","c"),d("cn1","cn2"),d("cn3","cn4"),d("cf1","cf2"),d("cf3","cf4");function d(E,C){h(E),h(C)}function h(E){a.push(0,0,0),o.push(0,0,0),u[E]===void 0&&(u[E]=[]),u[E].push(a.length/3-1)}t.setAttribute("position",new Vt(a,3)),t.setAttribute("color",new Vt(o,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update();const p=new Pt(16755200),y=new Pt(16711680),v=new Pt(43775),x=new Pt(16777215),S=new Pt(3355443);this.setColors(p,y,v,x,S)}setColors(e,t,n,a,o){const d=this.geometry.getAttribute("color");return d.setXYZ(0,e.r,e.g,e.b),d.setXYZ(1,e.r,e.g,e.b),d.setXYZ(2,e.r,e.g,e.b),d.setXYZ(3,e.r,e.g,e.b),d.setXYZ(4,e.r,e.g,e.b),d.setXYZ(5,e.r,e.g,e.b),d.setXYZ(6,e.r,e.g,e.b),d.setXYZ(7,e.r,e.g,e.b),d.setXYZ(8,e.r,e.g,e.b),d.setXYZ(9,e.r,e.g,e.b),d.setXYZ(10,e.r,e.g,e.b),d.setXYZ(11,e.r,e.g,e.b),d.setXYZ(12,e.r,e.g,e.b),d.setXYZ(13,e.r,e.g,e.b),d.setXYZ(14,e.r,e.g,e.b),d.setXYZ(15,e.r,e.g,e.b),d.setXYZ(16,e.r,e.g,e.b),d.setXYZ(17,e.r,e.g,e.b),d.setXYZ(18,e.r,e.g,e.b),d.setXYZ(19,e.r,e.g,e.b),d.setXYZ(20,e.r,e.g,e.b),d.setXYZ(21,e.r,e.g,e.b),d.setXYZ(22,e.r,e.g,e.b),d.setXYZ(23,e.r,e.g,e.b),d.setXYZ(24,t.r,t.g,t.b),d.setXYZ(25,t.r,t.g,t.b),d.setXYZ(26,t.r,t.g,t.b),d.setXYZ(27,t.r,t.g,t.b),d.setXYZ(28,t.r,t.g,t.b),d.setXYZ(29,t.r,t.g,t.b),d.setXYZ(30,t.r,t.g,t.b),d.setXYZ(31,t.r,t.g,t.b),d.setXYZ(32,n.r,n.g,n.b),d.setXYZ(33,n.r,n.g,n.b),d.setXYZ(34,n.r,n.g,n.b),d.setXYZ(35,n.r,n.g,n.b),d.setXYZ(36,n.r,n.g,n.b),d.setXYZ(37,n.r,n.g,n.b),d.setXYZ(38,a.r,a.g,a.b),d.setXYZ(39,a.r,a.g,a.b),d.setXYZ(40,o.r,o.g,o.b),d.setXYZ(41,o.r,o.g,o.b),d.setXYZ(42,o.r,o.g,o.b),d.setXYZ(43,o.r,o.g,o.b),d.setXYZ(44,o.r,o.g,o.b),d.setXYZ(45,o.r,o.g,o.b),d.setXYZ(46,o.r,o.g,o.b),d.setXYZ(47,o.r,o.g,o.b),d.setXYZ(48,o.r,o.g,o.b),d.setXYZ(49,o.r,o.g,o.b),d.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,a=1;let o,u;if(tr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)o=1,u=0;else if(this.camera.coordinateSystem===ps)o=-1,u=1;else if(this.camera.coordinateSystem===If)o=0,u=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);fr("c",t,e,tr,0,0,o),fr("t",t,e,tr,0,0,u),fr("n1",t,e,tr,-n,-a,o),fr("n2",t,e,tr,n,-a,o),fr("n3",t,e,tr,-n,a,o),fr("n4",t,e,tr,n,a,o),fr("f1",t,e,tr,-n,-a,u),fr("f2",t,e,tr,n,-a,u),fr("f3",t,e,tr,-n,a,u),fr("f4",t,e,tr,n,a,u),fr("u1",t,e,tr,n*.7,a*1.1,o),fr("u2",t,e,tr,-n*.7,a*1.1,o),fr("u3",t,e,tr,0,a*2,o),fr("cf1",t,e,tr,-n,0,u),fr("cf2",t,e,tr,n,0,u),fr("cf3",t,e,tr,0,-a,u),fr("cf4",t,e,tr,0,a,u),fr("cn1",t,e,tr,-n,0,o),fr("cn2",t,e,tr,n,0,o),fr("cn3",t,e,tr,0,-a,o),fr("cn4",t,e,tr,0,a,o),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function fr(i,e,t,n,a,o,u){Sy.set(a,o,u).unproject(n);const d=e[i];if(d!==void 0){const h=t.getAttribute("position");for(let p=0,y=d.length;p<y;p++)h.setXYZ(d[p],Sy.x,Sy.y,Sy.z)}}const My=new ga;class Qz extends pl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),o=new _n;o.setIndex(new hi(n,1)),o.setAttribute("position",new hi(a,3)),super(o,new Oa({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&My.setFromObject(this.object),My.isEmpty())return;const e=My.min,t=My.max,n=this.geometry.attributes.position,a=n.array;a[0]=t.x,a[1]=t.y,a[2]=t.z,a[3]=e.x,a[4]=t.y,a[5]=t.z,a[6]=e.x,a[7]=e.y,a[8]=t.z,a[9]=t.x,a[10]=e.y,a[11]=t.z,a[12]=t.x,a[13]=t.y,a[14]=e.z,a[15]=e.x,a[16]=t.y,a[17]=e.z,a[18]=e.x,a[19]=e.y,a[20]=e.z,a[21]=t.x,a[22]=e.y,a[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Jz extends pl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new _n;o.setIndex(new hi(n,1)),o.setAttribute("position",new Vt(a,3)),super(o,new Oa({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class e4 extends uu{constructor(e,t=1,n=16776960){const a=n,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],u=new _n;u.setAttribute("position",new Vt(o,3)),u.computeBoundingSphere(),super(u,new Oa({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const d=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],h=new _n;h.setAttribute("position",new Vt(d,3)),h.computeBoundingSphere(),this.add(new Ki(h,new nc({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const kw=new Q;let Ey,lS;class t4 extends Qn{constructor(e=new Q(0,0,1),t=new Q(0,0,0),n=1,a=16776960,o=n*.2,u=o*.2){super(),this.type="ArrowHelper",Ey===void 0&&(Ey=new _n,Ey.setAttribute("position",new Vt([0,0,0,0,1,0],3)),lS=new Bg(.5,1,5,1),lS.translate(0,-.5,0)),this.position.copy(t),this.line=new uu(Ey,new Oa({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ki(lS,new nc({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,o,u)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{kw.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(kw,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class n4 extends pl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new _n;a.setAttribute("position",new Vt(t,3)),a.setAttribute("color",new Vt(n,3));const o=new Oa({vertexColors:!0,toneMapped:!1});super(a,o),this.type="AxesHelper"}setColors(e,t,n){const a=new Pt,o=this.geometry.attributes.color.array;return a.set(e),a.toArray(o,0),a.toArray(o,3),a.set(t),a.toArray(o,6),a.toArray(o,9),a.set(n),a.toArray(o,12),a.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class i4{constructor(){this.type="ShapePath",this.color=new Pt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Px,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,a){return this.currentPath.quadraticCurveTo(e,t,n,a),this}bezierCurveTo(e,t,n,a,o,u){return this.currentPath.bezierCurveTo(e,t,n,a,o,u),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(M){const R=[];for(let I=0,L=M.length;I<L;I++){const z=M[I],P=new Cf;P.curves=z.curves,R.push(P)}return R}function n(M,R){const I=R.length;let L=!1;for(let z=I-1,P=0;P<I;z=P++){let V=R[z],N=R[P],O=N.x-V.x,K=N.y-V.y;if(Math.abs(K)>Number.EPSILON){if(K<0&&(V=R[P],O=-O,N=R[z],K=-K),M.y<V.y||M.y>N.y)continue;if(M.y===V.y){if(M.x===V.x)return!0}else{const H=K*(M.x-V.x)-O*(M.y-V.y);if(H===0)return!0;if(H<0)continue;L=!L}}else{if(M.y!==V.y)continue;if(N.x<=M.x&&M.x<=V.x||V.x<=M.x&&M.x<=N.x)return!0}}return L}const a=bo.isClockWise,o=this.subPaths;if(o.length===0)return[];let u,d,h;const p=[];if(o.length===1)return d=o[0],h=new Cf,h.curves=d.curves,p.push(h),p;let y=!a(o[0].getPoints());y=e?!y:y;const v=[],x=[];let S=[],E=0,C;x[E]=void 0,S[E]=[];for(let M=0,R=o.length;M<R;M++)d=o[M],C=d.getPoints(),u=a(C),u=e?!u:u,u?(!y&&x[E]&&E++,x[E]={s:new Cf,p:C},x[E].s.curves=d.curves,y&&E++,S[E]=[]):S[E].push({h:d,p:C[0]});if(!x[0])return t(o);if(x.length>1){let M=!1,R=0;for(let I=0,L=x.length;I<L;I++)v[I]=[];for(let I=0,L=x.length;I<L;I++){const z=S[I];for(let P=0;P<z.length;P++){const V=z[P];let N=!0;for(let O=0;O<x.length;O++)n(V.p,x[O].p)&&(I!==O&&R++,N?(N=!1,v[O].push(V)):M=!0);N&&v[I].push(V)}}R>0&&M===!1&&(S=v)}let T;for(let M=0,R=x.length;M<R;M++){h=x[M].s,p.push(h),T=S[M];for(let I=0,L=T.length;I<L;I++)h.holes.push(T[I].h)}return p}}class r4 extends hl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){Rt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function a4(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function s4(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function o4(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function r1(i,e,t,n){const a=l4(n);switch(t){case I1:return i*e;case Ug:return i*e/a.components*a.byteLength;case Og:return i*e/a.components*a.byteLength;case Df:return i*e*2/a.components*a.byteLength;case Qx:return i*e*2/a.components*a.byteLength;case L1:return i*e*3/a.components*a.byteLength;case pr:return i*e*4/a.components*a.byteLength;case Jx:return i*e*4/a.components*a.byteLength;case Jm:case eg:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case tg:case ng:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case tx:case ix:return Math.max(i,16)*Math.max(e,8)/4;case ex:case nx:return Math.max(i,8)*Math.max(e,8)/2;case rx:case ax:case ox:case lx:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case sx:case cx:case ux:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case fx:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case dx:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case hx:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case px:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case mx:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case gx:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case vx:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case yx:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case xx:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case _x:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case bx:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case Sx:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Mx:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case Ex:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case wx:case Tx:case Ax:return Math.ceil(i/4)*Math.ceil(e/4)*16;case Cx:case Rx:return Math.ceil(i/4)*Math.ceil(e/4)*8;case Nx:case Dx:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function l4(i){switch(i){case Br:case Yx:return{byteLength:1,components:1};case Ih:case Zx:case ir:return{byteLength:2,components:1};case Kx:case $x:return{byteLength:2,components:4};case vs:case Lg:case Vi:return{byteLength:4,components:1};case N1:case D1:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class c4{static contain(e,t){return a4(e,t)}static cover(e,t){return s4(e,t)}static fill(e){return o4(e)}static getByteLength(e,t,n,a){return r1(e,t,n,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Yh}}));typeof window<"u"&&(window.__THREE__?Rt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Yh);function F3(){let i=null,e=!1,t=null,n=null;function a(o,u){t(o,u),n=i.requestAnimationFrame(a)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(a),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){i=o}}}function u4(i){const e=new WeakMap;function t(d,h){const p=d.array,y=d.usage,v=p.byteLength,x=i.createBuffer();i.bindBuffer(h,x),i.bufferData(h,p,y),d.onUploadCallback();let S;if(p instanceof Float32Array)S=i.FLOAT;else if(typeof Float16Array<"u"&&p instanceof Float16Array)S=i.HALF_FLOAT;else if(p instanceof Uint16Array)d.isFloat16BufferAttribute?S=i.HALF_FLOAT:S=i.UNSIGNED_SHORT;else if(p instanceof Int16Array)S=i.SHORT;else if(p instanceof Uint32Array)S=i.UNSIGNED_INT;else if(p instanceof Int32Array)S=i.INT;else if(p instanceof Int8Array)S=i.BYTE;else if(p instanceof Uint8Array)S=i.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)S=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:x,type:S,bytesPerElement:p.BYTES_PER_ELEMENT,version:d.version,size:v}}function n(d,h,p){const y=h.array,v=h.updateRanges;if(i.bindBuffer(p,d),v.length===0)i.bufferSubData(p,0,y);else{v.sort((S,E)=>S.start-E.start);let x=0;for(let S=1;S<v.length;S++){const E=v[x],C=v[S];C.start<=E.start+E.count+1?E.count=Math.max(E.count,C.start+C.count-E.start):(++x,v[x]=C)}v.length=x+1;for(let S=0,E=v.length;S<E;S++){const C=v[S];i.bufferSubData(p,C.start*y.BYTES_PER_ELEMENT,y,C.start,C.count)}h.clearUpdateRanges()}h.onUploadCallback()}function a(d){return d.isInterleavedBufferAttribute&&(d=d.data),e.get(d)}function o(d){d.isInterleavedBufferAttribute&&(d=d.data);const h=e.get(d);h&&(i.deleteBuffer(h.buffer),e.delete(d))}function u(d,h){if(d.isInterleavedBufferAttribute&&(d=d.data),d.isGLBufferAttribute){const y=e.get(d);(!y||y.version<d.version)&&e.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version});return}const p=e.get(d);if(p===void 0)e.set(d,t(d,h));else if(p.version<d.version){if(p.size!==d.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(p.buffer,d,h),p.version=d.version}}return{get:a,remove:o,update:u}}var f4=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,d4=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,h4=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,p4=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,m4=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,g4=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,v4=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,y4=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,x4=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec4 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 );
	}
#endif`,_4=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,b4=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,S4=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,M4=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,E4=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,w4=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,T4=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,A4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,C4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,R4=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,N4=`#if defined( USE_COLOR ) || defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#endif`,D4=`#if defined( USE_COLOR ) || defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#endif`,I4=`#if defined( USE_COLOR ) || defined( USE_COLOR_ALPHA ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec4 vColor;
#endif`,L4=`#if defined( USE_COLOR ) || defined( USE_COLOR_ALPHA ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec4( 1.0 );
#endif
#ifdef USE_COLOR_ALPHA
	vColor *= color;
#elif defined( USE_COLOR )
	vColor.rgb *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.rgb *= instanceColor.rgb;
#endif
#ifdef USE_BATCHING_COLOR
	vColor *= getBatchingColor( getIndirectIndex( gl_DrawID ) );
#endif`,U4=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,O4=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,P4=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,z4=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,F4=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,B4=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,k4=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,V4="gl_FragColor = linearToOutputTexel( gl_FragColor );",H4=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,G4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		#ifdef ENVMAP_BLENDING_MULTIPLY
			outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
		#elif defined( ENVMAP_BLENDING_MIX )
			outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
		#elif defined( ENVMAP_BLENDING_ADD )
			outgoingLight += envColor.xyz * specularStrength * reflectivity;
		#endif
	#endif
#endif`,W4=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,X4=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,j4=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,q4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Y4=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Z4=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,K4=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,$4=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Q4=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,J4=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,eF=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,tF=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,nF=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,iF=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,rF=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,aF=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,sF=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,oF=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lF=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,cF=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( material.specularF90 - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
		#ifdef USE_CLEARCOAT
			vec3 Ncc = geometryClearcoatNormal;
			vec2 uvClearcoat = LTC_Uv( Ncc, viewDir, material.clearcoatRoughness );
			vec4 t1Clearcoat = texture2D( ltc_1, uvClearcoat );
			vec4 t2Clearcoat = texture2D( ltc_2, uvClearcoat );
			mat3 mInvClearcoat = mat3(
				vec3( t1Clearcoat.x, 0, t1Clearcoat.y ),
				vec3(             0, 1,             0 ),
				vec3( t1Clearcoat.z, 0, t1Clearcoat.w )
			);
			vec3 fresnelClearcoat = material.clearcoatF0 * t2Clearcoat.x + ( material.clearcoatF90 - material.clearcoatF0 ) * t2Clearcoat.y;
			clearcoatSpecularDirect += lightColor * fresnelClearcoat * LTC_Evaluate( Ncc, viewDir, position, mInvClearcoat, rectCoords );
		#endif
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,uF=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,fF=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( ENVMAP_TYPE_CUBE_UV )
		#if defined( STANDARD ) || defined( LAMBERT ) || defined( PHONG )
			iblIrradiance += getIBLIrradiance( geometryNormal );
		#endif
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,dF=`#if defined( RE_IndirectDiffuse )
	#if defined( LAMBERT ) || defined( PHONG )
		irradiance += iblIrradiance;
	#endif
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,hF=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,pF=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,mF=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,gF=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,vF=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,yF=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,xF=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,_F=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bF=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,SF=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,MF=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,EF=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,wF=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,TF=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,AF=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,CF=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,RF=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,NF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,DF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,IF=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,LF=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,UF=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,OF=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,PF=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,zF=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,FF=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,BF=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	#ifdef USE_REVERSED_DEPTH_BUFFER
	
		return depth * ( far - near ) - far;
	#else
		return depth * ( near - far ) - near;
	#endif
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	
	#ifdef USE_REVERSED_DEPTH_BUFFER
		return ( near * far ) / ( ( near - far ) * depth - near );
	#else
		return ( near * far ) / ( ( far - near ) * depth - far );
	#endif
}`,kF=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,VF=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,HF=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,GF=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,WF=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,XF=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,jF=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * PI2;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadowCoord.z -= shadowBias;
			#else
				shadowCoord.z += shadowBias;
			#endif
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadowCoord.z -= shadowBias;
			#else
				shadowCoord.z += shadowBias;
			#endif
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			#ifdef USE_REVERSED_DEPTH_BUFFER
				float dp = ( shadowCameraNear * ( shadowCameraFar - viewSpaceZ ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
				dp -= shadowBias;
			#else
				float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
				dp += shadowBias;
			#endif
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * PI2;
			vec2 sample0 = vogelDiskSample( 0, 5, phi );
			vec2 sample1 = vogelDiskSample( 1, 5, phi );
			vec2 sample2 = vogelDiskSample( 2, 5, phi );
			vec2 sample3 = vogelDiskSample( 3, 5, phi );
			vec2 sample4 = vogelDiskSample( 4, 5, phi );
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * sample0.x + bitangent * sample0.y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * sample1.x + bitangent * sample1.y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * sample2.x + bitangent * sample2.y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * sample3.x + bitangent * sample3.y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * sample4.x + bitangent * sample4.y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				depth = 1.0 - depth;
			#endif
			shadow = step( dp, depth );
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,qF=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,YF=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,ZF=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,KF=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,$F=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,QF=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,JF=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,eB=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,tB=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,nB=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,iB=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,rB=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,aB=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,sB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,oB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,lB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,cB=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const uB=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fB=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,hB=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,pB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,mB=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,vB=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,yB=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,xB=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,_B=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,bB=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,SB=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,MB=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,EB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,wB=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TB=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AB=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CB=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,RB=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NB=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,DB=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,IB=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,LB=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UB=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,OB=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PB=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zB=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FB=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,BB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,kB=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VB=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,HB=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,GB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Cn={alphahash_fragment:f4,alphahash_pars_fragment:d4,alphamap_fragment:h4,alphamap_pars_fragment:p4,alphatest_fragment:m4,alphatest_pars_fragment:g4,aomap_fragment:v4,aomap_pars_fragment:y4,batching_pars_vertex:x4,batching_vertex:_4,begin_vertex:b4,beginnormal_vertex:S4,bsdfs:M4,iridescence_fragment:E4,bumpmap_pars_fragment:w4,clipping_planes_fragment:T4,clipping_planes_pars_fragment:A4,clipping_planes_pars_vertex:C4,clipping_planes_vertex:R4,color_fragment:N4,color_pars_fragment:D4,color_pars_vertex:I4,color_vertex:L4,common:U4,cube_uv_reflection_fragment:O4,defaultnormal_vertex:P4,displacementmap_pars_vertex:z4,displacementmap_vertex:F4,emissivemap_fragment:B4,emissivemap_pars_fragment:k4,colorspace_fragment:V4,colorspace_pars_fragment:H4,envmap_fragment:G4,envmap_common_pars_fragment:W4,envmap_pars_fragment:X4,envmap_pars_vertex:j4,envmap_physical_pars_fragment:iF,envmap_vertex:q4,fog_vertex:Y4,fog_pars_vertex:Z4,fog_fragment:K4,fog_pars_fragment:$4,gradientmap_pars_fragment:Q4,lightmap_pars_fragment:J4,lights_lambert_fragment:eF,lights_lambert_pars_fragment:tF,lights_pars_begin:nF,lights_toon_fragment:rF,lights_toon_pars_fragment:aF,lights_phong_fragment:sF,lights_phong_pars_fragment:oF,lights_physical_fragment:lF,lights_physical_pars_fragment:cF,lights_fragment_begin:uF,lights_fragment_maps:fF,lights_fragment_end:dF,logdepthbuf_fragment:hF,logdepthbuf_pars_fragment:pF,logdepthbuf_pars_vertex:mF,logdepthbuf_vertex:gF,map_fragment:vF,map_pars_fragment:yF,map_particle_fragment:xF,map_particle_pars_fragment:_F,metalnessmap_fragment:bF,metalnessmap_pars_fragment:SF,morphinstance_vertex:MF,morphcolor_vertex:EF,morphnormal_vertex:wF,morphtarget_pars_vertex:TF,morphtarget_vertex:AF,normal_fragment_begin:CF,normal_fragment_maps:RF,normal_pars_fragment:NF,normal_pars_vertex:DF,normal_vertex:IF,normalmap_pars_fragment:LF,clearcoat_normal_fragment_begin:UF,clearcoat_normal_fragment_maps:OF,clearcoat_pars_fragment:PF,iridescence_pars_fragment:zF,opaque_fragment:FF,packing:BF,premultiplied_alpha_fragment:kF,project_vertex:VF,dithering_fragment:HF,dithering_pars_fragment:GF,roughnessmap_fragment:WF,roughnessmap_pars_fragment:XF,shadowmap_pars_fragment:jF,shadowmap_pars_vertex:qF,shadowmap_vertex:YF,shadowmask_pars_fragment:ZF,skinbase_vertex:KF,skinning_pars_vertex:$F,skinning_vertex:QF,skinnormal_vertex:JF,specularmap_fragment:eB,specularmap_pars_fragment:tB,tonemapping_fragment:nB,tonemapping_pars_fragment:iB,transmission_fragment:rB,transmission_pars_fragment:aB,uv_pars_fragment:sB,uv_pars_vertex:oB,uv_vertex:lB,worldpos_vertex:cB,background_vert:uB,background_frag:fB,backgroundCube_vert:dB,backgroundCube_frag:hB,cube_vert:pB,cube_frag:mB,depth_vert:gB,depth_frag:vB,distance_vert:yB,distance_frag:xB,equirect_vert:_B,equirect_frag:bB,linedashed_vert:SB,linedashed_frag:MB,meshbasic_vert:EB,meshbasic_frag:wB,meshlambert_vert:TB,meshlambert_frag:AB,meshmatcap_vert:CB,meshmatcap_frag:RB,meshnormal_vert:NB,meshnormal_frag:DB,meshphong_vert:IB,meshphong_frag:LB,meshphysical_vert:UB,meshphysical_frag:OB,meshtoon_vert:PB,meshtoon_frag:zB,points_vert:FB,points_frag:BB,shadow_vert:kB,shadow_frag:VB,sprite_vert:HB,sprite_frag:GB},Ut={common:{diffuse:{value:new Pt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Sn},alphaMap:{value:null},alphaMapTransform:{value:new Sn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Sn}},envmap:{envMap:{value:null},envMapRotation:{value:new Sn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Sn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Sn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Sn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Sn},normalScale:{value:new Ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Sn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Sn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Sn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Sn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Sn},alphaTest:{value:0},uvTransform:{value:new Sn}},sprite:{diffuse:{value:new Pt(16777215)},opacity:{value:1},center:{value:new Ze(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Sn},alphaMap:{value:null},alphaMapTransform:{value:new Sn},alphaTest:{value:0}}},xo={basic:{uniforms:Na([Ut.common,Ut.specularmap,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.fog]),vertexShader:Cn.meshbasic_vert,fragmentShader:Cn.meshbasic_frag},lambert:{uniforms:Na([Ut.common,Ut.specularmap,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.fog,Ut.lights,{emissive:{value:new Pt(0)},envMapIntensity:{value:1}}]),vertexShader:Cn.meshlambert_vert,fragmentShader:Cn.meshlambert_frag},phong:{uniforms:Na([Ut.common,Ut.specularmap,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.fog,Ut.lights,{emissive:{value:new Pt(0)},specular:{value:new Pt(1118481)},shininess:{value:30},envMapIntensity:{value:1}}]),vertexShader:Cn.meshphong_vert,fragmentShader:Cn.meshphong_frag},standard:{uniforms:Na([Ut.common,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.roughnessmap,Ut.metalnessmap,Ut.fog,Ut.lights,{emissive:{value:new Pt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag},toon:{uniforms:Na([Ut.common,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.gradientmap,Ut.fog,Ut.lights,{emissive:{value:new Pt(0)}}]),vertexShader:Cn.meshtoon_vert,fragmentShader:Cn.meshtoon_frag},matcap:{uniforms:Na([Ut.common,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.fog,{matcap:{value:null}}]),vertexShader:Cn.meshmatcap_vert,fragmentShader:Cn.meshmatcap_frag},points:{uniforms:Na([Ut.points,Ut.fog]),vertexShader:Cn.points_vert,fragmentShader:Cn.points_frag},dashed:{uniforms:Na([Ut.common,Ut.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Cn.linedashed_vert,fragmentShader:Cn.linedashed_frag},depth:{uniforms:Na([Ut.common,Ut.displacementmap]),vertexShader:Cn.depth_vert,fragmentShader:Cn.depth_frag},normal:{uniforms:Na([Ut.common,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,{opacity:{value:1}}]),vertexShader:Cn.meshnormal_vert,fragmentShader:Cn.meshnormal_frag},sprite:{uniforms:Na([Ut.sprite,Ut.fog]),vertexShader:Cn.sprite_vert,fragmentShader:Cn.sprite_frag},background:{uniforms:{uvTransform:{value:new Sn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Cn.background_vert,fragmentShader:Cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Sn}},vertexShader:Cn.backgroundCube_vert,fragmentShader:Cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Cn.cube_vert,fragmentShader:Cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Cn.equirect_vert,fragmentShader:Cn.equirect_frag},distance:{uniforms:Na([Ut.common,Ut.displacementmap,{referencePosition:{value:new Q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Cn.distance_vert,fragmentShader:Cn.distance_frag},shadow:{uniforms:Na([Ut.lights,Ut.fog,{color:{value:new Pt(0)},opacity:{value:1}}]),vertexShader:Cn.shadow_vert,fragmentShader:Cn.shadow_frag}};xo.physical={uniforms:Na([xo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Sn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Sn},clearcoatNormalScale:{value:new Ze(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Sn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Sn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Sn},sheen:{value:0},sheenColor:{value:new Pt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Sn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Sn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Sn},transmissionSamplerSize:{value:new Ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Sn},attenuationDistance:{value:0},attenuationColor:{value:new Pt(0)},specularColor:{value:new Pt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Sn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Sn},anisotropyVector:{value:new Ze},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Sn}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag};const wy={r:0,b:0,g:0},pf=new ys,WB=new hn;function XB(i,e,t,n,a,o){const u=new Pt(0);let d=a===!0?0:1,h,p,y=null,v=0,x=null;function S(R){let I=R.isScene===!0?R.background:null;if(I&&I.isTexture){const L=R.backgroundBlurriness>0;I=e.get(I,L)}return I}function E(R){let I=!1;const L=S(R);L===null?T(u,d):L&&L.isColor&&(T(L,1),I=!0);const z=i.xr.getEnvironmentBlendMode();z==="additive"?t.buffers.color.setClear(0,0,0,1,o):z==="alpha-blend"&&t.buffers.color.setClear(0,0,0,0,o),(i.autoClear||I)&&(t.buffers.depth.setTest(!0),t.buffers.depth.setMask(!0),t.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function C(R,I){const L=S(I);L&&(L.isCubeTexture||L.mapping===Zh)?(p===void 0&&(p=new Ki(new Ff(1,1,1),new va({name:"BackgroundCubeMaterial",uniforms:Bh(xo.backgroundCube.uniforms),vertexShader:xo.backgroundCube.vertexShader,fragmentShader:xo.backgroundCube.fragmentShader,side:ma,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(z,P,V){this.matrixWorld.copyPosition(V.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(p)),pf.copy(I.backgroundRotation),pf.x*=-1,pf.y*=-1,pf.z*=-1,L.isCubeTexture&&L.isRenderTargetTexture===!1&&(pf.y*=-1,pf.z*=-1),p.material.uniforms.envMap.value=L,p.material.uniforms.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=I.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(WB.makeRotationFromEuler(pf)),p.material.toneMapped=Gn.getTransfer(L.colorSpace)!==si,(y!==L||v!==L.version||x!==i.toneMapping)&&(p.material.needsUpdate=!0,y=L,v=L.version,x=i.toneMapping),p.layers.enableAll(),R.unshift(p,p.geometry,p.material,0,0,null)):L&&L.isTexture&&(h===void 0&&(h=new Ki(new hu(2,2),new va({name:"BackgroundMaterial",uniforms:Bh(xo.background.uniforms),vertexShader:xo.background.vertexShader,fragmentShader:xo.background.fragmentShader,side:tc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(h)),h.material.uniforms.t2D.value=L,h.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,h.material.toneMapped=Gn.getTransfer(L.colorSpace)!==si,L.matrixAutoUpdate===!0&&L.updateMatrix(),h.material.uniforms.uvTransform.value.copy(L.matrix),(y!==L||v!==L.version||x!==i.toneMapping)&&(h.material.needsUpdate=!0,y=L,v=L.version,x=i.toneMapping),h.layers.enableAll(),R.unshift(h,h.geometry,h.material,0,0,null))}function T(R,I){R.getRGB(wy,a3(i)),t.buffers.color.setClear(wy.r,wy.g,wy.b,I,o)}function M(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return u},setClearColor:function(R,I=1){u.set(R),d=I,T(u,d)},getClearAlpha:function(){return d},setClearAlpha:function(R){d=R,T(u,d)},render:E,addToRenderList:C,dispose:M}}function jB(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},a=x(null);let o=a,u=!1;function d(H,te,ee,ae,se){let G=!1;const $=v(H,ae,ee,te);o!==$&&(o=$,p(o.object)),G=S(H,ae,ee,se),G&&E(H,ae,ee,se),se!==null&&e.update(se,i.ELEMENT_ARRAY_BUFFER),(G||u)&&(u=!1,L(H,te,ee,ae),se!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(se).buffer))}function h(){return i.createVertexArray()}function p(H){return i.bindVertexArray(H)}function y(H){return i.deleteVertexArray(H)}function v(H,te,ee,ae){const se=ae.wireframe===!0;let G=n[te.id];G===void 0&&(G={},n[te.id]=G);const $=H.isInstancedMesh===!0?H.id:0;let le=G[$];le===void 0&&(le={},G[$]=le);let be=le[ee.id];be===void 0&&(be={},le[ee.id]=be);let Ae=be[se];return Ae===void 0&&(Ae=x(h()),be[se]=Ae),Ae}function x(H){const te=[],ee=[],ae=[];for(let se=0;se<t;se++)te[se]=0,ee[se]=0,ae[se]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:te,enabledAttributes:ee,attributeDivisors:ae,object:H,attributes:{},index:null}}function S(H,te,ee,ae){const se=o.attributes,G=te.attributes;let $=0;const le=ee.getAttributes();for(const be in le)if(le[be].location>=0){const Y=se[be];let re=G[be];if(re===void 0&&(be==="instanceMatrix"&&H.instanceMatrix&&(re=H.instanceMatrix),be==="instanceColor"&&H.instanceColor&&(re=H.instanceColor)),Y===void 0||Y.attribute!==re||re&&Y.data!==re.data)return!0;$++}return o.attributesNum!==$||o.index!==ae}function E(H,te,ee,ae){const se={},G=te.attributes;let $=0;const le=ee.getAttributes();for(const be in le)if(le[be].location>=0){let Y=G[be];Y===void 0&&(be==="instanceMatrix"&&H.instanceMatrix&&(Y=H.instanceMatrix),be==="instanceColor"&&H.instanceColor&&(Y=H.instanceColor));const re={};re.attribute=Y,Y&&Y.data&&(re.data=Y.data),se[be]=re,$++}o.attributes=se,o.attributesNum=$,o.index=ae}function C(){const H=o.newAttributes;for(let te=0,ee=H.length;te<ee;te++)H[te]=0}function T(H){M(H,0)}function M(H,te){const ee=o.newAttributes,ae=o.enabledAttributes,se=o.attributeDivisors;ee[H]=1,ae[H]===0&&(i.enableVertexAttribArray(H),ae[H]=1),se[H]!==te&&(i.vertexAttribDivisor(H,te),se[H]=te)}function R(){const H=o.newAttributes,te=o.enabledAttributes;for(let ee=0,ae=te.length;ee<ae;ee++)te[ee]!==H[ee]&&(i.disableVertexAttribArray(ee),te[ee]=0)}function I(H,te,ee,ae,se,G,$){$===!0?i.vertexAttribIPointer(H,te,ee,se,G):i.vertexAttribPointer(H,te,ee,ae,se,G)}function L(H,te,ee,ae){C();const se=ae.attributes,G=ee.getAttributes(),$=te.defaultAttributeValues;for(const le in G){const be=G[le];if(be.location>=0){let Ae=se[le];if(Ae===void 0&&(le==="instanceMatrix"&&H.instanceMatrix&&(Ae=H.instanceMatrix),le==="instanceColor"&&H.instanceColor&&(Ae=H.instanceColor)),Ae!==void 0){const Y=Ae.normalized,re=Ae.itemSize,me=e.get(Ae);if(me===void 0)continue;const Te=me.buffer,Ke=me.type,he=me.bytesPerElement,De=Ke===i.INT||Ke===i.UNSIGNED_INT||Ae.gpuType===Lg;if(Ae.isInterleavedBufferAttribute){const ze=Ae.data,pt=ze.stride,It=Ae.offset;if(ze.isInstancedInterleavedBuffer){for(let zt=0;zt<be.locationSize;zt++)M(be.location+zt,ze.meshPerAttribute);H.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=ze.meshPerAttribute*ze.count)}else for(let zt=0;zt<be.locationSize;zt++)T(be.location+zt);i.bindBuffer(i.ARRAY_BUFFER,Te);for(let zt=0;zt<be.locationSize;zt++)I(be.location+zt,re/be.locationSize,Ke,Y,pt*he,(It+re/be.locationSize*zt)*he,De)}else{if(Ae.isInstancedBufferAttribute){for(let ze=0;ze<be.locationSize;ze++)M(be.location+ze,Ae.meshPerAttribute);H.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=Ae.meshPerAttribute*Ae.count)}else for(let ze=0;ze<be.locationSize;ze++)T(be.location+ze);i.bindBuffer(i.ARRAY_BUFFER,Te);for(let ze=0;ze<be.locationSize;ze++)I(be.location+ze,re/be.locationSize,Ke,Y,re*he,re/be.locationSize*ze*he,De)}}else if($!==void 0){const Y=$[le];if(Y!==void 0)switch(Y.length){case 2:i.vertexAttrib2fv(be.location,Y);break;case 3:i.vertexAttrib3fv(be.location,Y);break;case 4:i.vertexAttrib4fv(be.location,Y);break;default:i.vertexAttrib1fv(be.location,Y)}}}}R()}function z(){O();for(const H in n){const te=n[H];for(const ee in te){const ae=te[ee];for(const se in ae){const G=ae[se];for(const $ in G)y(G[$].object),delete G[$];delete ae[se]}}delete n[H]}}function P(H){if(n[H.id]===void 0)return;const te=n[H.id];for(const ee in te){const ae=te[ee];for(const se in ae){const G=ae[se];for(const $ in G)y(G[$].object),delete G[$];delete ae[se]}}delete n[H.id]}function V(H){for(const te in n){const ee=n[te];for(const ae in ee){const se=ee[ae];if(se[H.id]===void 0)continue;const G=se[H.id];for(const $ in G)y(G[$].object),delete G[$];delete se[H.id]}}}function N(H){for(const te in n){const ee=n[te],ae=H.isInstancedMesh===!0?H.id:0,se=ee[ae];if(se!==void 0){for(const G in se){const $=se[G];for(const le in $)y($[le].object),delete $[le];delete se[G]}delete ee[ae],Object.keys(ee).length===0&&delete n[te]}}}function O(){K(),u=!0,o!==a&&(o=a,p(o.object))}function K(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:d,reset:O,resetDefaultState:K,dispose:z,releaseStatesOfGeometry:P,releaseStatesOfObject:N,releaseStatesOfProgram:V,initAttributes:C,enableAttribute:T,disableUnusedAttributes:R}}function qB(i,e,t){let n;function a(p){n=p}function o(p,y){i.drawArrays(n,p,y),t.update(y,n,1)}function u(p,y,v){v!==0&&(i.drawArraysInstanced(n,p,y,v),t.update(y,n,v))}function d(p,y,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,p,0,y,0,v);let S=0;for(let E=0;E<v;E++)S+=y[E];t.update(S,n,1)}function h(p,y,v,x){if(v===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let E=0;E<p.length;E++)u(p[E],y[E],x[E]);else{S.multiDrawArraysInstancedWEBGL(n,p,0,y,0,x,0,v);let E=0;for(let C=0;C<v;C++)E+=y[C]*x[C];t.update(E,n,1)}}this.setMode=a,this.render=o,this.renderInstances=u,this.renderMultiDraw=d,this.renderMultiDrawInstances=h}function YB(i,e,t,n){let a;function o(){if(a!==void 0)return a;if(e.has("EXT_texture_filter_anisotropic")===!0){const V=e.get("EXT_texture_filter_anisotropic");a=i.getParameter(V.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function u(V){return!(V!==pr&&n.convert(V)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function d(V){const N=V===ir&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(V!==Br&&n.convert(V)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&V!==Vi&&!N)}function h(V){if(V==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";V="mediump"}return V==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=t.precision!==void 0?t.precision:"highp";const y=h(p);y!==p&&(Rt("WebGLRenderer:",p,"not supported, using",y,"instead."),p=y);const v=t.logarithmicDepthBuffer===!0,x=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),S=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),E=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),C=i.getParameter(i.MAX_TEXTURE_SIZE),T=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),M=i.getParameter(i.MAX_VERTEX_ATTRIBS),R=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),I=i.getParameter(i.MAX_VARYING_VECTORS),L=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),z=i.getParameter(i.MAX_SAMPLES),P=i.getParameter(i.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:h,textureFormatReadable:u,textureTypeReadable:d,precision:p,logarithmicDepthBuffer:v,reversedDepthBuffer:x,maxTextures:S,maxVertexTextures:E,maxTextureSize:C,maxCubemapSize:T,maxAttributes:M,maxVertexUniforms:R,maxVaryings:I,maxFragmentUniforms:L,maxSamples:z,samples:P}}function ZB(i){const e=this;let t=null,n=0,a=!1,o=!1;const u=new sl,d=new Sn,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(v,x){const S=v.length!==0||x||n!==0||a;return a=x,n=v.length,S},this.beginShadows=function(){o=!0,y(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(v,x){t=y(v,x,0)},this.setState=function(v,x,S){const E=v.clippingPlanes,C=v.clipIntersection,T=v.clipShadows,M=i.get(v);if(!a||E===null||E.length===0||o&&!T)o?y(null):p();else{const R=o?0:n,I=R*4;let L=M.clippingState||null;h.value=L,L=y(E,x,I,S);for(let z=0;z!==I;++z)L[z]=t[z];M.clippingState=L,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=R}};function p(){h.value!==t&&(h.value=t,h.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function y(v,x,S,E){const C=v!==null?v.length:0;let T=null;if(C!==0){if(T=h.value,E!==!0||T===null){const M=S+C*4,R=x.matrixWorldInverse;d.getNormalMatrix(R),(T===null||T.length<M)&&(T=new Float32Array(M));for(let I=0,L=S;I!==C;++I,L+=4)u.copy(v[I]).applyMatrix4(R,d),u.normal.toArray(T,L),T[L+3]=u.constant}h.value=T,h.needsUpdate=!0}return e.numPlanes=C,e.numIntersection=0,T}}const au=4,Vw=[.125,.215,.35,.446,.526,.582],xf=20,KB=256,Vm=new fl,Hw=new Pt;let cS=null,uS=0,fS=0,dS=!1;const $B=new Q;class a1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,n=.1,a=100,o={}){const{size:u=256,position:d=$B}=o;cS=this._renderer.getRenderTarget(),uS=this._renderer.getActiveCubeFace(),fS=this._renderer.getActiveMipmapLevel(),dS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(u);const h=this._allocateTargets();return h.depthBuffer=!0,this._sceneToCubeUV(e,n,a,h,d),t>0&&this._blur(h,0,0,t),this._applyPMREM(h),this._cleanup(h),h}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Xw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Ww(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(cS,uS,fS),this._renderer.xr.enabled=dS,e.scissorTest=!1,ph(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Mo||e.mapping===lu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),cS=this._renderer.getRenderTarget(),uS=this._renderer.getActiveCubeFace(),fS=this._renderer.getActiveMipmapLevel(),dS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:jn,minFilter:jn,generateMipmaps:!1,type:ir,format:pr,colorSpace:Eo,depthBuffer:!1},a=Gw(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Gw(e,t,n);const{_lodMax:o}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=QB(o)),this._blurMaterial=e5(o,e,t),this._ggxMaterial=JB(o,e,t)}return a}_compileMaterial(e){const t=new Ki(new _n,e);this._renderer.compile(t,Vm)}_sceneToCubeUV(e,t,n,a,o){const h=new dr(90,1,t,n),p=[1,-1,1,1,1,1],y=[1,1,1,-1,-1,-1],v=this._renderer,x=v.autoClear,S=v.toneMapping;v.getClearColor(Hw),v.toneMapping=qs,v.autoClear=!1,v.state.buffers.depth.getReversed()&&(v.setRenderTarget(a),v.clearDepth(),v.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Ki(new Ff,new nc({name:"PMREM.Background",side:ma,depthWrite:!1,depthTest:!1})));const C=this._backgroundBox,T=C.material;let M=!1;const R=e.background;R?R.isColor&&(T.color.copy(R),e.background=null,M=!0):(T.color.copy(Hw),M=!0);for(let I=0;I<6;I++){const L=I%3;L===0?(h.up.set(0,p[I],0),h.position.set(o.x,o.y,o.z),h.lookAt(o.x+y[I],o.y,o.z)):L===1?(h.up.set(0,0,p[I]),h.position.set(o.x,o.y,o.z),h.lookAt(o.x,o.y+y[I],o.z)):(h.up.set(0,p[I],0),h.position.set(o.x,o.y,o.z),h.lookAt(o.x,o.y,o.z+y[I]));const z=this._cubeSize;ph(a,L*z,I>2?z:0,z,z),v.setRenderTarget(a),M&&v.render(C,h),v.render(e,h)}v.toneMapping=S,v.autoClear=x,e.background=R}_textureToCubeUV(e,t){const n=this._renderer,a=e.mapping===Mo||e.mapping===lu;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=Xw()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Ww());const o=a?this._cubemapMaterial:this._equirectMaterial,u=this._lodMeshes[0];u.material=o;const d=o.uniforms;d.envMap.value=e;const h=this._cubeSize;ph(t,0,0,3*h,2*h),n.setRenderTarget(t),n.render(u,Vm)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const a=this._lodMeshes.length;for(let o=1;o<a;o++)this._applyGGXFilter(e,o-1,o);t.autoClear=n}_applyGGXFilter(e,t,n){const a=this._renderer,o=this._pingPongRenderTarget,u=this._ggxMaterial,d=this._lodMeshes[n];d.material=u;const h=u.uniforms,p=n/(this._lodMeshes.length-1),y=t/(this._lodMeshes.length-1),v=Math.sqrt(p*p-y*y),x=0+p*1.25,S=v*x,{_lodMax:E}=this,C=this._sizeLods[n],T=3*C*(n>E-au?n-E+au:0),M=4*(this._cubeSize-C);h.envMap.value=e.texture,h.roughness.value=S,h.mipInt.value=E-t,ph(o,T,M,3*C,2*C),a.setRenderTarget(o),a.render(d,Vm),h.envMap.value=o.texture,h.roughness.value=0,h.mipInt.value=E-n,ph(e,T,M,3*C,2*C),a.setRenderTarget(e),a.render(d,Vm)}_blur(e,t,n,a,o){const u=this._pingPongRenderTarget;this._halfBlur(e,u,t,n,a,"latitudinal",o),this._halfBlur(u,e,n,n,a,"longitudinal",o)}_halfBlur(e,t,n,a,o,u,d){const h=this._renderer,p=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&Qt("blur direction must be either latitudinal or longitudinal!");const y=3,v=this._lodMeshes[a];v.material=p;const x=p.uniforms,S=this._sizeLods[n]-1,E=isFinite(o)?Math.PI/(2*S):2*Math.PI/(2*xf-1),C=o/E,T=isFinite(o)?1+Math.floor(y*C):xf;T>xf&&Rt(`sigmaRadians, ${o}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${xf}`);const M=[];let R=0;for(let V=0;V<xf;++V){const N=V/C,O=Math.exp(-N*N/2);M.push(O),V===0?R+=O:V<T&&(R+=2*O)}for(let V=0;V<M.length;V++)M[V]=M[V]/R;x.envMap.value=e.texture,x.samples.value=T,x.weights.value=M,x.latitudinal.value=u==="latitudinal",d&&(x.poleAxis.value=d);const{_lodMax:I}=this;x.dTheta.value=E,x.mipInt.value=I-n;const L=this._sizeLods[a],z=3*L*(a>I-au?a-I+au:0),P=4*(this._cubeSize-L);ph(t,z,P,3*L,2*L),h.setRenderTarget(t),h.render(v,Vm)}}function QB(i){const e=[],t=[],n=[];let a=i;const o=i-au+1+Vw.length;for(let u=0;u<o;u++){const d=Math.pow(2,a);e.push(d);let h=1/d;u>i-au?h=Vw[u-i+au-1]:u===0&&(h=0),t.push(h);const p=1/(d-2),y=-p,v=1+p,x=[y,y,v,y,v,v,y,y,v,v,y,v],S=6,E=6,C=3,T=2,M=1,R=new Float32Array(C*E*S),I=new Float32Array(T*E*S),L=new Float32Array(M*E*S);for(let P=0;P<S;P++){const V=P%3*2/3-1,N=P>2?0:-1,O=[V,N,0,V+2/3,N,0,V+2/3,N+1,0,V,N,0,V+2/3,N+1,0,V,N+1,0];R.set(O,C*E*P),I.set(x,T*E*P);const K=[P,P,P,P,P,P];L.set(K,M*E*P)}const z=new _n;z.setAttribute("position",new hi(R,C)),z.setAttribute("uv",new hi(I,T)),z.setAttribute("faceIndex",new hi(L,M)),n.push(new Ki(z,null)),a>au&&a--}return{lodMeshes:n,sizeLods:e,sigmas:t}}function Gw(i,e,t){const n=new Ua(i,e,t);return n.texture.mapping=Zh,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function ph(i,e,t,n,a){i.viewport.set(e,t,n,a),i.scissor.set(e,t,n,a)}function JB(i,e,t){return new va({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:KB,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:C_(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 4.1: Orthonormal basis
				vec3 T1 = vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(V, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + V.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * V;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:So,depthTest:!1,depthWrite:!1})}function e5(i,e,t){const n=new Float32Array(xf),a=new Q(0,1,0);return new va({name:"SphericalGaussianBlur",defines:{n:xf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:C_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:So,depthTest:!1,depthWrite:!1})}function Ww(){return new va({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:C_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:So,depthTest:!1,depthWrite:!1})}function Xw(){return new va({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:C_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:So,depthTest:!1,depthWrite:!1})}function C_(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}class R_ extends Ua{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},a=[n,n,n,n,n,n];this.texture=new zg(a),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new Ff(5,5,5),o=new va({name:"CubemapFromEquirect",uniforms:Bh(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ma,blending:So});o.uniforms.tEquirect.value=t;const u=new Ki(a,o),d=t.minFilter;return t.minFilter===cl&&(t.minFilter=jn),new N3(1,10,this).update(e,u),t.minFilter=d,u.geometry.dispose(),u.material.dispose(),this}clear(e,t=!0,n=!0,a=!0){const o=e.getRenderTarget();for(let u=0;u<6;u++)e.setRenderTarget(this,u),e.clear(t,n,a);e.setRenderTarget(o)}}function t5(i){let e=new WeakMap,t=new WeakMap,n=null;function a(x,S=!1){return x==null?null:S?u(x):o(x)}function o(x){if(x&&x.isTexture){const S=x.mapping;if(S===Th||S===$m)if(e.has(x)){const E=e.get(x).texture;return d(E,x.mapping)}else{const E=x.image;if(E&&E.height>0){const C=new R_(E.height);return C.fromEquirectangularTexture(i,x),e.set(x,C),x.addEventListener("dispose",p),d(C.texture,x.mapping)}else return null}}return x}function u(x){if(x&&x.isTexture){const S=x.mapping,E=S===Th||S===$m,C=S===Mo||S===lu;if(E||C){let T=t.get(x);const M=T!==void 0?T.texture.pmremVersion:0;if(x.isRenderTargetTexture&&x.pmremVersion!==M)return n===null&&(n=new a1(i)),T=E?n.fromEquirectangular(x,T):n.fromCubemap(x,T),T.texture.pmremVersion=x.pmremVersion,t.set(x,T),T.texture;if(T!==void 0)return T.texture;{const R=x.image;return E&&R&&R.height>0||C&&R&&h(R)?(n===null&&(n=new a1(i)),T=E?n.fromEquirectangular(x):n.fromCubemap(x),T.texture.pmremVersion=x.pmremVersion,t.set(x,T),x.addEventListener("dispose",y),T.texture):null}}}return x}function d(x,S){return S===Th?x.mapping=Mo:S===$m&&(x.mapping=lu),x}function h(x){let S=0;const E=6;for(let C=0;C<E;C++)x[C]!==void 0&&S++;return S===E}function p(x){const S=x.target;S.removeEventListener("dispose",p);const E=e.get(S);E!==void 0&&(e.delete(S),E.dispose())}function y(x){const S=x.target;S.removeEventListener("dispose",y);const E=t.get(S);E!==void 0&&(t.delete(S),E.dispose())}function v(){e=new WeakMap,t=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:a,dispose:v}}function n5(i){const e={};function t(n){if(e[n]!==void 0)return e[n];const a=i.getExtension(n);return e[n]=a,a}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const a=t(n);return a===null&&mg("WebGLRenderer: "+n+" extension not supported."),a}}}function i5(i,e,t,n){const a={},o=new WeakMap;function u(v){const x=v.target;x.index!==null&&e.remove(x.index);for(const E in x.attributes)e.remove(x.attributes[E]);x.removeEventListener("dispose",u),delete a[x.id];const S=o.get(x);S&&(e.remove(S),o.delete(x)),n.releaseStatesOfGeometry(x),x.isInstancedBufferGeometry===!0&&delete x._maxInstanceCount,t.memory.geometries--}function d(v,x){return a[x.id]===!0||(x.addEventListener("dispose",u),a[x.id]=!0,t.memory.geometries++),x}function h(v){const x=v.attributes;for(const S in x)e.update(x[S],i.ARRAY_BUFFER)}function p(v){const x=[],S=v.index,E=v.attributes.position;let C=0;if(E===void 0)return;if(S!==null){const R=S.array;C=S.version;for(let I=0,L=R.length;I<L;I+=3){const z=R[I+0],P=R[I+1],V=R[I+2];x.push(z,P,P,V,V,z)}}else{const R=E.array;C=E.version;for(let I=0,L=R.length/3-1;I<L;I+=3){const z=I+0,P=I+1,V=I+2;x.push(z,P,P,V,V,z)}}const T=new(E.count>=65535?F1:z1)(x,1);T.version=C;const M=o.get(v);M&&e.remove(M),o.set(v,T)}function y(v){const x=o.get(v);if(x){const S=v.index;S!==null&&x.version<S.version&&p(v)}else p(v);return o.get(v)}return{get:d,update:h,getWireframeAttribute:y}}function r5(i,e,t){let n;function a(x){n=x}let o,u;function d(x){o=x.type,u=x.bytesPerElement}function h(x,S){i.drawElements(n,S,o,x*u),t.update(S,n,1)}function p(x,S,E){E!==0&&(i.drawElementsInstanced(n,S,o,x*u,E),t.update(S,n,E))}function y(x,S,E){if(E===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,S,0,o,x,0,E);let T=0;for(let M=0;M<E;M++)T+=S[M];t.update(T,n,1)}function v(x,S,E,C){if(E===0)return;const T=e.get("WEBGL_multi_draw");if(T===null)for(let M=0;M<x.length;M++)p(x[M]/u,S[M],C[M]);else{T.multiDrawElementsInstancedWEBGL(n,S,0,o,x,0,C,0,E);let M=0;for(let R=0;R<E;R++)M+=S[R]*C[R];t.update(M,n,1)}}this.setMode=a,this.setIndex=d,this.render=h,this.renderInstances=p,this.renderMultiDraw=y,this.renderMultiDrawInstances=v}function a5(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(o,u,d){switch(t.calls++,u){case i.TRIANGLES:t.triangles+=d*(o/3);break;case i.LINES:t.lines+=d*(o/2);break;case i.LINE_STRIP:t.lines+=d*(o-1);break;case i.LINE_LOOP:t.lines+=d*o;break;case i.POINTS:t.points+=d*o;break;default:Qt("WebGLInfo: Unknown draw mode:",u);break}}function a(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:a,update:n}}function s5(i,e,t){const n=new WeakMap,a=new vi;function o(u,d,h){const p=u.morphTargetInfluences,y=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,v=y!==void 0?y.length:0;let x=n.get(d);if(x===void 0||x.count!==v){let K=function(){N.dispose(),n.delete(d),d.removeEventListener("dispose",K)};var S=K;x!==void 0&&x.texture.dispose();const E=d.morphAttributes.position!==void 0,C=d.morphAttributes.normal!==void 0,T=d.morphAttributes.color!==void 0,M=d.morphAttributes.position||[],R=d.morphAttributes.normal||[],I=d.morphAttributes.color||[];let L=0;E===!0&&(L=1),C===!0&&(L=2),T===!0&&(L=3);let z=d.attributes.position.count*L,P=1;z>e.maxTextureSize&&(P=Math.ceil(z/e.maxTextureSize),z=e.maxTextureSize);const V=new Float32Array(z*P*4*v),N=new i_(V,z,P,v);N.type=Vi,N.needsUpdate=!0;const O=L*4;for(let H=0;H<v;H++){const te=M[H],ee=R[H],ae=I[H],se=z*P*4*H;for(let G=0;G<te.count;G++){const $=G*O;E===!0&&(a.fromBufferAttribute(te,G),V[se+$+0]=a.x,V[se+$+1]=a.y,V[se+$+2]=a.z,V[se+$+3]=0),C===!0&&(a.fromBufferAttribute(ee,G),V[se+$+4]=a.x,V[se+$+5]=a.y,V[se+$+6]=a.z,V[se+$+7]=0),T===!0&&(a.fromBufferAttribute(ae,G),V[se+$+8]=a.x,V[se+$+9]=a.y,V[se+$+10]=a.z,V[se+$+11]=ae.itemSize===4?a.w:1)}}x={count:v,texture:N,size:new Ze(z,P)},n.set(d,x),d.addEventListener("dispose",K)}if(u.isInstancedMesh===!0&&u.morphTexture!==null)h.getUniforms().setValue(i,"morphTexture",u.morphTexture,t);else{let E=0;for(let T=0;T<p.length;T++)E+=p[T];const C=d.morphTargetsRelative?1:1-E;h.getUniforms().setValue(i,"morphTargetBaseInfluence",C),h.getUniforms().setValue(i,"morphTargetInfluences",p)}h.getUniforms().setValue(i,"morphTargetsTexture",x.texture,t),h.getUniforms().setValue(i,"morphTargetsTextureSize",x.size)}return{update:o}}function o5(i,e,t,n,a){let o=new WeakMap;function u(p){const y=a.render.frame,v=p.geometry,x=e.get(p,v);if(o.get(x)!==y&&(e.update(x),o.set(x,y)),p.isInstancedMesh&&(p.hasEventListener("dispose",h)===!1&&p.addEventListener("dispose",h),o.get(p)!==y&&(t.update(p.instanceMatrix,i.ARRAY_BUFFER),p.instanceColor!==null&&t.update(p.instanceColor,i.ARRAY_BUFFER),o.set(p,y))),p.isSkinnedMesh){const S=p.skeleton;o.get(S)!==y&&(S.update(),o.set(S,y))}return x}function d(){o=new WeakMap}function h(p){const y=p.target;y.removeEventListener("dispose",h),n.releaseStatesOfObject(y),t.remove(y.instanceMatrix),y.instanceColor!==null&&t.remove(y.instanceColor)}return{update:u,dispose:d}}const l5={[M1]:"LINEAR_TONE_MAPPING",[E1]:"REINHARD_TONE_MAPPING",[w1]:"CINEON_TONE_MAPPING",[qx]:"ACES_FILMIC_TONE_MAPPING",[A1]:"AGX_TONE_MAPPING",[C1]:"NEUTRAL_TONE_MAPPING",[T1]:"CUSTOM_TONE_MAPPING"};function c5(i,e,t,n,a){const o=new Ua(e,t,{type:i,depthBuffer:n,stencilBuffer:a}),u=new Ua(e,t,{type:ir,depthBuffer:!1,stencilBuffer:!1}),d=new _n;d.setAttribute("position",new Vt([-1,3,0,-1,-1,0,3,-1,0],3)),d.setAttribute("uv",new Vt([0,2,0,0,2,0],2));const h=new K1({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),p=new Ki(d,h),y=new fl(-1,1,1,-1,0,1);let v=null,x=null,S=!1,E,C=null,T=[],M=!1;this.setSize=function(R,I){o.setSize(R,I),u.setSize(R,I);for(let L=0;L<T.length;L++){const z=T[L];z.setSize&&z.setSize(R,I)}},this.setEffects=function(R){T=R,M=T.length>0&&T[0].isRenderPass===!0;const I=o.width,L=o.height;for(let z=0;z<T.length;z++){const P=T[z];P.setSize&&P.setSize(I,L)}},this.begin=function(R,I){if(S||R.toneMapping===qs&&T.length===0)return!1;if(C=I,I!==null){const L=I.width,z=I.height;(o.width!==L||o.height!==z)&&this.setSize(L,z)}return M===!1&&R.setRenderTarget(o),E=R.toneMapping,R.toneMapping=qs,!0},this.hasRenderPass=function(){return M},this.end=function(R,I){R.toneMapping=E,S=!0;let L=o,z=u;for(let P=0;P<T.length;P++){const V=T[P];if(V.enabled!==!1&&(V.render(R,z,L,I),V.needsSwap!==!1)){const N=L;L=z,z=N}}if(v!==R.outputColorSpace||x!==R.toneMapping){v=R.outputColorSpace,x=R.toneMapping,h.defines={},Gn.getTransfer(v)===si&&(h.defines.SRGB_TRANSFER="");const P=l5[x];P&&(h.defines[P]=""),h.needsUpdate=!0}h.uniforms.tDiffuse.value=L.texture,R.setRenderTarget(C),R.render(p,y),C=null,S=!1},this.isCompositing=function(){return S},this.dispose=function(){o.dispose(),u.dispose(),d.dispose(),h.dispose()}}const B3=new di,s1=new zh(1,1),k3=new i_,V3=new r_,H3=new zg,jw=[],qw=[],Yw=new Float32Array(16),Zw=new Float32Array(9),Kw=new Float32Array(4);function Qh(i,e,t){const n=i[0];if(n<=0||n>0)return i;const a=e*t;let o=jw[a];if(o===void 0&&(o=new Float32Array(a),jw[a]=o),e!==0){n.toArray(o,0);for(let u=1,d=0;u!==e;++u)d+=t,i[u].toArray(o,d)}return o}function Cr(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Rr(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function N_(i,e){let t=qw[e];t===void 0&&(t=new Int32Array(e),qw[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function u5(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function f5(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Cr(t,e))return;i.uniform2fv(this.addr,e),Rr(t,e)}}function d5(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Cr(t,e))return;i.uniform3fv(this.addr,e),Rr(t,e)}}function h5(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Cr(t,e))return;i.uniform4fv(this.addr,e),Rr(t,e)}}function p5(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Cr(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Rr(t,e)}else{if(Cr(t,n))return;Kw.set(n),i.uniformMatrix2fv(this.addr,!1,Kw),Rr(t,n)}}function m5(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Cr(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Rr(t,e)}else{if(Cr(t,n))return;Zw.set(n),i.uniformMatrix3fv(this.addr,!1,Zw),Rr(t,n)}}function g5(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Cr(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Rr(t,e)}else{if(Cr(t,n))return;Yw.set(n),i.uniformMatrix4fv(this.addr,!1,Yw),Rr(t,n)}}function v5(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function y5(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Cr(t,e))return;i.uniform2iv(this.addr,e),Rr(t,e)}}function x5(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Cr(t,e))return;i.uniform3iv(this.addr,e),Rr(t,e)}}function _5(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Cr(t,e))return;i.uniform4iv(this.addr,e),Rr(t,e)}}function b5(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function S5(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Cr(t,e))return;i.uniform2uiv(this.addr,e),Rr(t,e)}}function M5(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Cr(t,e))return;i.uniform3uiv(this.addr,e),Rr(t,e)}}function E5(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Cr(t,e))return;i.uniform4uiv(this.addr,e),Rr(t,e)}}function w5(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a);let o;this.type===i.SAMPLER_2D_SHADOW?(s1.compareFunction=t.isReversedDepthBuffer()?n_:t_,o=s1):o=B3,t.setTexture2D(e||o,a)}function T5(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),t.setTexture3D(e||V3,a)}function A5(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),t.setTextureCube(e||H3,a)}function C5(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),t.setTexture2DArray(e||k3,a)}function R5(i){switch(i){case 5126:return u5;case 35664:return f5;case 35665:return d5;case 35666:return h5;case 35674:return p5;case 35675:return m5;case 35676:return g5;case 5124:case 35670:return v5;case 35667:case 35671:return y5;case 35668:case 35672:return x5;case 35669:case 35673:return _5;case 5125:return b5;case 36294:return S5;case 36295:return M5;case 36296:return E5;case 35678:case 36198:case 36298:case 36306:case 35682:return w5;case 35679:case 36299:case 36307:return T5;case 35680:case 36300:case 36308:case 36293:return A5;case 36289:case 36303:case 36311:case 36292:return C5}}function N5(i,e){i.uniform1fv(this.addr,e)}function D5(i,e){const t=Qh(e,this.size,2);i.uniform2fv(this.addr,t)}function I5(i,e){const t=Qh(e,this.size,3);i.uniform3fv(this.addr,t)}function L5(i,e){const t=Qh(e,this.size,4);i.uniform4fv(this.addr,t)}function U5(i,e){const t=Qh(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function O5(i,e){const t=Qh(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function P5(i,e){const t=Qh(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function z5(i,e){i.uniform1iv(this.addr,e)}function F5(i,e){i.uniform2iv(this.addr,e)}function B5(i,e){i.uniform3iv(this.addr,e)}function k5(i,e){i.uniform4iv(this.addr,e)}function V5(i,e){i.uniform1uiv(this.addr,e)}function H5(i,e){i.uniform2uiv(this.addr,e)}function G5(i,e){i.uniform3uiv(this.addr,e)}function W5(i,e){i.uniform4uiv(this.addr,e)}function X5(i,e,t){const n=this.cache,a=e.length,o=N_(t,a);Cr(n,o)||(i.uniform1iv(this.addr,o),Rr(n,o));let u;this.type===i.SAMPLER_2D_SHADOW?u=s1:u=B3;for(let d=0;d!==a;++d)t.setTexture2D(e[d]||u,o[d])}function j5(i,e,t){const n=this.cache,a=e.length,o=N_(t,a);Cr(n,o)||(i.uniform1iv(this.addr,o),Rr(n,o));for(let u=0;u!==a;++u)t.setTexture3D(e[u]||V3,o[u])}function q5(i,e,t){const n=this.cache,a=e.length,o=N_(t,a);Cr(n,o)||(i.uniform1iv(this.addr,o),Rr(n,o));for(let u=0;u!==a;++u)t.setTextureCube(e[u]||H3,o[u])}function Y5(i,e,t){const n=this.cache,a=e.length,o=N_(t,a);Cr(n,o)||(i.uniform1iv(this.addr,o),Rr(n,o));for(let u=0;u!==a;++u)t.setTexture2DArray(e[u]||k3,o[u])}function Z5(i){switch(i){case 5126:return N5;case 35664:return D5;case 35665:return I5;case 35666:return L5;case 35674:return U5;case 35675:return O5;case 35676:return P5;case 5124:case 35670:return z5;case 35667:case 35671:return F5;case 35668:case 35672:return B5;case 35669:case 35673:return k5;case 5125:return V5;case 36294:return H5;case 36295:return G5;case 36296:return W5;case 35678:case 36198:case 36298:case 36306:case 35682:return X5;case 35679:case 36299:case 36307:return j5;case 35680:case 36300:case 36308:case 36293:return q5;case 36289:case 36303:case 36311:case 36292:return Y5}}class K5{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=R5(t.type)}}class $5{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Z5(t.type)}}class Q5{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const a=this.seq;for(let o=0,u=a.length;o!==u;++o){const d=a[o];d.setValue(e,t[d.id],n)}}}const hS=/(\w+)(\])?(\[|\.)?/g;function $w(i,e){i.seq.push(e),i.map[e.id]=e}function J5(i,e,t){const n=i.name,a=n.length;for(hS.lastIndex=0;;){const o=hS.exec(n),u=hS.lastIndex;let d=o[1];const h=o[2]==="]",p=o[3];if(h&&(d=d|0),p===void 0||p==="["&&u+2===a){$w(t,p===void 0?new K5(d,i,e):new $5(d,i,e));break}else{let v=t.map[d];v===void 0&&(v=new Q5(d),$w(t,v)),t=v}}}class Fy{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let u=0;u<n;++u){const d=e.getActiveUniform(t,u),h=e.getUniformLocation(t,d.name);J5(d,h,this)}const a=[],o=[];for(const u of this.seq)u.type===e.SAMPLER_2D_SHADOW||u.type===e.SAMPLER_CUBE_SHADOW||u.type===e.SAMPLER_2D_ARRAY_SHADOW?a.push(u):o.push(u);a.length>0&&(this.seq=a.concat(o))}setValue(e,t,n,a){const o=this.map[t];o!==void 0&&o.setValue(e,n,a)}setOptional(e,t,n){const a=t[n];a!==void 0&&this.setValue(e,n,a)}static upload(e,t,n,a){for(let o=0,u=t.length;o!==u;++o){const d=t[o],h=n[d.id];h.needsUpdate!==!1&&d.setValue(e,h.value,a)}}static seqWithValue(e,t){const n=[];for(let a=0,o=e.length;a!==o;++a){const u=e[a];u.id in t&&n.push(u)}return n}}function Qw(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const ek=37297;let tk=0;function nk(i,e){const t=i.split(`
`),n=[],a=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let u=a;u<o;u++){const d=u+1;n.push(`${d===e?">":" "} ${d}: ${t[u]}`)}return n.join(`
`)}const Jw=new Sn;function ik(i){Gn._getMatrix(Jw,Gn.workingColorSpace,i);const e=`mat3( ${Jw.elements.map(t=>t.toFixed(4))} )`;switch(Gn.getTransfer(i)){case fg:return[e,"LinearTransferOETF"];case si:return[e,"sRGBTransferOETF"];default:return Rt("WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function eT(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),o=(i.getShaderInfoLog(e)||"").trim();if(n&&o==="")return"";const u=/ERROR: 0:(\d+)/.exec(o);if(u){const d=parseInt(u[1]);return t.toUpperCase()+`

`+o+`

`+nk(i.getShaderSource(e),d)}else return o}function rk(i,e){const t=ik(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const ak={[M1]:"Linear",[E1]:"Reinhard",[w1]:"Cineon",[qx]:"ACESFilmic",[A1]:"AgX",[C1]:"Neutral",[T1]:"Custom"};function sk(i,e){const t=ak[e];return t===void 0?(Rt("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+i+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Ty=new Q;function ok(){Gn.getLuminanceCoefficients(Ty);const i=Ty.x.toFixed(4),e=Ty.y.toFixed(4),t=Ty.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function lk(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Ym).join(`
`)}function ck(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function uk(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let a=0;a<n;a++){const o=i.getActiveAttrib(e,a),u=o.name;let d=1;o.type===i.FLOAT_MAT2&&(d=2),o.type===i.FLOAT_MAT3&&(d=3),o.type===i.FLOAT_MAT4&&(d=4),t[u]={type:o.type,location:i.getAttribLocation(e,u),locationSize:d}}return t}function Ym(i){return i!==""}function tT(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function nT(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const fk=/^[ \t]*#include +<([\w\d./]+)>/gm;function o1(i){return i.replace(fk,hk)}const dk=new Map;function hk(i,e){let t=Cn[e];if(t===void 0){const n=dk.get(e);if(n!==void 0)t=Cn[n],Rt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return o1(t)}const pk=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function iT(i){return i.replace(pk,mk)}function mk(i,e,t,n){let a="";for(let o=parseInt(e);o<parseInt(t);o++)a+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return a}function rT(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const gk={[wh]:"SHADOWMAP_TYPE_PCF",[_f]:"SHADOWMAP_TYPE_VSM"};function vk(i){return gk[i.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const yk={[Mo]:"ENVMAP_TYPE_CUBE",[lu]:"ENVMAP_TYPE_CUBE",[Zh]:"ENVMAP_TYPE_CUBE_UV"};function xk(i){return i.envMap===!1?"ENVMAP_TYPE_CUBE":yk[i.envMapMode]||"ENVMAP_TYPE_CUBE"}const _k={[lu]:"ENVMAP_MODE_REFRACTION"};function bk(i){return i.envMap===!1?"ENVMAP_MODE_REFLECTION":_k[i.envMapMode]||"ENVMAP_MODE_REFLECTION"}const Sk={[Ig]:"ENVMAP_BLENDING_MULTIPLY",[vC]:"ENVMAP_BLENDING_MIX",[yC]:"ENVMAP_BLENDING_ADD"};function Mk(i){return i.envMap===!1?"ENVMAP_BLENDING_NONE":Sk[i.combine]||"ENVMAP_BLENDING_NONE"}function Ek(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function wk(i,e,t,n){const a=i.getContext(),o=t.defines;let u=t.vertexShader,d=t.fragmentShader;const h=vk(t),p=xk(t),y=bk(t),v=Mk(t),x=Ek(t),S=lk(t),E=ck(o),C=a.createProgram();let T,M,R=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E].filter(Ym).join(`
`),T.length>0&&(T+=`
`),M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E].filter(Ym).join(`
`),M.length>0&&(M+=`
`)):(T=[rT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+y:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ym).join(`
`),M=[rT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+y:"",t.envMap?"#define "+v:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas||t.batchingColor?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==qs?"#define TONE_MAPPING":"",t.toneMapping!==qs?Cn.tonemapping_pars_fragment:"",t.toneMapping!==qs?sk("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Cn.colorspace_pars_fragment,rk("linearToOutputTexel",t.outputColorSpace),ok(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ym).join(`
`)),u=o1(u),u=tT(u,t),u=nT(u,t),d=o1(d),d=tT(d,t),d=nT(d,t),u=iT(u),d=iT(d),t.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,T=[S,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,M=["#define varying in",t.glslVersion===KS?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===KS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const I=R+T+u,L=R+M+d,z=Qw(a,a.VERTEX_SHADER,I),P=Qw(a,a.FRAGMENT_SHADER,L);a.attachShader(C,z),a.attachShader(C,P),t.index0AttributeName!==void 0?a.bindAttribLocation(C,0,t.index0AttributeName):t.morphTargets===!0&&a.bindAttribLocation(C,0,"position"),a.linkProgram(C);function V(H){if(i.debug.checkShaderErrors){const te=a.getProgramInfoLog(C)||"",ee=a.getShaderInfoLog(z)||"",ae=a.getShaderInfoLog(P)||"",se=te.trim(),G=ee.trim(),$=ae.trim();let le=!0,be=!0;if(a.getProgramParameter(C,a.LINK_STATUS)===!1)if(le=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(a,C,z,P);else{const Ae=eT(a,z,"vertex"),Y=eT(a,P,"fragment");Qt("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(C,a.VALIDATE_STATUS)+`

Material Name: `+H.name+`
Material Type: `+H.type+`

Program Info Log: `+se+`
`+Ae+`
`+Y)}else se!==""?Rt("WebGLProgram: Program Info Log:",se):(G===""||$==="")&&(be=!1);be&&(H.diagnostics={runnable:le,programLog:se,vertexShader:{log:G,prefix:T},fragmentShader:{log:$,prefix:M}})}a.deleteShader(z),a.deleteShader(P),N=new Fy(a,C),O=uk(a,C)}let N;this.getUniforms=function(){return N===void 0&&V(this),N};let O;this.getAttributes=function(){return O===void 0&&V(this),O};let K=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return K===!1&&(K=a.getProgramParameter(C,ek)),K},this.destroy=function(){n.releaseStatesOfProgram(this),a.deleteProgram(C),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=tk++,this.cacheKey=e,this.usedTimes=1,this.program=C,this.vertexShader=z,this.fragmentShader=P,this}let Tk=0;class Ak{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,a=this._getShaderStage(t),o=this._getShaderStage(n),u=this._getShaderCacheForMaterial(e);return u.has(a)===!1&&(u.add(a),a.usedTimes++),u.has(o)===!1&&(u.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new Ck(e),t.set(e,n)),n}}class Ck{constructor(e){this.id=Tk++,this.code=e,this.usedTimes=0}}function Rk(i,e,t,n,a,o){const u=new Oh,d=new Ak,h=new Set,p=[],y=new Map,v=n.logarithmicDepthBuffer;let x=n.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(N){return h.add(N),N===0?"uv":`uv${N}`}function C(N,O,K,H,te){const ee=H.fog,ae=te.geometry,se=N.isMeshStandardMaterial||N.isMeshLambertMaterial||N.isMeshPhongMaterial?H.environment:null,G=N.isMeshStandardMaterial||N.isMeshLambertMaterial&&!N.envMap||N.isMeshPhongMaterial&&!N.envMap,$=e.get(N.envMap||se,G),le=$&&$.mapping===Zh?$.image.height:null,be=S[N.type];N.precision!==null&&(x=n.getMaxPrecision(N.precision),x!==N.precision&&Rt("WebGLProgram.getParameters:",N.precision,"not supported, using",x,"instead."));const Ae=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,Y=Ae!==void 0?Ae.length:0;let re=0;ae.morphAttributes.position!==void 0&&(re=1),ae.morphAttributes.normal!==void 0&&(re=2),ae.morphAttributes.color!==void 0&&(re=3);let me,Te,Ke,he;if(be){const cn=xo[be];me=cn.vertexShader,Te=cn.fragmentShader}else me=N.vertexShader,Te=N.fragmentShader,d.update(N),Ke=d.getVertexShaderID(N),he=d.getFragmentShaderID(N);const De=i.getRenderTarget(),ze=i.state.buffers.depth.getReversed(),pt=te.isInstancedMesh===!0,It=te.isBatchedMesh===!0,zt=!!N.map,Jt=!!N.matcap,jt=!!$,He=!!N.aoMap,nt=!!N.lightMap,Xe=!!N.bumpMap,mt=!!N.normalMap,ne=!!N.displacementMap,Lt=!!N.emissiveMap,wt=!!N.metalnessMap,kt=!!N.roughnessMap,Je=N.anisotropy>0,Z=N.clearcoat>0,F=N.dispersion>0,ye=N.iridescence>0,Ue=N.sheen>0,je=N.transmission>0,Oe=Je&&!!N.anisotropyMap,Mt=Z&&!!N.clearcoatMap,ct=Z&&!!N.clearcoatNormalMap,Ft=Z&&!!N.clearcoatRoughnessMap,Bt=ye&&!!N.iridescenceMap,Qe=ye&&!!N.iridescenceThicknessMap,qe=Ue&&!!N.sheenColorMap,Tt=Ue&&!!N.sheenRoughnessMap,ie=!!N.specularMap,we=!!N.specularColorMap,tt=!!N.specularIntensityMap,oe=je&&!!N.transmissionMap,Me=je&&!!N.thicknessMap,et=!!N.gradientMap,St=!!N.alphaMap,rt=N.alphaTest>0,_e=!!N.alphaHash,ft=!!N.extensions;let Nt=qs;N.toneMapped&&(De===null||De.isXRRenderTarget===!0)&&(Nt=i.toneMapping);const Kt={shaderID:be,shaderType:N.type,shaderName:N.name,vertexShader:me,fragmentShader:Te,defines:N.defines,customVertexShaderID:Ke,customFragmentShaderID:he,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:x,batching:It,batchingColor:It&&te._colorsTexture!==null,instancing:pt,instancingColor:pt&&te.instanceColor!==null,instancingMorph:pt&&te.morphTexture!==null,outputColorSpace:De===null?i.outputColorSpace:De.isXRRenderTarget===!0?De.texture.colorSpace:Eo,alphaToCoverage:!!N.alphaToCoverage,map:zt,matcap:Jt,envMap:jt,envMapMode:jt&&$.mapping,envMapCubeUVHeight:le,aoMap:He,lightMap:nt,bumpMap:Xe,normalMap:mt,displacementMap:ne,emissiveMap:Lt,normalMapObjectSpace:mt&&N.normalMapType===EC,normalMapTangentSpace:mt&&N.normalMapType===fu,metalnessMap:wt,roughnessMap:kt,anisotropy:Je,anisotropyMap:Oe,clearcoat:Z,clearcoatMap:Mt,clearcoatNormalMap:ct,clearcoatRoughnessMap:Ft,dispersion:F,iridescence:ye,iridescenceMap:Bt,iridescenceThicknessMap:Qe,sheen:Ue,sheenColorMap:qe,sheenRoughnessMap:Tt,specularMap:ie,specularColorMap:we,specularIntensityMap:tt,transmission:je,transmissionMap:oe,thicknessMap:Me,gradientMap:et,opaque:N.transparent===!1&&N.blending===Tf&&N.alphaToCoverage===!1,alphaMap:St,alphaTest:rt,alphaHash:_e,combine:N.combine,mapUv:zt&&E(N.map.channel),aoMapUv:He&&E(N.aoMap.channel),lightMapUv:nt&&E(N.lightMap.channel),bumpMapUv:Xe&&E(N.bumpMap.channel),normalMapUv:mt&&E(N.normalMap.channel),displacementMapUv:ne&&E(N.displacementMap.channel),emissiveMapUv:Lt&&E(N.emissiveMap.channel),metalnessMapUv:wt&&E(N.metalnessMap.channel),roughnessMapUv:kt&&E(N.roughnessMap.channel),anisotropyMapUv:Oe&&E(N.anisotropyMap.channel),clearcoatMapUv:Mt&&E(N.clearcoatMap.channel),clearcoatNormalMapUv:ct&&E(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ft&&E(N.clearcoatRoughnessMap.channel),iridescenceMapUv:Bt&&E(N.iridescenceMap.channel),iridescenceThicknessMapUv:Qe&&E(N.iridescenceThicknessMap.channel),sheenColorMapUv:qe&&E(N.sheenColorMap.channel),sheenRoughnessMapUv:Tt&&E(N.sheenRoughnessMap.channel),specularMapUv:ie&&E(N.specularMap.channel),specularColorMapUv:we&&E(N.specularColorMap.channel),specularIntensityMapUv:tt&&E(N.specularIntensityMap.channel),transmissionMapUv:oe&&E(N.transmissionMap.channel),thicknessMapUv:Me&&E(N.thicknessMap.channel),alphaMapUv:St&&E(N.alphaMap.channel),vertexTangents:!!ae.attributes.tangent&&(mt||Je),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,pointsUvs:te.isPoints===!0&&!!ae.attributes.uv&&(zt||St),fog:!!ee,useFog:N.fog===!0,fogExp2:!!ee&&ee.isFogExp2,flatShading:N.wireframe===!1&&(N.flatShading===!0||ae.attributes.normal===void 0&&mt===!1&&(N.isMeshLambertMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.isMeshPhysicalMaterial)),sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:v,reversedDepthBuffer:ze,skinning:te.isSkinnedMesh===!0,morphTargets:ae.morphAttributes.position!==void 0,morphNormals:ae.morphAttributes.normal!==void 0,morphColors:ae.morphAttributes.color!==void 0,morphTargetsCount:Y,morphTextureStride:re,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:N.dithering,shadowMapEnabled:i.shadowMap.enabled&&K.length>0,shadowMapType:i.shadowMap.type,toneMapping:Nt,decodeVideoTexture:zt&&N.map.isVideoTexture===!0&&Gn.getTransfer(N.map.colorSpace)===si,decodeVideoTextureEmissive:Lt&&N.emissiveMap.isVideoTexture===!0&&Gn.getTransfer(N.emissiveMap.colorSpace)===si,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===_o,flipSided:N.side===ma,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionClipCullDistance:ft&&N.extensions.clipCullDistance===!0&&t.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ft&&N.extensions.multiDraw===!0||It)&&t.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:t.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return Kt.vertexUv1s=h.has(1),Kt.vertexUv2s=h.has(2),Kt.vertexUv3s=h.has(3),h.clear(),Kt}function T(N){const O=[];if(N.shaderID?O.push(N.shaderID):(O.push(N.customVertexShaderID),O.push(N.customFragmentShaderID)),N.defines!==void 0)for(const K in N.defines)O.push(K),O.push(N.defines[K]);return N.isRawShaderMaterial===!1&&(M(O,N),R(O,N),O.push(i.outputColorSpace)),O.push(N.customProgramCacheKey),O.join()}function M(N,O){N.push(O.precision),N.push(O.outputColorSpace),N.push(O.envMapMode),N.push(O.envMapCubeUVHeight),N.push(O.mapUv),N.push(O.alphaMapUv),N.push(O.lightMapUv),N.push(O.aoMapUv),N.push(O.bumpMapUv),N.push(O.normalMapUv),N.push(O.displacementMapUv),N.push(O.emissiveMapUv),N.push(O.metalnessMapUv),N.push(O.roughnessMapUv),N.push(O.anisotropyMapUv),N.push(O.clearcoatMapUv),N.push(O.clearcoatNormalMapUv),N.push(O.clearcoatRoughnessMapUv),N.push(O.iridescenceMapUv),N.push(O.iridescenceThicknessMapUv),N.push(O.sheenColorMapUv),N.push(O.sheenRoughnessMapUv),N.push(O.specularMapUv),N.push(O.specularColorMapUv),N.push(O.specularIntensityMapUv),N.push(O.transmissionMapUv),N.push(O.thicknessMapUv),N.push(O.combine),N.push(O.fogExp2),N.push(O.sizeAttenuation),N.push(O.morphTargetsCount),N.push(O.morphAttributeCount),N.push(O.numDirLights),N.push(O.numPointLights),N.push(O.numSpotLights),N.push(O.numSpotLightMaps),N.push(O.numHemiLights),N.push(O.numRectAreaLights),N.push(O.numDirLightShadows),N.push(O.numPointLightShadows),N.push(O.numSpotLightShadows),N.push(O.numSpotLightShadowsWithMaps),N.push(O.numLightProbes),N.push(O.shadowMapType),N.push(O.toneMapping),N.push(O.numClippingPlanes),N.push(O.numClipIntersection),N.push(O.depthPacking)}function R(N,O){u.disableAll(),O.instancing&&u.enable(0),O.instancingColor&&u.enable(1),O.instancingMorph&&u.enable(2),O.matcap&&u.enable(3),O.envMap&&u.enable(4),O.normalMapObjectSpace&&u.enable(5),O.normalMapTangentSpace&&u.enable(6),O.clearcoat&&u.enable(7),O.iridescence&&u.enable(8),O.alphaTest&&u.enable(9),O.vertexColors&&u.enable(10),O.vertexAlphas&&u.enable(11),O.vertexUv1s&&u.enable(12),O.vertexUv2s&&u.enable(13),O.vertexUv3s&&u.enable(14),O.vertexTangents&&u.enable(15),O.anisotropy&&u.enable(16),O.alphaHash&&u.enable(17),O.batching&&u.enable(18),O.dispersion&&u.enable(19),O.batchingColor&&u.enable(20),O.gradientMap&&u.enable(21),N.push(u.mask),u.disableAll(),O.fog&&u.enable(0),O.useFog&&u.enable(1),O.flatShading&&u.enable(2),O.logarithmicDepthBuffer&&u.enable(3),O.reversedDepthBuffer&&u.enable(4),O.skinning&&u.enable(5),O.morphTargets&&u.enable(6),O.morphNormals&&u.enable(7),O.morphColors&&u.enable(8),O.premultipliedAlpha&&u.enable(9),O.shadowMapEnabled&&u.enable(10),O.doubleSided&&u.enable(11),O.flipSided&&u.enable(12),O.useDepthPacking&&u.enable(13),O.dithering&&u.enable(14),O.transmission&&u.enable(15),O.sheen&&u.enable(16),O.opaque&&u.enable(17),O.pointsUvs&&u.enable(18),O.decodeVideoTexture&&u.enable(19),O.decodeVideoTextureEmissive&&u.enable(20),O.alphaToCoverage&&u.enable(21),N.push(u.mask)}function I(N){const O=S[N.type];let K;if(O){const H=xo[O];K=Z1.clone(H.uniforms)}else K=N.uniforms;return K}function L(N,O){let K=y.get(O);return K!==void 0?++K.usedTimes:(K=new wk(i,O,N,a),p.push(K),y.set(O,K)),K}function z(N){if(--N.usedTimes===0){const O=p.indexOf(N);p[O]=p[p.length-1],p.pop(),y.delete(N.cacheKey),N.destroy()}}function P(N){d.remove(N)}function V(){d.dispose()}return{getParameters:C,getProgramCacheKey:T,getUniforms:I,acquireProgram:L,releaseProgram:z,releaseShaderCache:P,programs:p,dispose:V}}function Nk(){let i=new WeakMap;function e(u){return i.has(u)}function t(u){let d=i.get(u);return d===void 0&&(d={},i.set(u,d)),d}function n(u){i.delete(u)}function a(u,d,h){i.get(u)[d]=h}function o(){i=new WeakMap}return{has:e,get:t,remove:n,update:a,dispose:o}}function Dk(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.materialVariant!==e.materialVariant?i.materialVariant-e.materialVariant:i.z!==e.z?i.z-e.z:i.id-e.id}function aT(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function sT(){const i=[];let e=0;const t=[],n=[],a=[];function o(){e=0,t.length=0,n.length=0,a.length=0}function u(x){let S=0;return x.isInstancedMesh&&(S+=2),x.isSkinnedMesh&&(S+=1),S}function d(x,S,E,C,T,M){let R=i[e];return R===void 0?(R={id:x.id,object:x,geometry:S,material:E,materialVariant:u(x),groupOrder:C,renderOrder:x.renderOrder,z:T,group:M},i[e]=R):(R.id=x.id,R.object=x,R.geometry=S,R.material=E,R.materialVariant=u(x),R.groupOrder=C,R.renderOrder=x.renderOrder,R.z=T,R.group=M),e++,R}function h(x,S,E,C,T,M){const R=d(x,S,E,C,T,M);E.transmission>0?n.push(R):E.transparent===!0?a.push(R):t.push(R)}function p(x,S,E,C,T,M){const R=d(x,S,E,C,T,M);E.transmission>0?n.unshift(R):E.transparent===!0?a.unshift(R):t.unshift(R)}function y(x,S){t.length>1&&t.sort(x||Dk),n.length>1&&n.sort(S||aT),a.length>1&&a.sort(S||aT)}function v(){for(let x=e,S=i.length;x<S;x++){const E=i[x];if(E.id===null)break;E.id=null,E.object=null,E.geometry=null,E.material=null,E.group=null}}return{opaque:t,transmissive:n,transparent:a,init:o,push:h,unshift:p,finish:v,sort:y}}function Ik(){let i=new WeakMap;function e(n,a){const o=i.get(n);let u;return o===void 0?(u=new sT,i.set(n,[u])):a>=o.length?(u=new sT,o.push(u)):u=o[a],u}function t(){i=new WeakMap}return{get:e,dispose:t}}function Lk(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Q,color:new Pt};break;case"SpotLight":t={position:new Q,direction:new Q,color:new Pt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Q,color:new Pt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Q,skyColor:new Pt,groundColor:new Pt};break;case"RectAreaLight":t={color:new Pt,position:new Q,halfWidth:new Q,halfHeight:new Q};break}return i[e.id]=t,t}}}function Uk(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let Ok=0;function Pk(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function zk(i){const e=new Lk,t=Uk(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)n.probe.push(new Q);const a=new Q,o=new hn,u=new hn;function d(p){let y=0,v=0,x=0;for(let O=0;O<9;O++)n.probe[O].set(0,0,0);let S=0,E=0,C=0,T=0,M=0,R=0,I=0,L=0,z=0,P=0,V=0;p.sort(Pk);for(let O=0,K=p.length;O<K;O++){const H=p[O],te=H.color,ee=H.intensity,ae=H.distance;let se=null;if(H.shadow&&H.shadow.map&&(H.shadow.map.texture.format===Df?se=H.shadow.map.texture:se=H.shadow.map.depthTexture||H.shadow.map.texture),H.isAmbientLight)y+=te.r*ee,v+=te.g*ee,x+=te.b*ee;else if(H.isLightProbe){for(let G=0;G<9;G++)n.probe[G].addScaledVector(H.sh.coefficients[G],ee);V++}else if(H.isDirectionalLight){const G=e.get(H);if(G.color.copy(H.color).multiplyScalar(H.intensity),H.castShadow){const $=H.shadow,le=t.get(H);le.shadowIntensity=$.intensity,le.shadowBias=$.bias,le.shadowNormalBias=$.normalBias,le.shadowRadius=$.radius,le.shadowMapSize=$.mapSize,n.directionalShadow[S]=le,n.directionalShadowMap[S]=se,n.directionalShadowMatrix[S]=H.shadow.matrix,R++}n.directional[S]=G,S++}else if(H.isSpotLight){const G=e.get(H);G.position.setFromMatrixPosition(H.matrixWorld),G.color.copy(te).multiplyScalar(ee),G.distance=ae,G.coneCos=Math.cos(H.angle),G.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),G.decay=H.decay,n.spot[C]=G;const $=H.shadow;if(H.map&&(n.spotLightMap[z]=H.map,z++,$.updateMatrices(H),H.castShadow&&P++),n.spotLightMatrix[C]=$.matrix,H.castShadow){const le=t.get(H);le.shadowIntensity=$.intensity,le.shadowBias=$.bias,le.shadowNormalBias=$.normalBias,le.shadowRadius=$.radius,le.shadowMapSize=$.mapSize,n.spotShadow[C]=le,n.spotShadowMap[C]=se,L++}C++}else if(H.isRectAreaLight){const G=e.get(H);G.color.copy(te).multiplyScalar(ee),G.halfWidth.set(H.width*.5,0,0),G.halfHeight.set(0,H.height*.5,0),n.rectArea[T]=G,T++}else if(H.isPointLight){const G=e.get(H);if(G.color.copy(H.color).multiplyScalar(H.intensity),G.distance=H.distance,G.decay=H.decay,H.castShadow){const $=H.shadow,le=t.get(H);le.shadowIntensity=$.intensity,le.shadowBias=$.bias,le.shadowNormalBias=$.normalBias,le.shadowRadius=$.radius,le.shadowMapSize=$.mapSize,le.shadowCameraNear=$.camera.near,le.shadowCameraFar=$.camera.far,n.pointShadow[E]=le,n.pointShadowMap[E]=se,n.pointShadowMatrix[E]=H.shadow.matrix,I++}n.point[E]=G,E++}else if(H.isHemisphereLight){const G=e.get(H);G.skyColor.copy(H.color).multiplyScalar(ee),G.groundColor.copy(H.groundColor).multiplyScalar(ee),n.hemi[M]=G,M++}}T>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ut.LTC_FLOAT_1,n.rectAreaLTC2=Ut.LTC_FLOAT_2):(n.rectAreaLTC1=Ut.LTC_HALF_1,n.rectAreaLTC2=Ut.LTC_HALF_2)),n.ambient[0]=y,n.ambient[1]=v,n.ambient[2]=x;const N=n.hash;(N.directionalLength!==S||N.pointLength!==E||N.spotLength!==C||N.rectAreaLength!==T||N.hemiLength!==M||N.numDirectionalShadows!==R||N.numPointShadows!==I||N.numSpotShadows!==L||N.numSpotMaps!==z||N.numLightProbes!==V)&&(n.directional.length=S,n.spot.length=C,n.rectArea.length=T,n.point.length=E,n.hemi.length=M,n.directionalShadow.length=R,n.directionalShadowMap.length=R,n.pointShadow.length=I,n.pointShadowMap.length=I,n.spotShadow.length=L,n.spotShadowMap.length=L,n.directionalShadowMatrix.length=R,n.pointShadowMatrix.length=I,n.spotLightMatrix.length=L+z-P,n.spotLightMap.length=z,n.numSpotLightShadowsWithMaps=P,n.numLightProbes=V,N.directionalLength=S,N.pointLength=E,N.spotLength=C,N.rectAreaLength=T,N.hemiLength=M,N.numDirectionalShadows=R,N.numPointShadows=I,N.numSpotShadows=L,N.numSpotMaps=z,N.numLightProbes=V,n.version=Ok++)}function h(p,y){let v=0,x=0,S=0,E=0,C=0;const T=y.matrixWorldInverse;for(let M=0,R=p.length;M<R;M++){const I=p[M];if(I.isDirectionalLight){const L=n.directional[v];L.direction.setFromMatrixPosition(I.matrixWorld),a.setFromMatrixPosition(I.target.matrixWorld),L.direction.sub(a),L.direction.transformDirection(T),v++}else if(I.isSpotLight){const L=n.spot[S];L.position.setFromMatrixPosition(I.matrixWorld),L.position.applyMatrix4(T),L.direction.setFromMatrixPosition(I.matrixWorld),a.setFromMatrixPosition(I.target.matrixWorld),L.direction.sub(a),L.direction.transformDirection(T),S++}else if(I.isRectAreaLight){const L=n.rectArea[E];L.position.setFromMatrixPosition(I.matrixWorld),L.position.applyMatrix4(T),u.identity(),o.copy(I.matrixWorld),o.premultiply(T),u.extractRotation(o),L.halfWidth.set(I.width*.5,0,0),L.halfHeight.set(0,I.height*.5,0),L.halfWidth.applyMatrix4(u),L.halfHeight.applyMatrix4(u),E++}else if(I.isPointLight){const L=n.point[x];L.position.setFromMatrixPosition(I.matrixWorld),L.position.applyMatrix4(T),x++}else if(I.isHemisphereLight){const L=n.hemi[C];L.direction.setFromMatrixPosition(I.matrixWorld),L.direction.transformDirection(T),C++}}}return{setup:d,setupView:h,state:n}}function oT(i){const e=new zk(i),t=[],n=[];function a(y){p.camera=y,t.length=0,n.length=0}function o(y){t.push(y)}function u(y){n.push(y)}function d(){e.setup(t)}function h(y){e.setupView(t,y)}const p={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:a,state:p,setupLights:d,setupLightsView:h,pushLight:o,pushShadow:u}}function Fk(i){let e=new WeakMap;function t(a,o=0){const u=e.get(a);let d;return u===void 0?(d=new oT(i),e.set(a,[d])):o>=u.length?(d=new oT(i),u.push(d)):d=u[o],d}function n(){e=new WeakMap}return{get:t,dispose:n}}const Bk=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,kk=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,Vk=[new Q(1,0,0),new Q(-1,0,0),new Q(0,1,0),new Q(0,-1,0),new Q(0,0,1),new Q(0,0,-1)],Hk=[new Q(0,-1,0),new Q(0,-1,0),new Q(0,0,1),new Q(0,0,-1),new Q(0,-1,0),new Q(0,-1,0)],lT=new hn,Hm=new Q,pS=new Q;function Gk(i,e,t){let n=new Kh;const a=new Ze,o=new Ze,u=new vi,d=new $1,h=new Q1,p={},y=t.maxTextureSize,v={[tc]:ma,[ma]:tc,[_o]:_o},x=new va({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ze},radius:{value:4}},vertexShader:Bk,fragmentShader:kk}),S=x.clone();S.defines.HORIZONTAL_PASS=1;const E=new _n;E.setAttribute("position",new hi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const C=new Ki(E,x),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=wh;let M=this.type;this.render=function(P,V,N){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||P.length===0)return;this.type===Km&&(Rt("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),this.type=wh);const O=i.getRenderTarget(),K=i.getActiveCubeFace(),H=i.getActiveMipmapLevel(),te=i.state;te.setBlending(So),te.buffers.depth.getReversed()===!0?te.buffers.color.setClear(0,0,0,0):te.buffers.color.setClear(1,1,1,1),te.buffers.depth.setTest(!0),te.setScissorTest(!1);const ee=M!==this.type;ee&&V.traverse(function(ae){ae.material&&(Array.isArray(ae.material)?ae.material.forEach(se=>se.needsUpdate=!0):ae.material.needsUpdate=!0)});for(let ae=0,se=P.length;ae<se;ae++){const G=P[ae],$=G.shadow;if($===void 0){Rt("WebGLShadowMap:",G,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;a.copy($.mapSize);const le=$.getFrameExtents();a.multiply(le),o.copy($.mapSize),(a.x>y||a.y>y)&&(a.x>y&&(o.x=Math.floor(y/le.x),a.x=o.x*le.x,$.mapSize.x=o.x),a.y>y&&(o.y=Math.floor(y/le.y),a.y=o.y*le.y,$.mapSize.y=o.y));const be=i.state.buffers.depth.getReversed();if($.camera._reversedDepth=be,$.map===null||ee===!0){if($.map!==null&&($.map.depthTexture!==null&&($.map.depthTexture.dispose(),$.map.depthTexture=null),$.map.dispose()),this.type===_f){if(G.isPointLight){Rt("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}$.map=new Ua(a.x,a.y,{format:Df,type:ir,minFilter:jn,magFilter:jn,generateMipmaps:!1}),$.map.texture.name=G.name+".shadowMap",$.map.depthTexture=new zh(a.x,a.y,Vi),$.map.depthTexture.name=G.name+".shadowMapDepth",$.map.depthTexture.format=dl,$.map.depthTexture.compareFunction=null,$.map.depthTexture.minFilter=hr,$.map.depthTexture.magFilter=hr}else G.isPointLight?($.map=new R_(a.x),$.map.depthTexture=new jC(a.x,vs)):($.map=new Ua(a.x,a.y),$.map.depthTexture=new zh(a.x,a.y,vs)),$.map.depthTexture.name=G.name+".shadowMap",$.map.depthTexture.format=dl,this.type===wh?($.map.depthTexture.compareFunction=be?n_:t_,$.map.depthTexture.minFilter=jn,$.map.depthTexture.magFilter=jn):($.map.depthTexture.compareFunction=null,$.map.depthTexture.minFilter=hr,$.map.depthTexture.magFilter=hr);$.camera.updateProjectionMatrix()}const Ae=$.map.isWebGLCubeRenderTarget?6:1;for(let Y=0;Y<Ae;Y++){if($.map.isWebGLCubeRenderTarget)i.setRenderTarget($.map,Y),i.clear();else{Y===0&&(i.setRenderTarget($.map),i.clear());const re=$.getViewport(Y);u.set(o.x*re.x,o.y*re.y,o.x*re.z,o.y*re.w),te.viewport(u)}if(G.isPointLight){const re=$.camera,me=$.matrix,Te=G.distance||re.far;Te!==re.far&&(re.far=Te,re.updateProjectionMatrix()),Hm.setFromMatrixPosition(G.matrixWorld),re.position.copy(Hm),pS.copy(re.position),pS.add(Vk[Y]),re.up.copy(Hk[Y]),re.lookAt(pS),re.updateMatrixWorld(),me.makeTranslation(-Hm.x,-Hm.y,-Hm.z),lT.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse),$._frustum.setFromProjectionMatrix(lT,re.coordinateSystem,re.reversedDepth)}else $.updateMatrices(G);n=$.getFrustum(),L(V,N,$.camera,G,this.type)}$.isPointLightShadow!==!0&&this.type===_f&&R($,N),$.needsUpdate=!1}M=this.type,T.needsUpdate=!1,i.setRenderTarget(O,K,H)};function R(P,V){const N=e.update(C);x.defines.VSM_SAMPLES!==P.blurSamples&&(x.defines.VSM_SAMPLES=P.blurSamples,S.defines.VSM_SAMPLES=P.blurSamples,x.needsUpdate=!0,S.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new Ua(a.x,a.y,{format:Df,type:ir})),x.uniforms.shadow_pass.value=P.map.depthTexture,x.uniforms.resolution.value=P.mapSize,x.uniforms.radius.value=P.radius,i.setRenderTarget(P.mapPass),i.clear(),i.renderBufferDirect(V,null,N,x,C,null),S.uniforms.shadow_pass.value=P.mapPass.texture,S.uniforms.resolution.value=P.mapSize,S.uniforms.radius.value=P.radius,i.setRenderTarget(P.map),i.clear(),i.renderBufferDirect(V,null,N,S,C,null)}function I(P,V,N,O){let K=null;const H=N.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(H!==void 0)K=H;else if(K=N.isPointLight===!0?h:d,i.localClippingEnabled&&V.clipShadows===!0&&Array.isArray(V.clippingPlanes)&&V.clippingPlanes.length!==0||V.displacementMap&&V.displacementScale!==0||V.alphaMap&&V.alphaTest>0||V.map&&V.alphaTest>0||V.alphaToCoverage===!0){const te=K.uuid,ee=V.uuid;let ae=p[te];ae===void 0&&(ae={},p[te]=ae);let se=ae[ee];se===void 0&&(se=K.clone(),ae[ee]=se,V.addEventListener("dispose",z)),K=se}if(K.visible=V.visible,K.wireframe=V.wireframe,O===_f?K.side=V.shadowSide!==null?V.shadowSide:V.side:K.side=V.shadowSide!==null?V.shadowSide:v[V.side],K.alphaMap=V.alphaMap,K.alphaTest=V.alphaToCoverage===!0?.5:V.alphaTest,K.map=V.map,K.clipShadows=V.clipShadows,K.clippingPlanes=V.clippingPlanes,K.clipIntersection=V.clipIntersection,K.displacementMap=V.displacementMap,K.displacementScale=V.displacementScale,K.displacementBias=V.displacementBias,K.wireframeLinewidth=V.wireframeLinewidth,K.linewidth=V.linewidth,N.isPointLight===!0&&K.isMeshDistanceMaterial===!0){const te=i.properties.get(K);te.light=N}return K}function L(P,V,N,O,K){if(P.visible===!1)return;if(P.layers.test(V.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&K===_f)&&(!P.frustumCulled||n.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,P.matrixWorld);const ee=e.update(P),ae=P.material;if(Array.isArray(ae)){const se=ee.groups;for(let G=0,$=se.length;G<$;G++){const le=se[G],be=ae[le.materialIndex];if(be&&be.visible){const Ae=I(P,be,O,K);P.onBeforeShadow(i,P,V,N,ee,Ae,le),i.renderBufferDirect(N,null,ee,Ae,P,le),P.onAfterShadow(i,P,V,N,ee,Ae,le)}}}else if(ae.visible){const se=I(P,ae,O,K);P.onBeforeShadow(i,P,V,N,ee,se,null),i.renderBufferDirect(N,null,ee,se,P,null),P.onAfterShadow(i,P,V,N,ee,se,null)}}const te=P.children;for(let ee=0,ae=te.length;ee<ae;ee++)L(te[ee],V,N,O,K)}function z(P){P.target.removeEventListener("dispose",z);for(const N in p){const O=p[N],K=P.target.uuid;K in O&&(O[K].dispose(),delete O[K])}}}function Wk(i,e){function t(){let oe=!1;const Me=new vi;let et=null;const St=new vi(0,0,0,0);return{setMask:function(rt){et!==rt&&!oe&&(i.colorMask(rt,rt,rt,rt),et=rt)},setLocked:function(rt){oe=rt},setClear:function(rt,_e,ft,Nt,Kt){Kt===!0&&(rt*=Nt,_e*=Nt,ft*=Nt),Me.set(rt,_e,ft,Nt),St.equals(Me)===!1&&(i.clearColor(rt,_e,ft,Nt),St.copy(Me))},reset:function(){oe=!1,et=null,St.set(-1,0,0,0)}}}function n(){let oe=!1,Me=!1,et=null,St=null,rt=null;return{setReversed:function(_e){if(Me!==_e){const ft=e.get("EXT_clip_control");_e?ft.clipControlEXT(ft.LOWER_LEFT_EXT,ft.ZERO_TO_ONE_EXT):ft.clipControlEXT(ft.LOWER_LEFT_EXT,ft.NEGATIVE_ONE_TO_ONE_EXT),Me=_e;const Nt=rt;rt=null,this.setClear(Nt)}},getReversed:function(){return Me},setTest:function(_e){_e?De(i.DEPTH_TEST):ze(i.DEPTH_TEST)},setMask:function(_e){et!==_e&&!oe&&(i.depthMask(_e),et=_e)},setFunc:function(_e){if(Me&&(_e=vO[_e]),St!==_e){switch(_e){case qy:i.depthFunc(i.NEVER);break;case Yy:i.depthFunc(i.ALWAYS);break;case Zy:i.depthFunc(i.LESS);break;case Rf:i.depthFunc(i.LEQUAL);break;case Ky:i.depthFunc(i.EQUAL);break;case $y:i.depthFunc(i.GEQUAL);break;case Qy:i.depthFunc(i.GREATER);break;case Jy:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}St=_e}},setLocked:function(_e){oe=_e},setClear:function(_e){rt!==_e&&(rt=_e,Me&&(_e=1-_e),i.clearDepth(_e))},reset:function(){oe=!1,et=null,St=null,rt=null,Me=!1}}}function a(){let oe=!1,Me=null,et=null,St=null,rt=null,_e=null,ft=null,Nt=null,Kt=null;return{setTest:function(cn){oe||(cn?De(i.STENCIL_TEST):ze(i.STENCIL_TEST))},setMask:function(cn){Me!==cn&&!oe&&(i.stencilMask(cn),Me=cn)},setFunc:function(cn,gn,kn){(et!==cn||St!==gn||rt!==kn)&&(i.stencilFunc(cn,gn,kn),et=cn,St=gn,rt=kn)},setOp:function(cn,gn,kn){(_e!==cn||ft!==gn||Nt!==kn)&&(i.stencilOp(cn,gn,kn),_e=cn,ft=gn,Nt=kn)},setLocked:function(cn){oe=cn},setClear:function(cn){Kt!==cn&&(i.clearStencil(cn),Kt=cn)},reset:function(){oe=!1,Me=null,et=null,St=null,rt=null,_e=null,ft=null,Nt=null,Kt=null}}}const o=new t,u=new n,d=new a,h=new WeakMap,p=new WeakMap;let y={},v={},x=new WeakMap,S=[],E=null,C=!1,T=null,M=null,R=null,I=null,L=null,z=null,P=null,V=new Pt(0,0,0),N=0,O=!1,K=null,H=null,te=null,ee=null,ae=null;const se=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,$=0;const le=i.getParameter(i.VERSION);le.indexOf("WebGL")!==-1?($=parseFloat(/^WebGL (\d)/.exec(le)[1]),G=$>=1):le.indexOf("OpenGL ES")!==-1&&($=parseFloat(/^OpenGL ES (\d)/.exec(le)[1]),G=$>=2);let be=null,Ae={};const Y=i.getParameter(i.SCISSOR_BOX),re=i.getParameter(i.VIEWPORT),me=new vi().fromArray(Y),Te=new vi().fromArray(re);function Ke(oe,Me,et,St){const rt=new Uint8Array(4),_e=i.createTexture();i.bindTexture(oe,_e),i.texParameteri(oe,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(oe,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let ft=0;ft<et;ft++)oe===i.TEXTURE_3D||oe===i.TEXTURE_2D_ARRAY?i.texImage3D(Me,0,i.RGBA,1,1,St,0,i.RGBA,i.UNSIGNED_BYTE,rt):i.texImage2D(Me+ft,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,rt);return _e}const he={};he[i.TEXTURE_2D]=Ke(i.TEXTURE_2D,i.TEXTURE_2D,1),he[i.TEXTURE_CUBE_MAP]=Ke(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),he[i.TEXTURE_2D_ARRAY]=Ke(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),he[i.TEXTURE_3D]=Ke(i.TEXTURE_3D,i.TEXTURE_3D,1,1),o.setClear(0,0,0,1),u.setClear(1),d.setClear(0),De(i.DEPTH_TEST),u.setFunc(Rf),Xe(!1),mt(HS),De(i.CULL_FACE),He(So);function De(oe){y[oe]!==!0&&(i.enable(oe),y[oe]=!0)}function ze(oe){y[oe]!==!1&&(i.disable(oe),y[oe]=!1)}function pt(oe,Me){return v[oe]!==Me?(i.bindFramebuffer(oe,Me),v[oe]=Me,oe===i.DRAW_FRAMEBUFFER&&(v[i.FRAMEBUFFER]=Me),oe===i.FRAMEBUFFER&&(v[i.DRAW_FRAMEBUFFER]=Me),!0):!1}function It(oe,Me){let et=S,St=!1;if(oe){et=x.get(Me),et===void 0&&(et=[],x.set(Me,et));const rt=oe.textures;if(et.length!==rt.length||et[0]!==i.COLOR_ATTACHMENT0){for(let _e=0,ft=rt.length;_e<ft;_e++)et[_e]=i.COLOR_ATTACHMENT0+_e;et.length=rt.length,St=!0}}else et[0]!==i.BACK&&(et[0]=i.BACK,St=!0);St&&i.drawBuffers(et)}function zt(oe){return E!==oe?(i.useProgram(oe),E=oe,!0):!1}const Jt={[nu]:i.FUNC_ADD,[eC]:i.FUNC_SUBTRACT,[tC]:i.FUNC_REVERSE_SUBTRACT};Jt[nC]=i.MIN,Jt[iC]=i.MAX;const jt={[rC]:i.ZERO,[aC]:i.ONE,[sC]:i.SRC_COLOR,[Xy]:i.SRC_ALPHA,[dC]:i.SRC_ALPHA_SATURATE,[uC]:i.DST_COLOR,[lC]:i.DST_ALPHA,[oC]:i.ONE_MINUS_SRC_COLOR,[jy]:i.ONE_MINUS_SRC_ALPHA,[fC]:i.ONE_MINUS_DST_COLOR,[cC]:i.ONE_MINUS_DST_ALPHA,[hC]:i.CONSTANT_COLOR,[pC]:i.ONE_MINUS_CONSTANT_COLOR,[mC]:i.CONSTANT_ALPHA,[gC]:i.ONE_MINUS_CONSTANT_ALPHA};function He(oe,Me,et,St,rt,_e,ft,Nt,Kt,cn){if(oe===So){C===!0&&(ze(i.BLEND),C=!1);return}if(C===!1&&(De(i.BLEND),C=!0),oe!==JA){if(oe!==T||cn!==O){if((M!==nu||L!==nu)&&(i.blendEquation(i.FUNC_ADD),M=nu,L=nu),cn)switch(oe){case Tf:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case GS:i.blendFunc(i.ONE,i.ONE);break;case WS:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case XS:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:Qt("WebGLState: Invalid blending: ",oe);break}else switch(oe){case Tf:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case GS:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case WS:Qt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case XS:Qt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Qt("WebGLState: Invalid blending: ",oe);break}R=null,I=null,z=null,P=null,V.set(0,0,0),N=0,T=oe,O=cn}return}rt=rt||Me,_e=_e||et,ft=ft||St,(Me!==M||rt!==L)&&(i.blendEquationSeparate(Jt[Me],Jt[rt]),M=Me,L=rt),(et!==R||St!==I||_e!==z||ft!==P)&&(i.blendFuncSeparate(jt[et],jt[St],jt[_e],jt[ft]),R=et,I=St,z=_e,P=ft),(Nt.equals(V)===!1||Kt!==N)&&(i.blendColor(Nt.r,Nt.g,Nt.b,Kt),V.copy(Nt),N=Kt),T=oe,O=!1}function nt(oe,Me){oe.side===_o?ze(i.CULL_FACE):De(i.CULL_FACE);let et=oe.side===ma;Me&&(et=!et),Xe(et),oe.blending===Tf&&oe.transparent===!1?He(So):He(oe.blending,oe.blendEquation,oe.blendSrc,oe.blendDst,oe.blendEquationAlpha,oe.blendSrcAlpha,oe.blendDstAlpha,oe.blendColor,oe.blendAlpha,oe.premultipliedAlpha),u.setFunc(oe.depthFunc),u.setTest(oe.depthTest),u.setMask(oe.depthWrite),o.setMask(oe.colorWrite);const St=oe.stencilWrite;d.setTest(St),St&&(d.setMask(oe.stencilWriteMask),d.setFunc(oe.stencilFunc,oe.stencilRef,oe.stencilFuncMask),d.setOp(oe.stencilFail,oe.stencilZFail,oe.stencilZPass)),Lt(oe.polygonOffset,oe.polygonOffsetFactor,oe.polygonOffsetUnits),oe.alphaToCoverage===!0?De(i.SAMPLE_ALPHA_TO_COVERAGE):ze(i.SAMPLE_ALPHA_TO_COVERAGE)}function Xe(oe){K!==oe&&(oe?i.frontFace(i.CW):i.frontFace(i.CCW),K=oe)}function mt(oe){oe!==KA?(De(i.CULL_FACE),oe!==H&&(oe===HS?i.cullFace(i.BACK):oe===$A?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):ze(i.CULL_FACE),H=oe}function ne(oe){oe!==te&&(G&&i.lineWidth(oe),te=oe)}function Lt(oe,Me,et){oe?(De(i.POLYGON_OFFSET_FILL),(ee!==Me||ae!==et)&&(ee=Me,ae=et,u.getReversed()&&(Me=-Me),i.polygonOffset(Me,et))):ze(i.POLYGON_OFFSET_FILL)}function wt(oe){oe?De(i.SCISSOR_TEST):ze(i.SCISSOR_TEST)}function kt(oe){oe===void 0&&(oe=i.TEXTURE0+se-1),be!==oe&&(i.activeTexture(oe),be=oe)}function Je(oe,Me,et){et===void 0&&(be===null?et=i.TEXTURE0+se-1:et=be);let St=Ae[et];St===void 0&&(St={type:void 0,texture:void 0},Ae[et]=St),(St.type!==oe||St.texture!==Me)&&(be!==et&&(i.activeTexture(et),be=et),i.bindTexture(oe,Me||he[oe]),St.type=oe,St.texture=Me)}function Z(){const oe=Ae[be];oe!==void 0&&oe.type!==void 0&&(i.bindTexture(oe.type,null),oe.type=void 0,oe.texture=void 0)}function F(){try{i.compressedTexImage2D(...arguments)}catch(oe){Qt("WebGLState:",oe)}}function ye(){try{i.compressedTexImage3D(...arguments)}catch(oe){Qt("WebGLState:",oe)}}function Ue(){try{i.texSubImage2D(...arguments)}catch(oe){Qt("WebGLState:",oe)}}function je(){try{i.texSubImage3D(...arguments)}catch(oe){Qt("WebGLState:",oe)}}function Oe(){try{i.compressedTexSubImage2D(...arguments)}catch(oe){Qt("WebGLState:",oe)}}function Mt(){try{i.compressedTexSubImage3D(...arguments)}catch(oe){Qt("WebGLState:",oe)}}function ct(){try{i.texStorage2D(...arguments)}catch(oe){Qt("WebGLState:",oe)}}function Ft(){try{i.texStorage3D(...arguments)}catch(oe){Qt("WebGLState:",oe)}}function Bt(){try{i.texImage2D(...arguments)}catch(oe){Qt("WebGLState:",oe)}}function Qe(){try{i.texImage3D(...arguments)}catch(oe){Qt("WebGLState:",oe)}}function qe(oe){me.equals(oe)===!1&&(i.scissor(oe.x,oe.y,oe.z,oe.w),me.copy(oe))}function Tt(oe){Te.equals(oe)===!1&&(i.viewport(oe.x,oe.y,oe.z,oe.w),Te.copy(oe))}function ie(oe,Me){let et=p.get(Me);et===void 0&&(et=new WeakMap,p.set(Me,et));let St=et.get(oe);St===void 0&&(St=i.getUniformBlockIndex(Me,oe.name),et.set(oe,St))}function we(oe,Me){const St=p.get(Me).get(oe);h.get(Me)!==St&&(i.uniformBlockBinding(Me,St,oe.__bindingPointIndex),h.set(Me,St))}function tt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),u.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),y={},be=null,Ae={},v={},x=new WeakMap,S=[],E=null,C=!1,T=null,M=null,R=null,I=null,L=null,z=null,P=null,V=new Pt(0,0,0),N=0,O=!1,K=null,H=null,te=null,ee=null,ae=null,me.set(0,0,i.canvas.width,i.canvas.height),Te.set(0,0,i.canvas.width,i.canvas.height),o.reset(),u.reset(),d.reset()}return{buffers:{color:o,depth:u,stencil:d},enable:De,disable:ze,bindFramebuffer:pt,drawBuffers:It,useProgram:zt,setBlending:He,setMaterial:nt,setFlipSided:Xe,setCullFace:mt,setLineWidth:ne,setPolygonOffset:Lt,setScissorTest:wt,activeTexture:kt,bindTexture:Je,unbindTexture:Z,compressedTexImage2D:F,compressedTexImage3D:ye,texImage2D:Bt,texImage3D:Qe,updateUBOMapping:ie,uniformBlockBinding:we,texStorage2D:ct,texStorage3D:Ft,texSubImage2D:Ue,texSubImage3D:je,compressedTexSubImage2D:Oe,compressedTexSubImage3D:Mt,scissor:qe,viewport:Tt,reset:tt}}function Xk(i,e,t,n,a,o,u){const d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new Ze,y=new WeakMap;let v;const x=new WeakMap;let S=!1;try{S=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function E(Z,F){return S?new OffscreenCanvas(Z,F):hg("canvas")}function C(Z,F,ye){let Ue=1;const je=Je(Z);if((je.width>ye||je.height>ye)&&(Ue=ye/Math.max(je.width,je.height)),Ue<1)if(typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Z instanceof ImageBitmap||typeof VideoFrame<"u"&&Z instanceof VideoFrame){const Oe=Math.floor(Ue*je.width),Mt=Math.floor(Ue*je.height);v===void 0&&(v=E(Oe,Mt));const ct=F?E(Oe,Mt):v;return ct.width=Oe,ct.height=Mt,ct.getContext("2d").drawImage(Z,0,0,Oe,Mt),Rt("WebGLRenderer: Texture has been resized from ("+je.width+"x"+je.height+") to ("+Oe+"x"+Mt+")."),ct}else return"data"in Z&&Rt("WebGLRenderer: Image in DataTexture is too big ("+je.width+"x"+je.height+")."),Z;return Z}function T(Z){return Z.generateMipmaps}function M(Z){i.generateMipmap(Z)}function R(Z){return Z.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:Z.isWebGL3DRenderTarget?i.TEXTURE_3D:Z.isWebGLArrayRenderTarget||Z.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function I(Z,F,ye,Ue,je=!1){if(Z!==null){if(i[Z]!==void 0)return i[Z];Rt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Z+"'")}let Oe=F;if(F===i.RED&&(ye===i.FLOAT&&(Oe=i.R32F),ye===i.HALF_FLOAT&&(Oe=i.R16F),ye===i.UNSIGNED_BYTE&&(Oe=i.R8)),F===i.RED_INTEGER&&(ye===i.UNSIGNED_BYTE&&(Oe=i.R8UI),ye===i.UNSIGNED_SHORT&&(Oe=i.R16UI),ye===i.UNSIGNED_INT&&(Oe=i.R32UI),ye===i.BYTE&&(Oe=i.R8I),ye===i.SHORT&&(Oe=i.R16I),ye===i.INT&&(Oe=i.R32I)),F===i.RG&&(ye===i.FLOAT&&(Oe=i.RG32F),ye===i.HALF_FLOAT&&(Oe=i.RG16F),ye===i.UNSIGNED_BYTE&&(Oe=i.RG8)),F===i.RG_INTEGER&&(ye===i.UNSIGNED_BYTE&&(Oe=i.RG8UI),ye===i.UNSIGNED_SHORT&&(Oe=i.RG16UI),ye===i.UNSIGNED_INT&&(Oe=i.RG32UI),ye===i.BYTE&&(Oe=i.RG8I),ye===i.SHORT&&(Oe=i.RG16I),ye===i.INT&&(Oe=i.RG32I)),F===i.RGB_INTEGER&&(ye===i.UNSIGNED_BYTE&&(Oe=i.RGB8UI),ye===i.UNSIGNED_SHORT&&(Oe=i.RGB16UI),ye===i.UNSIGNED_INT&&(Oe=i.RGB32UI),ye===i.BYTE&&(Oe=i.RGB8I),ye===i.SHORT&&(Oe=i.RGB16I),ye===i.INT&&(Oe=i.RGB32I)),F===i.RGBA_INTEGER&&(ye===i.UNSIGNED_BYTE&&(Oe=i.RGBA8UI),ye===i.UNSIGNED_SHORT&&(Oe=i.RGBA16UI),ye===i.UNSIGNED_INT&&(Oe=i.RGBA32UI),ye===i.BYTE&&(Oe=i.RGBA8I),ye===i.SHORT&&(Oe=i.RGBA16I),ye===i.INT&&(Oe=i.RGBA32I)),F===i.RGB&&(ye===i.UNSIGNED_INT_5_9_9_9_REV&&(Oe=i.RGB9_E5),ye===i.UNSIGNED_INT_10F_11F_11F_REV&&(Oe=i.R11F_G11F_B10F)),F===i.RGBA){const Mt=je?fg:Gn.getTransfer(Ue);ye===i.FLOAT&&(Oe=i.RGBA32F),ye===i.HALF_FLOAT&&(Oe=i.RGBA16F),ye===i.UNSIGNED_BYTE&&(Oe=Mt===si?i.SRGB8_ALPHA8:i.RGBA8),ye===i.UNSIGNED_SHORT_4_4_4_4&&(Oe=i.RGBA4),ye===i.UNSIGNED_SHORT_5_5_5_1&&(Oe=i.RGB5_A1)}return(Oe===i.R16F||Oe===i.R32F||Oe===i.RG16F||Oe===i.RG32F||Oe===i.RGBA16F||Oe===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Oe}function L(Z,F){let ye;return Z?F===null||F===vs||F===Lh?ye=i.DEPTH24_STENCIL8:F===Vi?ye=i.DEPTH32F_STENCIL8:F===Ih&&(ye=i.DEPTH24_STENCIL8,Rt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):F===null||F===vs||F===Lh?ye=i.DEPTH_COMPONENT24:F===Vi?ye=i.DEPTH_COMPONENT32F:F===Ih&&(ye=i.DEPTH_COMPONENT16),ye}function z(Z,F){return T(Z)===!0||Z.isFramebufferTexture&&Z.minFilter!==hr&&Z.minFilter!==jn?Math.log2(Math.max(F.width,F.height))+1:Z.mipmaps!==void 0&&Z.mipmaps.length>0?Z.mipmaps.length:Z.isCompressedTexture&&Array.isArray(Z.image)?F.mipmaps.length:1}function P(Z){const F=Z.target;F.removeEventListener("dispose",P),N(F),F.isVideoTexture&&y.delete(F)}function V(Z){const F=Z.target;F.removeEventListener("dispose",V),K(F)}function N(Z){const F=n.get(Z);if(F.__webglInit===void 0)return;const ye=Z.source,Ue=x.get(ye);if(Ue){const je=Ue[F.__cacheKey];je.usedTimes--,je.usedTimes===0&&O(Z),Object.keys(Ue).length===0&&x.delete(ye)}n.remove(Z)}function O(Z){const F=n.get(Z);i.deleteTexture(F.__webglTexture);const ye=Z.source,Ue=x.get(ye);delete Ue[F.__cacheKey],u.memory.textures--}function K(Z){const F=n.get(Z);if(Z.depthTexture&&(Z.depthTexture.dispose(),n.remove(Z.depthTexture)),Z.isWebGLCubeRenderTarget)for(let Ue=0;Ue<6;Ue++){if(Array.isArray(F.__webglFramebuffer[Ue]))for(let je=0;je<F.__webglFramebuffer[Ue].length;je++)i.deleteFramebuffer(F.__webglFramebuffer[Ue][je]);else i.deleteFramebuffer(F.__webglFramebuffer[Ue]);F.__webglDepthbuffer&&i.deleteRenderbuffer(F.__webglDepthbuffer[Ue])}else{if(Array.isArray(F.__webglFramebuffer))for(let Ue=0;Ue<F.__webglFramebuffer.length;Ue++)i.deleteFramebuffer(F.__webglFramebuffer[Ue]);else i.deleteFramebuffer(F.__webglFramebuffer);if(F.__webglDepthbuffer&&i.deleteRenderbuffer(F.__webglDepthbuffer),F.__webglMultisampledFramebuffer&&i.deleteFramebuffer(F.__webglMultisampledFramebuffer),F.__webglColorRenderbuffer)for(let Ue=0;Ue<F.__webglColorRenderbuffer.length;Ue++)F.__webglColorRenderbuffer[Ue]&&i.deleteRenderbuffer(F.__webglColorRenderbuffer[Ue]);F.__webglDepthRenderbuffer&&i.deleteRenderbuffer(F.__webglDepthRenderbuffer)}const ye=Z.textures;for(let Ue=0,je=ye.length;Ue<je;Ue++){const Oe=n.get(ye[Ue]);Oe.__webglTexture&&(i.deleteTexture(Oe.__webglTexture),u.memory.textures--),n.remove(ye[Ue])}n.remove(Z)}let H=0;function te(){H=0}function ee(){const Z=H;return Z>=a.maxTextures&&Rt("WebGLTextures: Trying to use "+Z+" texture units while this GPU supports only "+a.maxTextures),H+=1,Z}function ae(Z){const F=[];return F.push(Z.wrapS),F.push(Z.wrapT),F.push(Z.wrapR||0),F.push(Z.magFilter),F.push(Z.minFilter),F.push(Z.anisotropy),F.push(Z.internalFormat),F.push(Z.format),F.push(Z.type),F.push(Z.generateMipmaps),F.push(Z.premultiplyAlpha),F.push(Z.flipY),F.push(Z.unpackAlignment),F.push(Z.colorSpace),F.join()}function se(Z,F){const ye=n.get(Z);if(Z.isVideoTexture&&wt(Z),Z.isRenderTargetTexture===!1&&Z.isExternalTexture!==!0&&Z.version>0&&ye.__version!==Z.version){const Ue=Z.image;if(Ue===null)Rt("WebGLRenderer: Texture marked for update but no image data found.");else if(Ue.complete===!1)Rt("WebGLRenderer: Texture marked for update but image is incomplete");else{he(ye,Z,F);return}}else Z.isExternalTexture&&(ye.__webglTexture=Z.sourceTexture?Z.sourceTexture:null);t.bindTexture(i.TEXTURE_2D,ye.__webglTexture,i.TEXTURE0+F)}function G(Z,F){const ye=n.get(Z);if(Z.isRenderTargetTexture===!1&&Z.version>0&&ye.__version!==Z.version){he(ye,Z,F);return}else Z.isExternalTexture&&(ye.__webglTexture=Z.sourceTexture?Z.sourceTexture:null);t.bindTexture(i.TEXTURE_2D_ARRAY,ye.__webglTexture,i.TEXTURE0+F)}function $(Z,F){const ye=n.get(Z);if(Z.isRenderTargetTexture===!1&&Z.version>0&&ye.__version!==Z.version){he(ye,Z,F);return}t.bindTexture(i.TEXTURE_3D,ye.__webglTexture,i.TEXTURE0+F)}function le(Z,F){const ye=n.get(Z);if(Z.isCubeDepthTexture!==!0&&Z.version>0&&ye.__version!==Z.version){De(ye,Z,F);return}t.bindTexture(i.TEXTURE_CUBE_MAP,ye.__webglTexture,i.TEXTURE0+F)}const be={[Nf]:i.REPEAT,[nr]:i.CLAMP_TO_EDGE,[lg]:i.MIRRORED_REPEAT},Ae={[hr]:i.NEAREST,[R1]:i.NEAREST_MIPMAP_NEAREST,[Sh]:i.NEAREST_MIPMAP_LINEAR,[jn]:i.LINEAR,[Qm]:i.LINEAR_MIPMAP_NEAREST,[cl]:i.LINEAR_MIPMAP_LINEAR},Y={[wC]:i.NEVER,[NC]:i.ALWAYS,[TC]:i.LESS,[t_]:i.LEQUAL,[AC]:i.EQUAL,[n_]:i.GEQUAL,[CC]:i.GREATER,[RC]:i.NOTEQUAL};function re(Z,F){if(F.type===Vi&&e.has("OES_texture_float_linear")===!1&&(F.magFilter===jn||F.magFilter===Qm||F.magFilter===Sh||F.magFilter===cl||F.minFilter===jn||F.minFilter===Qm||F.minFilter===Sh||F.minFilter===cl)&&Rt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(Z,i.TEXTURE_WRAP_S,be[F.wrapS]),i.texParameteri(Z,i.TEXTURE_WRAP_T,be[F.wrapT]),(Z===i.TEXTURE_3D||Z===i.TEXTURE_2D_ARRAY)&&i.texParameteri(Z,i.TEXTURE_WRAP_R,be[F.wrapR]),i.texParameteri(Z,i.TEXTURE_MAG_FILTER,Ae[F.magFilter]),i.texParameteri(Z,i.TEXTURE_MIN_FILTER,Ae[F.minFilter]),F.compareFunction&&(i.texParameteri(Z,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(Z,i.TEXTURE_COMPARE_FUNC,Y[F.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(F.magFilter===hr||F.minFilter!==Sh&&F.minFilter!==cl||F.type===Vi&&e.has("OES_texture_float_linear")===!1)return;if(F.anisotropy>1||n.get(F).__currentAnisotropy){const ye=e.get("EXT_texture_filter_anisotropic");i.texParameterf(Z,ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,a.getMaxAnisotropy())),n.get(F).__currentAnisotropy=F.anisotropy}}}function me(Z,F){let ye=!1;Z.__webglInit===void 0&&(Z.__webglInit=!0,F.addEventListener("dispose",P));const Ue=F.source;let je=x.get(Ue);je===void 0&&(je={},x.set(Ue,je));const Oe=ae(F);if(Oe!==Z.__cacheKey){je[Oe]===void 0&&(je[Oe]={texture:i.createTexture(),usedTimes:0},u.memory.textures++,ye=!0),je[Oe].usedTimes++;const Mt=je[Z.__cacheKey];Mt!==void 0&&(je[Z.__cacheKey].usedTimes--,Mt.usedTimes===0&&O(F)),Z.__cacheKey=Oe,Z.__webglTexture=je[Oe].texture}return ye}function Te(Z,F,ye){return Math.floor(Math.floor(Z/ye)/F)}function Ke(Z,F,ye,Ue){const Oe=Z.updateRanges;if(Oe.length===0)t.texSubImage2D(i.TEXTURE_2D,0,0,0,F.width,F.height,ye,Ue,F.data);else{Oe.sort((Qe,qe)=>Qe.start-qe.start);let Mt=0;for(let Qe=1;Qe<Oe.length;Qe++){const qe=Oe[Mt],Tt=Oe[Qe],ie=qe.start+qe.count,we=Te(Tt.start,F.width,4),tt=Te(qe.start,F.width,4);Tt.start<=ie+1&&we===tt&&Te(Tt.start+Tt.count-1,F.width,4)===we?qe.count=Math.max(qe.count,Tt.start+Tt.count-qe.start):(++Mt,Oe[Mt]=Tt)}Oe.length=Mt+1;const ct=i.getParameter(i.UNPACK_ROW_LENGTH),Ft=i.getParameter(i.UNPACK_SKIP_PIXELS),Bt=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,F.width);for(let Qe=0,qe=Oe.length;Qe<qe;Qe++){const Tt=Oe[Qe],ie=Math.floor(Tt.start/4),we=Math.ceil(Tt.count/4),tt=ie%F.width,oe=Math.floor(ie/F.width),Me=we,et=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,tt),i.pixelStorei(i.UNPACK_SKIP_ROWS,oe),t.texSubImage2D(i.TEXTURE_2D,0,tt,oe,Me,et,ye,Ue,F.data)}Z.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,ct),i.pixelStorei(i.UNPACK_SKIP_PIXELS,Ft),i.pixelStorei(i.UNPACK_SKIP_ROWS,Bt)}}function he(Z,F,ye){let Ue=i.TEXTURE_2D;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(Ue=i.TEXTURE_2D_ARRAY),F.isData3DTexture&&(Ue=i.TEXTURE_3D);const je=me(Z,F),Oe=F.source;t.bindTexture(Ue,Z.__webglTexture,i.TEXTURE0+ye);const Mt=n.get(Oe);if(Oe.version!==Mt.__version||je===!0){t.activeTexture(i.TEXTURE0+ye);const ct=Gn.getPrimaries(Gn.workingColorSpace),Ft=F.colorSpace===Ql?null:Gn.getPrimaries(F.colorSpace),Bt=F.colorSpace===Ql||ct===Ft?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,F.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,F.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Bt);let Qe=C(F.image,!1,a.maxTextureSize);Qe=kt(F,Qe);const qe=o.convert(F.format,F.colorSpace),Tt=o.convert(F.type);let ie=I(F.internalFormat,qe,Tt,F.colorSpace,F.isVideoTexture);re(Ue,F);let we;const tt=F.mipmaps,oe=F.isVideoTexture!==!0,Me=Mt.__version===void 0||je===!0,et=Oe.dataReady,St=z(F,Qe);if(F.isDepthTexture)ie=L(F.format===iu,F.type),Me&&(oe?t.texStorage2D(i.TEXTURE_2D,1,ie,Qe.width,Qe.height):t.texImage2D(i.TEXTURE_2D,0,ie,Qe.width,Qe.height,0,qe,Tt,null));else if(F.isDataTexture)if(tt.length>0){oe&&Me&&t.texStorage2D(i.TEXTURE_2D,St,ie,tt[0].width,tt[0].height);for(let rt=0,_e=tt.length;rt<_e;rt++)we=tt[rt],oe?et&&t.texSubImage2D(i.TEXTURE_2D,rt,0,0,we.width,we.height,qe,Tt,we.data):t.texImage2D(i.TEXTURE_2D,rt,ie,we.width,we.height,0,qe,Tt,we.data);F.generateMipmaps=!1}else oe?(Me&&t.texStorage2D(i.TEXTURE_2D,St,ie,Qe.width,Qe.height),et&&Ke(F,Qe,qe,Tt)):t.texImage2D(i.TEXTURE_2D,0,ie,Qe.width,Qe.height,0,qe,Tt,Qe.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){oe&&Me&&t.texStorage3D(i.TEXTURE_2D_ARRAY,St,ie,tt[0].width,tt[0].height,Qe.depth);for(let rt=0,_e=tt.length;rt<_e;rt++)if(we=tt[rt],F.format!==pr)if(qe!==null)if(oe){if(et)if(F.layerUpdates.size>0){const ft=r1(we.width,we.height,F.format,F.type);for(const Nt of F.layerUpdates){const Kt=we.data.subarray(Nt*ft/we.data.BYTES_PER_ELEMENT,(Nt+1)*ft/we.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,rt,0,0,Nt,we.width,we.height,1,qe,Kt)}F.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,rt,0,0,0,we.width,we.height,Qe.depth,qe,we.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,rt,ie,we.width,we.height,Qe.depth,0,we.data,0,0);else Rt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else oe?et&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,rt,0,0,0,we.width,we.height,Qe.depth,qe,Tt,we.data):t.texImage3D(i.TEXTURE_2D_ARRAY,rt,ie,we.width,we.height,Qe.depth,0,qe,Tt,we.data)}else{oe&&Me&&t.texStorage2D(i.TEXTURE_2D,St,ie,tt[0].width,tt[0].height);for(let rt=0,_e=tt.length;rt<_e;rt++)we=tt[rt],F.format!==pr?qe!==null?oe?et&&t.compressedTexSubImage2D(i.TEXTURE_2D,rt,0,0,we.width,we.height,qe,we.data):t.compressedTexImage2D(i.TEXTURE_2D,rt,ie,we.width,we.height,0,we.data):Rt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):oe?et&&t.texSubImage2D(i.TEXTURE_2D,rt,0,0,we.width,we.height,qe,Tt,we.data):t.texImage2D(i.TEXTURE_2D,rt,ie,we.width,we.height,0,qe,Tt,we.data)}else if(F.isDataArrayTexture)if(oe){if(Me&&t.texStorage3D(i.TEXTURE_2D_ARRAY,St,ie,Qe.width,Qe.height,Qe.depth),et)if(F.layerUpdates.size>0){const rt=r1(Qe.width,Qe.height,F.format,F.type);for(const _e of F.layerUpdates){const ft=Qe.data.subarray(_e*rt/Qe.data.BYTES_PER_ELEMENT,(_e+1)*rt/Qe.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,_e,Qe.width,Qe.height,1,qe,Tt,ft)}F.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Qe.width,Qe.height,Qe.depth,qe,Tt,Qe.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,ie,Qe.width,Qe.height,Qe.depth,0,qe,Tt,Qe.data);else if(F.isData3DTexture)oe?(Me&&t.texStorage3D(i.TEXTURE_3D,St,ie,Qe.width,Qe.height,Qe.depth),et&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Qe.width,Qe.height,Qe.depth,qe,Tt,Qe.data)):t.texImage3D(i.TEXTURE_3D,0,ie,Qe.width,Qe.height,Qe.depth,0,qe,Tt,Qe.data);else if(F.isFramebufferTexture){if(Me)if(oe)t.texStorage2D(i.TEXTURE_2D,St,ie,Qe.width,Qe.height);else{let rt=Qe.width,_e=Qe.height;for(let ft=0;ft<St;ft++)t.texImage2D(i.TEXTURE_2D,ft,ie,rt,_e,0,qe,Tt,null),rt>>=1,_e>>=1}}else if(tt.length>0){if(oe&&Me){const rt=Je(tt[0]);t.texStorage2D(i.TEXTURE_2D,St,ie,rt.width,rt.height)}for(let rt=0,_e=tt.length;rt<_e;rt++)we=tt[rt],oe?et&&t.texSubImage2D(i.TEXTURE_2D,rt,0,0,qe,Tt,we):t.texImage2D(i.TEXTURE_2D,rt,ie,qe,Tt,we);F.generateMipmaps=!1}else if(oe){if(Me){const rt=Je(Qe);t.texStorage2D(i.TEXTURE_2D,St,ie,rt.width,rt.height)}et&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,qe,Tt,Qe)}else t.texImage2D(i.TEXTURE_2D,0,ie,qe,Tt,Qe);T(F)&&M(Ue),Mt.__version=Oe.version,F.onUpdate&&F.onUpdate(F)}Z.__version=F.version}function De(Z,F,ye){if(F.image.length!==6)return;const Ue=me(Z,F),je=F.source;t.bindTexture(i.TEXTURE_CUBE_MAP,Z.__webglTexture,i.TEXTURE0+ye);const Oe=n.get(je);if(je.version!==Oe.__version||Ue===!0){t.activeTexture(i.TEXTURE0+ye);const Mt=Gn.getPrimaries(Gn.workingColorSpace),ct=F.colorSpace===Ql?null:Gn.getPrimaries(F.colorSpace),Ft=F.colorSpace===Ql||Mt===ct?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,F.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,F.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ft);const Bt=F.isCompressedTexture||F.image[0].isCompressedTexture,Qe=F.image[0]&&F.image[0].isDataTexture,qe=[];for(let _e=0;_e<6;_e++)!Bt&&!Qe?qe[_e]=C(F.image[_e],!0,a.maxCubemapSize):qe[_e]=Qe?F.image[_e].image:F.image[_e],qe[_e]=kt(F,qe[_e]);const Tt=qe[0],ie=o.convert(F.format,F.colorSpace),we=o.convert(F.type),tt=I(F.internalFormat,ie,we,F.colorSpace),oe=F.isVideoTexture!==!0,Me=Oe.__version===void 0||Ue===!0,et=je.dataReady;let St=z(F,Tt);re(i.TEXTURE_CUBE_MAP,F);let rt;if(Bt){oe&&Me&&t.texStorage2D(i.TEXTURE_CUBE_MAP,St,tt,Tt.width,Tt.height);for(let _e=0;_e<6;_e++){rt=qe[_e].mipmaps;for(let ft=0;ft<rt.length;ft++){const Nt=rt[ft];F.format!==pr?ie!==null?oe?et&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ft,0,0,Nt.width,Nt.height,ie,Nt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ft,tt,Nt.width,Nt.height,0,Nt.data):Rt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):oe?et&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ft,0,0,Nt.width,Nt.height,ie,we,Nt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ft,tt,Nt.width,Nt.height,0,ie,we,Nt.data)}}}else{if(rt=F.mipmaps,oe&&Me){rt.length>0&&St++;const _e=Je(qe[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,St,tt,_e.width,_e.height)}for(let _e=0;_e<6;_e++)if(Qe){oe?et&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,0,0,qe[_e].width,qe[_e].height,ie,we,qe[_e].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,tt,qe[_e].width,qe[_e].height,0,ie,we,qe[_e].data);for(let ft=0;ft<rt.length;ft++){const Kt=rt[ft].image[_e].image;oe?et&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ft+1,0,0,Kt.width,Kt.height,ie,we,Kt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ft+1,tt,Kt.width,Kt.height,0,ie,we,Kt.data)}}else{oe?et&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,0,0,ie,we,qe[_e]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,tt,ie,we,qe[_e]);for(let ft=0;ft<rt.length;ft++){const Nt=rt[ft];oe?et&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ft+1,0,0,ie,we,Nt.image[_e]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ft+1,tt,ie,we,Nt.image[_e])}}}T(F)&&M(i.TEXTURE_CUBE_MAP),Oe.__version=je.version,F.onUpdate&&F.onUpdate(F)}Z.__version=F.version}function ze(Z,F,ye,Ue,je,Oe){const Mt=o.convert(ye.format,ye.colorSpace),ct=o.convert(ye.type),Ft=I(ye.internalFormat,Mt,ct,ye.colorSpace),Bt=n.get(F),Qe=n.get(ye);if(Qe.__renderTarget=F,!Bt.__hasExternalTextures){const qe=Math.max(1,F.width>>Oe),Tt=Math.max(1,F.height>>Oe);je===i.TEXTURE_3D||je===i.TEXTURE_2D_ARRAY?t.texImage3D(je,Oe,Ft,qe,Tt,F.depth,0,Mt,ct,null):t.texImage2D(je,Oe,Ft,qe,Tt,0,Mt,ct,null)}t.bindFramebuffer(i.FRAMEBUFFER,Z),Lt(F)?d.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Ue,je,Qe.__webglTexture,0,ne(F)):(je===i.TEXTURE_2D||je>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&je<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Ue,je,Qe.__webglTexture,Oe),t.bindFramebuffer(i.FRAMEBUFFER,null)}function pt(Z,F,ye){if(i.bindRenderbuffer(i.RENDERBUFFER,Z),F.depthBuffer){const Ue=F.depthTexture,je=Ue&&Ue.isDepthTexture?Ue.type:null,Oe=L(F.stencilBuffer,je),Mt=F.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;Lt(F)?d.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ne(F),Oe,F.width,F.height):ye?i.renderbufferStorageMultisample(i.RENDERBUFFER,ne(F),Oe,F.width,F.height):i.renderbufferStorage(i.RENDERBUFFER,Oe,F.width,F.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Mt,i.RENDERBUFFER,Z)}else{const Ue=F.textures;for(let je=0;je<Ue.length;je++){const Oe=Ue[je],Mt=o.convert(Oe.format,Oe.colorSpace),ct=o.convert(Oe.type),Ft=I(Oe.internalFormat,Mt,ct,Oe.colorSpace);Lt(F)?d.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ne(F),Ft,F.width,F.height):ye?i.renderbufferStorageMultisample(i.RENDERBUFFER,ne(F),Ft,F.width,F.height):i.renderbufferStorage(i.RENDERBUFFER,Ft,F.width,F.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function It(Z,F,ye){const Ue=F.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(i.FRAMEBUFFER,Z),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const je=n.get(F.depthTexture);if(je.__renderTarget=F,(!je.__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),Ue){if(je.__webglInit===void 0&&(je.__webglInit=!0,F.depthTexture.addEventListener("dispose",P)),je.__webglTexture===void 0){je.__webglTexture=i.createTexture(),t.bindTexture(i.TEXTURE_CUBE_MAP,je.__webglTexture),re(i.TEXTURE_CUBE_MAP,F.depthTexture);const Bt=o.convert(F.depthTexture.format),Qe=o.convert(F.depthTexture.type);let qe;F.depthTexture.format===dl?qe=i.DEPTH_COMPONENT24:F.depthTexture.format===iu&&(qe=i.DEPTH24_STENCIL8);for(let Tt=0;Tt<6;Tt++)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Tt,0,qe,F.width,F.height,0,Bt,Qe,null)}}else se(F.depthTexture,0);const Oe=je.__webglTexture,Mt=ne(F),ct=Ue?i.TEXTURE_CUBE_MAP_POSITIVE_X+ye:i.TEXTURE_2D,Ft=F.depthTexture.format===iu?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;if(F.depthTexture.format===dl)Lt(F)?d.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Ft,ct,Oe,0,Mt):i.framebufferTexture2D(i.FRAMEBUFFER,Ft,ct,Oe,0);else if(F.depthTexture.format===iu)Lt(F)?d.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Ft,ct,Oe,0,Mt):i.framebufferTexture2D(i.FRAMEBUFFER,Ft,ct,Oe,0);else throw new Error("Unknown depthTexture format")}function zt(Z){const F=n.get(Z),ye=Z.isWebGLCubeRenderTarget===!0;if(F.__boundDepthTexture!==Z.depthTexture){const Ue=Z.depthTexture;if(F.__depthDisposeCallback&&F.__depthDisposeCallback(),Ue){const je=()=>{delete F.__boundDepthTexture,delete F.__depthDisposeCallback,Ue.removeEventListener("dispose",je)};Ue.addEventListener("dispose",je),F.__depthDisposeCallback=je}F.__boundDepthTexture=Ue}if(Z.depthTexture&&!F.__autoAllocateDepthBuffer)if(ye)for(let Ue=0;Ue<6;Ue++)It(F.__webglFramebuffer[Ue],Z,Ue);else{const Ue=Z.texture.mipmaps;Ue&&Ue.length>0?It(F.__webglFramebuffer[0],Z,0):It(F.__webglFramebuffer,Z,0)}else if(ye){F.__webglDepthbuffer=[];for(let Ue=0;Ue<6;Ue++)if(t.bindFramebuffer(i.FRAMEBUFFER,F.__webglFramebuffer[Ue]),F.__webglDepthbuffer[Ue]===void 0)F.__webglDepthbuffer[Ue]=i.createRenderbuffer(),pt(F.__webglDepthbuffer[Ue],Z,!1);else{const je=Z.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Oe=F.__webglDepthbuffer[Ue];i.bindRenderbuffer(i.RENDERBUFFER,Oe),i.framebufferRenderbuffer(i.FRAMEBUFFER,je,i.RENDERBUFFER,Oe)}}else{const Ue=Z.texture.mipmaps;if(Ue&&Ue.length>0?t.bindFramebuffer(i.FRAMEBUFFER,F.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,F.__webglFramebuffer),F.__webglDepthbuffer===void 0)F.__webglDepthbuffer=i.createRenderbuffer(),pt(F.__webglDepthbuffer,Z,!1);else{const je=Z.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Oe=F.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Oe),i.framebufferRenderbuffer(i.FRAMEBUFFER,je,i.RENDERBUFFER,Oe)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function Jt(Z,F,ye){const Ue=n.get(Z);F!==void 0&&ze(Ue.__webglFramebuffer,Z,Z.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),ye!==void 0&&zt(Z)}function jt(Z){const F=Z.texture,ye=n.get(Z),Ue=n.get(F);Z.addEventListener("dispose",V);const je=Z.textures,Oe=Z.isWebGLCubeRenderTarget===!0,Mt=je.length>1;if(Mt||(Ue.__webglTexture===void 0&&(Ue.__webglTexture=i.createTexture()),Ue.__version=F.version,u.memory.textures++),Oe){ye.__webglFramebuffer=[];for(let ct=0;ct<6;ct++)if(F.mipmaps&&F.mipmaps.length>0){ye.__webglFramebuffer[ct]=[];for(let Ft=0;Ft<F.mipmaps.length;Ft++)ye.__webglFramebuffer[ct][Ft]=i.createFramebuffer()}else ye.__webglFramebuffer[ct]=i.createFramebuffer()}else{if(F.mipmaps&&F.mipmaps.length>0){ye.__webglFramebuffer=[];for(let ct=0;ct<F.mipmaps.length;ct++)ye.__webglFramebuffer[ct]=i.createFramebuffer()}else ye.__webglFramebuffer=i.createFramebuffer();if(Mt)for(let ct=0,Ft=je.length;ct<Ft;ct++){const Bt=n.get(je[ct]);Bt.__webglTexture===void 0&&(Bt.__webglTexture=i.createTexture(),u.memory.textures++)}if(Z.samples>0&&Lt(Z)===!1){ye.__webglMultisampledFramebuffer=i.createFramebuffer(),ye.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,ye.__webglMultisampledFramebuffer);for(let ct=0;ct<je.length;ct++){const Ft=je[ct];ye.__webglColorRenderbuffer[ct]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,ye.__webglColorRenderbuffer[ct]);const Bt=o.convert(Ft.format,Ft.colorSpace),Qe=o.convert(Ft.type),qe=I(Ft.internalFormat,Bt,Qe,Ft.colorSpace,Z.isXRRenderTarget===!0),Tt=ne(Z);i.renderbufferStorageMultisample(i.RENDERBUFFER,Tt,qe,Z.width,Z.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ct,i.RENDERBUFFER,ye.__webglColorRenderbuffer[ct])}i.bindRenderbuffer(i.RENDERBUFFER,null),Z.depthBuffer&&(ye.__webglDepthRenderbuffer=i.createRenderbuffer(),pt(ye.__webglDepthRenderbuffer,Z,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Oe){t.bindTexture(i.TEXTURE_CUBE_MAP,Ue.__webglTexture),re(i.TEXTURE_CUBE_MAP,F);for(let ct=0;ct<6;ct++)if(F.mipmaps&&F.mipmaps.length>0)for(let Ft=0;Ft<F.mipmaps.length;Ft++)ze(ye.__webglFramebuffer[ct][Ft],Z,F,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ct,Ft);else ze(ye.__webglFramebuffer[ct],Z,F,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0);T(F)&&M(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Mt){for(let ct=0,Ft=je.length;ct<Ft;ct++){const Bt=je[ct],Qe=n.get(Bt);let qe=i.TEXTURE_2D;(Z.isWebGL3DRenderTarget||Z.isWebGLArrayRenderTarget)&&(qe=Z.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(qe,Qe.__webglTexture),re(qe,Bt),ze(ye.__webglFramebuffer,Z,Bt,i.COLOR_ATTACHMENT0+ct,qe,0),T(Bt)&&M(qe)}t.unbindTexture()}else{let ct=i.TEXTURE_2D;if((Z.isWebGL3DRenderTarget||Z.isWebGLArrayRenderTarget)&&(ct=Z.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(ct,Ue.__webglTexture),re(ct,F),F.mipmaps&&F.mipmaps.length>0)for(let Ft=0;Ft<F.mipmaps.length;Ft++)ze(ye.__webglFramebuffer[Ft],Z,F,i.COLOR_ATTACHMENT0,ct,Ft);else ze(ye.__webglFramebuffer,Z,F,i.COLOR_ATTACHMENT0,ct,0);T(F)&&M(ct),t.unbindTexture()}Z.depthBuffer&&zt(Z)}function He(Z){const F=Z.textures;for(let ye=0,Ue=F.length;ye<Ue;ye++){const je=F[ye];if(T(je)){const Oe=R(Z),Mt=n.get(je).__webglTexture;t.bindTexture(Oe,Mt),M(Oe),t.unbindTexture()}}}const nt=[],Xe=[];function mt(Z){if(Z.samples>0){if(Lt(Z)===!1){const F=Z.textures,ye=Z.width,Ue=Z.height;let je=i.COLOR_BUFFER_BIT;const Oe=Z.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Mt=n.get(Z),ct=F.length>1;if(ct)for(let Bt=0;Bt<F.length;Bt++)t.bindFramebuffer(i.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Bt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,Mt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Bt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer);const Ft=Z.texture.mipmaps;Ft&&Ft.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer);for(let Bt=0;Bt<F.length;Bt++){if(Z.resolveDepthBuffer&&(Z.depthBuffer&&(je|=i.DEPTH_BUFFER_BIT),Z.stencilBuffer&&Z.resolveStencilBuffer&&(je|=i.STENCIL_BUFFER_BIT)),ct){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Mt.__webglColorRenderbuffer[Bt]);const Qe=n.get(F[Bt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Qe,0)}i.blitFramebuffer(0,0,ye,Ue,0,0,ye,Ue,je,i.NEAREST),h===!0&&(nt.length=0,Xe.length=0,nt.push(i.COLOR_ATTACHMENT0+Bt),Z.depthBuffer&&Z.resolveDepthBuffer===!1&&(nt.push(Oe),Xe.push(Oe),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Xe)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,nt))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),ct)for(let Bt=0;Bt<F.length;Bt++){t.bindFramebuffer(i.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Bt,i.RENDERBUFFER,Mt.__webglColorRenderbuffer[Bt]);const Qe=n.get(F[Bt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,Mt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Bt,i.TEXTURE_2D,Qe,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer)}else if(Z.depthBuffer&&Z.resolveDepthBuffer===!1&&h){const F=Z.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[F])}}}function ne(Z){return Math.min(a.maxSamples,Z.samples)}function Lt(Z){const F=n.get(Z);return Z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function wt(Z){const F=u.render.frame;y.get(Z)!==F&&(y.set(Z,F),Z.update())}function kt(Z,F){const ye=Z.colorSpace,Ue=Z.format,je=Z.type;return Z.isCompressedTexture===!0||Z.isVideoTexture===!0||ye!==Eo&&ye!==Ql&&(Gn.getTransfer(ye)===si?(Ue!==pr||je!==Br)&&Rt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Qt("WebGLTextures: Unsupported texture color space:",ye)),F}function Je(Z){return typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement?(p.width=Z.naturalWidth||Z.width,p.height=Z.naturalHeight||Z.height):typeof VideoFrame<"u"&&Z instanceof VideoFrame?(p.width=Z.displayWidth,p.height=Z.displayHeight):(p.width=Z.width,p.height=Z.height),p}this.allocateTextureUnit=ee,this.resetTextureUnits=te,this.setTexture2D=se,this.setTexture2DArray=G,this.setTexture3D=$,this.setTextureCube=le,this.rebindTextures=Jt,this.setupRenderTarget=jt,this.updateRenderTargetMipmap=He,this.updateMultisampleRenderTarget=mt,this.setupDepthRenderbuffer=zt,this.setupFrameBufferTexture=ze,this.useMultisampledRTT=Lt,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function G3(i,e){function t(n,a=Ql){let o;const u=Gn.getTransfer(a);if(n===Br)return i.UNSIGNED_BYTE;if(n===Kx)return i.UNSIGNED_SHORT_4_4_4_4;if(n===$x)return i.UNSIGNED_SHORT_5_5_5_1;if(n===N1)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===D1)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===Yx)return i.BYTE;if(n===Zx)return i.SHORT;if(n===Ih)return i.UNSIGNED_SHORT;if(n===Lg)return i.INT;if(n===vs)return i.UNSIGNED_INT;if(n===Vi)return i.FLOAT;if(n===ir)return i.HALF_FLOAT;if(n===I1)return i.ALPHA;if(n===L1)return i.RGB;if(n===pr)return i.RGBA;if(n===dl)return i.DEPTH_COMPONENT;if(n===iu)return i.DEPTH_STENCIL;if(n===Ug)return i.RED;if(n===Og)return i.RED_INTEGER;if(n===Df)return i.RG;if(n===Qx)return i.RG_INTEGER;if(n===Jx)return i.RGBA_INTEGER;if(n===Jm||n===eg||n===tg||n===ng)if(u===si)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(n===Jm)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===eg)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===tg)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===ng)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(n===Jm)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===eg)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===tg)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===ng)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===ex||n===tx||n===nx||n===ix)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(n===ex)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===tx)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===nx)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===ix)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===rx||n===ax||n===sx||n===ox||n===lx||n===cx||n===ux)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(n===rx||n===ax)return u===si?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===sx)return u===si?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC;if(n===ox)return o.COMPRESSED_R11_EAC;if(n===lx)return o.COMPRESSED_SIGNED_R11_EAC;if(n===cx)return o.COMPRESSED_RG11_EAC;if(n===ux)return o.COMPRESSED_SIGNED_RG11_EAC}else return null;if(n===fx||n===dx||n===hx||n===px||n===mx||n===gx||n===vx||n===yx||n===xx||n===_x||n===bx||n===Sx||n===Mx||n===Ex)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(n===fx)return u===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===dx)return u===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===hx)return u===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===px)return u===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===mx)return u===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===gx)return u===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===vx)return u===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===yx)return u===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===xx)return u===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===_x)return u===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===bx)return u===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Sx)return u===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Mx)return u===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Ex)return u===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===wx||n===Tx||n===Ax)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(n===wx)return u===si?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Tx)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Ax)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Cx||n===Rx||n===Nx||n===Dx)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(n===Cx)return o.COMPRESSED_RED_RGTC1_EXT;if(n===Rx)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Nx)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Dx)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Lh?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const jk=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,qk=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Yk{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new H1(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new va({vertexShader:jk,fragmentShader:qk,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ki(new hu(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Zk extends hl{constructor(e,t){super();const n=this;let a=null,o=1,u=null,d="local-floor",h=1,p=null,y=null,v=null,x=null,S=null,E=null;const C=typeof XRWebGLBinding<"u",T=new Yk,M={},R=t.getContextAttributes();let I=null,L=null;const z=[],P=[],V=new Ze;let N=null;const O=new dr;O.viewport=new vi;const K=new dr;K.viewport=new vi;const H=[O,K],te=new D3;let ee=null,ae=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(he){let De=z[he];return De===void 0&&(De=new zy,z[he]=De),De.getTargetRaySpace()},this.getControllerGrip=function(he){let De=z[he];return De===void 0&&(De=new zy,z[he]=De),De.getGripSpace()},this.getHand=function(he){let De=z[he];return De===void 0&&(De=new zy,z[he]=De),De.getHandSpace()};function se(he){const De=P.indexOf(he.inputSource);if(De===-1)return;const ze=z[De];ze!==void 0&&(ze.update(he.inputSource,he.frame,p||u),ze.dispatchEvent({type:he.type,data:he.inputSource}))}function G(){a.removeEventListener("select",se),a.removeEventListener("selectstart",se),a.removeEventListener("selectend",se),a.removeEventListener("squeeze",se),a.removeEventListener("squeezestart",se),a.removeEventListener("squeezeend",se),a.removeEventListener("end",G),a.removeEventListener("inputsourceschange",$);for(let he=0;he<z.length;he++){const De=P[he];De!==null&&(P[he]=null,z[he].disconnect(De))}ee=null,ae=null,T.reset();for(const he in M)delete M[he];e.setRenderTarget(I),S=null,x=null,v=null,a=null,L=null,Ke.stop(),n.isPresenting=!1,e.setPixelRatio(N),e.setSize(V.width,V.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(he){o=he,n.isPresenting===!0&&Rt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(he){d=he,n.isPresenting===!0&&Rt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||u},this.setReferenceSpace=function(he){p=he},this.getBaseLayer=function(){return x!==null?x:S},this.getBinding=function(){return v===null&&C&&(v=new XRWebGLBinding(a,t)),v},this.getFrame=function(){return E},this.getSession=function(){return a},this.setSession=async function(he){if(a=he,a!==null){if(I=e.getRenderTarget(),a.addEventListener("select",se),a.addEventListener("selectstart",se),a.addEventListener("selectend",se),a.addEventListener("squeeze",se),a.addEventListener("squeezestart",se),a.addEventListener("squeezeend",se),a.addEventListener("end",G),a.addEventListener("inputsourceschange",$),R.xrCompatible!==!0&&await t.makeXRCompatible(),N=e.getPixelRatio(),e.getSize(V),C&&"createProjectionLayer"in XRWebGLBinding.prototype){let ze=null,pt=null,It=null;R.depth&&(It=R.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ze=R.stencil?iu:dl,pt=R.stencil?Lh:vs);const zt={colorFormat:t.RGBA8,depthFormat:It,scaleFactor:o};v=this.getBinding(),x=v.createProjectionLayer(zt),a.updateRenderState({layers:[x]}),e.setPixelRatio(1),e.setSize(x.textureWidth,x.textureHeight,!1),L=new Ua(x.textureWidth,x.textureHeight,{format:pr,type:Br,depthTexture:new zh(x.textureWidth,x.textureHeight,pt,void 0,void 0,void 0,void 0,void 0,void 0,ze),stencilBuffer:R.stencil,colorSpace:e.outputColorSpace,samples:R.antialias?4:0,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}else{const ze={antialias:R.antialias,alpha:!0,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:o};S=new XRWebGLLayer(a,t,ze),a.updateRenderState({baseLayer:S}),e.setPixelRatio(1),e.setSize(S.framebufferWidth,S.framebufferHeight,!1),L=new Ua(S.framebufferWidth,S.framebufferHeight,{format:pr,type:Br,colorSpace:e.outputColorSpace,stencilBuffer:R.stencil,resolveDepthBuffer:S.ignoreDepthValues===!1,resolveStencilBuffer:S.ignoreDepthValues===!1})}L.isXRRenderTarget=!0,this.setFoveation(h),p=null,u=await a.requestReferenceSpace(d),Ke.setContext(a),Ke.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return T.getDepthTexture()};function $(he){for(let De=0;De<he.removed.length;De++){const ze=he.removed[De],pt=P.indexOf(ze);pt>=0&&(P[pt]=null,z[pt].disconnect(ze))}for(let De=0;De<he.added.length;De++){const ze=he.added[De];let pt=P.indexOf(ze);if(pt===-1){for(let zt=0;zt<z.length;zt++)if(zt>=P.length){P.push(ze),pt=zt;break}else if(P[zt]===null){P[zt]=ze,pt=zt;break}if(pt===-1)break}const It=z[pt];It&&It.connect(ze)}}const le=new Q,be=new Q;function Ae(he,De,ze){le.setFromMatrixPosition(De.matrixWorld),be.setFromMatrixPosition(ze.matrixWorld);const pt=le.distanceTo(be),It=De.projectionMatrix.elements,zt=ze.projectionMatrix.elements,Jt=It[14]/(It[10]-1),jt=It[14]/(It[10]+1),He=(It[9]+1)/It[5],nt=(It[9]-1)/It[5],Xe=(It[8]-1)/It[0],mt=(zt[8]+1)/zt[0],ne=Jt*Xe,Lt=Jt*mt,wt=pt/(-Xe+mt),kt=wt*-Xe;if(De.matrixWorld.decompose(he.position,he.quaternion,he.scale),he.translateX(kt),he.translateZ(wt),he.matrixWorld.compose(he.position,he.quaternion,he.scale),he.matrixWorldInverse.copy(he.matrixWorld).invert(),It[10]===-1)he.projectionMatrix.copy(De.projectionMatrix),he.projectionMatrixInverse.copy(De.projectionMatrixInverse);else{const Je=Jt+wt,Z=jt+wt,F=ne-kt,ye=Lt+(pt-kt),Ue=He*jt/Z*Je,je=nt*jt/Z*Je;he.projectionMatrix.makePerspective(F,ye,Ue,je,Je,Z),he.projectionMatrixInverse.copy(he.projectionMatrix).invert()}}function Y(he,De){De===null?he.matrixWorld.copy(he.matrix):he.matrixWorld.multiplyMatrices(De.matrixWorld,he.matrix),he.matrixWorldInverse.copy(he.matrixWorld).invert()}this.updateCamera=function(he){if(a===null)return;let De=he.near,ze=he.far;T.texture!==null&&(T.depthNear>0&&(De=T.depthNear),T.depthFar>0&&(ze=T.depthFar)),te.near=K.near=O.near=De,te.far=K.far=O.far=ze,(ee!==te.near||ae!==te.far)&&(a.updateRenderState({depthNear:te.near,depthFar:te.far}),ee=te.near,ae=te.far),te.layers.mask=he.layers.mask|6,O.layers.mask=te.layers.mask&-5,K.layers.mask=te.layers.mask&-3;const pt=he.parent,It=te.cameras;Y(te,pt);for(let zt=0;zt<It.length;zt++)Y(It[zt],pt);It.length===2?Ae(te,O,K):te.projectionMatrix.copy(O.projectionMatrix),re(he,te,pt)};function re(he,De,ze){ze===null?he.matrix.copy(De.matrixWorld):(he.matrix.copy(ze.matrixWorld),he.matrix.invert(),he.matrix.multiply(De.matrixWorld)),he.matrix.decompose(he.position,he.quaternion,he.scale),he.updateMatrixWorld(!0),he.projectionMatrix.copy(De.projectionMatrix),he.projectionMatrixInverse.copy(De.projectionMatrixInverse),he.isPerspectiveCamera&&(he.fov=Uh*2*Math.atan(1/he.projectionMatrix.elements[5]),he.zoom=1)}this.getCamera=function(){return te},this.getFoveation=function(){if(!(x===null&&S===null))return h},this.setFoveation=function(he){h=he,x!==null&&(x.fixedFoveation=he),S!==null&&S.fixedFoveation!==void 0&&(S.fixedFoveation=he)},this.hasDepthSensing=function(){return T.texture!==null},this.getDepthSensingMesh=function(){return T.getMesh(te)},this.getCameraTexture=function(he){return M[he]};let me=null;function Te(he,De){if(y=De.getViewerPose(p||u),E=De,y!==null){const ze=y.views;S!==null&&(e.setRenderTargetFramebuffer(L,S.framebuffer),e.setRenderTarget(L));let pt=!1;ze.length!==te.cameras.length&&(te.cameras.length=0,pt=!0);for(let jt=0;jt<ze.length;jt++){const He=ze[jt];let nt=null;if(S!==null)nt=S.getViewport(He);else{const mt=v.getViewSubImage(x,He);nt=mt.viewport,jt===0&&(e.setRenderTargetTextures(L,mt.colorTexture,mt.depthStencilTexture),e.setRenderTarget(L))}let Xe=H[jt];Xe===void 0&&(Xe=new dr,Xe.layers.enable(jt),Xe.viewport=new vi,H[jt]=Xe),Xe.matrix.fromArray(He.transform.matrix),Xe.matrix.decompose(Xe.position,Xe.quaternion,Xe.scale),Xe.projectionMatrix.fromArray(He.projectionMatrix),Xe.projectionMatrixInverse.copy(Xe.projectionMatrix).invert(),Xe.viewport.set(nt.x,nt.y,nt.width,nt.height),jt===0&&(te.matrix.copy(Xe.matrix),te.matrix.decompose(te.position,te.quaternion,te.scale)),pt===!0&&te.cameras.push(Xe)}const It=a.enabledFeatures;if(It&&It.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&C){v=n.getBinding();const jt=v.getDepthInformation(ze[0]);jt&&jt.isValid&&jt.texture&&T.init(jt,a.renderState)}if(It&&It.includes("camera-access")&&C){e.state.unbindTexture(),v=n.getBinding();for(let jt=0;jt<ze.length;jt++){const He=ze[jt].camera;if(He){let nt=M[He];nt||(nt=new H1,M[He]=nt);const Xe=v.getCameraImage(He);nt.sourceTexture=Xe}}}}for(let ze=0;ze<z.length;ze++){const pt=P[ze],It=z[ze];pt!==null&&It!==void 0&&It.update(pt,De,p||u)}me&&me(he,De),De.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:De}),E=null}const Ke=new F3;Ke.setAnimationLoop(Te),this.setAnimationLoop=function(he){me=he},this.dispose=function(){}}}const mf=new ys,Kk=new hn;function $k(i,e){function t(T,M){T.matrixAutoUpdate===!0&&T.updateMatrix(),M.value.copy(T.matrix)}function n(T,M){M.color.getRGB(T.fogColor.value,a3(i)),M.isFog?(T.fogNear.value=M.near,T.fogFar.value=M.far):M.isFogExp2&&(T.fogDensity.value=M.density)}function a(T,M,R,I,L){M.isMeshBasicMaterial?o(T,M):M.isMeshLambertMaterial?(o(T,M),M.envMap&&(T.envMapIntensity.value=M.envMapIntensity)):M.isMeshToonMaterial?(o(T,M),v(T,M)):M.isMeshPhongMaterial?(o(T,M),y(T,M),M.envMap&&(T.envMapIntensity.value=M.envMapIntensity)):M.isMeshStandardMaterial?(o(T,M),x(T,M),M.isMeshPhysicalMaterial&&S(T,M,L)):M.isMeshMatcapMaterial?(o(T,M),E(T,M)):M.isMeshDepthMaterial?o(T,M):M.isMeshDistanceMaterial?(o(T,M),C(T,M)):M.isMeshNormalMaterial?o(T,M):M.isLineBasicMaterial?(u(T,M),M.isLineDashedMaterial&&d(T,M)):M.isPointsMaterial?h(T,M,R,I):M.isSpriteMaterial?p(T,M):M.isShadowMaterial?(T.color.value.copy(M.color),T.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function o(T,M){T.opacity.value=M.opacity,M.color&&T.diffuse.value.copy(M.color),M.emissive&&T.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(T.map.value=M.map,t(M.map,T.mapTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,t(M.alphaMap,T.alphaMapTransform)),M.bumpMap&&(T.bumpMap.value=M.bumpMap,t(M.bumpMap,T.bumpMapTransform),T.bumpScale.value=M.bumpScale,M.side===ma&&(T.bumpScale.value*=-1)),M.normalMap&&(T.normalMap.value=M.normalMap,t(M.normalMap,T.normalMapTransform),T.normalScale.value.copy(M.normalScale),M.side===ma&&T.normalScale.value.negate()),M.displacementMap&&(T.displacementMap.value=M.displacementMap,t(M.displacementMap,T.displacementMapTransform),T.displacementScale.value=M.displacementScale,T.displacementBias.value=M.displacementBias),M.emissiveMap&&(T.emissiveMap.value=M.emissiveMap,t(M.emissiveMap,T.emissiveMapTransform)),M.specularMap&&(T.specularMap.value=M.specularMap,t(M.specularMap,T.specularMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest);const R=e.get(M),I=R.envMap,L=R.envMapRotation;I&&(T.envMap.value=I,mf.copy(L),mf.x*=-1,mf.y*=-1,mf.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(mf.y*=-1,mf.z*=-1),T.envMapRotation.value.setFromMatrix4(Kk.makeRotationFromEuler(mf)),T.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=M.reflectivity,T.ior.value=M.ior,T.refractionRatio.value=M.refractionRatio),M.lightMap&&(T.lightMap.value=M.lightMap,T.lightMapIntensity.value=M.lightMapIntensity,t(M.lightMap,T.lightMapTransform)),M.aoMap&&(T.aoMap.value=M.aoMap,T.aoMapIntensity.value=M.aoMapIntensity,t(M.aoMap,T.aoMapTransform))}function u(T,M){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,M.map&&(T.map.value=M.map,t(M.map,T.mapTransform))}function d(T,M){T.dashSize.value=M.dashSize,T.totalSize.value=M.dashSize+M.gapSize,T.scale.value=M.scale}function h(T,M,R,I){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,T.size.value=M.size*R,T.scale.value=I*.5,M.map&&(T.map.value=M.map,t(M.map,T.uvTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,t(M.alphaMap,T.alphaMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest)}function p(T,M){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,T.rotation.value=M.rotation,M.map&&(T.map.value=M.map,t(M.map,T.mapTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,t(M.alphaMap,T.alphaMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest)}function y(T,M){T.specular.value.copy(M.specular),T.shininess.value=Math.max(M.shininess,1e-4)}function v(T,M){M.gradientMap&&(T.gradientMap.value=M.gradientMap)}function x(T,M){T.metalness.value=M.metalness,M.metalnessMap&&(T.metalnessMap.value=M.metalnessMap,t(M.metalnessMap,T.metalnessMapTransform)),T.roughness.value=M.roughness,M.roughnessMap&&(T.roughnessMap.value=M.roughnessMap,t(M.roughnessMap,T.roughnessMapTransform)),M.envMap&&(T.envMapIntensity.value=M.envMapIntensity)}function S(T,M,R){T.ior.value=M.ior,M.sheen>0&&(T.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),T.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(T.sheenColorMap.value=M.sheenColorMap,t(M.sheenColorMap,T.sheenColorMapTransform)),M.sheenRoughnessMap&&(T.sheenRoughnessMap.value=M.sheenRoughnessMap,t(M.sheenRoughnessMap,T.sheenRoughnessMapTransform))),M.clearcoat>0&&(T.clearcoat.value=M.clearcoat,T.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(T.clearcoatMap.value=M.clearcoatMap,t(M.clearcoatMap,T.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,t(M.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(T.clearcoatNormalMap.value=M.clearcoatNormalMap,t(M.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===ma&&T.clearcoatNormalScale.value.negate())),M.dispersion>0&&(T.dispersion.value=M.dispersion),M.iridescence>0&&(T.iridescence.value=M.iridescence,T.iridescenceIOR.value=M.iridescenceIOR,T.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(T.iridescenceMap.value=M.iridescenceMap,t(M.iridescenceMap,T.iridescenceMapTransform)),M.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=M.iridescenceThicknessMap,t(M.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),M.transmission>0&&(T.transmission.value=M.transmission,T.transmissionSamplerMap.value=R.texture,T.transmissionSamplerSize.value.set(R.width,R.height),M.transmissionMap&&(T.transmissionMap.value=M.transmissionMap,t(M.transmissionMap,T.transmissionMapTransform)),T.thickness.value=M.thickness,M.thicknessMap&&(T.thicknessMap.value=M.thicknessMap,t(M.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=M.attenuationDistance,T.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(T.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(T.anisotropyMap.value=M.anisotropyMap,t(M.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=M.specularIntensity,T.specularColor.value.copy(M.specularColor),M.specularColorMap&&(T.specularColorMap.value=M.specularColorMap,t(M.specularColorMap,T.specularColorMapTransform)),M.specularIntensityMap&&(T.specularIntensityMap.value=M.specularIntensityMap,t(M.specularIntensityMap,T.specularIntensityMapTransform))}function E(T,M){M.matcap&&(T.matcap.value=M.matcap)}function C(T,M){const R=e.get(M).light;T.referencePosition.value.setFromMatrixPosition(R.matrixWorld),T.nearDistance.value=R.shadow.camera.near,T.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:a}}function Qk(i,e,t,n){let a={},o={},u=[];const d=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function h(R,I){const L=I.program;n.uniformBlockBinding(R,L)}function p(R,I){let L=a[R.id];L===void 0&&(E(R),L=y(R),a[R.id]=L,R.addEventListener("dispose",T));const z=I.program;n.updateUBOMapping(R,z);const P=e.render.frame;o[R.id]!==P&&(x(R),o[R.id]=P)}function y(R){const I=v();R.__bindingPointIndex=I;const L=i.createBuffer(),z=R.__size,P=R.usage;return i.bindBuffer(i.UNIFORM_BUFFER,L),i.bufferData(i.UNIFORM_BUFFER,z,P),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,I,L),L}function v(){for(let R=0;R<d;R++)if(u.indexOf(R)===-1)return u.push(R),R;return Qt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function x(R){const I=a[R.id],L=R.uniforms,z=R.__cache;i.bindBuffer(i.UNIFORM_BUFFER,I);for(let P=0,V=L.length;P<V;P++){const N=Array.isArray(L[P])?L[P]:[L[P]];for(let O=0,K=N.length;O<K;O++){const H=N[O];if(S(H,P,O,z)===!0){const te=H.__offset,ee=Array.isArray(H.value)?H.value:[H.value];let ae=0;for(let se=0;se<ee.length;se++){const G=ee[se],$=C(G);typeof G=="number"||typeof G=="boolean"?(H.__data[0]=G,i.bufferSubData(i.UNIFORM_BUFFER,te+ae,H.__data)):G.isMatrix3?(H.__data[0]=G.elements[0],H.__data[1]=G.elements[1],H.__data[2]=G.elements[2],H.__data[3]=0,H.__data[4]=G.elements[3],H.__data[5]=G.elements[4],H.__data[6]=G.elements[5],H.__data[7]=0,H.__data[8]=G.elements[6],H.__data[9]=G.elements[7],H.__data[10]=G.elements[8],H.__data[11]=0):(G.toArray(H.__data,ae),ae+=$.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,te,H.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function S(R,I,L,z){const P=R.value,V=I+"_"+L;if(z[V]===void 0)return typeof P=="number"||typeof P=="boolean"?z[V]=P:z[V]=P.clone(),!0;{const N=z[V];if(typeof P=="number"||typeof P=="boolean"){if(N!==P)return z[V]=P,!0}else if(N.equals(P)===!1)return N.copy(P),!0}return!1}function E(R){const I=R.uniforms;let L=0;const z=16;for(let V=0,N=I.length;V<N;V++){const O=Array.isArray(I[V])?I[V]:[I[V]];for(let K=0,H=O.length;K<H;K++){const te=O[K],ee=Array.isArray(te.value)?te.value:[te.value];for(let ae=0,se=ee.length;ae<se;ae++){const G=ee[ae],$=C(G),le=L%z,be=le%$.boundary,Ae=le+be;L+=be,Ae!==0&&z-Ae<$.storage&&(L+=z-Ae),te.__data=new Float32Array($.storage/Float32Array.BYTES_PER_ELEMENT),te.__offset=L,L+=$.storage}}}const P=L%z;return P>0&&(L+=z-P),R.__size=L,R.__cache={},this}function C(R){const I={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(I.boundary=4,I.storage=4):R.isVector2?(I.boundary=8,I.storage=8):R.isVector3||R.isColor?(I.boundary=16,I.storage=12):R.isVector4?(I.boundary=16,I.storage=16):R.isMatrix3?(I.boundary=48,I.storage=48):R.isMatrix4?(I.boundary=64,I.storage=64):R.isTexture?Rt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Rt("WebGLRenderer: Unsupported uniform value type.",R),I}function T(R){const I=R.target;I.removeEventListener("dispose",T);const L=u.indexOf(I.__bindingPointIndex);u.splice(L,1),i.deleteBuffer(a[I.id]),delete a[I.id],delete o[I.id]}function M(){for(const R in a)i.deleteBuffer(a[R]);u=[],a={},o={}}return{bind:h,update:p,dispose:M}}const Jk=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let al=null;function e6(){return al===null&&(al=new Ys(Jk,16,16,Df,ir),al.name="DFG_LUT",al.minFilter=jn,al.magFilter=jn,al.wrapS=nr,al.wrapT=nr,al.generateMipmaps=!1,al.needsUpdate=!0),al}class uM{constructor(e={}){const{canvas:t=IC(),context:n=null,depth:a=!0,stencil:o=!1,alpha:u=!1,antialias:d=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:p=!1,powerPreference:y="default",failIfMajorPerformanceCaveat:v=!1,reversedDepthBuffer:x=!1,outputBufferType:S=Br}=e;this.isWebGLRenderer=!0;let E;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");E=n.getContextAttributes().alpha}else E=u;const C=S,T=new Set([Jx,Qx,Og]),M=new Set([Br,vs,Ih,Lh,Kx,$x]),R=new Uint32Array(4),I=new Int32Array(4);let L=null,z=null;const P=[],V=[];let N=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=qs,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const O=this;let K=!1;this._outputColorSpace=Fr;let H=0,te=0,ee=null,ae=-1,se=null;const G=new vi,$=new vi;let le=null;const be=new Pt(0);let Ae=0,Y=t.width,re=t.height,me=1,Te=null,Ke=null;const he=new vi(0,0,Y,re),De=new vi(0,0,Y,re);let ze=!1;const pt=new Kh;let It=!1,zt=!1;const Jt=new hn,jt=new Q,He=new vi,nt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Xe=!1;function mt(){return ee===null?me:1}let ne=n;function Lt(k,fe){return t.getContext(k,fe)}try{const k={alpha:!0,depth:a,stencil:o,antialias:d,premultipliedAlpha:h,preserveDrawingBuffer:p,powerPreference:y,failIfMajorPerformanceCaveat:v};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Yh}`),t.addEventListener("webglcontextlost",ft,!1),t.addEventListener("webglcontextrestored",Nt,!1),t.addEventListener("webglcontextcreationerror",Kt,!1),ne===null){const fe="webgl2";if(ne=Lt(fe,k),ne===null)throw Lt(fe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(k){throw Qt("WebGLRenderer: "+k.message),k}let wt,kt,Je,Z,F,ye,Ue,je,Oe,Mt,ct,Ft,Bt,Qe,qe,Tt,ie,we,tt,oe,Me,et,St;function rt(){wt=new n5(ne),wt.init(),Me=new G3(ne,wt),kt=new YB(ne,wt,e,Me),Je=new Wk(ne,wt),kt.reversedDepthBuffer&&x&&Je.buffers.depth.setReversed(!0),Z=new a5(ne),F=new Nk,ye=new Xk(ne,wt,Je,F,kt,Me,Z),Ue=new t5(O),je=new u4(ne),et=new jB(ne,je),Oe=new i5(ne,je,Z,et),Mt=new o5(ne,Oe,je,et,Z),we=new s5(ne,kt,ye),qe=new ZB(F),ct=new Rk(O,Ue,wt,kt,et,qe),Ft=new $k(O,F),Bt=new Ik,Qe=new Fk(wt),ie=new XB(O,Ue,Je,Mt,E,h),Tt=new Gk(O,Mt,kt),St=new Qk(ne,Z,kt,Je),tt=new qB(ne,wt,Z),oe=new r5(ne,wt,Z),Z.programs=ct.programs,O.capabilities=kt,O.extensions=wt,O.properties=F,O.renderLists=Bt,O.shadowMap=Tt,O.state=Je,O.info=Z}rt(),C!==Br&&(N=new c5(C,t.width,t.height,a,o));const _e=new Zk(O,ne);this.xr=_e,this.getContext=function(){return ne},this.getContextAttributes=function(){return ne.getContextAttributes()},this.forceContextLoss=function(){const k=wt.get("WEBGL_lose_context");k&&k.loseContext()},this.forceContextRestore=function(){const k=wt.get("WEBGL_lose_context");k&&k.restoreContext()},this.getPixelRatio=function(){return me},this.setPixelRatio=function(k){k!==void 0&&(me=k,this.setSize(Y,re,!1))},this.getSize=function(k){return k.set(Y,re)},this.setSize=function(k,fe,ge=!0){if(_e.isPresenting){Rt("WebGLRenderer: Can't change size while VR device is presenting.");return}Y=k,re=fe,t.width=Math.floor(k*me),t.height=Math.floor(fe*me),ge===!0&&(t.style.width=k+"px",t.style.height=fe+"px"),N!==null&&N.setSize(t.width,t.height),this.setViewport(0,0,k,fe)},this.getDrawingBufferSize=function(k){return k.set(Y*me,re*me).floor()},this.setDrawingBufferSize=function(k,fe,ge){Y=k,re=fe,me=ge,t.width=Math.floor(k*ge),t.height=Math.floor(fe*ge),this.setViewport(0,0,k,fe)},this.setEffects=function(k){if(C===Br){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(k){for(let fe=0;fe<k.length;fe++)if(k[fe].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}N.setEffects(k||[])},this.getCurrentViewport=function(k){return k.copy(G)},this.getViewport=function(k){return k.copy(he)},this.setViewport=function(k,fe,ge,pe){k.isVector4?he.set(k.x,k.y,k.z,k.w):he.set(k,fe,ge,pe),Je.viewport(G.copy(he).multiplyScalar(me).round())},this.getScissor=function(k){return k.copy(De)},this.setScissor=function(k,fe,ge,pe){k.isVector4?De.set(k.x,k.y,k.z,k.w):De.set(k,fe,ge,pe),Je.scissor($.copy(De).multiplyScalar(me).round())},this.getScissorTest=function(){return ze},this.setScissorTest=function(k){Je.setScissorTest(ze=k)},this.setOpaqueSort=function(k){Te=k},this.setTransparentSort=function(k){Ke=k},this.getClearColor=function(k){return k.copy(ie.getClearColor())},this.setClearColor=function(){ie.setClearColor(...arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha(...arguments)},this.clear=function(k=!0,fe=!0,ge=!0){let pe=0;if(k){let ve=!1;if(ee!==null){const Ge=ee.texture.format;ve=T.has(Ge)}if(ve){const Ge=ee.texture.type,it=M.has(Ge),at=ie.getClearColor(),lt=ie.getClearAlpha(),Ct=at.r,Dt=at.g,$t=at.b;it?(R[0]=Ct,R[1]=Dt,R[2]=$t,R[3]=lt,ne.clearBufferuiv(ne.COLOR,0,R)):(I[0]=Ct,I[1]=Dt,I[2]=$t,I[3]=lt,ne.clearBufferiv(ne.COLOR,0,I))}else pe|=ne.COLOR_BUFFER_BIT}fe&&(pe|=ne.DEPTH_BUFFER_BIT),ge&&(pe|=ne.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),pe!==0&&ne.clear(pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ft,!1),t.removeEventListener("webglcontextrestored",Nt,!1),t.removeEventListener("webglcontextcreationerror",Kt,!1),ie.dispose(),Bt.dispose(),Qe.dispose(),F.dispose(),Ue.dispose(),Mt.dispose(),et.dispose(),St.dispose(),ct.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",ea),_e.removeEventListener("sessionend",Mi),ar.stop()};function ft(k){k.preventDefault(),pg("WebGLRenderer: Context Lost."),K=!0}function Nt(){pg("WebGLRenderer: Context Restored."),K=!1;const k=Z.autoReset,fe=Tt.enabled,ge=Tt.autoUpdate,pe=Tt.needsUpdate,ve=Tt.type;rt(),Z.autoReset=k,Tt.enabled=fe,Tt.autoUpdate=ge,Tt.needsUpdate=pe,Tt.type=ve}function Kt(k){Qt("WebGLRenderer: A WebGL context could not be created. Reason: ",k.statusMessage)}function cn(k){const fe=k.target;fe.removeEventListener("dispose",cn),gn(fe)}function gn(k){kn(k),F.remove(k)}function kn(k){const fe=F.get(k).programs;fe!==void 0&&(fe.forEach(function(ge){ct.releaseProgram(ge)}),k.isShaderMaterial&&ct.releaseShaderCache(k))}this.renderBufferDirect=function(k,fe,ge,pe,ve,Ge){fe===null&&(fe=nt);const it=ve.isMesh&&ve.matrixWorld.determinant()<0,at=Ve(k,fe,ge,pe,ve);Je.setMaterial(pe,it);let lt=ge.index,Ct=1;if(pe.wireframe===!0){if(lt=Oe.getWireframeAttribute(ge),lt===void 0)return;Ct=2}const Dt=ge.drawRange,$t=ge.attributes.position;let gt=Dt.start*Ct,qt=(Dt.start+Dt.count)*Ct;Ge!==null&&(gt=Math.max(gt,Ge.start*Ct),qt=Math.min(qt,(Ge.start+Ge.count)*Ct)),lt!==null?(gt=Math.max(gt,0),qt=Math.min(qt,lt.count)):$t!=null&&(gt=Math.max(gt,0),qt=Math.min(qt,$t.count));const On=qt-gt;if(On<0||On===1/0)return;et.setup(ve,pe,at,ge,lt);let qn,un=tt;if(lt!==null&&(qn=je.get(lt),un=oe,un.setIndex(qn)),ve.isMesh)pe.wireframe===!0?(Je.setLineWidth(pe.wireframeLinewidth*mt()),un.setMode(ne.LINES)):un.setMode(ne.TRIANGLES);else if(ve.isLine){let Xt=pe.linewidth;Xt===void 0&&(Xt=1),Je.setLineWidth(Xt*mt()),ve.isLineSegments?un.setMode(ne.LINES):ve.isLineLoop?un.setMode(ne.LINE_LOOP):un.setMode(ne.LINE_STRIP)}else ve.isPoints?un.setMode(ne.POINTS):ve.isSprite&&un.setMode(ne.TRIANGLES);if(ve.isBatchedMesh)if(ve._multiDrawInstances!==null)mg("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),un.renderMultiDrawInstances(ve._multiDrawStarts,ve._multiDrawCounts,ve._multiDrawCount,ve._multiDrawInstances);else if(wt.get("WEBGL_multi_draw"))un.renderMultiDraw(ve._multiDrawStarts,ve._multiDrawCounts,ve._multiDrawCount);else{const Xt=ve._multiDrawStarts,ut=ve._multiDrawCounts,pn=ve._multiDrawCount,At=lt?je.get(lt).bytesPerElement:1,Kn=F.get(pe).currentProgram.getUniforms();for(let Ei=0;Ei<pn;Ei++)Kn.setValue(ne,"_gl_DrawID",Ei),un.render(Xt[Ei]/At,ut[Ei])}else if(ve.isInstancedMesh)un.renderInstances(gt,On,ve.count);else if(ge.isInstancedBufferGeometry){const Xt=ge._maxInstanceCount!==void 0?ge._maxInstanceCount:1/0,ut=Math.min(ge.instanceCount,Xt);un.renderInstances(gt,On,ut)}else un.render(gt,On)};function Dr(k,fe,ge){k.transparent===!0&&k.side===_o&&k.forceSinglePass===!1?(k.side=ma,k.needsUpdate=!0,ce(k,fe,ge),k.side=tc,k.needsUpdate=!0,ce(k,fe,ge),k.side=_o):ce(k,fe,ge)}this.compile=function(k,fe,ge=null){ge===null&&(ge=k),z=Qe.get(ge),z.init(fe),V.push(z),ge.traverseVisible(function(ve){ve.isLight&&ve.layers.test(fe.layers)&&(z.pushLight(ve),ve.castShadow&&z.pushShadow(ve))}),k!==ge&&k.traverseVisible(function(ve){ve.isLight&&ve.layers.test(fe.layers)&&(z.pushLight(ve),ve.castShadow&&z.pushShadow(ve))}),z.setupLights();const pe=new Set;return k.traverse(function(ve){if(!(ve.isMesh||ve.isPoints||ve.isLine||ve.isSprite))return;const Ge=ve.material;if(Ge)if(Array.isArray(Ge))for(let it=0;it<Ge.length;it++){const at=Ge[it];Dr(at,ge,ve),pe.add(at)}else Dr(Ge,ge,ve),pe.add(Ge)}),z=V.pop(),pe},this.compileAsync=function(k,fe,ge=null){const pe=this.compile(k,fe,ge);return new Promise(ve=>{function Ge(){if(pe.forEach(function(it){F.get(it).currentProgram.isReady()&&pe.delete(it)}),pe.size===0){ve(k);return}setTimeout(Ge,10)}wt.get("KHR_parallel_shader_compile")!==null?Ge():setTimeout(Ge,10)})};let Si=null;function Li(k){Si&&Si(k)}function ea(){ar.stop()}function Mi(){ar.start()}const ar=new F3;ar.setAnimationLoop(Li),typeof self<"u"&&ar.setContext(self),this.setAnimationLoop=function(k){Si=k,_e.setAnimationLoop(k),k===null?ar.stop():ar.start()},_e.addEventListener("sessionstart",ea),_e.addEventListener("sessionend",Mi),this.render=function(k,fe){if(fe!==void 0&&fe.isCamera!==!0){Qt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(K===!0)return;const ge=_e.enabled===!0&&_e.isPresenting===!0,pe=N!==null&&(ee===null||ge)&&N.begin(O,ee);if(k.matrixWorldAutoUpdate===!0&&k.updateMatrixWorld(),fe.parent===null&&fe.matrixWorldAutoUpdate===!0&&fe.updateMatrixWorld(),_e.enabled===!0&&_e.isPresenting===!0&&(N===null||N.isCompositing()===!1)&&(_e.cameraAutoUpdate===!0&&_e.updateCamera(fe),fe=_e.getCamera()),k.isScene===!0&&k.onBeforeRender(O,k,fe,ee),z=Qe.get(k,V.length),z.init(fe),V.push(z),Jt.multiplyMatrices(fe.projectionMatrix,fe.matrixWorldInverse),pt.setFromProjectionMatrix(Jt,ps,fe.reversedDepth),zt=this.localClippingEnabled,It=qe.init(this.clippingPlanes,zt),L=Bt.get(k,P.length),L.init(),P.push(L),_e.enabled===!0&&_e.isPresenting===!0){const it=O.xr.getDepthSensingMesh();it!==null&&on(it,fe,-1/0,O.sortObjects)}on(k,fe,0,O.sortObjects),L.finish(),O.sortObjects===!0&&L.sort(Te,Ke),Xe=_e.enabled===!1||_e.isPresenting===!1||_e.hasDepthSensing()===!1,Xe&&ie.addToRenderList(L,k),this.info.render.frame++,It===!0&&qe.beginShadows();const ve=z.state.shadowsArray;if(Tt.render(ve,k,fe),It===!0&&qe.endShadows(),this.info.autoReset===!0&&this.info.reset(),(pe&&N.hasRenderPass())===!1){const it=L.opaque,at=L.transmissive;if(z.setupLights(),fe.isArrayCamera){const lt=fe.cameras;if(at.length>0)for(let Ct=0,Dt=lt.length;Ct<Dt;Ct++){const $t=lt[Ct];pi(it,at,k,$t)}Xe&&ie.render(k);for(let Ct=0,Dt=lt.length;Ct<Dt;Ct++){const $t=lt[Ct];Vr(L,k,$t,$t.viewport)}}else at.length>0&&pi(it,at,k,fe),Xe&&ie.render(k),Vr(L,k,fe)}ee!==null&&te===0&&(ye.updateMultisampleRenderTarget(ee),ye.updateRenderTargetMipmap(ee)),pe&&N.end(O),k.isScene===!0&&k.onAfterRender(O,k,fe),et.resetDefaultState(),ae=-1,se=null,V.pop(),V.length>0?(z=V[V.length-1],It===!0&&qe.setGlobalState(O.clippingPlanes,z.state.camera)):z=null,P.pop(),P.length>0?L=P[P.length-1]:L=null};function on(k,fe,ge,pe){if(k.visible===!1)return;if(k.layers.test(fe.layers)){if(k.isGroup)ge=k.renderOrder;else if(k.isLOD)k.autoUpdate===!0&&k.update(fe);else if(k.isLight)z.pushLight(k),k.castShadow&&z.pushShadow(k);else if(k.isSprite){if(!k.frustumCulled||pt.intersectsSprite(k)){pe&&He.setFromMatrixPosition(k.matrixWorld).applyMatrix4(Jt);const it=Mt.update(k),at=k.material;at.visible&&L.push(k,it,at,ge,He.z,null)}}else if((k.isMesh||k.isLine||k.isPoints)&&(!k.frustumCulled||pt.intersectsObject(k))){const it=Mt.update(k),at=k.material;if(pe&&(k.boundingSphere!==void 0?(k.boundingSphere===null&&k.computeBoundingSphere(),He.copy(k.boundingSphere.center)):(it.boundingSphere===null&&it.computeBoundingSphere(),He.copy(it.boundingSphere.center)),He.applyMatrix4(k.matrixWorld).applyMatrix4(Jt)),Array.isArray(at)){const lt=it.groups;for(let Ct=0,Dt=lt.length;Ct<Dt;Ct++){const $t=lt[Ct],gt=at[$t.materialIndex];gt&&gt.visible&&L.push(k,it,gt,ge,He.z,$t)}}else at.visible&&L.push(k,it,at,ge,He.z,null)}}const Ge=k.children;for(let it=0,at=Ge.length;it<at;it++)on(Ge[it],fe,ge,pe)}function Vr(k,fe,ge,pe){const{opaque:ve,transmissive:Ge,transparent:it}=k;z.setupLightsView(ge),It===!0&&qe.setGlobalState(O.clippingPlanes,ge),pe&&Je.viewport(G.copy(pe)),ve.length>0&&B(ve,fe,ge),Ge.length>0&&B(Ge,fe,ge),it.length>0&&B(it,fe,ge),Je.buffers.depth.setTest(!0),Je.buffers.depth.setMask(!0),Je.buffers.color.setMask(!0),Je.setPolygonOffset(!1)}function pi(k,fe,ge,pe){if((ge.isScene===!0?ge.overrideMaterial:null)!==null)return;if(z.state.transmissionRenderTarget[pe.id]===void 0){const gt=wt.has("EXT_color_buffer_half_float")||wt.has("EXT_color_buffer_float");z.state.transmissionRenderTarget[pe.id]=new Ua(1,1,{generateMipmaps:!0,type:gt?ir:Br,minFilter:cl,samples:kt.samples,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Gn.workingColorSpace})}const Ge=z.state.transmissionRenderTarget[pe.id],it=pe.viewport||G;Ge.setSize(it.z*O.transmissionResolutionScale,it.w*O.transmissionResolutionScale);const at=O.getRenderTarget(),lt=O.getActiveCubeFace(),Ct=O.getActiveMipmapLevel();O.setRenderTarget(Ge),O.getClearColor(be),Ae=O.getClearAlpha(),Ae<1&&O.setClearColor(16777215,.5),O.clear(),Xe&&ie.render(ge);const Dt=O.toneMapping;O.toneMapping=qs;const $t=pe.viewport;if(pe.viewport!==void 0&&(pe.viewport=void 0),z.setupLightsView(pe),It===!0&&qe.setGlobalState(O.clippingPlanes,pe),B(k,ge,pe),ye.updateMultisampleRenderTarget(Ge),ye.updateRenderTargetMipmap(Ge),wt.has("WEBGL_multisampled_render_to_texture")===!1){let gt=!1;for(let qt=0,On=fe.length;qt<On;qt++){const qn=fe[qt],{object:un,geometry:Xt,material:ut,group:pn}=qn;if(ut.side===_o&&un.layers.test(pe.layers)){const At=ut.side;ut.side=ma,ut.needsUpdate=!0,q(un,ge,pe,Xt,ut,pn),ut.side=At,ut.needsUpdate=!0,gt=!0}}gt===!0&&(ye.updateMultisampleRenderTarget(Ge),ye.updateRenderTargetMipmap(Ge))}O.setRenderTarget(at,lt,Ct),O.setClearColor(be,Ae),$t!==void 0&&(pe.viewport=$t),O.toneMapping=Dt}function B(k,fe,ge){const pe=fe.isScene===!0?fe.overrideMaterial:null;for(let ve=0,Ge=k.length;ve<Ge;ve++){const it=k[ve],{object:at,geometry:lt,group:Ct}=it;let Dt=it.material;Dt.allowOverride===!0&&pe!==null&&(Dt=pe),at.layers.test(ge.layers)&&q(at,fe,ge,lt,Dt,Ct)}}function q(k,fe,ge,pe,ve,Ge){k.onBeforeRender(O,fe,ge,pe,ve,Ge),k.modelViewMatrix.multiplyMatrices(ge.matrixWorldInverse,k.matrixWorld),k.normalMatrix.getNormalMatrix(k.modelViewMatrix),ve.onBeforeRender(O,fe,ge,pe,k,Ge),ve.transparent===!0&&ve.side===_o&&ve.forceSinglePass===!1?(ve.side=ma,ve.needsUpdate=!0,O.renderBufferDirect(ge,fe,pe,ve,k,Ge),ve.side=tc,ve.needsUpdate=!0,O.renderBufferDirect(ge,fe,pe,ve,k,Ge),ve.side=_o):O.renderBufferDirect(ge,fe,pe,ve,k,Ge),k.onAfterRender(O,fe,ge,pe,ve,Ge)}function ce(k,fe,ge){fe.isScene!==!0&&(fe=nt);const pe=F.get(k),ve=z.state.lights,Ge=z.state.shadowsArray,it=ve.state.version,at=ct.getParameters(k,ve.state,Ge,fe,ge),lt=ct.getProgramCacheKey(at);let Ct=pe.programs;pe.environment=k.isMeshStandardMaterial||k.isMeshLambertMaterial||k.isMeshPhongMaterial?fe.environment:null,pe.fog=fe.fog;const Dt=k.isMeshStandardMaterial||k.isMeshLambertMaterial&&!k.envMap||k.isMeshPhongMaterial&&!k.envMap;pe.envMap=Ue.get(k.envMap||pe.environment,Dt),pe.envMapRotation=pe.environment!==null&&k.envMap===null?fe.environmentRotation:k.envMapRotation,Ct===void 0&&(k.addEventListener("dispose",cn),Ct=new Map,pe.programs=Ct);let $t=Ct.get(lt);if($t!==void 0){if(pe.currentProgram===$t&&pe.lightsStateVersion===it)return Be(k,at),$t}else at.uniforms=ct.getUniforms(k),k.onBeforeCompile(at,O),$t=ct.acquireProgram(at,lt),Ct.set(lt,$t),pe.uniforms=at.uniforms;const gt=pe.uniforms;return(!k.isShaderMaterial&&!k.isRawShaderMaterial||k.clipping===!0)&&(gt.clippingPlanes=qe.uniform),Be(k,at),pe.needsLights=st(k),pe.lightsStateVersion=it,pe.needsLights&&(gt.ambientLightColor.value=ve.state.ambient,gt.lightProbe.value=ve.state.probe,gt.directionalLights.value=ve.state.directional,gt.directionalLightShadows.value=ve.state.directionalShadow,gt.spotLights.value=ve.state.spot,gt.spotLightShadows.value=ve.state.spotShadow,gt.rectAreaLights.value=ve.state.rectArea,gt.ltc_1.value=ve.state.rectAreaLTC1,gt.ltc_2.value=ve.state.rectAreaLTC2,gt.pointLights.value=ve.state.point,gt.pointLightShadows.value=ve.state.pointShadow,gt.hemisphereLights.value=ve.state.hemi,gt.directionalShadowMatrix.value=ve.state.directionalShadowMatrix,gt.spotLightMatrix.value=ve.state.spotLightMatrix,gt.spotLightMap.value=ve.state.spotLightMap,gt.pointShadowMatrix.value=ve.state.pointShadowMatrix),pe.currentProgram=$t,pe.uniformsList=null,$t}function Ce(k){if(k.uniformsList===null){const fe=k.currentProgram.getUniforms();k.uniformsList=Fy.seqWithValue(fe.seq,k.uniforms)}return k.uniformsList}function Be(k,fe){const ge=F.get(k);ge.outputColorSpace=fe.outputColorSpace,ge.batching=fe.batching,ge.batchingColor=fe.batchingColor,ge.instancing=fe.instancing,ge.instancingColor=fe.instancingColor,ge.instancingMorph=fe.instancingMorph,ge.skinning=fe.skinning,ge.morphTargets=fe.morphTargets,ge.morphNormals=fe.morphNormals,ge.morphColors=fe.morphColors,ge.morphTargetsCount=fe.morphTargetsCount,ge.numClippingPlanes=fe.numClippingPlanes,ge.numIntersection=fe.numClipIntersection,ge.vertexAlphas=fe.vertexAlphas,ge.vertexTangents=fe.vertexTangents,ge.toneMapping=fe.toneMapping}function Ve(k,fe,ge,pe,ve){fe.isScene!==!0&&(fe=nt),ye.resetTextureUnits();const Ge=fe.fog,it=pe.isMeshStandardMaterial||pe.isMeshLambertMaterial||pe.isMeshPhongMaterial?fe.environment:null,at=ee===null?O.outputColorSpace:ee.isXRRenderTarget===!0?ee.texture.colorSpace:Eo,lt=pe.isMeshStandardMaterial||pe.isMeshLambertMaterial&&!pe.envMap||pe.isMeshPhongMaterial&&!pe.envMap,Ct=Ue.get(pe.envMap||it,lt),Dt=pe.vertexColors===!0&&!!ge.attributes.color&&ge.attributes.color.itemSize===4,$t=!!ge.attributes.tangent&&(!!pe.normalMap||pe.anisotropy>0),gt=!!ge.morphAttributes.position,qt=!!ge.morphAttributes.normal,On=!!ge.morphAttributes.color;let qn=qs;pe.toneMapped&&(ee===null||ee.isXRRenderTarget===!0)&&(qn=O.toneMapping);const un=ge.morphAttributes.position||ge.morphAttributes.normal||ge.morphAttributes.color,Xt=un!==void 0?un.length:0,ut=F.get(pe),pn=z.state.lights;if(It===!0&&(zt===!0||k!==se)){const Hi=k===se&&pe.id===ae;qe.setState(pe,k,Hi)}let At=!1;pe.version===ut.__version?(ut.needsLights&&ut.lightsStateVersion!==pn.state.version||ut.outputColorSpace!==at||ve.isBatchedMesh&&ut.batching===!1||!ve.isBatchedMesh&&ut.batching===!0||ve.isBatchedMesh&&ut.batchingColor===!0&&ve.colorTexture===null||ve.isBatchedMesh&&ut.batchingColor===!1&&ve.colorTexture!==null||ve.isInstancedMesh&&ut.instancing===!1||!ve.isInstancedMesh&&ut.instancing===!0||ve.isSkinnedMesh&&ut.skinning===!1||!ve.isSkinnedMesh&&ut.skinning===!0||ve.isInstancedMesh&&ut.instancingColor===!0&&ve.instanceColor===null||ve.isInstancedMesh&&ut.instancingColor===!1&&ve.instanceColor!==null||ve.isInstancedMesh&&ut.instancingMorph===!0&&ve.morphTexture===null||ve.isInstancedMesh&&ut.instancingMorph===!1&&ve.morphTexture!==null||ut.envMap!==Ct||pe.fog===!0&&ut.fog!==Ge||ut.numClippingPlanes!==void 0&&(ut.numClippingPlanes!==qe.numPlanes||ut.numIntersection!==qe.numIntersection)||ut.vertexAlphas!==Dt||ut.vertexTangents!==$t||ut.morphTargets!==gt||ut.morphNormals!==qt||ut.morphColors!==On||ut.toneMapping!==qn||ut.morphTargetsCount!==Xt)&&(At=!0):(At=!0,ut.__version=pe.version);let Kn=ut.currentProgram;At===!0&&(Kn=ce(pe,fe,ve));let Ei=!1,Wn=!1,mi=!1;const Yn=Kn.getUniforms(),Ui=ut.uniforms;if(Je.useProgram(Kn.program)&&(Ei=!0,Wn=!0,mi=!0),pe.id!==ae&&(ae=pe.id,Wn=!0),Ei||se!==k){Je.buffers.depth.getReversed()&&k.reversedDepth!==!0&&(k._reversedDepth=!0,k.updateProjectionMatrix()),Yn.setValue(ne,"projectionMatrix",k.projectionMatrix),Yn.setValue(ne,"viewMatrix",k.matrixWorldInverse);const za=Yn.map.cameraPosition;za!==void 0&&za.setValue(ne,jt.setFromMatrixPosition(k.matrixWorld)),kt.logarithmicDepthBuffer&&Yn.setValue(ne,"logDepthBufFC",2/(Math.log(k.far+1)/Math.LN2)),(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial)&&Yn.setValue(ne,"isOrthographic",k.isOrthographicCamera===!0),se!==k&&(se=k,Wn=!0,mi=!0)}if(ut.needsLights&&(pn.state.directionalShadowMap.length>0&&Yn.setValue(ne,"directionalShadowMap",pn.state.directionalShadowMap,ye),pn.state.spotShadowMap.length>0&&Yn.setValue(ne,"spotShadowMap",pn.state.spotShadowMap,ye),pn.state.pointShadowMap.length>0&&Yn.setValue(ne,"pointShadowMap",pn.state.pointShadowMap,ye)),ve.isSkinnedMesh){Yn.setOptional(ne,ve,"bindMatrix"),Yn.setOptional(ne,ve,"bindMatrixInverse");const Hi=ve.skeleton;Hi&&(Hi.boneTexture===null&&Hi.computeBoneTexture(),Yn.setValue(ne,"boneTexture",Hi.boneTexture,ye))}ve.isBatchedMesh&&(Yn.setOptional(ne,ve,"batchingTexture"),Yn.setValue(ne,"batchingTexture",ve._matricesTexture,ye),Yn.setOptional(ne,ve,"batchingIdTexture"),Yn.setValue(ne,"batchingIdTexture",ve._indirectTexture,ye),Yn.setOptional(ne,ve,"batchingColorTexture"),ve._colorsTexture!==null&&Yn.setValue(ne,"batchingColorTexture",ve._colorsTexture,ye));const Ir=ge.morphAttributes;if((Ir.position!==void 0||Ir.normal!==void 0||Ir.color!==void 0)&&we.update(ve,ge,Kn),(Wn||ut.receiveShadow!==ve.receiveShadow)&&(ut.receiveShadow=ve.receiveShadow,Yn.setValue(ne,"receiveShadow",ve.receiveShadow)),(pe.isMeshStandardMaterial||pe.isMeshLambertMaterial||pe.isMeshPhongMaterial)&&pe.envMap===null&&fe.environment!==null&&(Ui.envMapIntensity.value=fe.environmentIntensity),Ui.dfgLUT!==void 0&&(Ui.dfgLUT.value=e6()),Wn&&(Yn.setValue(ne,"toneMappingExposure",O.toneMappingExposure),ut.needsLights&&dt(Ui,mi),Ge&&pe.fog===!0&&Ft.refreshFogUniforms(Ui,Ge),Ft.refreshMaterialUniforms(Ui,pe,me,re,z.state.transmissionRenderTarget[k.id]),Fy.upload(ne,Ce(ut),Ui,ye)),pe.isShaderMaterial&&pe.uniformsNeedUpdate===!0&&(Fy.upload(ne,Ce(ut),Ui,ye),pe.uniformsNeedUpdate=!1),pe.isSpriteMaterial&&Yn.setValue(ne,"center",ve.center),Yn.setValue(ne,"modelViewMatrix",ve.modelViewMatrix),Yn.setValue(ne,"normalMatrix",ve.normalMatrix),Yn.setValue(ne,"modelMatrix",ve.matrixWorld),pe.isShaderMaterial||pe.isRawShaderMaterial){const Hi=pe.uniformsGroups;for(let za=0,xs=Hi.length;za<xs;za++){const ml=Hi[za];St.update(ml,Kn),St.bind(ml,Kn)}}return Kn}function dt(k,fe){k.ambientLightColor.needsUpdate=fe,k.lightProbe.needsUpdate=fe,k.directionalLights.needsUpdate=fe,k.directionalLightShadows.needsUpdate=fe,k.pointLights.needsUpdate=fe,k.pointLightShadows.needsUpdate=fe,k.spotLights.needsUpdate=fe,k.spotLightShadows.needsUpdate=fe,k.rectAreaLights.needsUpdate=fe,k.hemisphereLights.needsUpdate=fe}function st(k){return k.isMeshLambertMaterial||k.isMeshToonMaterial||k.isMeshPhongMaterial||k.isMeshStandardMaterial||k.isShadowMaterial||k.isShaderMaterial&&k.lights===!0}this.getActiveCubeFace=function(){return H},this.getActiveMipmapLevel=function(){return te},this.getRenderTarget=function(){return ee},this.setRenderTargetTextures=function(k,fe,ge){const pe=F.get(k);pe.__autoAllocateDepthBuffer=k.resolveDepthBuffer===!1,pe.__autoAllocateDepthBuffer===!1&&(pe.__useRenderToTexture=!1),F.get(k.texture).__webglTexture=fe,F.get(k.depthTexture).__webglTexture=pe.__autoAllocateDepthBuffer?void 0:ge,pe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(k,fe){const ge=F.get(k);ge.__webglFramebuffer=fe,ge.__useDefaultFramebuffer=fe===void 0};const yt=ne.createFramebuffer();this.setRenderTarget=function(k,fe=0,ge=0){ee=k,H=fe,te=ge;let pe=null,ve=!1,Ge=!1;if(k){const at=F.get(k);if(at.__useDefaultFramebuffer!==void 0){Je.bindFramebuffer(ne.FRAMEBUFFER,at.__webglFramebuffer),G.copy(k.viewport),$.copy(k.scissor),le=k.scissorTest,Je.viewport(G),Je.scissor($),Je.setScissorTest(le),ae=-1;return}else if(at.__webglFramebuffer===void 0)ye.setupRenderTarget(k);else if(at.__hasExternalTextures)ye.rebindTextures(k,F.get(k.texture).__webglTexture,F.get(k.depthTexture).__webglTexture);else if(k.depthBuffer){const Dt=k.depthTexture;if(at.__boundDepthTexture!==Dt){if(Dt!==null&&F.has(Dt)&&(k.width!==Dt.image.width||k.height!==Dt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ye.setupDepthRenderbuffer(k)}}const lt=k.texture;(lt.isData3DTexture||lt.isDataArrayTexture||lt.isCompressedArrayTexture)&&(Ge=!0);const Ct=F.get(k).__webglFramebuffer;k.isWebGLCubeRenderTarget?(Array.isArray(Ct[fe])?pe=Ct[fe][ge]:pe=Ct[fe],ve=!0):k.samples>0&&ye.useMultisampledRTT(k)===!1?pe=F.get(k).__webglMultisampledFramebuffer:Array.isArray(Ct)?pe=Ct[ge]:pe=Ct,G.copy(k.viewport),$.copy(k.scissor),le=k.scissorTest}else G.copy(he).multiplyScalar(me).floor(),$.copy(De).multiplyScalar(me).floor(),le=ze;if(ge!==0&&(pe=yt),Je.bindFramebuffer(ne.FRAMEBUFFER,pe)&&Je.drawBuffers(k,pe),Je.viewport(G),Je.scissor($),Je.setScissorTest(le),ve){const at=F.get(k.texture);ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_CUBE_MAP_POSITIVE_X+fe,at.__webglTexture,ge)}else if(Ge){const at=fe;for(let lt=0;lt<k.textures.length;lt++){const Ct=F.get(k.textures[lt]);ne.framebufferTextureLayer(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0+lt,Ct.__webglTexture,ge,at)}}else if(k!==null&&ge!==0){const at=F.get(k.texture);ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,at.__webglTexture,ge)}ae=-1},this.readRenderTargetPixels=function(k,fe,ge,pe,ve,Ge,it,at=0){if(!(k&&k.isWebGLRenderTarget)){Qt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let lt=F.get(k).__webglFramebuffer;if(k.isWebGLCubeRenderTarget&&it!==void 0&&(lt=lt[it]),lt){Je.bindFramebuffer(ne.FRAMEBUFFER,lt);try{const Ct=k.textures[at],Dt=Ct.format,$t=Ct.type;if(k.textures.length>1&&ne.readBuffer(ne.COLOR_ATTACHMENT0+at),!kt.textureFormatReadable(Dt)){Qt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!kt.textureTypeReadable($t)){Qt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}fe>=0&&fe<=k.width-pe&&ge>=0&&ge<=k.height-ve&&ne.readPixels(fe,ge,pe,ve,Me.convert(Dt),Me.convert($t),Ge)}finally{const Ct=ee!==null?F.get(ee).__webglFramebuffer:null;Je.bindFramebuffer(ne.FRAMEBUFFER,Ct)}}},this.readRenderTargetPixelsAsync=async function(k,fe,ge,pe,ve,Ge,it,at=0){if(!(k&&k.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let lt=F.get(k).__webglFramebuffer;if(k.isWebGLCubeRenderTarget&&it!==void 0&&(lt=lt[it]),lt)if(fe>=0&&fe<=k.width-pe&&ge>=0&&ge<=k.height-ve){Je.bindFramebuffer(ne.FRAMEBUFFER,lt);const Ct=k.textures[at],Dt=Ct.format,$t=Ct.type;if(k.textures.length>1&&ne.readBuffer(ne.COLOR_ATTACHMENT0+at),!kt.textureFormatReadable(Dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!kt.textureTypeReadable($t))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const gt=ne.createBuffer();ne.bindBuffer(ne.PIXEL_PACK_BUFFER,gt),ne.bufferData(ne.PIXEL_PACK_BUFFER,Ge.byteLength,ne.STREAM_READ),ne.readPixels(fe,ge,pe,ve,Me.convert(Dt),Me.convert($t),0);const qt=ee!==null?F.get(ee).__webglFramebuffer:null;Je.bindFramebuffer(ne.FRAMEBUFFER,qt);const On=ne.fenceSync(ne.SYNC_GPU_COMMANDS_COMPLETE,0);return ne.flush(),await gO(ne,On,4),ne.bindBuffer(ne.PIXEL_PACK_BUFFER,gt),ne.getBufferSubData(ne.PIXEL_PACK_BUFFER,0,Ge),ne.deleteBuffer(gt),ne.deleteSync(On),Ge}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(k,fe=null,ge=0){const pe=Math.pow(2,-ge),ve=Math.floor(k.image.width*pe),Ge=Math.floor(k.image.height*pe),it=fe!==null?fe.x:0,at=fe!==null?fe.y:0;ye.setTexture2D(k,0),ne.copyTexSubImage2D(ne.TEXTURE_2D,ge,0,0,it,at,ve,Ge),Je.unbindTexture()};const vt=ne.createFramebuffer(),bt=ne.createFramebuffer();this.copyTextureToTexture=function(k,fe,ge=null,pe=null,ve=0,Ge=0){let it,at,lt,Ct,Dt,$t,gt,qt,On;const qn=k.isCompressedTexture?k.mipmaps[Ge]:k.image;if(ge!==null)it=ge.max.x-ge.min.x,at=ge.max.y-ge.min.y,lt=ge.isBox3?ge.max.z-ge.min.z:1,Ct=ge.min.x,Dt=ge.min.y,$t=ge.isBox3?ge.min.z:0;else{const Ui=Math.pow(2,-ve);it=Math.floor(qn.width*Ui),at=Math.floor(qn.height*Ui),k.isDataArrayTexture?lt=qn.depth:k.isData3DTexture?lt=Math.floor(qn.depth*Ui):lt=1,Ct=0,Dt=0,$t=0}pe!==null?(gt=pe.x,qt=pe.y,On=pe.z):(gt=0,qt=0,On=0);const un=Me.convert(fe.format),Xt=Me.convert(fe.type);let ut;fe.isData3DTexture?(ye.setTexture3D(fe,0),ut=ne.TEXTURE_3D):fe.isDataArrayTexture||fe.isCompressedArrayTexture?(ye.setTexture2DArray(fe,0),ut=ne.TEXTURE_2D_ARRAY):(ye.setTexture2D(fe,0),ut=ne.TEXTURE_2D),ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,fe.flipY),ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),ne.pixelStorei(ne.UNPACK_ALIGNMENT,fe.unpackAlignment);const pn=ne.getParameter(ne.UNPACK_ROW_LENGTH),At=ne.getParameter(ne.UNPACK_IMAGE_HEIGHT),Kn=ne.getParameter(ne.UNPACK_SKIP_PIXELS),Ei=ne.getParameter(ne.UNPACK_SKIP_ROWS),Wn=ne.getParameter(ne.UNPACK_SKIP_IMAGES);ne.pixelStorei(ne.UNPACK_ROW_LENGTH,qn.width),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,qn.height),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,Ct),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,Dt),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,$t);const mi=k.isDataArrayTexture||k.isData3DTexture,Yn=fe.isDataArrayTexture||fe.isData3DTexture;if(k.isDepthTexture){const Ui=F.get(k),Ir=F.get(fe),Hi=F.get(Ui.__renderTarget),za=F.get(Ir.__renderTarget);Je.bindFramebuffer(ne.READ_FRAMEBUFFER,Hi.__webglFramebuffer),Je.bindFramebuffer(ne.DRAW_FRAMEBUFFER,za.__webglFramebuffer);for(let xs=0;xs<lt;xs++)mi&&(ne.framebufferTextureLayer(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,F.get(k).__webglTexture,ve,$t+xs),ne.framebufferTextureLayer(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,F.get(fe).__webglTexture,Ge,On+xs)),ne.blitFramebuffer(Ct,Dt,it,at,gt,qt,it,at,ne.DEPTH_BUFFER_BIT,ne.NEAREST);Je.bindFramebuffer(ne.READ_FRAMEBUFFER,null),Je.bindFramebuffer(ne.DRAW_FRAMEBUFFER,null)}else if(ve!==0||k.isRenderTargetTexture||F.has(k)){const Ui=F.get(k),Ir=F.get(fe);Je.bindFramebuffer(ne.READ_FRAMEBUFFER,vt),Je.bindFramebuffer(ne.DRAW_FRAMEBUFFER,bt);for(let Hi=0;Hi<lt;Hi++)mi?ne.framebufferTextureLayer(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,Ui.__webglTexture,ve,$t+Hi):ne.framebufferTexture2D(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,Ui.__webglTexture,ve),Yn?ne.framebufferTextureLayer(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,Ir.__webglTexture,Ge,On+Hi):ne.framebufferTexture2D(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,Ir.__webglTexture,Ge),ve!==0?ne.blitFramebuffer(Ct,Dt,it,at,gt,qt,it,at,ne.COLOR_BUFFER_BIT,ne.NEAREST):Yn?ne.copyTexSubImage3D(ut,Ge,gt,qt,On+Hi,Ct,Dt,it,at):ne.copyTexSubImage2D(ut,Ge,gt,qt,Ct,Dt,it,at);Je.bindFramebuffer(ne.READ_FRAMEBUFFER,null),Je.bindFramebuffer(ne.DRAW_FRAMEBUFFER,null)}else Yn?k.isDataTexture||k.isData3DTexture?ne.texSubImage3D(ut,Ge,gt,qt,On,it,at,lt,un,Xt,qn.data):fe.isCompressedArrayTexture?ne.compressedTexSubImage3D(ut,Ge,gt,qt,On,it,at,lt,un,qn.data):ne.texSubImage3D(ut,Ge,gt,qt,On,it,at,lt,un,Xt,qn):k.isDataTexture?ne.texSubImage2D(ne.TEXTURE_2D,Ge,gt,qt,it,at,un,Xt,qn.data):k.isCompressedTexture?ne.compressedTexSubImage2D(ne.TEXTURE_2D,Ge,gt,qt,qn.width,qn.height,un,qn.data):ne.texSubImage2D(ne.TEXTURE_2D,Ge,gt,qt,it,at,un,Xt,qn);ne.pixelStorei(ne.UNPACK_ROW_LENGTH,pn),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,At),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,Kn),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,Ei),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,Wn),Ge===0&&fe.generateMipmaps&&ne.generateMipmap(ut),Je.unbindTexture()},this.initRenderTarget=function(k){F.get(k).__webglFramebuffer===void 0&&ye.setupRenderTarget(k)},this.initTexture=function(k){k.isCubeTexture?ye.setTextureCube(k,0):k.isData3DTexture?ye.setTexture3D(k,0):k.isDataArrayTexture||k.isCompressedArrayTexture?ye.setTexture2DArray(k,0):ye.setTexture2D(k,0),Je.unbindTexture()},this.resetState=function(){H=0,te=0,ee=null,Je.reset(),et.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ps}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Gn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Gn._getUnpackColorSpace()}}const t6=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:qx,AddEquation:nu,AddOperation:yC,AdditiveAnimationBlendMode:U1,AdditiveBlending:GS,AgXToneMapping:A1,AlphaFormat:I1,AlwaysCompare:NC,AlwaysDepth:Yy,AlwaysStencilFunc:ZS,AmbientLight:w3,AnimationAction:O3,AnimationClip:bg,AnimationLoader:az,AnimationMixer:Iz,AnimationObjectGroup:Nz,AnimationUtils:tz,ArcCurve:YC,ArrayCamera:D3,ArrowHelper:t4,AttachedBindMode:jS,Audio:L3,AudioAnalyser:_z,AudioContext:aM,AudioListener:vz,AudioLoader:hz,AxesHelper:n4,BackSide:ma,BasicDepthPacking:MC,BasicShadowMap:QA,BatchedMesh:HC,BezierInterpolant:g3,Bone:k1,BooleanKeyframeTrack:Bf,Box2:Bz,Box3:ga,Box3Helper:Jz,BoxGeometry:Ff,BoxHelper:Qz,BufferAttribute:hi,BufferGeometry:_n,BufferGeometryLoader:R3,ByteType:Yx,Cache:ul,Camera:w_,CameraHelper:$z,CanvasTexture:bP,CapsuleGeometry:f_,CatmullRomCurve3:ZC,CineonToneMapping:w1,CircleGeometry:d_,ClampToEdgeWrapping:nr,Clock:P3,Color:Pt,ColorKeyframeTrack:tM,ColorManagement:Gn,Compatibility:fO,CompressedArrayTexture:xP,CompressedCubeTexture:_P,CompressedTexture:u_,CompressedTextureLoader:sz,ConeGeometry:Bg,ConstantAlphaFactor:mC,ConstantColorFactor:hC,Controls:r4,CubeCamera:N3,CubeDepthTexture:jC,CubeReflectionMapping:Mo,CubeRefractionMapping:lu,CubeTexture:zg,CubeTextureLoader:x3,CubeUVReflectionMapping:Zh,CubicBezierCurve:W1,CubicBezierCurve3:KC,CubicInterpolant:p3,CullFaceBack:HS,CullFaceFront:$A,CullFaceFrontBack:EU,CullFaceNone:KA,Curve:wo,CurvePath:QC,CustomBlending:JA,CustomToneMapping:T1,CylinderGeometry:Fg,Cylindrical:Fz,Data3DTexture:r_,DataArrayTexture:i_,DataTexture:Ys,DataTextureLoader:nM,DataUtils:Mf,DecrementStencilOp:HU,DecrementWrapStencilOp:WU,DefaultLoadingManager:y3,DepthFormat:dl,DepthStencilFormat:iu,DepthTexture:zh,DetachedBindMode:xC,DirectionalLight:E3,DirectionalLightHelper:Kz,DiscreteInterpolant:m3,DodecahedronGeometry:h_,DoubleSide:_o,DstAlphaFactor:lC,DstColorFactor:uC,DynamicCopyUsage:aO,DynamicDrawUsage:JU,DynamicReadUsage:nO,EdgesGeometry:qC,EllipseCurve:p_,EqualCompare:AC,EqualDepth:Ky,EqualStencilFunc:YU,EquirectangularReflectionMapping:Th,EquirectangularRefractionMapping:$m,Euler:ys,EventDispatcher:hl,ExternalTexture:H1,ExtrudeGeometry:m_,FileLoader:gs,Float16BufferAttribute:JO,Float32BufferAttribute:Vt,FloatType:Vi,Fog:s_,FogExp2:a_,FramebufferTexture:yP,FrontSide:tc,Frustum:Kh,FrustumArray:c_,GLBufferAttribute:zz,GLSL1:oO,GLSL3:KS,GreaterCompare:CC,GreaterDepth:Qy,GreaterEqualCompare:n_,GreaterEqualDepth:$y,GreaterEqualStencilFunc:QU,GreaterStencilFunc:KU,GridHelper:Yz,Group:Eh,HalfFloatType:ir,HemisphereLight:b3,HemisphereLightHelper:qz,IcosahedronGeometry:kg,ImageBitmapLoader:dz,ImageLoader:Sg,ImageUtils:OC,IncrementStencilOp:VU,IncrementWrapStencilOp:GU,InstancedBufferAttribute:Ph,InstancedBufferGeometry:C3,InstancedInterleavedBuffer:Pz,InstancedMesh:VC,Int16BufferAttribute:$O,Int32BufferAttribute:QO,Int8BufferAttribute:YO,IntType:Lg,InterleavedBuffer:o_,InterleavedBufferAttribute:Lf,Interpolant:$h,InterpolateBezier:YS,InterpolateDiscrete:cg,InterpolateLinear:Ix,InterpolateSmooth:Py,InterpolationSamplingMode:uO,InterpolationSamplingType:cO,InvertStencilOp:XU,KeepStencilOp:yf,KeyframeTrack:Zs,LOD:BC,LatheGeometry:g_,Layers:Oh,LessCompare:TC,LessDepth:Zy,LessEqualCompare:t_,LessEqualDepth:Rf,LessEqualStencilFunc:ZU,LessStencilFunc:qU,Light:pu,LightProbe:A3,Line:uu,Line3:Hz,LineBasicMaterial:Oa,LineCurve:X1,LineCurve3:$C,LineDashedMaterial:d3,LineLoop:GC,LineSegments:pl,LinearFilter:jn,LinearInterpolant:eM,LinearMipMapLinearFilter:qS,LinearMipMapNearestFilter:CU,LinearMipmapLinearFilter:cl,LinearMipmapNearestFilter:Qm,LinearSRGBColorSpace:Eo,LinearToneMapping:M1,LinearTransfer:fg,Loader:Pa,LoaderUtils:t1,LoadingManager:E_,LoopOnce:_C,LoopPingPong:SC,LoopRepeat:bC,MOUSE:gf,Material:ya,MaterialBlending:wU,MaterialLoader:T_,MathUtils:UC,Matrix2:cM,Matrix3:Sn,Matrix4:hn,MaxEquation:iC,Mesh:Ki,MeshBasicMaterial:nc,MeshDepthMaterial:$1,MeshDistanceMaterial:Q1,MeshLambertMaterial:u3,MeshMatcapMaterial:f3,MeshNormalMaterial:c3,MeshPhongMaterial:o3,MeshPhysicalMaterial:s3,MeshStandardMaterial:M_,MeshToonMaterial:l3,MinEquation:nC,MirroredRepeatWrapping:lg,MixOperation:vC,MultiplyBlending:XS,MultiplyOperation:Ig,NearestFilter:hr,NearestMipMapLinearFilter:AU,NearestMipMapNearestFilter:TU,NearestMipmapLinearFilter:Sh,NearestMipmapNearestFilter:R1,NeutralToneMapping:C1,NeverCompare:wC,NeverDepth:qy,NeverStencilFunc:jU,NoBlending:So,NoColorSpace:Ql,NoNormalPacking:PU,NoToneMapping:qs,NormalAnimationBlendMode:e_,NormalBlending:Tf,NormalGAPacking:FU,NormalRGPacking:zU,NotEqualCompare:RC,NotEqualDepth:Jy,NotEqualStencilFunc:$U,NumberKeyframeTrack:xg,Object3D:Qn,ObjectLoader:uz,ObjectSpaceNormalMap:EC,OctahedronGeometry:Vg,OneFactor:aC,OneMinusConstantAlphaFactor:gC,OneMinusConstantColorFactor:pC,OneMinusDstAlphaFactor:cC,OneMinusDstColorFactor:fC,OneMinusSrcAlphaFactor:jy,OneMinusSrcColorFactor:oC,OrthographicCamera:fl,PCFShadowMap:wh,PCFSoftShadowMap:Km,PMREMGenerator:a1,Path:Px,PerspectiveCamera:dr,Plane:sl,PlaneGeometry:hu,PlaneHelper:e4,PointLight:M3,PointLightHelper:Xz,Points:WC,PointsMaterial:V1,PolarGridHelper:Zz,PolyhedronGeometry:du,PositionalAudio:xz,PropertyBinding:$n,PropertyMixer:U3,QuadraticBezierCurve:j1,QuadraticBezierCurve3:q1,Quaternion:Qr,QuaternionKeyframeTrack:Gg,QuaternionLinearInterpolant:v3,R11_EAC_Format:ox,RED_GREEN_RGTC2_Format:Nx,RED_RGTC1_Format:Cx,REVISION:Yh,RG11_EAC_Format:cx,RGBADepthPacking:LU,RGBAFormat:pr,RGBAIntegerFormat:Jx,RGBA_ASTC_10x10_Format:Sx,RGBA_ASTC_10x5_Format:xx,RGBA_ASTC_10x6_Format:_x,RGBA_ASTC_10x8_Format:bx,RGBA_ASTC_12x10_Format:Mx,RGBA_ASTC_12x12_Format:Ex,RGBA_ASTC_4x4_Format:fx,RGBA_ASTC_5x4_Format:dx,RGBA_ASTC_5x5_Format:hx,RGBA_ASTC_6x5_Format:px,RGBA_ASTC_6x6_Format:mx,RGBA_ASTC_8x5_Format:gx,RGBA_ASTC_8x6_Format:vx,RGBA_ASTC_8x8_Format:yx,RGBA_BPTC_Format:wx,RGBA_ETC2_EAC_Format:sx,RGBA_PVRTC_2BPPV1_Format:ix,RGBA_PVRTC_4BPPV1_Format:nx,RGBA_S3TC_DXT1_Format:eg,RGBA_S3TC_DXT3_Format:tg,RGBA_S3TC_DXT5_Format:ng,RGBDepthPacking:UU,RGBFormat:L1,RGBIntegerFormat:RU,RGB_BPTC_SIGNED_Format:Tx,RGB_BPTC_UNSIGNED_Format:Ax,RGB_ETC1_Format:rx,RGB_ETC2_Format:ax,RGB_PVRTC_2BPPV1_Format:tx,RGB_PVRTC_4BPPV1_Format:ex,RGB_S3TC_DXT1_Format:Jm,RGDepthPacking:OU,RGFormat:Df,RGIntegerFormat:Qx,RawShaderMaterial:K1,Ray:zf,Raycaster:lM,RectAreaLight:T3,RedFormat:Ug,RedIntegerFormat:Og,ReinhardToneMapping:E1,RenderTarget:P1,RenderTarget3D:Lz,RepeatWrapping:Nf,ReplaceStencilOp:kU,ReverseSubtractEquation:tC,RingGeometry:v_,SIGNED_R11_EAC_Format:lx,SIGNED_RED_GREEN_RGTC2_Format:Dx,SIGNED_RED_RGTC1_Format:Rx,SIGNED_RG11_EAC_Format:ux,SRGBColorSpace:Fr,SRGBTransfer:si,Scene:Pg,ShaderChunk:Cn,ShaderLib:xo,ShaderMaterial:va,ShadowMaterial:r3,Shape:Cf,ShapeGeometry:y_,ShapePath:i4,ShapeUtils:bo,ShortType:Zx,Skeleton:l_,SkeletonHelper:Wz,SkinnedMesh:kC,Source:ru,Sphere:Jr,SphereGeometry:Hg,Spherical:i1,SphericalHarmonics3:rM,SplineCurve:Y1,SpotLight:S3,SpotLightHelper:Gz,Sprite:FC,SpriteMaterial:B1,SrcAlphaFactor:Xy,SrcAlphaSaturateFactor:dC,SrcColorFactor:sC,StaticCopyUsage:rO,StaticDrawUsage:dg,StaticReadUsage:tO,StereoCamera:pz,StreamCopyUsage:sO,StreamDrawUsage:eO,StreamReadUsage:iO,StringKeyframeTrack:kf,SubtractEquation:eC,SubtractiveBlending:WS,TOUCH:vf,TangentSpaceNormalMap:fu,TetrahedronGeometry:x_,Texture:di,TextureLoader:_3,TextureUtils:c4,Timer:I3,TimestampQuery:lO,TorusGeometry:__,TorusKnotGeometry:b_,Triangle:as,TriangleFanDrawMode:IU,TriangleStripDrawMode:DU,TrianglesDrawMode:NU,TubeGeometry:S_,UVMapping:ou,Uint16BufferAttribute:z1,Uint32BufferAttribute:F1,Uint8BufferAttribute:ZO,Uint8ClampedBufferAttribute:KO,Uniform:A_,UniformsGroup:Oz,UniformsLib:Ut,UniformsUtils:Z1,UnsignedByteType:Br,UnsignedInt101111Type:D1,UnsignedInt248Type:Lh,UnsignedInt5999Type:N1,UnsignedIntType:vs,UnsignedShort4444Type:Kx,UnsignedShort5551Type:$x,UnsignedShortType:Ih,VSMShadowMap:_f,Vector2:Ze,Vector3:Q,Vector4:vi,VectorKeyframeTrack:_g,VideoFrameTexture:vP,VideoTexture:XC,WebGL3DRenderTarget:FO,WebGLArrayRenderTarget:zO,WebGLCoordinateSystem:ps,WebGLCubeRenderTarget:R_,WebGLRenderTarget:Ua,WebGLRenderer:uM,WebGLUtils:G3,WebGPUCoordinateSystem:If,WebXRController:zy,WireframeGeometry:i3,WrapAroundEnding:ug,ZeroCurvatureEnding:bf,ZeroFactor:rC,ZeroSlopeEnding:Sf,ZeroStencilOp:BU,createCanvasElement:IC,error:Qt,getConsoleFunction:mO,log:pg,setConsoleFunction:pO,warn:Rt,warnOnce:mg},Symbol.toStringTag,{value:"Module"}));var mS={exports:{}},gS={},vS={exports:{}},yS={};var cT;function n6(){if(cT)return yS;cT=1;var i=Ag();function e(v,x){return v===x&&(v!==0||1/v===1/x)||v!==v&&x!==x}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,a=i.useEffect,o=i.useLayoutEffect,u=i.useDebugValue;function d(v,x){var S=x(),E=n({inst:{value:S,getSnapshot:x}}),C=E[0].inst,T=E[1];return o(function(){C.value=S,C.getSnapshot=x,h(C)&&T({inst:C})},[v,S,x]),a(function(){return h(C)&&T({inst:C}),v(function(){h(C)&&T({inst:C})})},[v]),u(S),S}function h(v){var x=v.getSnapshot;v=v.value;try{var S=x();return!t(v,S)}catch{return!0}}function p(v,x){return x()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return yS.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:y,yS}var uT;function i6(){return uT||(uT=1,vS.exports=n6()),vS.exports}var fT;function r6(){if(fT)return gS;fT=1;var i=Ag(),e=i6();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var n=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,o=i.useRef,u=i.useEffect,d=i.useMemo,h=i.useDebugValue;return gS.useSyncExternalStoreWithSelector=function(p,y,v,x,S){var E=o(null);if(E.current===null){var C={hasValue:!1,value:null};E.current=C}else C=E.current;E=d(function(){function M(P){if(!R){if(R=!0,I=P,P=x(P),S!==void 0&&C.hasValue){var V=C.value;if(S(V,P))return L=V}return L=P}if(V=L,n(I,P))return V;var N=x(P);return S!==void 0&&S(V,N)?(I=P,V):(I=P,L=N)}var R=!1,I,L,z=v===void 0?null:v;return[function(){return M(y())},z===null?void 0:function(){return M(z())}]},[y,v,x,S]);var T=a(p,E[0],E[1]);return u(function(){C.hasValue=!0,C.value=T},[T]),h(T),T},gS}var dT;function a6(){return dT||(dT=1,mS.exports=r6()),mS.exports}var s6=a6();const o6=Gx(s6),hT=i=>{let e;const t=new Set,n=(p,y)=>{const v=typeof p=="function"?p(e):p;if(!Object.is(v,e)){const x=e;e=y??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(S=>S(e,x))}},a=()=>e,d={setState:n,getState:a,getInitialState:()=>h,subscribe:p=>(t.add(p),()=>t.delete(p))},h=e=i(n,a,d);return d},l6=(i=>i?hT(i):hT),{useSyncExternalStoreWithSelector:c6}=o6,u6=i=>i;function f6(i,e=u6,t){const n=c6(i.subscribe,i.getState,i.getInitialState,e,t);return _t.useDebugValue(n),n}const pT=(i,e)=>{const t=l6(i),n=(a,o=e)=>f6(t,a,o);return Object.assign(n,t),n},W3=((i,e)=>i?pT(i,e):pT),d6=i=>typeof i=="object"&&typeof i.then=="function",wf=[];function X3(i,e,t=(n,a)=>n===a){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let a=0;a<n;a++)if(!t(i[a],e[a]))return!1;return!0}function j3(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const o of wf)if(X3(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return n.lifespan&&n.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,n.lifespan)),o.response;if(!t)throw o.promise}const a={keys:e,equal:n.equal,remove:()=>{const o=wf.indexOf(a);o!==-1&&wf.splice(o,1)},promise:(d6(i)?i:i(...e)).then(o=>{a.response=o,n.lifespan&&n.lifespan>0&&(a.timeout=setTimeout(a.remove,n.lifespan))}).catch(o=>a.error=o)};if(wf.push(a),!t)throw a.promise}const h6=(i,e,t)=>j3(i,e,!1,t),p6=(i,e,t)=>{j3(i,e,!0,t)},m6=i=>{if(i===void 0||i.length===0)wf.splice(0,wf.length);else{const e=wf.find(t=>X3(i,t.keys,t.equal));e&&e.remove()}};var l1=GT();const g6=Gx(l1);function fM(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const a=fM(n,e,t);if(a)return a;n=e?null:n.sibling}}function q3(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const dM=q3(j.createContext(null));class Y3 extends j.Component{render(){return j.createElement(dM.Provider,{value:this._reactInternals},this.props.children)}}function Z3(){const i=j.useContext(dM);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=j.useId();return j.useMemo(()=>{for(const t of[i,i?.alternate]){if(!t)continue;const n=fM(t,!1,a=>{let o=a.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(n)return n}},[i,e])}const v6=Symbol.for("react.context"),y6=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===v6;function x6(){const i=Z3(),[e]=j.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;y6(n)&&n!==dM&&!e.has(n)&&e.set(n,j.use(q3(n))),t=t.return}return e}function _6(){const i=x6();return j.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>j.createElement(e,null,j.createElement(t.Provider,{...n,value:i.get(t)})),e=>j.createElement(Y3,{...e})),[i])}function K3(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const $3=i=>i&&i.isOrthographicCamera,b6=i=>i&&i.hasOwnProperty("current"),S6=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),Wg=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?j.useLayoutEffect:j.useEffect;function hM(i){const e=j.useRef(i);return Wg(()=>{e.current=i},[i]),e}function M6(){const i=Z3(),e=_6();return j.useMemo(()=>({children:t})=>{const a=!!fM(i,!0,o=>o.type===j.StrictMode)?j.StrictMode:j.Fragment;return J.jsx(a,{children:J.jsx(e,{children:t})})},[i,e])}function E6({set:i}){return Wg(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const w6=(i=>(i=class extends j.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function Q3(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function mh(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const Bi={obj:i=>i===Object(i)&&!Bi.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:a=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(Bi.str(i)||Bi.num(i)||Bi.boo(i))return i===e;const o=Bi.obj(i);if(o&&n==="reference")return i===e;const u=Bi.arr(i);if(u&&t==="reference")return i===e;if((u||o)&&i===e)return!0;let d;for(d in i)if(!(d in e))return!1;if(o&&t==="shallow"&&n==="shallow"){for(d in a?e:i)if(!Bi.equ(i[d],e[d],{strict:a,objects:"reference"}))return!1}else for(d in a?e:i)if(i[d]!==e[d])return!1;if(Bi.und(d)){if(u&&i.length===0&&e.length===0||o&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function T6(i){const e={nodes:{},materials:{},meshes:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function A6(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const J3=["children","key","ref"];function C6(i){const e={};for(const t in i)J3.includes(t)||(e[t]=i[t]);return e}function zx(i,e,t,n){const a=i;let o=a?.__r3f;return o||(o={root:e,type:t,parent:null,children:[],props:C6(n),object:a,eventCount:0,handlers:{},isHidden:!1},a&&(a.__r3f=o)),o}function Mg(i,e){if(!e.includes("-"))return{root:i,key:e,target:i[e]};if(e in i)return{root:i,key:e,target:i[e]};let t=i;const n=e.split("-");for(const a of n){if(typeof t!="object"||t===null){if(t!==void 0){const o=n.slice(n.indexOf(a)).join("-");return{root:t,key:o,target:void 0}}return{root:i,key:e,target:void 0}}e=a,i=t,t=t[e]}return{root:i,key:e,target:t}}const mT=/-\d+$/;function Fx(i,e){if(Bi.str(e.props.attach)){if(mT.test(e.props.attach)){const a=e.props.attach.replace(mT,""),{root:o,key:u}=Mg(i.object,a);Array.isArray(o[u])||(o[u]=[])}const{root:t,key:n}=Mg(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else Bi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function Bx(i,e){if(Bi.str(e.props.attach)){const{root:t,key:n}=Mg(i.object,e.props.attach),a=e.previousAttach;a===void 0?delete t[n]:t[n]=a}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const c1=[...J3,"args","dispose","attach","object","onUpdate","dispose"],gT=new Map;function R6(i){let e=gT.get(i.constructor);try{e||(e=new i.constructor,gT.set(i.constructor,e))}catch{}return e}function N6(i,e){const t={};for(const n in e)if(!c1.includes(n)&&!Bi.equ(e[n],i.props[n])){t[n]=e[n];for(const a in e)a.startsWith(`${n}-`)&&(t[a]=e[a])}for(const n in i.props){if(c1.includes(n)||e.hasOwnProperty(n))continue;const{root:a,key:o}=Mg(i.object,n);if(a.constructor&&a.constructor.length===0){const u=R6(a);Bi.und(u)||(t[o]=u[o])}else t[o]=0}return t}const D6=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],I6=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function ol(i,e){var t;const n=i.__r3f,a=n&&K3(n).getState(),o=n?.eventCount;for(const d in e){let h=e[d];if(c1.includes(d))continue;if(n&&I6.test(d)){typeof h=="function"?n.handlers[d]=h:delete n.handlers[d],n.eventCount=Object.keys(n.handlers).length;continue}if(h===void 0)continue;let{root:p,key:y,target:v}=Mg(i,d);if(v===void 0&&(typeof p!="object"||p===null))throw Error(`R3F: Cannot set "${d}". Ensure it is an object before setting "${y}".`);if(v instanceof Oh&&h instanceof Oh)v.mask=h.mask;else if(v instanceof Pt&&S6(h))v.set(h);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof v.copy=="function"&&h!=null&&h.constructor&&v.constructor===h.constructor)v.copy(h);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&Array.isArray(h))typeof v.fromArray=="function"?v.fromArray(h):v.set(...h);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof h=="number")typeof v.setScalar=="function"?v.setScalar(h):v.set(h);else{var u;p[y]=h,a&&!a.linear&&D6.includes(y)&&(u=p[y])!=null&&u.isTexture&&p[y].format===pr&&p[y].type===Br&&(p[y].colorSpace=Fr)}}if(n!=null&&n.parent&&a!=null&&a.internal&&(t=n.object)!=null&&t.isObject3D&&o!==n.eventCount){const d=n.object,h=a.internal.interaction.indexOf(d);h>-1&&a.internal.interaction.splice(h,1),n.eventCount&&d.raycast!==null&&a.internal.interaction.push(d)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Jh(n),i}function Jh(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function eR(i,e){i.manual||($3(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const Da=i=>i?.isObject3D;function Ay(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function tR(i,e,t,n){const a=t.get(e);a&&(t.delete(e),t.size===0&&(i.delete(n),a.target.releasePointerCapture(n)))}function L6(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,a)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(a)}),t.capturedMap.forEach((n,a)=>{tR(t.capturedMap,e,n,a)})}function U6(i){function e(h){const{internal:p}=i.getState(),y=h.offsetX-p.initialClick[0],v=h.offsetY-p.initialClick[1];return Math.round(Math.sqrt(y*y+v*v))}function t(h){return h.filter(p=>["Move","Over","Enter","Out","Leave"].some(y=>{var v;return(v=p.__r3f)==null?void 0:v.handlers["onPointer"+y]}))}function n(h,p){const y=i.getState(),v=new Set,x=[],S=p?p(y.internal.interaction):y.internal.interaction;for(let M=0;M<S.length;M++){const R=mh(S[M]);R&&(R.raycaster.camera=void 0)}y.previousRoot||y.events.compute==null||y.events.compute(h,y);function E(M){const R=mh(M);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var I;R.events.compute==null||R.events.compute(h,R,(I=R.previousRoot)==null?void 0:I.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(M,!0):[]}let C=S.flatMap(E).sort((M,R)=>{const I=mh(M.object),L=mh(R.object);return!I||!L?M.distance-R.distance:L.events.priority-I.events.priority||M.distance-R.distance}).filter(M=>{const R=Ay(M);return v.has(R)?!1:(v.add(R),!0)});y.events.filter&&(C=y.events.filter(C,y));for(const M of C){let R=M.object;for(;R;){var T;(T=R.__r3f)!=null&&T.eventCount&&x.push({...M,eventObject:R}),R=R.parent}}if("pointerId"in h&&y.internal.capturedMap.has(h.pointerId))for(let M of y.internal.capturedMap.get(h.pointerId).values())v.has(Ay(M.intersection))||x.push(M.intersection);return x}function a(h,p,y,v){if(h.length){const x={stopped:!1};for(const S of h){let E=mh(S.object);if(E||S.object.traverseAncestors(C=>{const T=mh(C);if(T)return E=T,!1}),E){const{raycaster:C,pointer:T,camera:M,internal:R}=E,I=new Q(T.x,T.y,0).unproject(M),L=O=>{var K,H;return(K=(H=R.capturedMap.get(O))==null?void 0:H.has(S.eventObject))!=null?K:!1},z=O=>{const K={intersection:S,target:p.target};R.capturedMap.has(O)?R.capturedMap.get(O).set(S.eventObject,K):R.capturedMap.set(O,new Map([[S.eventObject,K]])),p.target.setPointerCapture(O)},P=O=>{const K=R.capturedMap.get(O);K&&tR(R.capturedMap,S.eventObject,K,O)};let V={};for(let O in p){let K=p[O];typeof K!="function"&&(V[O]=K)}let N={...S,...V,pointer:T,intersections:h,stopped:x.stopped,delta:y,unprojectedPoint:I,ray:C.ray,camera:M,stopPropagation(){const O="pointerId"in p&&R.capturedMap.get(p.pointerId);if((!O||O.has(S.eventObject))&&(N.stopped=x.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(K=>K.eventObject===S.eventObject))){const K=h.slice(0,h.indexOf(S));o([...K,S])}},target:{hasPointerCapture:L,setPointerCapture:z,releasePointerCapture:P},currentTarget:{hasPointerCapture:L,setPointerCapture:z,releasePointerCapture:P},nativeEvent:p};if(v(N),x.stopped===!0)break}}}return h}function o(h){const{internal:p}=i.getState();for(const y of p.hovered.values())if(!h.length||!h.find(v=>v.object===y.object&&v.index===y.index&&v.instanceId===y.instanceId)){const x=y.eventObject.__r3f;if(p.hovered.delete(Ay(y)),x!=null&&x.eventCount){const S=x.handlers,E={...y,intersections:h};S.onPointerOut==null||S.onPointerOut(E),S.onPointerLeave==null||S.onPointerLeave(E)}}}function u(h,p){for(let y=0;y<p.length;y++){const v=p[y].__r3f;v==null||v.handlers.onPointerMissed==null||v.handlers.onPointerMissed(h)}}function d(h){switch(h){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return p=>{const{internal:y}=i.getState();"pointerId"in p&&y.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{y.capturedMap.has(p.pointerId)&&(y.capturedMap.delete(p.pointerId),o([]))})}}return function(y){const{onPointerMissed:v,internal:x}=i.getState();x.lastEvent.current=y;const S=h==="onPointerMove",E=h==="onClick"||h==="onContextMenu"||h==="onDoubleClick",T=n(y,S?t:void 0),M=E?e(y):0;h==="onPointerDown"&&(x.initialClick=[y.offsetX,y.offsetY],x.initialHits=T.map(I=>I.eventObject)),E&&!T.length&&M<=2&&(u(y,x.interaction),v&&v(y)),S&&o(T);function R(I){const L=I.eventObject,z=L.__r3f;if(!(z!=null&&z.eventCount))return;const P=z.handlers;if(S){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const V=Ay(I),N=x.hovered.get(V);N?N.stopped&&I.stopPropagation():(x.hovered.set(V,I),P.onPointerOver==null||P.onPointerOver(I),P.onPointerEnter==null||P.onPointerEnter(I))}P.onPointerMove==null||P.onPointerMove(I)}else{const V=P[h];V?(!E||x.initialHits.includes(L))&&(u(y,x.interaction.filter(N=>!x.initialHits.includes(N))),V(I)):E&&x.initialHits.includes(L)&&u(y,x.interaction.filter(N=>!x.initialHits.includes(N)))}}a(T,y,M,R)}}return{handlePointer:d}}const vT=i=>!!(i!=null&&i.render),pM=j.createContext(null),O6=(i,e)=>{const t=W3((d,h)=>{const p=new Q,y=new Q,v=new Q;function x(M=h().camera,R=y,I=h().size){const{width:L,height:z,top:P,left:V}=I,N=L/z;R.isVector3?v.copy(R):v.set(...R);const O=M.getWorldPosition(p).distanceTo(v);if($3(M))return{width:L/M.zoom,height:z/M.zoom,top:P,left:V,factor:1,distance:O,aspect:N};{const K=M.fov*Math.PI/180,H=2*Math.tan(K/2)*O,te=H*(L/z);return{width:te,height:H,top:P,left:V,factor:L/te,distance:O,aspect:N}}}let S;const E=M=>d(R=>({performance:{...R.performance,current:M}})),C=new Ze;return{set:d,get:h,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>i(h(),M),advance:(M,R)=>e(M,R,h()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new P3,pointer:C,mouse:C,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=h();S&&clearTimeout(S),M.performance.current!==M.performance.min&&E(M.performance.min),S=setTimeout(()=>E(h().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:x},setEvents:M=>d(R=>({...R,events:{...R.events,...M}})),setSize:(M,R,I=0,L=0)=>{const z=h().camera,P={width:M,height:R,top:I,left:L};d(V=>({size:P,viewport:{...V.viewport,...x(z,y,P)}}))},setDpr:M=>d(R=>{const I=Q3(M);return{viewport:{...R.viewport,dpr:I,initialDpr:R.viewport.initialDpr||I}}}),setFrameloop:(M="always")=>{const R=h().clock;R.stop(),R.elapsedTime=0,M!=="never"&&(R.start(),R.elapsedTime=0),d(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:j.createRef(),active:!1,frames:0,priority:0,subscribe:(M,R,I)=>{const L=h().internal;return L.priority=L.priority+(R>0?1:0),L.subscribers.push({ref:M,priority:R,store:I}),L.subscribers=L.subscribers.sort((z,P)=>z.priority-P.priority),()=>{const z=h().internal;z!=null&&z.subscribers&&(z.priority=z.priority-(R>0?1:0),z.subscribers=z.subscribers.filter(P=>P.ref!==M))}}}}}),n=t.getState();let a=n.size,o=n.viewport.dpr,u=n.camera;return t.subscribe(()=>{const{camera:d,size:h,viewport:p,gl:y,set:v}=t.getState();if(h.width!==a.width||h.height!==a.height||p.dpr!==o){a=h,o=p.dpr,eR(d,h),p.dpr>0&&y.setPixelRatio(p.dpr);const x=typeof HTMLCanvasElement<"u"&&y.domElement instanceof HTMLCanvasElement;y.setSize(h.width,h.height,x)}d!==u&&(u=d,v(x=>({viewport:{...x.viewport,...x.viewport.getCurrentViewport(d)}})))}),t.subscribe(d=>i(d)),t};function mM(){const i=j.useContext(pM);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function hs(i=t=>t,e){return mM()(i,e)}function D_(i,e=0){const t=mM(),n=t.getState().internal.subscribe,a=hM(i);return Wg(()=>n(a,e,t),[e,n,t]),null}const yT=new WeakMap,P6=i=>{var e;return typeof i=="function"&&(i==null||(e=i.prototype)==null?void 0:e.constructor)===i};function nR(i,e){return function(t,...n){let a;return P6(t)?(a=yT.get(t),a||(a=new t,yT.set(t,a))):a=t,i&&i(a),Promise.all(n.map(o=>new Promise((u,d)=>a.load(o,h=>{Da(h?.scene)&&Object.assign(h,T6(h.scene)),u(h)},e,h=>d(new Error(`Could not load ${o}: ${h?.message}`))))))}}function kh(i,e,t,n){const a=Array.isArray(e)?e:[e],o=h6(nR(t,n),[i,...a],{equal:Bi.equ});return Array.isArray(e)?o:o[0]}kh.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return p6(nR(t),[i,...n])};kh.clear=function(i,e){const t=Array.isArray(e)?e:[e];return m6([i,...t])};const z6=1,F6=8,B6=32,k6=2;var V6={version:"9.5.0"};function H6(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var xT={exports:{}},_T={exports:{}},bT;function G6(){return bT||(bT=1,(function(i){i.exports=function(e){function t(l,c,g,_){return new Ep(l,c,g,_)}function n(){}function a(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(l){var c=l,g=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(g=c.return),l=c.return;while(l)}return c.tag===3?g:null}function u(l){if(o(l)!==l)throw Error(a(188))}function d(l){var c=l.alternate;if(!c){if(c=o(l),c===null)throw Error(a(188));return c!==l?null:l}for(var g=l,_=c;;){var A=g.return;if(A===null)break;var D=A.alternate;if(D===null){if(_=A.return,_!==null){g=_;continue}break}if(A.child===D.child){for(D=A.child;D;){if(D===g)return u(A),l;if(D===_)return u(A),c;D=D.sibling}throw Error(a(188))}if(g.return!==_.return)g=A,_=D;else{for(var W=!1,de=A.child;de;){if(de===g){W=!0,g=A,_=D;break}if(de===_){W=!0,_=A,g=D;break}de=de.sibling}if(!W){for(de=D.child;de;){if(de===g){W=!0,g=D,_=A;break}if(de===_){W=!0,_=D,g=A;break}de=de.sibling}if(!W)throw Error(a(189))}}if(g.alternate!==_)throw Error(a(190))}if(g.tag!==3)throw Error(a(188));return g.stateNode.current===g?l:c}function h(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=h(l),c!==null)return c;l=l.sibling}return null}function p(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(l.tag!==4&&(c=p(l),c!==null))return c;l=l.sibling}return null}function y(l){return l===null||typeof l!="object"?null:(l=ro&&l[ro]||l["@@iterator"],typeof l=="function"?l:null)}function v(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Bo?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case Al:return"Fragment";case Rl:return"Profiler";case Cl:return"StrictMode";case md:return"Suspense";case io:return"SuspenseList";case Ou:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case Tl:return"Portal";case Wa:return l.displayName||"Context";case Uu:return(l._context.displayName||"Context")+".Consumer";case Mc:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case gd:return c=l.displayName||null,c!==null?c:v(l.type)||"Memo";case Xr:c=l._payload,l=l._init;try{return v(l(c))}catch{}}return null}function x(l){return{current:l}}function S(l){0>Ul||(l.current=Rd[Ul],Rd[Ul]=null,Ul--)}function E(l,c){Ul++,Rd[Ul]=l.current,l.current=c}function C(l){return l>>>=0,l===0?32:31-(Nd(l)/lv|0)|0}function T(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function M(l,c,g){var _=l.pendingLanes;if(_===0)return 0;var A=0,D=l.suspendedLanes,W=l.pingedLanes;l=l.warmLanes;var de=_&134217727;return de!==0?(_=de&~D,_!==0?A=T(_):(W&=de,W!==0?A=T(W):g||(g=de&~l,g!==0&&(A=T(g))))):(de=_&~D,de!==0?A=T(de):W!==0?A=T(W):g||(g=_&~l,g!==0&&(A=T(g)))),A===0?0:c!==0&&c!==A&&(c&D)===0&&(D=A&-A,g=c&-c,D>=g||D===32&&(g&4194048)!==0)?c:A}function R(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function I(l,c){switch(l){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L(){var l=Nc;return Nc<<=1,(Nc&62914560)===0&&(Nc=4194304),l}function z(l){for(var c=[],g=0;31>g;g++)c.push(l);return c}function P(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function V(l,c,g,_,A,D){var W=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var de=l.entanglements,Fe=l.expirationTimes,ot=l.hiddenUpdates;for(g=W&~g;0<g;){var Et=31-sa(g),ht=1<<Et;de[Et]=0,Fe[Et]=-1;var Ot=ot[Et];if(Ot!==null)for(ot[Et]=null,Et=0;Et<Ot.length;Et++){var mn=Ot[Et];mn!==null&&(mn.lane&=-536870913)}g&=~ht}_!==0&&N(l,_,0),D!==0&&A===0&&l.tag!==0&&(l.suspendedLanes|=D&~(W&~c))}function N(l,c,g){l.pendingLanes|=c,l.suspendedLanes&=~c;var _=31-sa(c);l.entangledLanes|=c,l.entanglements[_]=l.entanglements[_]|1073741824|g&261930}function O(l,c){var g=l.entangledLanes|=c;for(l=l.entanglements;g;){var _=31-sa(g),A=1<<_;A&c|l[_]&c&&(l[_]|=c),g&=~A}}function K(l,c){var g=c&-c;return g=(g&42)!==0?1:H(g),(g&(l.suspendedLanes|c))!==0?0:g}function H(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function te(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function ee(l){if(typeof cm=="function"&&fv(l),oa&&typeof oa.setStrictMode=="function")try{oa.setStrictMode(Pl,l)}catch{}}function ae(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}function se(l){if(Pd===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);Pd=c&&c[1]||"",Us=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pd+l+Us}function G(l,c){if(!l||Wu)return"";Wu=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(c){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(mn){var Ot=mn}Reflect.construct(l,[],ht)}else{try{ht.call()}catch(mn){Ot=mn}l.call(ht.prototype)}}else{try{throw Error()}catch(mn){Ot=mn}(ht=l())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(mn){if(mn&&Ot&&typeof mn.stack=="string")return[mn.stack,Ot.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=_.DetermineComponentFrameRoot(),W=D[0],de=D[1];if(W&&de){var Fe=W.split(`
`),ot=de.split(`
`);for(A=_=0;_<Fe.length&&!Fe[_].includes("DetermineComponentFrameRoot");)_++;for(;A<ot.length&&!ot[A].includes("DetermineComponentFrameRoot");)A++;if(_===Fe.length||A===ot.length)for(_=Fe.length-1,A=ot.length-1;1<=_&&0<=A&&Fe[_]!==ot[A];)A--;for(;1<=_&&0<=A;_--,A--)if(Fe[_]!==ot[A]){if(_!==1||A!==1)do if(_--,A--,0>A||Fe[_]!==ot[A]){var Et=`
`+Fe[_].replace(" at new "," at ");return l.displayName&&Et.includes("<anonymous>")&&(Et=Et.replace("<anonymous>",l.displayName)),Et}while(1<=_&&0<=A);break}}}finally{Wu=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?se(g):""}function $(l,c){switch(l.tag){case 26:case 27:case 5:return se(l.type);case 16:return se("Lazy");case 13:return l.child!==c&&c!==null?se("Suspense Fallback"):se("Suspense");case 19:return se("SuspenseList");case 0:case 15:return G(l.type,!1);case 11:return G(l.type.render,!1);case 1:return G(l.type,!0);case 31:return se("Activity");default:return""}}function le(l){try{var c="",g=null;do c+=$(l,g),g=l,l=l.return;while(l);return c}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}function be(l,c){if(typeof l=="object"&&l!==null){var g=um.get(l);return g!==void 0?g:(c={value:l,source:c,stack:le(c)},um.set(l,c),c)}return{value:l,source:c,stack:le(c)}}function Ae(l,c){oo[Os++]=Xu,oo[Os++]=ai,ai=l,Xu=c}function Y(l,c,g){qa[Ea++]=Mr,qa[Ea++]=os,qa[Ea++]=Ya,Ya=l;var _=Mr;l=os;var A=32-sa(_)-1;_&=~(1<<A),g+=1;var D=32-sa(c)+A;if(30<D){var W=A-A%5;D=(_&(1<<W)-1).toString(32),_>>=W,A-=W,Mr=1<<32-sa(c)+A|g<<A|_,os=D+l}else Mr=1<<D|g<<A|_,os=l}function re(l){l.return!==null&&(Ae(l,1),Y(l,1,0))}function me(l){for(;l===ai;)ai=oo[--Os],oo[Os]=null,Xu=oo[--Os],oo[Os]=null;for(;l===Ya;)Ya=qa[--Ea],qa[Ea]=null,os=qa[--Ea],qa[Ea]=null,Mr=qa[--Ea],qa[Ea]=null}function Te(l,c){qa[Ea++]=Mr,qa[Ea++]=os,qa[Ea++]=Ya,Mr=c.id,os=c.overflow,Ya=l}function Ke(l,c){E(Er,c),E(lo,l),E(yr,null),l=E0(c),S(yr),E(yr,l)}function he(){S(yr),S(lo),S(Er)}function De(l){l.memoizedState!==null&&E(ju,l);var c=yr.current,g=Tc(c,l.type);c!==g&&(E(lo,l),E(yr,g))}function ze(l){lo.current===l&&(S(yr),S(lo)),ju.current===l&&(S(ju),Gi?Il._currentValue=Dl:Il._currentValue2=Dl)}function pt(l){var c=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nt(be(c,l)),zd}function It(l,c){if(!xi)throw Error(a(175));K0(l.stateNode,l.type,l.memoizedProps,c,l)||pt(l,!0)}function zt(l){for(lr=l.return;lr;)switch(lr.tag){case 5:case 31:case 13:qr=!1;return;case 27:case 3:qr=!0;return;default:lr=lr.return}}function Jt(l){if(!xi||l!==lr)return!1;if(!In)return zt(l),In=!0,!1;var c=l.tag;if(or?c!==3&&c!==27&&(c!==5||Rc(l.type)&&!jr(l.type,l.memoizedProps))&&_i&&pt(l):c!==3&&(c!==5||Rc(l.type)&&!jr(l.type,l.memoizedProps))&&_i&&pt(l),zt(l),c===13){if(!xi)throw Error(a(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));_i=Qp(l)}else if(c===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));_i=Q0(l)}else _i=or&&c===27?H0(l.type,_i):lr?V0(l.stateNode):null;return!0}function jt(){xi&&(_i=lr=null,In=!1)}function He(){var l=Ps;return l!==null&&(ua===null?ua=l:ua.push.apply(ua,l),Ps=null),l}function nt(l){Ps===null?Ps=[l]:Ps.push(l)}function Xe(l,c,g){Gi?(E(Za,c._currentValue),c._currentValue=g):(E(Za,c._currentValue2),c._currentValue2=g)}function mt(l){var c=Za.current;Gi?l._currentValue=c:l._currentValue2=c,S(Za)}function ne(l,c,g){for(;l!==null;){var _=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,_!==null&&(_.childLanes|=c)):_!==null&&(_.childLanes&c)!==c&&(_.childLanes|=c),l===g)break;l=l.return}}function Lt(l,c,g,_){var A=l.child;for(A!==null&&(A.return=l);A!==null;){var D=A.dependencies;if(D!==null){var W=A.child;D=D.firstContext;e:for(;D!==null;){var de=D;D=A;for(var Fe=0;Fe<c.length;Fe++)if(de.context===c[Fe]){D.lanes|=g,de=D.alternate,de!==null&&(de.lanes|=g),ne(D.return,g,l),_||(W=null);break e}D=de.next}}else if(A.tag===18){if(W=A.return,W===null)throw Error(a(341));W.lanes|=g,D=W.alternate,D!==null&&(D.lanes|=g),ne(W,g,l),W=null}else W=A.child;if(W!==null)W.return=A;else for(W=A;W!==null;){if(W===l){W=null;break}if(A=W.sibling,A!==null){A.return=W.return,W=A;break}W=W.return}A=W}}function wt(l,c,g,_){l=null;for(var A=c,D=!1;A!==null;){if(!D){if((A.flags&524288)!==0)D=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var W=A.alternate;if(W===null)throw Error(a(387));if(W=W.memoizedProps,W!==null){var de=A.type;Xi(A.pendingProps.value,W.value)||(l!==null?l.push(de):l=[de])}}else if(A===ju.current){if(W=A.alternate,W===null)throw Error(a(387));W.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(l!==null?l.push(Il):l=[Il])}A=A.return}l!==null&&Lt(c,l,g,_),c.flags|=262144}function kt(l){for(l=l.firstContext;l!==null;){var c=l.context;if(!Xi(Gi?c._currentValue:c._currentValue2,l.memoizedValue))return!0;l=l.next}return!1}function Je(l){ci=l,ls=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Z(l){return ye(ci,l)}function F(l,c){return ci===null&&Je(l),ye(l,c)}function ye(l,c){var g=Gi?c._currentValue:c._currentValue2;if(c={context:c,memoizedValue:g,next:null},ls===null){if(l===null)throw Error(a(308));ls=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else ls=ls.next=c;return g}function Ue(){return{controller:new dv,data:new Map,refCount:0}}function je(l){l.refCount--,l.refCount===0&&xr(Y_,function(){l.controller.abort()})}function Oe(){}function Mt(l){l!==ti&&l.next===null&&(ti===null?qu=ti=l:ti=ti.next=l),Ka=!0,Or||(Or=!0,ie())}function ct(l,c){if(!Fd&&Ka){Fd=!0;do for(var g=!1,_=qu;_!==null;){if(l!==0){var A=_.pendingLanes;if(A===0)var D=0;else{var W=_.suspendedLanes,de=_.pingedLanes;D=(1<<31-sa(42|l)+1)-1,D&=A&~(W&~de),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(g=!0,Tt(_,D))}else D=Ln,D=M(_,_===wn?D:0,_.cancelPendingCommit!==null||_.timeoutHandle!==aa),(D&3)===0||R(_,D)||(g=!0,Tt(_,D));_=_.next}while(g);Fd=!1}}function Ft(){Bt()}function Bt(){Ka=Or=!1;var l=0;Wo!==0&&Nl()&&(l=Wo);for(var c=Ur(),g=null,_=qu;_!==null;){var A=_.next,D=Qe(_,c);D===0?(_.next=null,g===null?qu=A:g.next=A,A===null&&(ti=g)):(g=_,(l!==0||(D&3)!==0)&&(Ka=!0)),_=A}er!==0&&er!==5||ct(l),Wo!==0&&(Wo=0)}function Qe(l,c){for(var g=l.suspendedLanes,_=l.pingedLanes,A=l.expirationTimes,D=l.pendingLanes&-62914561;0<D;){var W=31-sa(D),de=1<<W,Fe=A[W];Fe===-1?((de&g)===0||(de&_)!==0)&&(A[W]=I(de,c)):Fe<=c&&(l.expiredLanes|=de),D&=~de}if(c=wn,g=Ln,g=M(l,l===c?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==aa),_=l.callbackNode,g===0||l===c&&(ii===2||ii===9)||l.cancelPendingCommit!==null)return _!==null&&_!==null&&Id(_),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||R(l,g)){if(c=g&-g,c===l.callbackPriority)return c;switch(_!==null&&Id(_),te(g)){case 2:case 8:g=uv;break;case 32:g=Gu;break;case 268435456:g=Ud;break;default:g=Gu}return _=qe.bind(null,l),g=Hu(g,_),l.callbackPriority=c,l.callbackNode=g,c}return _!==null&&_!==null&&Id(_),l.callbackPriority=2,l.callbackNode=null,2}function qe(l,c){if(er!==0&&er!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(Ds()&&l.callbackNode!==g)return null;var _=Ln;return _=M(l,l===wn?_:0,l.cancelPendingCommit!==null||l.timeoutHandle!==aa),_===0?null:(ss(l,_,c),Qe(l,Ur()),l.callbackNode!=null&&l.callbackNode===g?qe.bind(null,l):null)}function Tt(l,c){if(Ds())return null;ss(l,c,!0)}function ie(){Pp?zp(function(){(Rn&6)!==0?Hu(Ld,Ft):Bt()}):Hu(Ld,Ft)}function we(){if(Wo===0){var l=co;l===0&&(l=Dd,Dd<<=1,(Dd&261888)===0&&(Dd=256)),Wo=l}return Wo}function tt(l,c){if(Dc===null){var g=Dc=[];fm=0,co=we(),cr={status:"pending",value:void 0,then:function(_){g.push(_)}}}return fm++,c.then(oe,oe),c}function oe(){if(--fm===0&&Dc!==null){cr!==null&&(cr.status="fulfilled");var l=Dc;Dc=null,co=0,cr=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function Me(l,c){var g=[],_={status:"pending",value:null,reason:null,then:function(A){g.push(A)}};return l.then(function(){_.status="fulfilled",_.value=c;for(var A=0;A<g.length;A++)(0,g[A])(c)},function(A){for(_.status="rejected",_.reason=A,A=0;A<g.length;A++)(0,g[A])(void 0)}),_}function et(){var l=Xo.current;return l!==null?l:wn.pooledCache}function St(l,c){c===null?E(Xo,Xo.current):E(Xo,c.pool)}function rt(){var l=et();return l===null?null:{parent:Gi?bi._currentValue:bi._currentValue2,pool:l}}function _e(l,c){if(Xi(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var g=Object.keys(l),_=Object.keys(c);if(g.length!==_.length)return!1;for(_=0;_<g.length;_++){var A=g[_];if(!q_.call(c,A)||!Xi(l[A],c[A]))return!1}return!0}function ft(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Nt(l,c,g){switch(g=l[g],g===void 0?l.push(c):g!==c&&(c.then(Oe,Oe),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,gn(l),l;default:if(typeof c.status=="string")c.then(Oe,Oe);else{if(l=wn,l!==null&&100<l.shellSuspendCounter)throw Error(a(482));l=c,l.status="pending",l.then(function(_){if(c.status==="pending"){var A=c;A.status="fulfilled",A.value=_}},function(_){if(c.status==="pending"){var A=c;A.status="rejected",A.reason=_}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,gn(l),l}throw Yr=c,ur}}function Kt(l){try{var c=l._init;return c(l._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(Yr=g,ur):g}}function cn(){if(Yr===null)throw Error(a(459));var l=Yr;return Yr=null,l}function gn(l){if(l===ur||l===Qa)throw Error(a(483))}function kn(l){var c=zl;return zl+=1,jo===null&&(jo=[]),Nt(jo,l,c)}function Dr(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function Si(l,c){throw c.$$typeof===wl?Error(a(525)):(l=Object.prototype.toString.call(c),Error(a(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function Li(l){function c(Ie,Ee){if(l){var Pe=Ie.deletions;Pe===null?(Ie.deletions=[Ee],Ie.flags|=16):Pe.push(Ee)}}function g(Ie,Ee){if(!l)return null;for(;Ee!==null;)c(Ie,Ee),Ee=Ee.sibling;return null}function _(Ie){for(var Ee=new Map;Ie!==null;)Ie.key!==null?Ee.set(Ie.key,Ie):Ee.set(Ie.index,Ie),Ie=Ie.sibling;return Ee}function A(Ie,Ee){return Ie=Sa(Ie,Ee),Ie.index=0,Ie.sibling=null,Ie}function D(Ie,Ee,Pe){return Ie.index=Pe,l?(Pe=Ie.alternate,Pe!==null?(Pe=Pe.index,Pe<Ee?(Ie.flags|=67108866,Ee):Pe):(Ie.flags|=67108866,Ee)):(Ie.flags|=1048576,Ee)}function W(Ie){return l&&Ie.alternate===null&&(Ie.flags|=67108866),Ie}function de(Ie,Ee,Pe,xt){return Ee===null||Ee.tag!==6?(Ee=wp(Pe,Ie.mode,xt),Ee.return=Ie,Ee):(Ee=A(Ee,Pe),Ee.return=Ie,Ee)}function Fe(Ie,Ee,Pe,xt){var nn=Pe.type;return nn===Al?Et(Ie,Ee,Pe.props.children,xt,Pe.key):Ee!==null&&(Ee.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===Xr&&Kt(nn)===Ee.type)?(Ee=A(Ee,Pe.props),Dr(Ee,Pe),Ee.return=Ie,Ee):(Ee=no(Pe.type,Pe.key,Pe.props,null,Ie.mode,xt),Dr(Ee,Pe),Ee.return=Ie,Ee)}function ot(Ie,Ee,Pe,xt){return Ee===null||Ee.tag!==4||Ee.stateNode.containerInfo!==Pe.containerInfo||Ee.stateNode.implementation!==Pe.implementation?(Ee=Ap(Pe,Ie.mode,xt),Ee.return=Ie,Ee):(Ee=A(Ee,Pe.children||[]),Ee.return=Ie,Ee)}function Et(Ie,Ee,Pe,xt,nn){return Ee===null||Ee.tag!==7?(Ee=Ga(Pe,Ie.mode,xt,nn),Ee.return=Ie,Ee):(Ee=A(Ee,Pe),Ee.return=Ie,Ee)}function ht(Ie,Ee,Pe){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Ee=wp(""+Ee,Ie.mode,Pe),Ee.return=Ie,Ee;if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case Is:return Pe=no(Ee.type,Ee.key,Ee.props,null,Ie.mode,Pe),Dr(Pe,Ee),Pe.return=Ie,Pe;case Tl:return Ee=Ap(Ee,Ie.mode,Pe),Ee.return=Ie,Ee;case Xr:return Ee=Kt(Ee),ht(Ie,Ee,Pe)}if(ko(Ee)||y(Ee))return Ee=Ga(Ee,Ie.mode,Pe,null),Ee.return=Ie,Ee;if(typeof Ee.then=="function")return ht(Ie,kn(Ee),Pe);if(Ee.$$typeof===Wa)return ht(Ie,F(Ie,Ee),Pe);Si(Ie,Ee)}return null}function Ot(Ie,Ee,Pe,xt){var nn=Ee!==null?Ee.key:null;if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return nn!==null?null:de(Ie,Ee,""+Pe,xt);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case Is:return Pe.key===nn?Fe(Ie,Ee,Pe,xt):null;case Tl:return Pe.key===nn?ot(Ie,Ee,Pe,xt):null;case Xr:return Pe=Kt(Pe),Ot(Ie,Ee,Pe,xt)}if(ko(Pe)||y(Pe))return nn!==null?null:Et(Ie,Ee,Pe,xt,null);if(typeof Pe.then=="function")return Ot(Ie,Ee,kn(Pe),xt);if(Pe.$$typeof===Wa)return Ot(Ie,Ee,F(Ie,Pe),xt);Si(Ie,Pe)}return null}function mn(Ie,Ee,Pe,xt,nn){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return Ie=Ie.get(Pe)||null,de(Ee,Ie,""+xt,nn);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case Is:return Ie=Ie.get(xt.key===null?Pe:xt.key)||null,Fe(Ee,Ie,xt,nn);case Tl:return Ie=Ie.get(xt.key===null?Pe:xt.key)||null,ot(Ee,Ie,xt,nn);case Xr:return xt=Kt(xt),mn(Ie,Ee,Pe,xt,nn)}if(ko(xt)||y(xt))return Ie=Ie.get(Pe)||null,Et(Ee,Ie,xt,nn,null);if(typeof xt.then=="function")return mn(Ie,Ee,Pe,kn(xt),nn);if(xt.$$typeof===Wa)return mn(Ie,Ee,Pe,F(Ee,xt),nn);Si(Ee,xt)}return null}function Yi(Ie,Ee,Pe,xt){for(var nn=null,Di=null,rn=Ee,Vn=Ee=0,_r=null;rn!==null&&Vn<Pe.length;Vn++){rn.index>Vn?(_r=rn,rn=null):_r=rn.sibling;var Zn=Ot(Ie,rn,Pe[Vn],xt);if(Zn===null){rn===null&&(rn=_r);break}l&&rn&&Zn.alternate===null&&c(Ie,rn),Ee=D(Zn,Ee,Vn),Di===null?nn=Zn:Di.sibling=Zn,Di=Zn,rn=_r}if(Vn===Pe.length)return g(Ie,rn),In&&Ae(Ie,Vn),nn;if(rn===null){for(;Vn<Pe.length;Vn++)rn=ht(Ie,Pe[Vn],xt),rn!==null&&(Ee=D(rn,Ee,Vn),Di===null?nn=rn:Di.sibling=rn,Di=rn);return In&&Ae(Ie,Vn),nn}for(rn=_(rn);Vn<Pe.length;Vn++)_r=mn(rn,Ie,Vn,Pe[Vn],xt),_r!==null&&(l&&_r.alternate!==null&&rn.delete(_r.key===null?Vn:_r.key),Ee=D(_r,Ee,Vn),Di===null?nn=_r:Di.sibling=_r,Di=_r);return l&&rn.forEach(function(ts){return c(Ie,ts)}),In&&Ae(Ie,Vn),nn}function Bc(Ie,Ee,Pe,xt){if(Pe==null)throw Error(a(151));for(var nn=null,Di=null,rn=Ee,Vn=Ee=0,_r=null,Zn=Pe.next();rn!==null&&!Zn.done;Vn++,Zn=Pe.next()){rn.index>Vn?(_r=rn,rn=null):_r=rn.sibling;var ts=Ot(Ie,rn,Zn.value,xt);if(ts===null){rn===null&&(rn=_r);break}l&&rn&&ts.alternate===null&&c(Ie,rn),Ee=D(ts,Ee,Vn),Di===null?nn=ts:Di.sibling=ts,Di=ts,rn=_r}if(Zn.done)return g(Ie,rn),In&&Ae(Ie,Vn),nn;if(rn===null){for(;!Zn.done;Vn++,Zn=Pe.next())Zn=ht(Ie,Zn.value,xt),Zn!==null&&(Ee=D(Zn,Ee,Vn),Di===null?nn=Zn:Di.sibling=Zn,Di=Zn);return In&&Ae(Ie,Vn),nn}for(rn=_(rn);!Zn.done;Vn++,Zn=Pe.next())Zn=mn(rn,Ie,Vn,Zn.value,xt),Zn!==null&&(l&&Zn.alternate!==null&&rn.delete(Zn.key===null?Vn:Zn.key),Ee=D(Zn,Ee,Vn),Di===null?nn=Zn:Di.sibling=Zn,Di=Zn);return l&&rn.forEach(function(Z_){return c(Ie,Z_)}),In&&Ae(Ie,Vn),nn}function el(Ie,Ee,Pe,xt){if(typeof Pe=="object"&&Pe!==null&&Pe.type===Al&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case Is:e:{for(var nn=Pe.key;Ee!==null;){if(Ee.key===nn){if(nn=Pe.type,nn===Al){if(Ee.tag===7){g(Ie,Ee.sibling),xt=A(Ee,Pe.props.children),xt.return=Ie,Ie=xt;break e}}else if(Ee.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===Xr&&Kt(nn)===Ee.type){g(Ie,Ee.sibling),xt=A(Ee,Pe.props),Dr(xt,Pe),xt.return=Ie,Ie=xt;break e}g(Ie,Ee);break}else c(Ie,Ee);Ee=Ee.sibling}Pe.type===Al?(xt=Ga(Pe.props.children,Ie.mode,xt,Pe.key),xt.return=Ie,Ie=xt):(xt=no(Pe.type,Pe.key,Pe.props,null,Ie.mode,xt),Dr(xt,Pe),xt.return=Ie,Ie=xt)}return W(Ie);case Tl:e:{for(nn=Pe.key;Ee!==null;){if(Ee.key===nn)if(Ee.tag===4&&Ee.stateNode.containerInfo===Pe.containerInfo&&Ee.stateNode.implementation===Pe.implementation){g(Ie,Ee.sibling),xt=A(Ee,Pe.children||[]),xt.return=Ie,Ie=xt;break e}else{g(Ie,Ee);break}else c(Ie,Ee);Ee=Ee.sibling}xt=Ap(Pe,Ie.mode,xt),xt.return=Ie,Ie=xt}return W(Ie);case Xr:return Pe=Kt(Pe),el(Ie,Ee,Pe,xt)}if(ko(Pe))return Yi(Ie,Ee,Pe,xt);if(y(Pe)){if(nn=y(Pe),typeof nn!="function")throw Error(a(150));return Pe=nn.call(Pe),Bc(Ie,Ee,Pe,xt)}if(typeof Pe.then=="function")return el(Ie,Ee,kn(Pe),xt);if(Pe.$$typeof===Wa)return el(Ie,Ee,F(Ie,Pe),xt);Si(Ie,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint"?(Pe=""+Pe,Ee!==null&&Ee.tag===6?(g(Ie,Ee.sibling),xt=A(Ee,Pe),xt.return=Ie,Ie=xt):(g(Ie,Ee),xt=wp(Pe,Ie.mode,xt),xt.return=Ie,Ie=xt),W(Ie)):g(Ie,Ee)}return function(Ie,Ee,Pe,xt){try{zl=0;var nn=el(Ie,Ee,Pe,xt);return jo=null,nn}catch(rn){if(rn===ur||rn===Qa)throw rn;var Di=t(29,rn,null,Ie.mode);return Di.lanes=xt,Di.return=Ie,Di}}}function ea(){for(var l=Fs,c=Fl=Fs=0;c<l;){var g=Tr[c];Tr[c++]=null;var _=Tr[c];Tr[c++]=null;var A=Tr[c];Tr[c++]=null;var D=Tr[c];if(Tr[c++]=null,_!==null&&A!==null){var W=_.pending;W===null?A.next=A:(A.next=W.next,W.next=A),_.pending=A}D!==0&&Vr(g,A,D)}}function Mi(l,c,g,_){Tr[Fs++]=l,Tr[Fs++]=c,Tr[Fs++]=g,Tr[Fs++]=_,Fl|=_,l.lanes|=_,l=l.alternate,l!==null&&(l.lanes|=_)}function ar(l,c,g,_){return Mi(l,c,g,_),pi(l)}function on(l,c){return Mi(l,null,null,c),pi(l)}function Vr(l,c,g){l.lanes|=g;var _=l.alternate;_!==null&&(_.lanes|=g);for(var A=!1,D=l.return;D!==null;)D.childLanes|=g,_=D.alternate,_!==null&&(_.childLanes|=g),D.tag===22&&(l=D.stateNode,l===null||l._visibility&1||(A=!0)),l=D,D=D.return;return l.tag===3?(D=l.stateNode,A&&c!==null&&(A=31-sa(g),l=D.hiddenUpdates,_=l[A],_===null?l[A]=[c]:_.push(c),c.lane=g|536870912),D):null}function pi(l){if(50<Xn)throw Xn=0,Ju=null,Error(a(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}function B(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function q(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function ce(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Ce(l,c,g){var _=l.updateQueue;if(_===null)return null;if(_=_.shared,(Rn&2)!==0){var A=_.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),_.pending=c,c=pi(l),Vr(l,null,g),c}return Mi(l,_,c,g),pi(l)}function Be(l,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194048)!==0)){var _=c.lanes;_&=l.pendingLanes,g|=_,c.lanes=g,O(l,g)}}function Ve(l,c){var g=l.updateQueue,_=l.alternate;if(_!==null&&(_=_.updateQueue,g===_)){var A=null,D=null;if(g=g.firstBaseUpdate,g!==null){do{var W={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};D===null?A=D=W:D=D.next=W,g=g.next}while(g!==null);D===null?A=D=c:D=D.next=c}else A=D=c;g={baseState:_.baseState,firstBaseUpdate:A,lastBaseUpdate:D,shared:_.shared,callbacks:_.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=c:l.next=c,g.lastBaseUpdate=c}function dt(){if(kd){var l=cr;if(l!==null)throw l}}function st(l,c,g,_){kd=!1;var A=l.updateQueue;wa=!1;var D=A.firstBaseUpdate,W=A.lastBaseUpdate,de=A.shared.pending;if(de!==null){A.shared.pending=null;var Fe=de,ot=Fe.next;Fe.next=null,W===null?D=ot:W.next=ot,W=Fe;var Et=l.alternate;Et!==null&&(Et=Et.updateQueue,de=Et.lastBaseUpdate,de!==W&&(de===null?Et.firstBaseUpdate=ot:de.next=ot,Et.lastBaseUpdate=Fe))}if(D!==null){var ht=A.baseState;W=0,Et=ot=Fe=null,de=D;do{var Ot=de.lane&-536870913,mn=Ot!==de.lane;if(mn?(Ln&Ot)===Ot:(_&Ot)===Ot){Ot!==0&&Ot===co&&(kd=!0),Et!==null&&(Et=Et.next={lane:0,tag:de.tag,payload:de.payload,callback:null,next:null});e:{var Yi=l,Bc=de;Ot=c;var el=g;switch(Bc.tag){case 1:if(Yi=Bc.payload,typeof Yi=="function"){ht=Yi.call(el,ht,Ot);break e}ht=Yi;break e;case 3:Yi.flags=Yi.flags&-65537|128;case 0:if(Yi=Bc.payload,Ot=typeof Yi=="function"?Yi.call(el,ht,Ot):Yi,Ot==null)break e;ht=pd({},ht,Ot);break e;case 2:wa=!0}}Ot=de.callback,Ot!==null&&(l.flags|=64,mn&&(l.flags|=8192),mn=A.callbacks,mn===null?A.callbacks=[Ot]:mn.push(Ot))}else mn={lane:Ot,tag:de.tag,payload:de.payload,callback:de.callback,next:null},Et===null?(ot=Et=mn,Fe=ht):Et=Et.next=mn,W|=Ot;if(de=de.next,de===null){if(de=A.shared.pending,de===null)break;mn=de,de=mn.next,mn.next=null,A.lastBaseUpdate=mn,A.shared.pending=null}}while(!0);Et===null&&(Fe=ht),A.baseState=Fe,A.firstBaseUpdate=ot,A.lastBaseUpdate=Et,D===null&&(A.shared.lanes=0),fo|=W,l.lanes=W,l.memoizedState=ht}}function yt(l,c){if(typeof l!="function")throw Error(a(191,l));l.call(c)}function vt(l,c){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)yt(g[l],c)}function bt(l,c){l=ks,E(qo,l),E(Bl,c),ks=l|c.baseLanes}function k(){E(qo,ks),E(Bl,Bl.current)}function fe(){ks=qo.current,S(Bl),S(qo)}function ge(l){var c=l.alternate;E(Pi,Pi.current&1),E(la,l),ca===null&&(c===null||Bl.current!==null||c.memoizedState!==null)&&(ca=l)}function pe(l){E(Pi,Pi.current),E(la,l),ca===null&&(ca=l)}function ve(l){l.tag===22?(E(Pi,Pi.current),E(la,l),ca===null&&(ca=l)):Ge()}function Ge(){E(Pi,Pi.current),E(la,la.current)}function it(l){S(la),ca===l&&(ca=null),S(Pi)}function at(l){for(var c=l;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||Ho(g)||Sd(g)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function lt(){throw Error(a(321))}function Ct(l,c){if(c===null)return!1;for(var g=0;g<c.length&&g<l.length;g++)if(!Xi(l[g],c[g]))return!1;return!0}function Dt(l,c,g,_,A,D){return uo=D,yn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,en.H=l===null||l.memoizedState===null?Ci:Bs,Fn=!1,D=g(_,A),Fn=!1,bn&&(D=gt(c,g,_,A)),$t(l),D}function $t(l){en.H=Ta;var c=Zt!==null&&Zt.next!==null;if(uo=0,dn=Zt=yn=null,En=!1,Ja=0,cs=null,c)throw Error(a(300));l===null||gi||(l=l.dependencies,l!==null&&kt(l)&&(gi=!0))}function gt(l,c,g,_){yn=l;var A=0;do{if(bn&&(cs=null),Ja=0,bn=!1,25<=A)throw Error(a(301));if(A+=1,dn=Zt=null,l.updateQueue!=null){var D=l.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}en.H=Yo,D=c(g,_)}while(bn);return D}function qt(){var l=en.H,c=l.useState()[0];return c=typeof c.then=="function"?At(c):c,l=l.useState()[0],(Zt!==null?Zt.memoizedState:null)!==l&&(yn.flags|=1024),c}function On(){var l=Pr!==0;return Pr=0,l}function qn(l,c,g){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~g}function un(l){if(En){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}En=!1}uo=0,dn=Zt=yn=null,bn=!1,Ja=Pr=0,cs=null}function Xt(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?yn.memoizedState=dn=l:dn=dn.next=l,dn}function ut(){if(Zt===null){var l=yn.alternate;l=l!==null?l.memoizedState:null}else l=Zt.next;var c=dn===null?yn.memoizedState:dn.next;if(c!==null)dn=c,Zt=l;else{if(l===null)throw yn.alternate===null?Error(a(467)):Error(a(310));Zt=l,l={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},dn===null?yn.memoizedState=dn=l:dn=dn.next=l}return dn}function pn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function At(l){var c=Ja;return Ja+=1,cs===null&&(cs=[]),l=Nt(cs,l,c),c=yn,(dn===null?c.memoizedState:dn.next)===null&&(c=c.alternate,en.H=c===null||c.memoizedState===null?Ci:Bs),l}function Kn(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return At(l);if(l.$$typeof===Wa)return Z(l)}throw Error(a(438,String(l)))}function Ei(l){var c=null,g=yn.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var _=yn.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(c={data:_.data.map(function(A){return A.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=pn(),yn.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(l),_=0;_<l;_++)g[_]=Rp;return c.index++,g}function Wn(l,c){return typeof c=="function"?c(l):c}function mi(l){var c=ut();return Yn(c,Zt,l)}function Yn(l,c,g){var _=l.queue;if(_===null)throw Error(a(311));_.lastRenderedReducer=g;var A=l.baseQueue,D=_.pending;if(D!==null){if(A!==null){var W=A.next;A.next=D.next,D.next=W}c.baseQueue=A=D,_.pending=null}if(D=l.baseState,A===null)l.memoizedState=D;else{c=A.next;var de=W=null,Fe=null,ot=c,Et=!1;do{var ht=ot.lane&-536870913;if(ht!==ot.lane?(Ln&ht)===ht:(uo&ht)===ht){var Ot=ot.revertLane;if(Ot===0)Fe!==null&&(Fe=Fe.next={lane:0,revertLane:0,gesture:null,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null}),ht===co&&(Et=!0);else if((uo&Ot)===Ot){ot=ot.next,Ot===co&&(Et=!0);continue}else ht={lane:0,revertLane:ot.revertLane,gesture:null,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null},Fe===null?(de=Fe=ht,W=D):Fe=Fe.next=ht,yn.lanes|=Ot,fo|=Ot;ht=ot.action,Fn&&g(D,ht),D=ot.hasEagerState?ot.eagerState:g(D,ht)}else Ot={lane:ht,revertLane:ot.revertLane,gesture:ot.gesture,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null},Fe===null?(de=Fe=Ot,W=D):Fe=Fe.next=Ot,yn.lanes|=ht,fo|=ht;ot=ot.next}while(ot!==null&&ot!==c);if(Fe===null?W=D:Fe.next=de,!Xi(D,l.memoizedState)&&(gi=!0,Et&&(g=cr,g!==null)))throw g;l.memoizedState=D,l.baseState=W,l.baseQueue=Fe,_.lastRenderedState=D}return A===null&&(_.lanes=0),[l.memoizedState,_.dispatch]}function Ui(l){var c=ut(),g=c.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=l;var _=g.dispatch,A=g.pending,D=c.memoizedState;if(A!==null){g.pending=null;var W=A=A.next;do D=l(D,W.action),W=W.next;while(W!==A);Xi(D,c.memoizedState)||(gi=!0),c.memoizedState=D,c.baseQueue===null&&(c.baseState=D),g.lastRenderedState=D}return[D,_]}function Ir(l,c,g){var _=yn,A=ut(),D=In;if(D){if(g===void 0)throw Error(a(407));g=g()}else g=c();var W=!Xi((Zt||A).memoizedState,g);if(W&&(A.memoizedState=g,gi=!0),A=A.queue,ac(xs.bind(null,_,A,l),[l]),A.getSnapshot!==c||W||dn!==null&&dn.memoizedState.tag&1){if(_.flags|=2048,xa(9,{destroy:void 0},za.bind(null,_,A,g,c),null),wn===null)throw Error(a(349));D||(uo&127)!==0||Hi(_,c,g)}return g}function Hi(l,c,g){l.flags|=16384,l={getSnapshot:c,value:g},c=yn.updateQueue,c===null?(c=pn(),yn.updateQueue=c,c.stores=[l]):(g=c.stores,g===null?c.stores=[l]:g.push(l))}function za(l,c,g,_){c.value=g,c.getSnapshot=_,ml(c)&&jg(l)}function xs(l,c,g){return g(function(){ml(c)&&jg(l)})}function ml(l){var c=l.getSnapshot;l=l.value;try{var g=c();return!Xi(l,g)}catch{return!0}}function jg(l){var c=on(l,2);c!==null&&Ti(c,l,2)}function ep(l){var c=Xt();if(typeof l=="function"){var g=l;if(l=g(),Fn){ee(!0);try{g()}finally{ee(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:l},c}function mu(l,c,g,_){return l.baseState=g,Yn(l,Zt,typeof _=="function"?_:Wn)}function Ks(l,c,g,_,A){if(Yf(l))throw Error(a(485));if(l=c.action,l!==null){var D={payload:A,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){D.listeners.push(W)}};en.T!==null?g(!0):D.isTransition=!1,_(D),g=c.pending,g===null?(D.next=c.pending=D,Vf(c,D)):(D.next=g.next,c.pending=g.next=D)}}function Vf(l,c){var g=c.action,_=c.payload,A=l.state;if(c.isTransition){var D=en.T,W={};en.T=W;try{var de=g(A,_),Fe=en.S;Fe!==null&&Fe(W,de),Hf(l,c,de)}catch(ot){Ao(l,c,ot)}finally{D!==null&&W.types!==null&&(D.types=W.types),en.T=D}}else try{D=g(A,_),Hf(l,c,D)}catch(ot){Ao(l,c,ot)}}function Hf(l,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(_){gl(l,c,_)},function(_){return Ao(l,c,_)}):gl(l,c,g)}function gl(l,c,g){c.status="fulfilled",c.value=g,tp(c),l.state=g,c=l.pending,c!==null&&(g=c.next,g===c?l.pending=null:(g=g.next,c.next=g,Vf(l,g)))}function Ao(l,c,g){var _=l.pending;if(l.pending=null,_!==null){_=_.next;do c.status="rejected",c.reason=g,tp(c),c=c.next;while(c!==_)}l.action=null}function tp(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function Gf(l,c){return c}function np(l,c){if(In){var g=wn.formState;if(g!==null){e:{var _=yn;if(In){if(_i){var A=k0(_i,qr);if(A){_i=V0(A),_=Yp(A);break e}}pt(_)}_=!1}_&&(c=g[0])}}g=Xt(),g.memoizedState=g.baseState=c,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gf,lastRenderedState:c},g.queue=_,g=Qg.bind(null,yn,_),_.dispatch=g,_=ep(!1);var D=qf.bind(null,yn,!1,_.queue);return _=Xt(),A={state:c,dispatch:null,action:l,pending:null},_.queue=A,g=Ks.bind(null,yn,A,D,g),A.dispatch=g,_.memoizedState=l,[c,g,!1]}function ic(l){var c=ut();return _s(c,Zt,l)}function _s(l,c,g){if(c=Yn(l,c,Gf)[0],l=mi(Wn)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var _=At(c)}catch(W){throw W===ur?Qa:W}else _=c;c=ut();var A=c.queue,D=A.dispatch;return g!==c.memoizedState&&(yn.flags|=2048,xa(9,{destroy:void 0},ip.bind(null,A,g),null)),[_,D,l]}function ip(l,c){l.action=c}function rc(l){var c=ut(),g=Zt;if(g!==null)return _s(c,g,l);ut(),c=c.memoizedState,g=ut();var _=g.queue.dispatch;return g.memoizedState=l,[c,_,!1]}function xa(l,c,g,_){return l={tag:l,create:g,deps:_,inst:c,next:null},c=yn.updateQueue,c===null&&(c=pn(),yn.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=l.next=l:(_=g.next,g.next=l,l.next=_,c.lastEffect=l),l}function Wf(){return ut().memoizedState}function vl(l,c,g,_){var A=Xt();yn.flags|=l,A.memoizedState=xa(1|c,{destroy:void 0},g,_===void 0?null:_)}function gu(l,c,g,_){var A=ut();_=_===void 0?null:_;var D=A.memoizedState.inst;Zt!==null&&_!==null&&Ct(_,Zt.memoizedState.deps)?A.memoizedState=xa(c,D,g,_):(yn.flags|=l,A.memoizedState=xa(1|c,D,g,_))}function vu(l,c){vl(8390656,8,l,c)}function ac(l,c){gu(2048,8,l,c)}function qg(l){yn.flags|=4;var c=yn.updateQueue;if(c===null)c=pn(),yn.updateQueue=c,c.events=[l];else{var g=c.events;g===null?c.events=[l]:g.push(l)}}function Hr(l){var c=ut().memoizedState;return qg({ref:c,nextImpl:l}),function(){if((Rn&2)!==0)throw Error(a(440));return c.impl.apply(void 0,arguments)}}function Co(l,c){return gu(4,2,l,c)}function yu(l,c){return gu(4,4,l,c)}function sc(l,c){if(typeof c=="function"){l=l();var g=c(l);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function Yg(l,c,g){g=g!=null?g.concat([l]):null,gu(4,4,sc.bind(null,c,l),g)}function xu(){}function Xf(l,c){var g=ut();c=c===void 0?null:c;var _=g.memoizedState;return c!==null&&Ct(c,_[1])?_[0]:(g.memoizedState=[l,c],l)}function oc(l,c){var g=ut();c=c===void 0?null:c;var _=g.memoizedState;if(c!==null&&Ct(c,_[1]))return _[0];if(_=l(),Fn){ee(!0);try{l()}finally{ee(!1)}}return g.memoizedState=[_,c],_}function lc(l,c,g){return g===void 0||(uo&1073741824)!==0&&(Ln&261930)===0?l.memoizedState=c:(l.memoizedState=g,l=Js(),yn.lanes|=l,fo|=l,g)}function rp(l,c,g,_){return Xi(g,c)?g:Bl.current!==null?(l=lc(l,g,_),Xi(l,c)||(gi=!0),l):(uo&42)===0||(uo&1073741824)!==0&&(Ln&261930)===0?(gi=!0,l.memoizedState=g):(l=Js(),yn.lanes|=l,fo|=l,c)}function Zg(l,c,g,_,A){var D=Xa();Dn(D!==0&&8>D?D:8);var W=en.T,de={};en.T=de,qf(l,!1,c,g);try{var Fe=A(),ot=en.S;if(ot!==null&&ot(de,Fe),Fe!==null&&typeof Fe=="object"&&typeof Fe.then=="function"){var Et=Me(Fe,_);_u(l,c,Et,yi(l))}else _u(l,c,_,yi(l))}catch(ht){_u(l,c,{then:function(){},status:"rejected",reason:ht},yi())}finally{Dn(D),W!==null&&de.types!==null&&(W.types=de.types),en.T=W}}function Kg(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:Dl,baseState:Dl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:Dl},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:g},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function ap(){return Z(Il)}function jf(){return ut().memoizedState}function $g(){return ut().memoizedState}function z_(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var g=yi();l=ce(g);var _=Ce(c,l,g);_!==null&&(Ti(_,c,g),Be(_,c,g)),c={cache:Ue()},l.payload=c;return}c=c.return}}function F_(l,c,g){var _=yi();g={lane:_,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Yf(l)?Jg(c,g):(g=ar(l,c,g,_),g!==null&&(Ti(g,l,_),e0(g,c,_)))}function Qg(l,c,g){var _=yi();_u(l,c,g,_)}function _u(l,c,g,_){var A={lane:_,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(Yf(l))Jg(c,A);else{var D=l.alternate;if(l.lanes===0&&(D===null||D.lanes===0)&&(D=c.lastRenderedReducer,D!==null))try{var W=c.lastRenderedState,de=D(W,g);if(A.hasEagerState=!0,A.eagerState=de,Xi(de,W))return Mi(l,c,A,0),wn===null&&ea(),!1}catch{}if(g=ar(l,c,A,_),g!==null)return Ti(g,l,_),e0(g,c,_),!0}return!1}function qf(l,c,g,_){if(_={lane:2,revertLane:we(),gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},Yf(l)){if(c)throw Error(a(479))}else c=ar(l,g,_,2),c!==null&&Ti(c,l,2)}function Yf(l){var c=l.alternate;return l===yn||c!==null&&c===yn}function Jg(l,c){bn=En=!0;var g=l.pending;g===null?c.next=c:(c.next=g.next,g.next=c),l.pending=c}function e0(l,c,g){if((g&4194048)!==0){var _=c.lanes;_&=l.pendingLanes,g|=_,c.lanes=g,O(l,g)}}function sp(l,c,g,_){c=l.memoizedState,g=g(_,c),g=g==null?c:pd({},c,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}function Zf(l,c,g,_,A,D,W){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(_,D,W):c.prototype&&c.prototype.isPureReactComponent?!_e(g,_)||!_e(A,D):!0}function t0(l,c,g,_){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,_),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,_),c.state!==l&&Yu.enqueueReplaceState(c,c.state,null)}function yl(l,c){var g=c;if("ref"in c){g={};for(var _ in c)_!=="ref"&&(g[_]=c[_])}if(l=l.defaultProps){g===c&&(g=pd({},g));for(var A in l)g[A]===void 0&&(g[A]=l[A])}return g}function Kf(l,c){try{var g=l.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(_){setTimeout(function(){throw _})}}function op(l,c,g){try{var _=l.onCaughtError;_(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function lp(l,c,g){return g=ce(g),g.tag=3,g.payload={element:null},g.callback=function(){Kf(l,c)},g}function n0(l){return l=ce(l),l.tag=3,l}function i0(l,c,g,_){var A=g.type.getDerivedStateFromError;if(typeof A=="function"){var D=_.value;l.payload=function(){return A(D)},l.callback=function(){op(c,g,_)}}var W=g.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(l.callback=function(){op(c,g,_),typeof A!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var de=_.stack;this.componentDidCatch(_.value,{componentStack:de!==null?de:""})})}function B_(l,c,g,_,A){if(g.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(c=g.alternate,c!==null&&wt(c,g,A,!0),g=la.current,g!==null){switch(g.tag){case 31:case 13:return ca===null?xc():g.alternate===null&&Ni===0&&(Ni=3),g.flags&=-257,g.flags|=65536,g.lanes=A,_===zs?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([_]):c.add(_),Sc(l,_,A)),!1;case 22:return g.flags|=65536,_===zs?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([_])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([_]):g.add(_)),Sc(l,_,A)),!1}throw Error(a(435,g.tag))}return Sc(l,_,A),xc(),!1}if(In)return c=la.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=A,_!==zd&&(l=Error(a(422),{cause:_}),nt(be(l,g)))):(_!==zd&&(c=Error(a(423),{cause:_}),nt(be(c,g))),l=l.current.alternate,l.flags|=65536,A&=-A,l.lanes|=A,_=be(_,g),A=lp(l.stateNode,_,A),Ve(l,A),Ni!==4&&(Ni=2)),!1;var D=Error(a(520),{cause:_});if(D=be(D,g),Ku===null?Ku=[D]:Ku.push(D),Ni!==4&&(Ni=2),c===null)return!0;_=be(_,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,l=A&-A,g.lanes|=l,l=lp(g.stateNode,_,l),Ve(g,l),!1;case 1:if(c=g.type,D=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(ho===null||!ho.has(D))))return g.flags|=65536,A&=-A,g.lanes|=A,A=n0(A),i0(A,l,g,_),Ve(g,A),!1}g=g.return}while(g!==null);return!1}function Sr(l,c,g,_){c.child=l===null?dm(c,null,g,_):wr(c,l.child,g,_)}function r0(l,c,g,_,A){g=g.render;var D=c.ref;if("ref"in _){var W={};for(var de in _)de!=="ref"&&(W[de]=_[de])}else W=_;return Je(c),_=Dt(l,c,g,W,D,A),de=On(),l!==null&&!gi?(qn(l,c,A),bs(l,c,A)):(In&&de&&re(c),c.flags|=1,Sr(l,c,_,A),c.child)}function a0(l,c,g,_,A){if(l===null){var D=g.type;return typeof D=="function"&&!Ml(D)&&D.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=D,s0(l,c,D,_,A)):(l=no(g.type,null,_,c,c.mode,A),l.ref=c.ref,l.return=c,c.child=l)}if(D=l.child,!Su(l,A)){var W=D.memoizedProps;if(g=g.compare,g=g!==null?g:_e,g(W,_)&&l.ref===c.ref)return bs(l,c,A)}return c.flags|=1,l=Sa(D,_),l.ref=c.ref,l.return=c,c.child=l}function s0(l,c,g,_,A){if(l!==null){var D=l.memoizedProps;if(_e(D,_)&&l.ref===c.ref)if(gi=!1,c.pendingProps=_=D,Su(l,A))(l.flags&131072)!==0&&(gi=!0);else return c.lanes=l.lanes,bs(l,c,A)}return Qf(l,c,g,_,A)}function o0(l,c,g,_){var A=_.children,D=l!==null?l.memoizedState:null;if(l===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),_.mode==="hidden"){if((c.flags&128)!==0){if(D=D!==null?D.baseLanes|g:g,l!==null){for(_=c.child=l.child,A=0;_!==null;)A=A|_.lanes|_.childLanes,_=_.sibling;_=A&~D}else _=0,c.child=null;return cc(l,c,D,g,_)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&St(c,D!==null?D.cachePool:null),D!==null?bt(c,D):k(),ve(c);else return _=c.lanes=536870912,cc(l,c,D!==null?D.baseLanes|g:g,g,_)}else D!==null?(St(c,D.cachePool),bt(c,D),Ge(),c.memoizedState=null):(l!==null&&St(c,null),k(),Ge());return Sr(l,c,A,g),c.child}function xl(l,c){return l!==null&&l.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function cc(l,c,g,_,A){var D=et();return D=D===null?null:{parent:Gi?bi._currentValue:bi._currentValue2,pool:D},c.memoizedState={baseLanes:g,cachePool:D},l!==null&&St(c,null),k(),ve(c),l!==null&&wt(l,c,_,!0),c.childLanes=A,null}function $f(l,c){return c=Ro({mode:c.mode,children:c.children},l.mode),c.ref=l.ref,l.child=c,c.return=l,c}function cp(l,c,g){return wr(c,l.child,null,g),l=$f(c,c.pendingProps),l.flags|=2,it(c),c.memoizedState=null,l}function l0(l,c,g){var _=c.pendingProps,A=(c.flags&128)!==0;if(c.flags&=-129,l===null){if(In){if(_.mode==="hidden")return l=$f(c,_),c.lanes=536870912,xl(null,l);if(pe(c),(l=_i)?(l=Kp(l,qr),l!==null&&(c.memoizedState={dehydrated:l,treeContext:Ya!==null?{id:Mr,overflow:os}:null,retryLane:536870912,hydrationErrors:null},g=Tp(l),g.return=c,c.child=g,lr=c,_i=null)):l=null,l===null)throw pt(c);return c.lanes=536870912,null}return $f(c,_)}var D=l.memoizedState;if(D!==null){var W=D.dehydrated;if(pe(c),A)if(c.flags&256)c.flags&=-257,c=cp(l,c,g);else if(c.memoizedState!==null)c.child=l.child,c.flags|=128,c=null;else throw Error(a(558));else if(gi||wt(l,c,g,!1),A=(g&l.childLanes)!==0,gi||A){if(_=wn,_!==null&&(W=K(_,g),W!==0&&W!==D.retryLane))throw D.retryLane=W,on(l,W),Ti(_,l,W),Zr;xc(),c=cp(l,c,g)}else l=D.treeContext,xi&&(_i=X0(W),lr=c,In=!0,Ps=null,qr=!1,l!==null&&Te(c,l)),c=$f(c,_),c.flags|=4096;return c}return l=Sa(l.child,{mode:_.mode,children:_.children}),l.ref=c.ref,c.child=l,l.return=c,l}function bu(l,c){var g=c.ref;if(g===null)l!==null&&l.ref!==null&&(c.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(a(284));(l===null||l.ref!==g)&&(c.flags|=4194816)}}function Qf(l,c,g,_,A){return Je(c),g=Dt(l,c,g,_,void 0,A),_=On(),l!==null&&!gi?(qn(l,c,A),bs(l,c,A)):(In&&_&&re(c),c.flags|=1,Sr(l,c,g,A),c.child)}function up(l,c,g,_,A,D){return Je(c),c.updateQueue=null,g=gt(c,_,g,A),$t(l),_=On(),l!==null&&!gi?(qn(l,c,D),bs(l,c,D)):(In&&_&&re(c),c.flags|=1,Sr(l,c,g,D),c.child)}function _l(l,c,g,_,A){if(Je(c),c.stateNode===null){var D=Ls,W=g.contextType;typeof W=="object"&&W!==null&&(D=Z(W)),D=new g(_,D),c.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=Yu,c.stateNode=D,D._reactInternals=c,D=c.stateNode,D.props=_,D.state=c.memoizedState,D.refs={},B(c),W=g.contextType,D.context=typeof W=="object"&&W!==null?Z(W):Ls,D.state=c.memoizedState,W=g.getDerivedStateFromProps,typeof W=="function"&&(sp(c,g,W,_),D.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(W=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),W!==D.state&&Yu.enqueueReplaceState(D,D.state,null),st(c,_,D,A),dt(),D.state=c.memoizedState),typeof D.componentDidMount=="function"&&(c.flags|=4194308),_=!0}else if(l===null){D=c.stateNode;var de=c.memoizedProps,Fe=yl(g,de);D.props=Fe;var ot=D.context,Et=g.contextType;W=Ls,typeof Et=="object"&&Et!==null&&(W=Z(Et));var ht=g.getDerivedStateFromProps;Et=typeof ht=="function"||typeof D.getSnapshotBeforeUpdate=="function",de=c.pendingProps!==de,Et||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(de||ot!==W)&&t0(c,D,_,W),wa=!1;var Ot=c.memoizedState;D.state=Ot,st(c,_,D,A),dt(),ot=c.memoizedState,de||Ot!==ot||wa?(typeof ht=="function"&&(sp(c,g,ht,_),ot=c.memoizedState),(Fe=wa||Zf(c,g,Fe,_,Ot,ot,W))?(Et||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(c.flags|=4194308)):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=_,c.memoizedState=ot),D.props=_,D.state=ot,D.context=W,_=Fe):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),_=!1)}else{D=c.stateNode,q(l,c),W=c.memoizedProps,Et=yl(g,W),D.props=Et,ht=c.pendingProps,Ot=D.context,ot=g.contextType,Fe=Ls,typeof ot=="object"&&ot!==null&&(Fe=Z(ot)),de=g.getDerivedStateFromProps,(ot=typeof de=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(W!==ht||Ot!==Fe)&&t0(c,D,_,Fe),wa=!1,Ot=c.memoizedState,D.state=Ot,st(c,_,D,A),dt();var mn=c.memoizedState;W!==ht||Ot!==mn||wa||l!==null&&l.dependencies!==null&&kt(l.dependencies)?(typeof de=="function"&&(sp(c,g,de,_),mn=c.memoizedState),(Et=wa||Zf(c,g,Et,_,Ot,mn,Fe)||l!==null&&l.dependencies!==null&&kt(l.dependencies))?(ot||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(_,mn,Fe),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(_,mn,Fe)),typeof D.componentDidUpdate=="function"&&(c.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof D.componentDidUpdate!="function"||W===l.memoizedProps&&Ot===l.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||W===l.memoizedProps&&Ot===l.memoizedState||(c.flags|=1024),c.memoizedProps=_,c.memoizedState=mn),D.props=_,D.state=mn,D.context=Fe,_=Et):(typeof D.componentDidUpdate!="function"||W===l.memoizedProps&&Ot===l.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||W===l.memoizedProps&&Ot===l.memoizedState||(c.flags|=1024),_=!1)}return D=_,bu(l,c),_=(c.flags&128)!==0,D||_?(D=c.stateNode,g=_&&typeof g.getDerivedStateFromError!="function"?null:D.render(),c.flags|=1,l!==null&&_?(c.child=wr(c,l.child,null,A),c.child=wr(c,null,g,A)):Sr(l,c,g,A),c.memoizedState=D.state,l=c.child):l=bs(l,c,A),l}function c0(l,c,g,_){return jt(),c.flags|=256,Sr(l,c,g,_),c.child}function fp(l){return{baseLanes:l,cachePool:rt()}}function dp(l,c,g){return l=l!==null?l.childLanes&~g:0,c&&(l|=Kr),l}function hp(l,c,g){var _=c.pendingProps,A=!1,D=(c.flags&128)!==0,W;if((W=D)||(W=l!==null&&l.memoizedState===null?!1:(Pi.current&2)!==0),W&&(A=!0,c.flags&=-129),W=(c.flags&32)!==0,c.flags&=-33,l===null){if(In){if(A?ge(c):Ge(),(l=_i)?(l=Z0(l,qr),l!==null&&(c.memoizedState={dehydrated:l,treeContext:Ya!==null?{id:Mr,overflow:os}:null,retryLane:536870912,hydrationErrors:null},g=Tp(l),g.return=c,c.child=g,lr=c,_i=null)):l=null,l===null)throw pt(c);return Sd(l)?c.lanes=32:c.lanes=536870912,null}var de=_.children;return _=_.fallback,A?(Ge(),A=c.mode,de=Ro({mode:"hidden",children:de},A),_=Ga(_,A,g,null),de.return=c,_.return=c,de.sibling=_,c.child=de,_=c.child,_.memoizedState=fp(g),_.childLanes=dp(l,W,g),c.memoizedState=kl,xl(null,_)):(ge(c),Jf(c,de))}var Fe=l.memoizedState;if(Fe!==null&&(de=Fe.dehydrated,de!==null)){if(D)c.flags&256?(ge(c),c.flags&=-257,c=bl(l,c,g)):c.memoizedState!==null?(Ge(),c.child=l.child,c.flags|=128,c=null):(Ge(),de=_.fallback,A=c.mode,_=Ro({mode:"visible",children:_.children},A),de=Ga(de,A,g,null),de.flags|=2,_.return=c,de.return=c,_.sibling=de,c.child=_,wr(c,l.child,null,g),_=c.child,_.memoizedState=fp(g),_.childLanes=dp(l,W,g),c.memoizedState=kl,c=xl(null,_));else if(ge(c),Sd(de))W=Md(de).digest,_=Error(a(419)),_.stack="",_.digest=W,nt({value:_,source:null,stack:null}),c=bl(l,c,g);else if(gi||wt(l,c,g,!1),W=(g&l.childLanes)!==0,gi||W){if(W=wn,W!==null&&(_=K(W,g),_!==0&&_!==Fe.retryLane))throw Fe.retryLane=_,on(l,_),Ti(W,l,_),Zr;Ho(de)||xc(),c=bl(l,c,g)}else Ho(de)?(c.flags|=192,c.child=l.child,c=null):(l=Fe.treeContext,xi&&(_i=j0(de),lr=c,In=!0,Ps=null,qr=!1,l!==null&&Te(c,l)),c=Jf(c,_.children),c.flags|=4096);return c}return A?(Ge(),de=_.fallback,A=c.mode,Fe=l.child,D=Fe.sibling,_=Sa(Fe,{mode:"hidden",children:_.children}),_.subtreeFlags=Fe.subtreeFlags&65011712,D!==null?de=Sa(D,de):(de=Ga(de,A,g,null),de.flags|=2),de.return=c,_.return=c,_.sibling=de,c.child=_,xl(null,_),_=c.child,de=l.child.memoizedState,de===null?de=fp(g):(A=de.cachePool,A!==null?(Fe=Gi?bi._currentValue:bi._currentValue2,A=A.parent!==Fe?{parent:Fe,pool:Fe}:A):A=rt(),de={baseLanes:de.baseLanes|g,cachePool:A}),_.memoizedState=de,_.childLanes=dp(l,W,g),c.memoizedState=kl,xl(l.child,_)):(ge(c),g=l.child,l=g.sibling,g=Sa(g,{mode:"visible",children:_.children}),g.return=c,g.sibling=null,l!==null&&(W=c.deletions,W===null?(c.deletions=[l],c.flags|=16):W.push(l)),c.child=g,c.memoizedState=null,g)}function Jf(l,c){return c=Ro({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function Ro(l,c){return l=t(22,l,null,c),l.lanes=0,l}function bl(l,c,g){return wr(c,l.child,null,g),l=Jf(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function u0(l,c,g){l.lanes|=c;var _=l.alternate;_!==null&&(_.lanes|=c),ne(l.return,c,g)}function uc(l,c,g,_,A,D){var W=l.memoizedState;W===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:_,tail:g,tailMode:A,treeForkCount:D}:(W.isBackwards=c,W.rendering=null,W.renderingStartTime=0,W.last=_,W.tail=g,W.tailMode=A,W.treeForkCount=D)}function pp(l,c,g){var _=c.pendingProps,A=_.revealOrder,D=_.tail;_=_.children;var W=Pi.current,de=(W&2)!==0;if(de?(W=W&1|2,c.flags|=128):W&=1,E(Pi,W),Sr(l,c,_,g),_=In?Xu:0,!de&&l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&u0(l,g,c);else if(l.tag===19)u0(l,g,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(A){case"forwards":for(g=c.child,A=null;g!==null;)l=g.alternate,l!==null&&at(l)===null&&(A=g),g=g.sibling;g=A,g===null?(A=c.child,c.child=null):(A=g.sibling,g.sibling=null),uc(c,!1,A,g,D,_);break;case"backwards":case"unstable_legacy-backwards":for(g=null,A=c.child,c.child=null;A!==null;){if(l=A.alternate,l!==null&&at(l)===null){c.child=A;break}l=A.sibling,A.sibling=g,g=A,A=l}uc(c,!0,g,null,D,_);break;case"together":uc(c,!1,null,null,void 0,_);break;default:c.memoizedState=null}return c.child}function bs(l,c,g){if(l!==null&&(c.dependencies=l.dependencies),fo|=c.lanes,(g&c.childLanes)===0)if(l!==null){if(wt(l,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(a(153));if(c.child!==null){for(l=c.child,g=Sa(l,l.pendingProps),c.child=g,g.return=c;l.sibling!==null;)l=l.sibling,g=g.sibling=Sa(l,l.pendingProps),g.return=c;g.sibling=null}return c.child}function Su(l,c){return(l.lanes&c)!==0?!0:(l=l.dependencies,!!(l!==null&&kt(l)))}function mp(l,c,g){switch(c.tag){case 3:Ke(c,c.stateNode.containerInfo),Xe(c,bi,l.memoizedState.cache),jt();break;case 27:case 5:De(c);break;case 4:Ke(c,c.stateNode.containerInfo);break;case 10:Xe(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,pe(c),null;break;case 13:var _=c.memoizedState;if(_!==null)return _.dehydrated!==null?(ge(c),c.flags|=128,null):(g&c.child.childLanes)!==0?hp(l,c,g):(ge(c),l=bs(l,c,g),l!==null?l.sibling:null);ge(c);break;case 19:var A=(l.flags&128)!==0;if(_=(g&c.childLanes)!==0,_||(wt(l,c,g,!1),_=(g&c.childLanes)!==0),A){if(_)return pp(l,c,g);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),E(Pi,Pi.current),_)break;return null;case 22:return c.lanes=0,o0(l,c,g,c.pendingProps);case 24:Xe(c,bi,l.memoizedState.cache)}return bs(l,c,g)}function gp(l,c,g){if(l!==null)if(l.memoizedProps!==c.pendingProps)gi=!0;else{if(!Su(l,g)&&(c.flags&128)===0)return gi=!1,mp(l,c,g);gi=(l.flags&131072)!==0}else gi=!1,In&&(c.flags&1048576)!==0&&Y(c,Xu,c.index);switch(c.lanes=0,c.tag){case 16:e:{var _=c.pendingProps;if(l=Kt(c.elementType),c.type=l,typeof l=="function")Ml(l)?(_=yl(l,_),c.tag=1,c=_l(null,c,l,_,g)):(c.tag=0,c=Qf(null,c,l,_,g));else{if(l!=null){var A=l.$$typeof;if(A===Mc){c.tag=11,c=r0(null,c,l,_,g);break e}else if(A===gd){c.tag=14,c=a0(null,c,l,_,g);break e}}throw c=v(l)||l,Error(a(306,c,""))}}return c;case 0:return Qf(l,c,c.type,c.pendingProps,g);case 1:return _=c.type,A=yl(_,c.pendingProps),_l(l,c,_,A,g);case 3:e:{if(Ke(c,c.stateNode.containerInfo),l===null)throw Error(a(387));var D=c.pendingProps;A=c.memoizedState,_=A.element,q(l,c),st(c,D,null,g);var W=c.memoizedState;if(D=W.cache,Xe(c,bi,D),D!==A.cache&&Lt(c,[bi],g,!0),dt(),D=W.element,xi&&A.isDehydrated)if(A={element:D,isDehydrated:!1,cache:W.cache},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){c=c0(l,c,D,g);break e}else if(D!==_){_=be(Error(a(424)),c),nt(_),c=c0(l,c,D,g);break e}else for(xi&&(_i=W0(c.stateNode.containerInfo),lr=c,In=!0,Ps=null,qr=!0),g=dm(c,null,D,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(jt(),D===_){c=bs(l,c,g);break e}Sr(l,c,D,g)}c=c.child}return c;case 26:if(ja)return bu(l,c),l===null?(g=tm(c.type,null,c.pendingProps,null))?c.memoizedState=g:In||(c.stateNode=Ad(c.type,c.pendingProps,Er.current,c)):c.memoizedState=tm(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:if(or)return De(c),l===null&&or&&In&&(_=c.stateNode=Cd(c.type,c.pendingProps,Er.current,yr.current,!1),lr=c,qr=!0,_i=Zp(c.type,_,_i)),Sr(l,c,c.pendingProps.children,g),bu(l,c),l===null&&(c.flags|=4194304),c.child;case 5:return l===null&&In&&(rv(c.type,c.pendingProps,yr.current),(A=_=_i)&&(_=q0(_,c.type,c.pendingProps,qr),_!==null?(c.stateNode=_,lr=c,_i=G0(_),qr=!1,A=!0):A=!1),A||pt(c)),De(c),A=c.type,D=c.pendingProps,W=l!==null?l.memoizedProps:null,_=D.children,jr(A,D)?_=null:W!==null&&jr(A,W)&&(c.flags|=32),c.memoizedState!==null&&(A=Dt(l,c,qt,null,null,g),Gi?Il._currentValue=A:Il._currentValue2=A),bu(l,c),Sr(l,c,_,g),c.child;case 6:return l===null&&In&&(em(c.pendingProps,yr.current),(l=g=_i)&&(g=Y0(g,c.pendingProps,qr),g!==null?(c.stateNode=g,lr=c,_i=null,l=!0):l=!1),l||pt(c)),null;case 13:return hp(l,c,g);case 4:return Ke(c,c.stateNode.containerInfo),_=c.pendingProps,l===null?c.child=wr(c,null,_,g):Sr(l,c,_,g),c.child;case 11:return r0(l,c,c.type,c.pendingProps,g);case 7:return Sr(l,c,c.pendingProps,g),c.child;case 8:return Sr(l,c,c.pendingProps.children,g),c.child;case 12:return Sr(l,c,c.pendingProps.children,g),c.child;case 10:return _=c.pendingProps,Xe(c,c.type,_.value),Sr(l,c,_.children,g),c.child;case 9:return A=c.type._context,_=c.pendingProps.children,Je(c),A=Z(A),_=_(A),c.flags|=1,Sr(l,c,_,g),c.child;case 14:return a0(l,c,c.type,c.pendingProps,g);case 15:return s0(l,c,c.type,c.pendingProps,g);case 19:return pp(l,c,g);case 31:return l0(l,c,g);case 22:return o0(l,c,g,c.pendingProps);case 24:return Je(c),_=Z(bi),l===null?(A=et(),A===null&&(A=wn,D=Ue(),A.pooledCache=D,D.refCount++,D!==null&&(A.pooledCacheLanes|=g),A=D),c.memoizedState={parent:_,cache:A},B(c),Xe(c,bi,A)):((l.lanes&g)!==0&&(q(l,c),st(c,null,null,g),dt()),A=l.memoizedState,D=c.memoizedState,A.parent!==_?(A={parent:_,cache:_},c.memoizedState=A,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=A),Xe(c,bi,_)):(_=D.cache,Xe(c,bi,_),_!==A.cache&&Lt(c,[bi],g,!0))),Sr(l,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(a(156,c.tag))}function Fa(l){l.flags|=4}function Mu(l){Ma&&(l.flags|=8)}function f0(l,c){if(l!==null&&l.child===c.child)return!1;if((c.flags&16)!==0)return!0;for(l=c.child;l!==null;){if((l.flags&8218)!==0||(l.subtreeFlags&8218)!==0)return!0;l=l.sibling}return!1}function vp(l,c,g,_){if(zn)for(g=c.child;g!==null;){if(g.tag===5||g.tag===6)zu(l,g.stateNode);else if(!(g.tag===4||or&&g.tag===27)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}else if(Ma)for(var A=c.child;A!==null;){if(A.tag===5){var D=A.stateNode;g&&_&&(D=B0(D,A.type,A.memoizedProps)),zu(l,D)}else if(A.tag===6)D=A.stateNode,g&&_&&(D=qp(D,A.memoizedProps)),zu(l,D);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)D=A.child,D!==null&&(D.return=A),vp(l,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===c)break;for(;A.sibling===null;){if(A.return===null||A.return===c)return;A=A.return}A.sibling.return=A.return,A=A.sibling}}function d0(l,c,g,_){var A=!1;if(Ma)for(var D=c.child;D!==null;){if(D.tag===5){var W=D.stateNode;g&&_&&(W=B0(W,D.type,D.memoizedProps)),Xp(l,W)}else if(D.tag===6)W=D.stateNode,g&&_&&(W=qp(W,D.memoizedProps)),Xp(l,W);else if(D.tag!==4){if(D.tag===22&&D.memoizedState!==null)A=D.child,A!==null&&(A.return=D),d0(l,D,!0,!0),A=!0;else if(D.child!==null){D.child.return=D,D=D.child;continue}}if(D===c)break;for(;D.sibling===null;){if(D.return===null||D.return===c)return A;D=D.return}D.sibling.return=D.return,D=D.sibling}return A}function h0(l,c){if(Ma&&f0(l,c)){l=c.stateNode;var g=l.containerInfo,_=Wp();d0(_,c,!1,!1),l.pendingChildren=_,Fa(c),F0(g,_)}}function yp(l,c,g,_){if(zn)l.memoizedProps!==_&&Fa(c);else if(Ma){var A=l.stateNode,D=l.memoizedProps;if((l=f0(l,c))||D!==_){var W=yr.current;D=z0(A,g,D,_,!l,null),D===A?c.stateNode=A:(Mu(c),ra(D,g,_,W)&&Fa(c),c.stateNode=D,l&&vp(D,c,!1,!1))}else c.stateNode=A}}function Gr(l,c,g,_,A){if((l.mode&32)!==0&&(g===null?Fu(c,_):Cc(c,g,_))){if(l.flags|=16777216,(A&335544128)===A||Lp(c,_))if(Ai(l.stateNode,c,_))l.flags|=8192;else if(Pn())l.flags|=8192;else throw Yr=zs,Bd}else l.flags&=-16777217}function fc(l,c){if(am(c)){if(l.flags|=16777216,!sm(c))if(Pn())l.flags|=8192;else throw Yr=zs,Bd}else l.flags&=-16777217}function Eu(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?L():536870912,l.lanes|=c,zc|=c)}function dc(l,c){if(!In)switch(l.tailMode){case"hidden":c=l.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:_.sibling=null}}function oi(l){var c=l.alternate!==null&&l.alternate.child===l.child,g=0,_=0;if(c)for(var A=l.child;A!==null;)g|=A.lanes|A.childLanes,_|=A.subtreeFlags&65011712,_|=A.flags&65011712,A.return=l,A=A.sibling;else for(A=l.child;A!==null;)g|=A.lanes|A.childLanes,_|=A.subtreeFlags,_|=A.flags,A.return=l,A=A.sibling;return l.subtreeFlags|=_,l.childLanes=g,c}function p0(l,c,g){var _=c.pendingProps;switch(me(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oi(c),null;case 1:return oi(c),null;case 3:return g=c.stateNode,_=null,l!==null&&(_=l.memoizedState.cache),c.memoizedState.cache!==_&&(c.flags|=2048),mt(bi),he(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(Jt(c)?Fa(c):l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,He())),h0(l,c),oi(c),null;case 26:if(ja){var A=c.type,D=c.memoizedState;return l===null?(Fa(c),D!==null?(oi(c),fc(c,D)):(oi(c),Gr(c,A,null,_,g))):D?D!==l.memoizedState?(Fa(c),oi(c),fc(c,D)):(oi(c),c.flags&=-16777217):(D=l.memoizedProps,zn?D!==_&&Fa(c):yp(l,c,A,_),oi(c),Gr(c,A,D,_,g)),null}case 27:if(or){if(ze(c),g=Er.current,A=c.type,l!==null&&c.stateNode!=null)zn?l.memoizedProps!==_&&Fa(c):yp(l,c,A,_);else{if(!_){if(c.stateNode===null)throw Error(a(166));return oi(c),null}l=yr.current,Jt(c)?It(c,l):(l=Cd(A,_,g,l,!0),c.stateNode=l,Fa(c))}return oi(c),null}case 5:if(ze(c),A=c.type,l!==null&&c.stateNode!=null)yp(l,c,A,_);else{if(!_){if(c.stateNode===null)throw Error(a(166));return oi(c),null}if(D=yr.current,Jt(c))It(c,D),tv(c.stateNode,A,_,D)&&(c.flags|=64);else{var W=Dp(A,_,Er.current,D,c);Mu(c),vp(W,c,!1,!1),c.stateNode=W,ra(W,A,_,D)&&Fa(c)}}return oi(c),Gr(c,c.type,l===null?null:l.memoizedProps,c.pendingProps,g),null;case 6:if(l&&c.stateNode!=null)g=l.memoizedProps,zn?g!==_&&Fa(c):Ma&&(g!==_?(l=Er.current,g=yr.current,Mu(c),c.stateNode=ao(_,l,g,c)):c.stateNode=l.stateNode);else{if(typeof _!="string"&&c.stateNode===null)throw Error(a(166));if(l=Er.current,g=yr.current,Jt(c)){if(!xi)throw Error(a(176));if(l=c.stateNode,g=c.memoizedProps,_=null,A=lr,A!==null)switch(A.tag){case 27:case 5:_=A.memoizedProps}W_(l,g,c,_)||pt(c,!0)}else Mu(c),c.stateNode=ao(_,l,g,c)}return oi(c),null;case 31:if(g=c.memoizedState,l===null||l.memoizedState!==null){if(_=Jt(c),g!==null){if(l===null){if(!_)throw Error(a(318));if(!xi)throw Error(a(556));if(l=c.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(557));$p(l,c)}else jt(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;oi(c),l=!1}else g=He(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=g),l=!0;if(!l)return c.flags&256?(it(c),c):(it(c),null);if((c.flags&128)!==0)throw Error(a(558))}return oi(c),null;case 13:if(_=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(A=Jt(c),_!==null&&_.dehydrated!==null){if(l===null){if(!A)throw Error(a(318));if(!xi)throw Error(a(344));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(a(317));$0(A,c)}else jt(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;oi(c),A=!1}else A=He(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=A),A=!0;if(!A)return c.flags&256?(it(c),c):(it(c),null)}return it(c),(c.flags&128)!==0?(c.lanes=g,c):(g=_!==null,l=l!==null&&l.memoizedState!==null,g&&(_=c.child,A=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(A=_.alternate.memoizedState.cachePool.pool),D=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(D=_.memoizedState.cachePool.pool),D!==A&&(_.flags|=2048)),g!==l&&g&&(c.child.flags|=8192),Eu(c,c.updateQueue),oi(c),null);case 4:return he(),h0(l,c),l===null&&ri(c.stateNode.containerInfo),oi(c),null;case 10:return mt(c.type),oi(c),null;case 19:if(S(Pi),_=c.memoizedState,_===null)return oi(c),null;if(A=(c.flags&128)!==0,D=_.rendering,D===null)if(A)dc(_,!1);else{if(Ni!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(D=at(l),D!==null){for(c.flags|=128,dc(_,!1),l=D.updateQueue,c.updateQueue=l,Eu(c,l),c.subtreeFlags=0,l=g,g=c.child;g!==null;)fd(g,l),g=g.sibling;return E(Pi,Pi.current&1|2),In&&Ae(c,_.treeForkCount),c.child}l=l.sibling}_.tail!==null&&Ur()>Jo&&(c.flags|=128,A=!0,dc(_,!1),c.lanes=4194304)}else{if(!A)if(l=at(D),l!==null){if(c.flags|=128,A=!0,l=l.updateQueue,c.updateQueue=l,Eu(c,l),dc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!D.alternate&&!In)return oi(c),null}else 2*Ur()-_.renderingStartTime>Jo&&g!==536870912&&(c.flags|=128,A=!0,dc(_,!1),c.lanes=4194304);_.isBackwards?(D.sibling=c.child,c.child=D):(l=_.last,l!==null?l.sibling=D:c.child=D,_.last=D)}return _.tail!==null?(l=_.tail,_.rendering=l,_.tail=l.sibling,_.renderingStartTime=Ur(),l.sibling=null,g=Pi.current,E(Pi,A?g&1|2:g&1),In&&Ae(c,_.treeForkCount),l):(oi(c),null);case 22:case 23:return it(c),fe(),_=c.memoizedState!==null,l!==null?l.memoizedState!==null!==_&&(c.flags|=8192):_&&(c.flags|=8192),_?(g&536870912)!==0&&(c.flags&128)===0&&(oi(c),c.subtreeFlags&6&&(c.flags|=8192)):oi(c),g=c.updateQueue,g!==null&&Eu(c,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==g&&(c.flags|=2048),l!==null&&S(Xo),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),mt(bi),oi(c),null;case 25:return null;case 30:return null}throw Error(a(156,c.tag))}function xp(l,c){switch(me(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return mt(bi),he(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return ze(c),null;case 31:if(c.memoizedState!==null){if(it(c),c.alternate===null)throw Error(a(340));jt()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 13:if(it(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(a(340));jt()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return S(Pi),null;case 4:return he(),null;case 10:return mt(c.type),null;case 22:case 23:return it(c),fe(),l!==null&&S(Xo),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return mt(bi),null;case 25:return null;default:return null}}function m0(l,c){switch(me(c),c.tag){case 3:mt(bi),he();break;case 26:case 27:case 5:ze(c);break;case 4:he();break;case 31:c.memoizedState!==null&&it(c);break;case 13:it(c);break;case 19:S(Pi);break;case 10:mt(c.type);break;case 22:case 23:it(c),fe(),l!==null&&S(Xo);break;case 24:mt(bi)}}function Ss(l,c){try{var g=c.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var A=_.next;g=A;do{if((g.tag&l)===l){_=void 0;var D=g.create,W=g.inst;_=D(),W.destroy=_}g=g.next}while(g!==A)}}catch(de){ln(c,c.return,de)}}function Ms(l,c,g){try{var _=c.updateQueue,A=_!==null?_.lastEffect:null;if(A!==null){var D=A.next;_=D;do{if((_.tag&l)===l){var W=_.inst,de=W.destroy;if(de!==void 0){W.destroy=void 0,A=c;var Fe=g,ot=de;try{ot()}catch(Et){ln(A,Fe,Et)}}}_=_.next}while(_!==D)}}catch(Et){ln(c,c.return,Et)}}function hc(l){var c=l.updateQueue;if(c!==null){var g=l.stateNode;try{vt(c,g)}catch(_){ln(l,l.return,_)}}}function ed(l,c,g){g.props=yl(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(_){ln(l,c,_)}}function pc(l,c){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var _=wc(l.stateNode);break;case 30:_=l.stateNode;break;default:_=l.stateNode}typeof g=="function"?l.refCleanup=g(_):g.current=_}}catch(A){ln(l,c,A)}}function Lr(l,c){var g=l.ref,_=l.refCleanup;if(g!==null)if(typeof _=="function")try{_()}catch(A){ln(l,c,A)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(A){ln(l,c,A)}else g.current=null}function Sl(l){var c=l.type,g=l.memoizedProps,_=l.stateNode;try{R0(_,c,g,l)}catch(A){ln(l,l.return,A)}}function wu(l,c,g){try{N0(l.stateNode,l.type,g,c,l)}catch(_){ln(l,l.return,_)}}function _p(l){return l.tag===5||l.tag===3||(ja?l.tag===26:!1)||(or?l.tag===27&&Ll(l.type):!1)||l.tag===4}function $s(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||_p(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(or&&l.tag===27&&Ll(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function td(l,c,g){var _=l.tag;if(_===5||_===6)l=l.stateNode,c?I0(g,l,c):kp(g,l);else if(_!==4&&(or&&_===27&&Ll(l.type)&&(g=l.stateNode,c=null),l=l.child,l!==null))for(td(l,c,g),l=l.sibling;l!==null;)td(l,c,g),l=l.sibling}function Tu(l,c,g){var _=l.tag;if(_===5||_===6)l=l.stateNode,c?D0(g,l,c):Bp(g,l);else if(_!==4&&(or&&_===27&&Ll(l.type)&&(g=l.stateNode),l=l.child,l!==null))for(Tu(l,c,g),l=l.sibling;l!==null;)Tu(l,c,g),l=l.sibling}function bp(l,c,g){l=l.containerInfo;try{jp(l,g)}catch(_){ln(c,c.return,_)}}function g0(l){var c=l.stateNode,g=l.memoizedProps;try{Qi(l.type,g,c,l)}catch(_){ln(l,l.return,_)}}function k_(l,c){for(vd(l.containerInfo),ji=c;ji!==null;)if(l=ji,c=l.child,(l.subtreeFlags&1028)!==0&&c!==null)c.return=l,ji=c;else for(;ji!==null;){l=ji;var g=l.alternate;switch(c=l.flags,l.tag){case 0:if((c&4)!==0&&(c=l.updateQueue,c=c!==null?c.events:null,c!==null))for(var _=0;_<c.length;_++){var A=c[_];A.ref.impl=A.nextImpl}break;case 11:case 15:break;case 1:if((c&1024)!==0&&g!==null){c=void 0,_=l,A=g.memoizedProps,g=g.memoizedState;var D=_.stateNode;try{var W=yl(_.type,A);c=D.getSnapshotBeforeUpdate(W,g),D.__reactInternalSnapshotBeforeUpdate=c}catch(de){ln(_,_.return,de)}}break;case 3:(c&1024)!==0&&zn&&Gp(l.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(a(163))}if(c=l.sibling,c!==null){c.return=l.return,ji=c;break}ji=l.return}}function v0(l,c,g){var _=g.flags;switch(g.tag){case 0:case 11:case 15:Wr(l,g),_&4&&Ss(5,g);break;case 1:if(Wr(l,g),_&4)if(l=g.stateNode,c===null)try{l.componentDidMount()}catch(W){ln(g,g.return,W)}else{var A=yl(g.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(A,c,l.__reactInternalSnapshotBeforeUpdate)}catch(W){ln(g,g.return,W)}}_&64&&hc(g),_&512&&pc(g,g.return);break;case 3:if(Wr(l,g),_&64&&(_=g.updateQueue,_!==null)){if(l=null,g.child!==null)switch(g.child.tag){case 27:case 5:l=wc(g.child.stateNode);break;case 1:l=g.child.stateNode}try{vt(_,l)}catch(W){ln(g,g.return,W)}}break;case 27:or&&c===null&&_&4&&g0(g);case 26:case 5:if(Wr(l,g),c===null){if(_&4)Sl(g);else if(_&64){l=g.type,c=g.memoizedProps,A=g.stateNode;try{J0(A,l,c,g)}catch(W){ln(g,g.return,W)}}}_&512&&pc(g,g.return);break;case 12:Wr(l,g);break;case 31:Wr(l,g),_&4&&ka(l,g);break;case 13:Wr(l,g),_&4&&Cu(l,g),_&64&&(_=g.memoizedState,_!==null&&(_=_.dehydrated,_!==null&&(g=V_.bind(null,g),Ed(_,g))));break;case 22:if(_=g.memoizedState!==null||zi,!_){c=c!==null&&c.memoizedState!==null||Fi,A=zi;var D=Fi;zi=_,(Fi=c)&&!D?Ha(l,g,(g.subtreeFlags&8772)!==0):Wr(l,g),zi=A,Fi=D}break;case 30:break;default:Wr(l,g)}}function Sp(l){var c=l.alternate;c!==null&&(l.alternate=null,Sp(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&yd(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Ba(l,c,g){for(g=g.child;g!==null;)Au(l,c,g),g=g.sibling}function Au(l,c,g){if(oa&&typeof oa.onCommitFiberUnmount=="function")try{oa.onCommitFiberUnmount(Pl,g)}catch{}switch(g.tag){case 26:if(ja){Fi||Lr(g,c),Ba(l,c,g),g.memoizedState?Go(g.memoizedState):g.stateNode&&rm(g.stateNode);break}case 27:if(or){Fi||Lr(g,c);var _=Ri,A=qi;Ll(g.type)&&(Ri=g.stateNode,qi=!1),Ba(l,c,g),vr(g.stateNode),Ri=_,qi=A;break}case 5:Fi||Lr(g,c);case 6:if(zn){if(_=Ri,A=qi,Ri=null,Ba(l,c,g),Ri=_,qi=A,Ri!==null)if(qi)try{Vp(Ri,g.stateNode)}catch(D){ln(g,c,D)}else try{L0(Ri,g.stateNode)}catch(D){ln(g,c,D)}}else Ba(l,c,g);break;case 18:zn&&Ri!==null&&(qi?wd(Ri,g.stateNode):Jp(Ri,g.stateNode));break;case 4:zn?(_=Ri,A=qi,Ri=g.stateNode.containerInfo,qi=!0,Ba(l,c,g),Ri=_,qi=A):(Ma&&bp(g.stateNode,g,Wp()),Ba(l,c,g));break;case 0:case 11:case 14:case 15:Ms(2,g,c),Fi||Ms(4,g,c),Ba(l,c,g);break;case 1:Fi||(Lr(g,c),_=g.stateNode,typeof _.componentWillUnmount=="function"&&ed(g,c,_)),Ba(l,c,g);break;case 21:Ba(l,c,g);break;case 22:Fi=(_=Fi)||g.memoizedState!==null,Ba(l,c,g),Fi=_;break;default:Ba(l,c,g)}}function ka(l,c){if(xi&&c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{X_(l)}catch(g){ln(c,c.return,g)}}}function Cu(l,c){if(xi&&c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{j_(l)}catch(g){ln(c,c.return,g)}}function Va(l){switch(l.tag){case 31:case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new pm),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new pm),c;default:throw Error(a(435,l.tag))}}function Qs(l,c){var g=Va(l);c.forEach(function(_){if(!g.has(_)){g.add(_);var A=H_.bind(null,l,_);_.then(A,A)}})}function mr(l,c){var g=c.deletions;if(g!==null)for(var _=0;_<g.length;_++){var A=g[_],D=l,W=c;if(zn){var de=W;e:for(;de!==null;){switch(de.tag){case 27:if(or){if(Ll(de.type)){Ri=de.stateNode,qi=!1;break e}break}case 5:Ri=de.stateNode,qi=!1;break e;case 3:case 4:Ri=de.stateNode.containerInfo,qi=!0;break e}de=de.return}if(Ri===null)throw Error(a(160));Au(D,W,A),Ri=null,qi=!1}else Au(D,W,A);D=A.alternate,D!==null&&(D.return=null),A.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)Ru(c,l),c=c.sibling}function Ru(l,c){var g=l.alternate,_=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:mr(c,l),gr(l),_&4&&(Ms(3,l,l.return),Ss(3,l),Ms(5,l,l.return));break;case 1:mr(c,l),gr(l),_&512&&(Fi||g===null||Lr(g,g.return)),_&64&&zi&&(l=l.updateQueue,l!==null&&(_=l.callbacks,_!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?_:g.concat(_))));break;case 26:if(ja){var A=ni;if(mr(c,l),gr(l),_&512&&(Fi||g===null||Lr(g,g.return)),_&4){_=g!==null?g.memoizedState:null;var D=l.memoizedState;g===null?D===null?l.stateNode===null?l.stateNode=av(A,l.type,l.memoizedProps,l):im(A,l.type,l.stateNode):l.stateNode=nm(A,D,l.memoizedProps):_!==D?(_===null?g.stateNode!==null&&rm(g.stateNode):Go(_),D===null?im(A,l.type,l.stateNode):nm(A,D,l.memoizedProps)):D===null&&l.stateNode!==null&&wu(l,l.memoizedProps,g.memoizedProps)}break}case 27:if(or){mr(c,l),gr(l),_&512&&(Fi||g===null||Lr(g,g.return)),g!==null&&_&4&&wu(l,l.memoizedProps,g.memoizedProps);break}case 5:if(mr(c,l),gr(l),_&512&&(Fi||g===null||Lr(g,g.return)),zn){if(l.flags&32){A=l.stateNode;try{Hp(A)}catch(ht){ln(l,l.return,ht)}}_&4&&l.stateNode!=null&&(A=l.memoizedProps,wu(l,A,g!==null?g.memoizedProps:A)),_&1024&&(Ic=!0)}else Ma&&l.alternate!==null&&(l.alternate.stateNode=l.stateNode);break;case 6:if(mr(c,l),gr(l),_&4&&zn){if(l.stateNode===null)throw Error(a(162));_=l.memoizedProps,g=g!==null?g.memoizedProps:_,A=l.stateNode;try{C0(A,g,_)}catch(ht){ln(l,l.return,ht)}}break;case 3:if(ja?(sv(),A=ni,ni=Vu(c.containerInfo),mr(c,l),ni=A):mr(c,l),gr(l),_&4){if(zn&&xi&&g!==null&&g.memoizedState.isDehydrated)try{ev(c.containerInfo)}catch(ht){ln(l,l.return,ht)}if(Ma){_=c.containerInfo,g=c.pendingChildren;try{jp(_,g)}catch(ht){ln(l,l.return,ht)}}}Ic&&(Ic=!1,nd(l));break;case 4:ja?(g=ni,ni=Vu(l.stateNode.containerInfo),mr(c,l),gr(l),ni=g):(mr(c,l),gr(l)),_&4&&Ma&&bp(l.stateNode,l,l.stateNode.pendingChildren);break;case 12:mr(c,l),gr(l);break;case 31:mr(c,l),gr(l),_&4&&(_=l.updateQueue,_!==null&&(l.updateQueue=null,Qs(l,_)));break;case 13:mr(c,l),gr(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&($u=Ur()),_&4&&(_=l.updateQueue,_!==null&&(l.updateQueue=null,Qs(l,_)));break;case 22:A=l.memoizedState!==null;var W=g!==null&&g.memoizedState!==null,de=zi,Fe=Fi;if(zi=de||A,Fi=Fe||W,mr(c,l),Fi=Fe,zi=de,gr(l),_&8192&&(c=l.stateNode,c._visibility=A?c._visibility&-2:c._visibility|1,A&&(g===null||W||zi||Fi||No(l)),zn)){e:if(g=null,zn)for(c=l;;){if(c.tag===5||ja&&c.tag===26){if(g===null){W=g=c;try{D=W.stateNode,A?G_(D):O0(W.stateNode,W.memoizedProps)}catch(ht){ln(W,W.return,ht)}}}else if(c.tag===6){if(g===null){W=c;try{var ot=W.stateNode;A?U0(ot):P0(ot,W.memoizedProps)}catch(ht){ln(W,W.return,ht)}}}else if(c.tag===18){if(g===null){W=c;try{var Et=W.stateNode;A?nv(Et):iv(W.stateNode)}catch(ht){ln(W,W.return,ht)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}}_&4&&(_=l.updateQueue,_!==null&&(g=_.retryQueue,g!==null&&(_.retryQueue=null,Qs(l,g))));break;case 19:mr(c,l),gr(l),_&4&&(_=l.updateQueue,_!==null&&(l.updateQueue=null,Qs(l,_)));break;case 30:break;case 21:break;default:mr(c,l),gr(l)}}function gr(l){var c=l.flags;if(c&2){try{for(var g,_=l.return;_!==null;){if(_p(_)){g=_;break}_=_.return}if(zn){if(g==null)throw Error(a(160));switch(g.tag){case 27:if(or){var A=g.stateNode,D=$s(l);Tu(l,D,A);break}case 5:var W=g.stateNode;g.flags&32&&(Hp(W),g.flags&=-33);var de=$s(l);Tu(l,de,W);break;case 3:case 4:var Fe=g.stateNode.containerInfo,ot=$s(l);td(l,ot,Fe);break;default:throw Error(a(161))}}}catch(Et){ln(l,l.return,Et)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function nd(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;nd(c),c.tag===5&&c.flags&1024&&Op(c.stateNode),l=l.sibling}}function Wr(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)v0(l,c.alternate,c),c=c.sibling}function No(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:Ms(4,c,c.return),No(c);break;case 1:Lr(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&ed(c,c.return,g),No(c);break;case 27:or&&vr(c.stateNode);case 26:case 5:Lr(c,c.return),No(c);break;case 22:c.memoizedState===null&&No(c);break;case 30:No(c);break;default:No(c)}l=l.sibling}}function Ha(l,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var _=c.alternate,A=l,D=c,W=D.flags;switch(D.tag){case 0:case 11:case 15:Ha(A,D,g),Ss(4,D);break;case 1:if(Ha(A,D,g),_=D,A=_.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(ot){ln(_,_.return,ot)}if(_=D,A=_.updateQueue,A!==null){var de=_.stateNode;try{var Fe=A.shared.hiddenCallbacks;if(Fe!==null)for(A.shared.hiddenCallbacks=null,A=0;A<Fe.length;A++)yt(Fe[A],de)}catch(ot){ln(_,_.return,ot)}}g&&W&64&&hc(D),pc(D,D.return);break;case 27:or&&g0(D);case 26:case 5:Ha(A,D,g),g&&_===null&&W&4&&Sl(D),pc(D,D.return);break;case 12:Ha(A,D,g);break;case 31:Ha(A,D,g),g&&W&4&&ka(A,D);break;case 13:Ha(A,D,g),g&&W&4&&Cu(A,D);break;case 22:D.memoizedState===null&&Ha(A,D,g),pc(D,D.return);break;case 30:break;default:Ha(A,D,g)}c=c.sibling}}function Do(l,c){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&je(g))}function Mp(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&je(l))}function wi(l,c,g,_){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)id(l,c,g,_),c=c.sibling}function id(l,c,g,_){var A=c.flags;switch(c.tag){case 0:case 11:case 15:wi(l,c,g,_),A&2048&&Ss(9,c);break;case 1:wi(l,c,g,_);break;case 3:wi(l,c,g,_),A&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&je(l)));break;case 12:if(A&2048){wi(l,c,g,_),l=c.stateNode;try{var D=c.memoizedProps,W=D.id,de=D.onPostCommit;typeof de=="function"&&de(W,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Fe){ln(c,c.return,Fe)}}else wi(l,c,g,_);break;case 31:wi(l,c,g,_);break;case 13:wi(l,c,g,_);break;case 23:break;case 22:D=c.stateNode,W=c.alternate,c.memoizedState!==null?D._visibility&2?wi(l,c,g,_):mc(l,c):D._visibility&2?wi(l,c,g,_):(D._visibility|=2,ta(l,c,g,_,(c.subtreeFlags&10256)!==0||!1)),A&2048&&Do(W,c);break;case 24:wi(l,c,g,_),A&2048&&Mp(c.alternate,c);break;default:wi(l,c,g,_)}}function ta(l,c,g,_,A){for(A=A&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var D=l,W=c,de=g,Fe=_,ot=W.flags;switch(W.tag){case 0:case 11:case 15:ta(D,W,de,Fe,A),Ss(8,W);break;case 23:break;case 22:var Et=W.stateNode;W.memoizedState!==null?Et._visibility&2?ta(D,W,de,Fe,A):mc(D,W):(Et._visibility|=2,ta(D,W,de,Fe,A)),A&&ot&2048&&Do(W.alternate,W);break;case 24:ta(D,W,de,Fe,A),A&&ot&2048&&Mp(W.alternate,W);break;default:ta(D,W,de,Fe,A)}c=c.sibling}}function mc(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=l,_=c,A=_.flags;switch(_.tag){case 22:mc(g,_),A&2048&&Do(_.alternate,_);break;case 24:mc(g,_),A&2048&&Mp(_.alternate,_);break;default:mc(g,_)}c=c.sibling}}function Es(l,c,g){if(l.subtreeFlags&Aa)for(l=l.child;l!==null;)Io(l,c,g),l=l.sibling}function Io(l,c,g){switch(l.tag){case 26:if(Es(l,c,g),l.flags&Aa)if(l.memoizedState!==null)ov(g,ni,l.memoizedState,l.memoizedProps);else{var _=l.stateNode,A=l.type;l=l.memoizedProps,((c&335544128)===c||Lp(A,l))&&xd(g,_,A,l)}break;case 5:Es(l,c,g),l.flags&Aa&&(_=l.stateNode,A=l.type,l=l.memoizedProps,((c&335544128)===c||Lp(A,l))&&xd(g,_,A,l));break;case 3:case 4:ja?(_=ni,ni=Vu(l.stateNode.containerInfo),Es(l,c,g),ni=_):Es(l,c,g);break;case 22:l.memoizedState===null&&(_=l.alternate,_!==null&&_.memoizedState!==null?(_=Aa,Aa=16777216,Es(l,c,g),Aa=_):Es(l,c,g));break;default:Es(l,c,g)}}function rd(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function gc(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var _=c[g];ji=_,_a(_,l)}rd(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)ad(l),l=l.sibling}function ad(l){switch(l.tag){case 0:case 11:case 15:gc(l),l.flags&2048&&Ms(9,l,l.return);break;case 3:gc(l);break;case 12:gc(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&2&&(l.return===null||l.return.tag!==13)?(c._visibility&=-3,Nu(l)):gc(l);break;default:gc(l)}}function Nu(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var _=c[g];ji=_,_a(_,l)}rd(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:Ms(8,c,c.return),Nu(c);break;case 22:g=c.stateNode,g._visibility&2&&(g._visibility&=-3,Nu(c));break;default:Nu(c)}l=l.sibling}}function _a(l,c){for(;ji!==null;){var g=ji;switch(g.tag){case 0:case 11:case 15:Ms(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var _=g.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:je(g.memoizedState.cache)}if(_=g.child,_!==null)_.return=g,ji=_;else e:for(g=l;ji!==null;){_=ji;var A=_.sibling,D=_.return;if(Sp(_),_===g){ji=null;break e}if(A!==null){A.return=D,ji=A;break e}ji=D}}}function Lo(l){var c=vn(l);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(a(364));return c}if(l=Wi(l),l===null)throw Error(a(362));return l.stateNode.current}function Uo(l,c){var g=l.tag;switch(c.$$typeof){case es:if(l.type===c.value)return!0;break;case Uc:e:{for(c=c.value,l=[l,0],g=0;g<l.length;){var _=l[g++],A=_.tag,D=l[g++],W=c[D];if(A!==5&&A!==26&&A!==27||!Vo(_)){for(;W!=null&&Uo(_,W);)D++,W=c[D];if(D===c.length){c=!0;break e}else for(_=_.child;_!==null;)l.push(_,D),_=_.sibling}}c=!1}return c;case Oc:if((g===5||g===26||g===27)&&Fp(l.stateNode,c.value))return!0;break;case Zo:if((g===5||g===6||g===26||g===27)&&(l=Bu(l),l!==null&&0<=l.indexOf(c.value)))return!0;break;case Zu:if((g===5||g===26||g===27)&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function vc(l){switch(l.$$typeof){case es:return"<"+(v(l.value)||"Unknown")+">";case Uc:return":has("+(vc(l)||"")+")";case Oc:return'[role="'+l.value+'"]';case Zo:return'"'+l.value+'"';case Zu:return'[data-testname="'+l.value+'"]';default:throw Error(a(365))}}function yc(l,c){var g=[];l=[l,0];for(var _=0;_<l.length;){var A=l[_++],D=A.tag,W=l[_++],de=c[W];if(D!==5&&D!==26&&D!==27||!Vo(A)){for(;de!=null&&Uo(A,de);)W++,de=c[W];if(W===c.length)g.push(A);else for(A=A.child;A!==null;)l.push(A,W),A=A.sibling}}return g}function na(l,c){if(!sr)throw Error(a(363));l=Lo(l),l=yc(l,c),c=[],l=Array.from(l);for(var g=0;g<l.length;){var _=l[g++],A=_.tag;if(A===5||A===26||A===27)Vo(_)||c.push(_.stateNode);else for(_=_.child;_!==null;)l.push(_),_=_.sibling}return c}function yi(){return(Rn&2)!==0&&Ln!==0?Ln&-Ln:en.T!==null?we():Ac()}function Js(){if(Kr===0)if((Ln&536870912)===0||In){var l=Ol;Ol<<=1,(Ol&3932160)===0&&(Ol=262144),Kr=l}else Kr=536870912;return l=la.current,l!==null&&(l.flags|=32),Kr}function Ti(l,c,g){(l===wn&&(ii===2||ii===9)||l.cancelPendingCommit!==null)&&(Oi(l,0),Ts(l,Ln,Kr,!1)),P(l,g),((Rn&2)===0||l!==wn)&&(l===wn&&((Rn&2)===0&&(Qo|=g),Ni===4&&Ts(l,Ln,Kr,!1)),Mt(l))}function ss(l,c,g){if((Rn&6)!==0)throw Error(a(327));var _=!g&&(c&127)===0&&(c&l.expiredLanes)===0||R(l,c),A=_?_0(l,c):As(l,c,!0),D=_;do{if(A===0){Ko&&!_&&Ts(l,c,0,!1);break}else{if(g=l.current.alternate,D&&!y0(g)){A=As(l,c,!1),D=!1;continue}if(A===2){if(D=c,l.errorRecoveryDisabledLanes&D)var W=0;else W=l.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){c=W;e:{var de=l;A=Ku;var Fe=xi&&de.current.memoizedState.isDehydrated;if(Fe&&(Oi(de,W).flags|=256),W=As(de,W,!1),W!==2){if($o&&!Fe){de.errorRecoveryDisabledLanes|=D,Qo|=D,A=4;break e}D=ua,ua=A,D!==null&&(ua===null?ua=D:ua.push.apply(ua,D))}A=W}if(D=!1,A!==2)continue}}if(A===1){Oi(l,0),Ts(l,c,0,!0);break}e:{switch(_=l,D=A,D){case 0:case 1:throw Error(a(345));case 4:if((c&4194048)!==c)break;case 6:Ts(_,c,Kr,!us);break e;case 2:ua=null;break;case 3:case 5:break;default:throw Error(a(329))}if((c&62914560)===c&&(A=$u+300-Ur(),10<A)){if(Ts(_,c,Kr,!us),M(_,0,!0)!==0)break e;Vs=c,_.timeoutHandle=Ip(ws.bind(null,_,g,ua,Qu,Vd,c,Kr,Qo,zc,us,D,"Throttled",-0,0),A);break e}ws(_,g,ua,Qu,Vd,c,Kr,Qo,zc,us,D,null,-0,0)}}break}while(!0);Mt(l)}function ws(l,c,g,_,A,D,W,de,Fe,ot,Et,ht,Ot,mn){if(l.timeoutHandle=aa,ht=c.subtreeFlags,ht&8192||(ht&16785408)===16785408){ht=Up(),Io(c,D,ht);var Yi=(D&62914560)===D?$u-Ur():(D&4194048)===D?Hl-Ur():0;if(Yi=A0(ht,Yi),Yi!==null){Vs=D,l.cancelPendingCommit=Yi(Rs.bind(null,l,c,D,g,_,A,W,de,Fe,Et,ht,null,Ot,mn)),Ts(l,D,W,!ot);return}}Rs(l,c,D,g,_,A,W,de,Fe)}function y0(l){for(var c=l;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var _=0;_<g.length;_++){var A=g[_],D=A.getSnapshot;A=A.value;try{if(!Xi(D(),A))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ts(l,c,g,_){c&=~Pc,c&=~Qo,l.suspendedLanes|=c,l.pingedLanes&=~c,_&&(l.warmLanes|=c),_=l.expirationTimes;for(var A=c;0<A;){var D=31-sa(A),W=1<<D;_[D]=-1,A&=~W}g!==0&&N(l,g,c)}function sd(){return(Rn&6)===0?(ct(0),!1):!0}function od(){if(Nn!==null){if(ii===0)var l=Nn.return;else l=Nn,ls=ci=null,un(l),jo=null,zl=0,l=Nn;for(;l!==null;)m0(l.alternate,l),l=l.return;Nn=null}}function Oi(l,c){var g=l.timeoutHandle;g!==aa&&(l.timeoutHandle=aa,T0(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),Vs=0,od(),wn=l,Nn=g=Sa(l.current,null),Ln=c,ii=0,Ji=null,us=!1,Ko=R(l,c),$o=!1,zc=Kr=Pc=Qo=fo=Ni=0,ua=Ku=null,Vd=!1,(c&8)!==0&&(c|=c&32);var _=l.entangledLanes;if(_!==0)for(l=l.entanglements,_&=c;0<_;){var A=31-sa(_),D=1<<A;c|=l[A],_&=~D}return ks=c,ea(),g}function li(l,c){yn=null,en.H=Ta,c===ur||c===Qa?(c=cn(),ii=3):c===Bd?(c=cn(),ii=4):ii=c===Zr?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ji=c,Nn===null&&(Ni=1,Kf(l,be(c,l.current)))}function Pn(){var l=la.current;return l===null?!0:(Ln&4194048)===Ln?ca===null:(Ln&62914560)===Ln||(Ln&536870912)!==0?l===ca:!1}function eo(){var l=en.H;return en.H=Ta,l===null?Ta:l}function ba(){var l=en.A;return en.A=Lc,l}function xc(){Ni=4,us||(Ln&4194048)!==Ln&&la.current!==null||(Ko=!0),(fo&134217727)===0&&(Qo&134217727)===0||wn===null||Ts(wn,Ln,Kr,!1)}function As(l,c,g){var _=Rn;Rn|=2;var A=eo(),D=ba();(wn!==l||Ln!==c)&&(Qu=null,Oi(l,c)),c=!1;var W=Ni;e:do try{if(ii!==0&&Nn!==null){var de=Nn,Fe=Ji;switch(ii){case 8:od(),W=6;break e;case 3:case 2:case 9:case 6:la.current===null&&(c=!0);var ot=ii;if(ii=0,Ji=null,Cs(l,de,Fe,ot),g&&Ko){W=0;break e}break;default:ot=ii,ii=0,Ji=null,Cs(l,de,Fe,ot)}}x0(),W=Ni;break}catch(Et){li(l,Et)}while(!0);return c&&l.shellSuspendCounter++,ls=ci=null,Rn=_,en.H=A,en.A=D,Nn===null&&(wn=null,Ln=0,ea()),W}function x0(){for(;Nn!==null;)Oo(Nn)}function _0(l,c){var g=Rn;Rn|=2;var _=eo(),A=ba();wn!==l||Ln!==c?(Qu=null,Jo=Ur()+500,Oi(l,c)):Ko=R(l,c);e:do try{if(ii!==0&&Nn!==null){c=Nn;var D=Ji;t:switch(ii){case 1:ii=0,Ji=null,Cs(l,c,D,1);break;case 2:case 9:if(ft(D)){ii=0,Ji=null,ld(c);break}c=function(){ii!==2&&ii!==9||wn!==l||(ii=7),Mt(l)},D.then(c,c);break e;case 3:ii=7;break e;case 4:ii=5;break e;case 7:ft(D)?(ii=0,Ji=null,ld(c)):(ii=0,Ji=null,Cs(l,c,D,7));break;case 5:var W=null;switch(Nn.tag){case 26:W=Nn.memoizedState;case 5:case 27:var de=Nn,Fe=de.type,ot=de.pendingProps;if(W?sm(W):Ai(de.stateNode,Fe,ot)){ii=0,Ji=null;var Et=de.sibling;if(Et!==null)Nn=Et;else{var ht=de.return;ht!==null?(Nn=ht,bc(ht)):Nn=null}break t}}ii=0,Ji=null,Cs(l,c,D,5);break;case 6:ii=0,Ji=null,Cs(l,c,D,6);break;case 8:od(),Ni=6;break e;default:throw Error(a(462))}}_c();break}catch(Ot){li(l,Ot)}while(!0);return ls=ci=null,en.H=_,en.A=A,Rn=g,Nn!==null?0:(wn=null,Ln=0,ea(),Ni)}function _c(){for(;Nn!==null&&!cv();)Oo(Nn)}function Oo(l){var c=gp(l.alternate,l,ks);l.memoizedProps=l.pendingProps,c===null?bc(l):Nn=c}function ld(l){var c=l,g=c.alternate;switch(c.tag){case 15:case 0:c=up(g,c,c.pendingProps,c.type,void 0,Ln);break;case 11:c=up(g,c,c.pendingProps,c.type.render,c.ref,Ln);break;case 5:un(c);default:m0(g,c),c=Nn=fd(c,ks),c=gp(g,c,ks)}l.memoizedProps=l.pendingProps,c===null?bc(l):Nn=c}function Cs(l,c,g,_){ls=ci=null,un(c),jo=null,zl=0;var A=c.return;try{if(B_(l,A,c,g,Ln)){Ni=1,Kf(l,be(g,l.current)),Nn=null;return}}catch(D){if(A!==null)throw Nn=A,D;Ni=1,Kf(l,be(g,l.current)),Nn=null;return}c.flags&32768?(In||_===1?l=!0:Ko||(Ln&536870912)!==0?l=!1:(us=l=!0,(_===2||_===9||_===3||_===6)&&(_=la.current,_!==null&&_.tag===13&&(_.flags|=16384))),Po(c,l)):bc(c)}function bc(l){var c=l;do{if((c.flags&32768)!==0){Po(c,us);return}l=c.return;var g=p0(c.alternate,c,ks);if(g!==null){Nn=g;return}if(c=c.sibling,c!==null){Nn=c;return}Nn=c=l}while(c!==null);Ni===0&&(Ni=5)}function Po(l,c){do{var g=xp(l.alternate,l);if(g!==null){g.flags&=32767,Nn=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(l=l.sibling,l!==null)){Nn=l;return}Nn=l=g}while(l!==null);Ni=6,Nn=null}function Rs(l,c,g,_,A,D,W,de,Fe){l.cancelPendingCommit=null;do Ds();while(er!==0);if((Rn&6)!==0)throw Error(a(327));if(c!==null){if(c===l.current)throw Error(a(177));if(D=c.lanes|c.childLanes,D|=Fl,V(l,g,D,W,de,Fe),l===wn&&(Nn=wn=null,Ln=0),Gl=c,po=l,Vs=g,Fc=D,Hd=A,mm=_,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,$i(Gu,function(){return Du(),null})):(l.callbackNode=null,l.callbackPriority=0),_=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||_){_=en.T,en.T=null,A=Xa(),Dn(2),W=Rn,Rn|=4;try{k_(l,c,g)}finally{Rn=W,Dn(A),en.T=_}}er=1,to(),Ns(),cd()}}function to(){if(er===1){er=0;var l=po,c=Gl,g=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||g){g=en.T,en.T=null;var _=Xa();Dn(2);var A=Rn;Rn|=4;try{Ru(c,l),w0(l.containerInfo)}finally{Rn=A,Dn(_),en.T=g}}l.current=c,er=2}}function Ns(){if(er===2){er=0;var l=po,c=Gl,g=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||g){g=en.T,en.T=null;var _=Xa();Dn(2);var A=Rn;Rn|=4;try{v0(l,c.alternate,c)}finally{Rn=A,Dn(_),en.T=g}}er=3}}function cd(){if(er===4||er===3){er=0,lm();var l=po,c=Gl,g=Vs,_=mm;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?er=5:(er=0,Gl=po=null,ud(l,l.pendingLanes));var A=l.pendingLanes;if(A===0&&(ho=null),te(g),c=c.stateNode,oa&&typeof oa.onCommitFiberRoot=="function")try{oa.onCommitFiberRoot(Pl,c,void 0,(c.current.flags&128)===128)}catch{}if(_!==null){c=en.T,A=Xa(),Dn(2),en.T=null;try{for(var D=l.onRecoverableError,W=0;W<_.length;W++){var de=_[W];D(de.value,{componentStack:de.stack})}}finally{en.T=c,Dn(A)}}(Vs&3)!==0&&Ds(),Mt(l),A=l.pendingLanes,(g&261930)!==0&&(A&42)!==0?l===Ju?Xn++:(Xn=0,Ju=l):Xn=0,xi&&ku(),ct(0)}}function ud(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,je(c)))}function Ds(){return to(),Ns(),cd(),Du()}function Du(){if(er!==5)return!1;var l=po,c=Fc;Fc=0;var g=te(Vs),_=32>g?32:g;g=en.T;var A=Xa();try{Dn(_),en.T=null,_=Hd,Hd=null;var D=po,W=Vs;if(er=0,Gl=po=null,Vs=0,(Rn&6)!==0)throw Error(a(331));var de=Rn;if(Rn|=4,ad(D.current),id(D,D.current,W,_),Rn=de,ct(0,!1),oa&&typeof oa.onPostCommitFiberRoot=="function")try{oa.onPostCommitFiberRoot(Pl,D)}catch{}return!0}finally{Dn(A),en.T=g,ud(l,c)}}function zo(l,c,g){c=be(g,c),c=lp(l.stateNode,c,2),l=Ce(l,c,2),l!==null&&(P(l,2),Mt(l))}function ln(l,c,g){if(l.tag===3)zo(l,l,g);else for(;c!==null;){if(c.tag===3){zo(c,l,g);break}else if(c.tag===1){var _=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(ho===null||!ho.has(_))){l=be(g,l),g=n0(2),_=Ce(c,g,2),_!==null&&(i0(g,_,c,l),P(_,2),Mt(_));break}}c=c.return}}function Sc(l,c,g){var _=l.pingCache;if(_===null){_=l.pingCache=new Ca;var A=new Set;_.set(c,A)}else A=_.get(c),A===void 0&&(A=new Set,_.set(c,A));A.has(g)||($o=!0,A.add(g),l=b0.bind(null,l,c,g),c.then(l,l))}function b0(l,c,g){var _=l.pingCache;_!==null&&_.delete(c),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,wn===l&&(Ln&g)===g&&(Ni===4||Ni===3&&(Ln&62914560)===Ln&&300>Ur()-$u?(Rn&2)===0&&Oi(l,0):Pc|=g,zc===Ln&&(zc=0)),Mt(l)}function S0(l,c){c===0&&(c=L()),l=on(l,c),l!==null&&(P(l,c),Mt(l))}function V_(l){var c=l.memoizedState,g=0;c!==null&&(g=c.retryLane),S0(l,g)}function H_(l,c){var g=0;switch(l.tag){case 31:case 13:var _=l.stateNode,A=l.memoizedState;A!==null&&(g=A.retryLane);break;case 19:_=l.stateNode;break;case 22:_=l.stateNode._retryCache;break;default:throw Error(a(314))}_!==null&&_.delete(c),S0(l,g)}function $i(l,c){return Hu(l,c)}function Ep(l,c,g,_){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ml(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Sa(l,c){var g=l.alternate;return g===null?(g=t(l.tag,c,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=c,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,c=l.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function fd(l,c){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,c=g.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function no(l,c,g,_,A,D){var W=0;if(_=l,typeof l=="function")Ml(l)&&(W=1);else if(typeof l=="string")W=ja&&or?Td(l,g,yr.current)?26:om(l)?27:5:ja?Td(l,g,yr.current)?26:5:or&&om(l)?27:5;else e:switch(l){case Ou:return l=t(31,g,c,A),l.elementType=Ou,l.lanes=D,l;case Al:return Ga(g.children,A,D,c);case Cl:W=8,A|=24;break;case Rl:return l=t(12,g,c,A|2),l.elementType=Rl,l.lanes=D,l;case md:return l=t(13,g,c,A),l.elementType=md,l.lanes=D,l;case io:return l=t(19,g,c,A),l.elementType=io,l.lanes=D,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case Wa:W=10;break e;case Uu:W=9;break e;case Mc:W=11;break e;case gd:W=14;break e;case Xr:W=16,_=null;break e}W=29,g=Error(a(130,l===null?"null":typeof l,"")),_=null}return c=t(W,g,c,A),c.elementType=l,c.type=_,c.lanes=D,c}function Ga(l,c,g,_){return l=t(7,l,_,c),l.lanes=g,l}function wp(l,c,g){return l=t(6,l,null,c),l.lanes=g,l}function Tp(l){var c=t(18,null,null,0);return c.stateNode=l,c}function Ap(l,c,g){return c=t(4,l.children!==null?l.children:[],l.key,c),c.lanes=g,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function M0(l,c,g,_,A,D,W,de,Fe){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=aa,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=z(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z(0),this.hiddenUpdates=z(null),this.identifierPrefix=_,this.onUncaughtError=A,this.onCaughtError=D,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Fe,this.incompleteTransitions=new Map}function Fo(l,c,g,_,A,D,W,de,Fe,ot,Et,ht){return l=new M0(l,c,g,W,Fe,ot,Et,ht,de),c=1,D===!0&&(c|=24),D=t(3,null,null,c),l.current=D,D.stateNode=l,c=Ue(),c.refCount++,l.pooledCache=c,c.refCount++,D.memoizedState={element:_,isDehydrated:g,cache:c},B(D),l}function dd(l){return l?(l=Ls,l):Ls}function Iu(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(a(188)):(l=Object.keys(l).join(","),Error(a(268,l)));return l=d(c),l=l!==null?h(l):null,l===null?null:wc(l.stateNode)}function Cp(l,c,g,_,A,D){A=dd(A),_.context===null?_.context=A:_.pendingContext=A,_=ce(c),_.payload={element:g},D=D===void 0?null:D,D!==null&&(_.callback=D),g=Ce(l,_,c),g!==null&&(Ti(g,l,c),Be(g,l,c))}function El(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<c?g:c}}function Lu(l,c){El(l,c),(l=l.alternate)&&El(l,c)}var Mn={},hd=_t,ia=g6,pd=Object.assign,wl=Symbol.for("react.element"),Is=Symbol.for("react.transitional.element"),Tl=Symbol.for("react.portal"),Al=Symbol.for("react.fragment"),Cl=Symbol.for("react.strict_mode"),Rl=Symbol.for("react.profiler"),Uu=Symbol.for("react.consumer"),Wa=Symbol.for("react.context"),Mc=Symbol.for("react.forward_ref"),md=Symbol.for("react.suspense"),io=Symbol.for("react.suspense_list"),gd=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),Ou=Symbol.for("react.activity"),Rp=Symbol.for("react.memo_cache_sentinel"),ro=Symbol.iterator,Bo=Symbol.for("react.client.reference"),ko=Array.isArray,en=hd.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Np=e.rendererVersion,Pu=e.rendererPackageName,Ec=e.extraDevToolsConfig,wc=e.getPublicInstance,E0=e.getRootHostContext,Tc=e.getChildHostContext,vd=e.prepareForCommit,w0=e.resetAfterCommit,Dp=e.createInstance;e.cloneMutableInstance;var zu=e.appendInitialChild,ra=e.finalizeInitialChildren,jr=e.shouldSetTextContent,ao=e.createTextInstance;e.cloneMutableTextInstance;var Ip=e.scheduleTimeout,T0=e.cancelTimeout,aa=e.noTimeout,Gi=e.isPrimaryRenderer;e.warnsIfNotActing;var zn=e.supportsMutation,Ma=e.supportsPersistence,xi=e.supportsHydration,vn=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var ri=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Dn=e.setCurrentUpdatePriority,Xa=e.getCurrentUpdatePriority,Ac=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var Nl=e.shouldAttemptEagerTransition,yd=e.detachDeletedInstance;e.requestPostPaintCallback;var Fu=e.maySuspendCommit,Cc=e.maySuspendCommitOnUpdate,Lp=e.maySuspendCommitInSyncRender,Ai=e.preloadInstance,Up=e.startSuspendingCommit,xd=e.suspendInstance;e.suspendOnActiveViewTransition;var A0=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var Dl=e.NotPendingTransition,Il=e.HostTransitionContext,Op=e.resetFormInstance;e.bindToConsole;var Pp=e.supportsMicrotasks,zp=e.scheduleMicrotask,sr=e.supportsTestSelectors,Wi=e.findFiberRoot,_d=e.getBoundingRect,Bu=e.getTextContent,Vo=e.isHiddenSubtree,Fp=e.matchAccessibilityRole,so=e.setFocusIfFocusable,bd=e.setupIntersectionObserver,Bp=e.appendChild,kp=e.appendChildToContainer,C0=e.commitTextUpdate,R0=e.commitMount,N0=e.commitUpdate,D0=e.insertBefore,I0=e.insertInContainerBefore,L0=e.removeChild,Vp=e.removeChildFromContainer,Hp=e.resetTextContent,G_=e.hideInstance,U0=e.hideTextInstance,O0=e.unhideInstance,P0=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var Gp=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var z0=e.cloneInstance,Wp=e.createContainerChildSet,Xp=e.appendChildToContainerChildSet,F0=e.finalizeContainerChildren,jp=e.replaceContainerChildren,B0=e.cloneHiddenInstance,qp=e.cloneHiddenTextInstance,Ho=e.isSuspenseInstancePending,Sd=e.isSuspenseInstanceFallback,Md=e.getSuspenseInstanceFallbackErrorDetails,Ed=e.registerSuspenseInstanceRetry,k0=e.canHydrateFormStateMarker,Yp=e.isFormStateMarkerMatching,V0=e.getNextHydratableSibling,H0=e.getNextHydratableSiblingAfterSingleton,G0=e.getFirstHydratableChild,W0=e.getFirstHydratableChildWithinContainer,X0=e.getFirstHydratableChildWithinActivityInstance,j0=e.getFirstHydratableChildWithinSuspenseInstance,Zp=e.getFirstHydratableChildWithinSingleton,q0=e.canHydrateInstance,Y0=e.canHydrateTextInstance,Kp=e.canHydrateActivityInstance,Z0=e.canHydrateSuspenseInstance,K0=e.hydrateInstance,W_=e.hydrateTextInstance,$p=e.hydrateActivityInstance,$0=e.hydrateSuspenseInstance,Q0=e.getNextHydratableInstanceAfterActivityInstance,Qp=e.getNextHydratableInstanceAfterSuspenseInstance,J0=e.commitHydratedInstance,ev=e.commitHydratedContainer,X_=e.commitHydratedActivityInstance,j_=e.commitHydratedSuspenseInstance,tv=e.finalizeHydratedChildren,ku=e.flushHydrationEvents;e.clearActivityBoundary;var Jp=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var wd=e.clearSuspenseBoundaryFromContainer,nv=e.hideDehydratedBoundary,iv=e.unhideDehydratedBoundary,Rc=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var rv=e.validateHydratableInstance,em=e.validateHydratableTextInstance,ja=e.supportsResources,Td=e.isHostHoistableType,Vu=e.getHoistableRoot,tm=e.getResource,nm=e.acquireResource,Go=e.releaseResource,av=e.hydrateHoistable,im=e.mountHoistable,rm=e.unmountHoistable,Ad=e.createHoistableInstance,sv=e.prepareToCommitHoistables,am=e.mayResourceSuspendCommit,sm=e.preloadResource,ov=e.suspendResource,or=e.supportsSingletons,Cd=e.resolveSingletonInstance,Qi=e.acquireSingletonInstance,vr=e.releaseSingletonInstance,om=e.isHostSingletonType,Ll=e.isSingletonScope,Rd=[],Ul=-1,Ls={},sa=Math.clz32?Math.clz32:C,Nd=Math.log,lv=Math.LN2,Dd=256,Ol=262144,Nc=4194304,Hu=ia.unstable_scheduleCallback,Id=ia.unstable_cancelCallback,cv=ia.unstable_shouldYield,lm=ia.unstable_requestPaint,Ur=ia.unstable_now,Ld=ia.unstable_ImmediatePriority,uv=ia.unstable_UserBlockingPriority,Gu=ia.unstable_NormalPriority,Ud=ia.unstable_IdlePriority,cm=ia.log,fv=ia.unstable_setDisableYieldValue,Pl=null,oa=null,Xi=typeof Object.is=="function"?Object.is:ae,Od=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},q_=Object.prototype.hasOwnProperty,Pd,Us,Wu=!1,um=new WeakMap,oo=[],Os=0,ai=null,Xu=0,qa=[],Ea=0,Ya=null,Mr=1,os="",yr=x(null),lo=x(null),Er=x(null),ju=x(null),lr=null,_i=null,In=!1,Ps=null,qr=!1,zd=Error(a(519)),Za=x(null),ci=null,ls=null,dv=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(g,_){l.push(_)}};this.abort=function(){c.aborted=!0,l.forEach(function(g){return g()})}},xr=ia.unstable_scheduleCallback,Y_=ia.unstable_NormalPriority,bi={$$typeof:Wa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},qu=null,ti=null,Or=!1,Ka=!1,Fd=!1,Wo=0,Dc=null,fm=0,co=0,cr=null,$a=en.S;en.S=function(l,c){Hl=Ur(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&tt(l,c),$a!==null&&$a(l,c)};var Xo=x(null),ur=Error(a(460)),Bd=Error(a(474)),Qa=Error(a(542)),zs={then:function(){}},Yr=null,jo=null,zl=0,wr=Li(!0),dm=Li(!1),Tr=[],Fs=0,Fl=0,wa=!1,kd=!1,Bl=x(null),qo=x(0),la=x(null),ca=null,Pi=x(0),uo=0,yn=null,Zt=null,dn=null,En=!1,bn=!1,Fn=!1,Pr=0,Ja=0,cs=null,hm=0,Ta={readContext:Z,use:Kn,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useLayoutEffect:lt,useInsertionEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useSyncExternalStore:lt,useId:lt,useHostTransitionStatus:lt,useFormState:lt,useActionState:lt,useOptimistic:lt,useMemoCache:lt,useCacheRefresh:lt};Ta.useEffectEvent=lt;var Ci={readContext:Z,use:Kn,useCallback:function(l,c){return Xt().memoizedState=[l,c===void 0?null:c],l},useContext:Z,useEffect:vu,useImperativeHandle:function(l,c,g){g=g!=null?g.concat([l]):null,vl(4194308,4,sc.bind(null,c,l),g)},useLayoutEffect:function(l,c){return vl(4194308,4,l,c)},useInsertionEffect:function(l,c){vl(4,2,l,c)},useMemo:function(l,c){var g=Xt();c=c===void 0?null:c;var _=l();if(Fn){ee(!0);try{l()}finally{ee(!1)}}return g.memoizedState=[_,c],_},useReducer:function(l,c,g){var _=Xt();if(g!==void 0){var A=g(c);if(Fn){ee(!0);try{g(c)}finally{ee(!1)}}}else A=c;return _.memoizedState=_.baseState=A,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:A},_.queue=l,l=l.dispatch=F_.bind(null,yn,l),[_.memoizedState,l]},useRef:function(l){var c=Xt();return l={current:l},c.memoizedState=l},useState:function(l){l=ep(l);var c=l.queue,g=Qg.bind(null,yn,c);return c.dispatch=g,[l.memoizedState,g]},useDebugValue:xu,useDeferredValue:function(l,c){var g=Xt();return lc(g,l,c)},useTransition:function(){var l=ep(!1);return l=Zg.bind(null,yn,l.queue,!0,!1),Xt().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,g){var _=yn,A=Xt();if(In){if(g===void 0)throw Error(a(407));g=g()}else{if(g=c(),wn===null)throw Error(a(349));(Ln&127)!==0||Hi(_,c,g)}A.memoizedState=g;var D={value:g,getSnapshot:c};return A.queue=D,vu(xs.bind(null,_,D,l),[l]),_.flags|=2048,xa(9,{destroy:void 0},za.bind(null,_,D,g,c),null),g},useId:function(){var l=Xt(),c=wn.identifierPrefix;if(In){var g=os,_=Mr;g=(_&~(1<<32-sa(_)-1)).toString(32)+g,c="_"+c+"R_"+g,g=Pr++,0<g&&(c+="H"+g.toString(32)),c+="_"}else g=hm++,c="_"+c+"r_"+g.toString(32)+"_";return l.memoizedState=c},useHostTransitionStatus:ap,useFormState:np,useActionState:np,useOptimistic:function(l){var c=Xt();c.memoizedState=c.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=qf.bind(null,yn,!0,g),g.dispatch=c,[l,c]},useMemoCache:Ei,useCacheRefresh:function(){return Xt().memoizedState=z_.bind(null,yn)},useEffectEvent:function(l){var c=Xt(),g={impl:l};return c.memoizedState=g,function(){if((Rn&2)!==0)throw Error(a(440));return g.impl.apply(void 0,arguments)}}},Bs={readContext:Z,use:Kn,useCallback:Xf,useContext:Z,useEffect:ac,useImperativeHandle:Yg,useInsertionEffect:Co,useLayoutEffect:yu,useMemo:oc,useReducer:mi,useRef:Wf,useState:function(){return mi(Wn)},useDebugValue:xu,useDeferredValue:function(l,c){var g=ut();return rp(g,Zt.memoizedState,l,c)},useTransition:function(){var l=mi(Wn)[0],c=ut().memoizedState;return[typeof l=="boolean"?l:At(l),c]},useSyncExternalStore:Ir,useId:jf,useHostTransitionStatus:ap,useFormState:ic,useActionState:ic,useOptimistic:function(l,c){var g=ut();return mu(g,Zt,l,c)},useMemoCache:Ei,useCacheRefresh:$g};Bs.useEffectEvent=Hr;var Yo={readContext:Z,use:Kn,useCallback:Xf,useContext:Z,useEffect:ac,useImperativeHandle:Yg,useInsertionEffect:Co,useLayoutEffect:yu,useMemo:oc,useReducer:Ui,useRef:Wf,useState:function(){return Ui(Wn)},useDebugValue:xu,useDeferredValue:function(l,c){var g=ut();return Zt===null?lc(g,l,c):rp(g,Zt.memoizedState,l,c)},useTransition:function(){var l=Ui(Wn)[0],c=ut().memoizedState;return[typeof l=="boolean"?l:At(l),c]},useSyncExternalStore:Ir,useId:jf,useHostTransitionStatus:ap,useFormState:rc,useActionState:rc,useOptimistic:function(l,c){var g=ut();return Zt!==null?mu(g,Zt,l,c):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:Ei,useCacheRefresh:$g};Yo.useEffectEvent=Hr;var Yu={enqueueSetState:function(l,c,g){l=l._reactInternals;var _=yi(),A=ce(_);A.payload=c,g!=null&&(A.callback=g),c=Ce(l,A,_),c!==null&&(Ti(c,l,_),Be(c,l,_))},enqueueReplaceState:function(l,c,g){l=l._reactInternals;var _=yi(),A=ce(_);A.tag=1,A.payload=c,g!=null&&(A.callback=g),c=Ce(l,A,_),c!==null&&(Ti(c,l,_),Be(c,l,_))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var g=yi(),_=ce(g);_.tag=2,c!=null&&(_.callback=c),c=Ce(l,_,g),c!==null&&(Ti(c,l,g),Be(c,l,g))}},Zr=Error(a(461)),gi=!1,kl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},zi=!1,Fi=!1,Ic=!1,pm=typeof WeakSet=="function"?WeakSet:Set,ji=null,Ri=null,qi=!1,ni=null,Aa=8192,Lc={getCacheForType:function(l){var c=Z(bi),g=c.data.get(l);return g===void 0&&(g=l(),c.data.set(l,g)),g},cacheSignal:function(){return Z(bi).controller.signal}},es=0,Uc=1,Oc=2,Zu=3,Zo=4;if(typeof Symbol=="function"&&Symbol.for){var Vl=Symbol.for;es=Vl("selector.component"),Uc=Vl("selector.has_pseudo_class"),Oc=Vl("selector.role"),Zu=Vl("selector.test_id"),Zo=Vl("selector.text")}var Ca=typeof WeakMap=="function"?WeakMap:Map,Rn=0,wn=null,Nn=null,Ln=0,ii=0,Ji=null,us=!1,Ko=!1,$o=!1,ks=0,Ni=0,fo=0,Qo=0,Pc=0,Kr=0,zc=0,Ku=null,ua=null,Vd=!1,$u=0,Hl=0,Jo=1/0,Qu=null,ho=null,er=0,po=null,Gl=null,Vs=0,Fc=0,Hd=null,mm=null,Xn=0,Ju=null;return Mn.attemptContinuousHydration=function(l){if(l.tag===13||l.tag===31){var c=on(l,67108864);c!==null&&Ti(c,l,67108864),Lu(l,67108864)}},Mn.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13||l.tag===31){var c=yi();c=H(c);var g=on(l,c);g!==null&&Ti(g,l,c),Lu(l,c)}},Mn.attemptSynchronousHydration=function(l){switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var c=T(l.pendingLanes);if(c!==0){for(l.pendingLanes|=2,l.entangledLanes|=2;c;){var g=1<<31-sa(c);l.entanglements[1]|=g,c&=~g}Mt(l),(Rn&6)===0&&(Jo=Ur()+500,ct(0))}}break;case 31:case 13:c=on(l,2),c!==null&&Ti(c,l,2),sd(),Lu(l,2)}},Mn.batchedUpdates=function(l,c){return l(c)},Mn.createComponentSelector=function(l){return{$$typeof:es,value:l}},Mn.createContainer=function(l,c,g,_,A,D,W,de,Fe,ot){return Fo(l,c,!1,null,g,_,D,null,W,de,Fe,ot)},Mn.createHasPseudoClassSelector=function(l){return{$$typeof:Uc,value:l}},Mn.createHydrationContainer=function(l,c,g,_,A,D,W,de,Fe,ot,Et,ht,Ot,mn){var Yi;return l=Fo(g,_,!0,l,A,D,de,mn,Fe,ot,Et,ht),l.context=dd(null),g=l.current,_=yi(),_=H(_),A=ce(_),A.callback=(Yi=c)!=null?Yi:null,Ce(g,A,_),c=_,l.current.lanes=c,P(l,c),Mt(l),l},Mn.createPortal=function(l,c,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tl,key:_==null?null:""+_,children:l,containerInfo:c,implementation:g}},Mn.createRoleSelector=function(l){return{$$typeof:Oc,value:l}},Mn.createTestNameSelector=function(l){return{$$typeof:Zu,value:l}},Mn.createTextSelector=function(l){return{$$typeof:Zo,value:l}},Mn.defaultOnCaughtError=function(l){console.error(l)},Mn.defaultOnRecoverableError=function(l){Od(l)},Mn.defaultOnUncaughtError=function(l){Od(l)},Mn.deferredUpdates=function(l){var c=en.T,g=Xa();try{return Dn(32),en.T=null,l()}finally{Dn(g),en.T=c}},Mn.discreteUpdates=function(l,c,g,_,A){var D=en.T,W=Xa();try{return Dn(2),en.T=null,l(c,g,_,A)}finally{Dn(W),en.T=D,Rn===0&&(Jo=Ur()+500)}},Mn.findAllNodes=na,Mn.findBoundingRects=function(l,c){if(!sr)throw Error(a(363));c=na(l,c),l=[];for(var g=0;g<c.length;g++)l.push(_d(c[g]));for(c=l.length-1;0<c;c--){g=l[c];for(var _=g.x,A=_+g.width,D=g.y,W=D+g.height,de=c-1;0<=de;de--)if(c!==de){var Fe=l[de],ot=Fe.x,Et=ot+Fe.width,ht=Fe.y,Ot=ht+Fe.height;if(_>=ot&&D>=ht&&A<=Et&&W<=Ot){l.splice(c,1);break}else if(_!==ot||g.width!==Fe.width||Ot<D||ht>W){if(!(D!==ht||g.height!==Fe.height||Et<_||ot>A)){ot>_&&(Fe.width+=ot-_,Fe.x=_),Et<A&&(Fe.width=A-ot),l.splice(c,1);break}}else{ht>D&&(Fe.height+=ht-D,Fe.y=D),Ot<W&&(Fe.height=W-ht),l.splice(c,1);break}}}return l},Mn.findHostInstance=Iu,Mn.findHostInstanceWithNoPortals=function(l){return l=d(l),l=l!==null?p(l):null,l===null?null:wc(l.stateNode)},Mn.findHostInstanceWithWarning=function(l){return Iu(l)},Mn.flushPassiveEffects=Ds,Mn.flushSyncFromReconciler=function(l){var c=Rn;Rn|=1;var g=en.T,_=Xa();try{if(Dn(2),en.T=null,l)return l()}finally{Dn(_),en.T=g,Rn=c,(Rn&6)===0&&ct(0)}},Mn.flushSyncWork=sd,Mn.focusWithin=function(l,c){if(!sr)throw Error(a(363));for(l=Lo(l),c=yc(l,c),c=Array.from(c),l=0;l<c.length;){var g=c[l++],_=g.tag;if(!Vo(g)){if((_===5||_===26||_===27)&&so(g.stateNode))return!0;for(g=g.child;g!==null;)c.push(g),g=g.sibling}}return!1},Mn.getFindAllNodesFailureDescription=function(l,c){if(!sr)throw Error(a(363));var g=0,_=[];l=[Lo(l),0];for(var A=0;A<l.length;){var D=l[A++],W=D.tag,de=l[A++],Fe=c[de];if((W!==5&&W!==26&&W!==27||!Vo(D))&&(Uo(D,Fe)&&(_.push(vc(Fe)),de++,de>g&&(g=de)),de<c.length))for(D=D.child;D!==null;)l.push(D,de),D=D.sibling}if(g<c.length){for(l=[];g<c.length;g++)l.push(vc(c[g]));return`findAllNodes was able to match part of the selector:
  `+(_.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},Mn.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 27:case 5:return wc(l.child.stateNode);default:return l.child.stateNode}},Mn.injectIntoDevTools=function(){var l={bundleType:0,version:Np,rendererPackageName:Pu,currentDispatcherRef:en,reconcilerVersion:"19.2.0"};if(Ec!==null&&(l.rendererConfig=Ec),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)l=!0;else{try{Pl=c.inject(l),oa=c}catch{}l=!!c.checkDCE}}return l},Mn.isAlreadyRendering=function(){return(Rn&6)!==0},Mn.observeVisibleRects=function(l,c,g,_){if(!sr)throw Error(a(363));l=na(l,c);var A=bd(l,g,_).disconnect;return{disconnect:function(){A()}}},Mn.shouldError=function(){return null},Mn.shouldSuspend=function(){return!1},Mn.startHostTransition=function(l,c,g,_){if(l.tag!==5)throw Error(a(476));var A=Kg(l).queue;Zg(l,A,c,Dl,g===null?n:function(){var D=Kg(l);return D.next===null&&(D=l.alternate.memoizedState),_u(l,D.next.queue,{},yi()),g(_)})},Mn.updateContainer=function(l,c,g,_){var A=c.current,D=yi();return Cp(A,D,l,c,g,_),D},Mn.updateContainerSync=function(l,c,g,_){return Cp(c.current,2,l,c,g,_),2},Mn},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})})(_T)),_T.exports}var ST;function W6(){return ST||(ST=1,xT.exports=G6()),xT.exports}var X6=W6();const j6=H6(X6);function q6(i){const e=j6(i);return e.injectIntoDevTools(),e}const iR=0,Vh={},Y6=/^three(?=[A-Z])/,I_=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let Z6=0;const K6=i=>typeof i=="function";function gM(i){if(K6(i)){const e=`${Z6++}`;return Vh[e]=i,e}else Object.assign(Vh,i)}function rR(i,e){const t=I_(i),n=Vh[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function $6(i,e,t){var n;return i=I_(i)in Vh?i:i.replace(Y6,""),rR(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,zx(e.object,t,i,e)}function Q6(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?Bx(i.parent,i):Da(i.object)&&(i.object.visible=!1),i.isHidden=!0,Jh(i)}}function aR(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?Fx(i.parent,i):Da(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,Jh(i)}}function vM(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var a,o;const u=Vh[I_(e.type)];e.object=(a=e.props.object)!=null?a:new u(...(o=e.props.args)!=null?o:[]),e.object.__r3f=e}if(ol(e.object,e.props),e.props.attach)Fx(i,e);else if(Da(e.object)&&Da(i.object)){const u=i.object.children.indexOf(t?.object);if(t&&u!==-1){const d=i.object.children.indexOf(e.object);if(d!==-1){i.object.children.splice(d,1);const h=d<u?u-1:u;i.object.children.splice(h,0,e.object)}else e.object.parent=i.object,i.object.children.splice(u,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const u of e.children)vM(e,u);Jh(e)}}function xS(i,e){e&&(e.parent=i,i.children.push(e),vM(i,e))}function MT(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),vM(i,e,t)}function sR(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():l1.unstable_scheduleCallback(l1.unstable_IdlePriority,e)}}function u1(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?Bx(i,e):Da(e.object)&&Da(i.object)&&(i.object.remove(e.object),L6(K3(e),e.object));const a=e.props.dispose!==null&&t!==!1;for(let o=e.children.length-1;o>=0;o--){const u=e.children[o];u1(e,u,a)}e.children.length=0,delete e.object.__r3f,a&&e.type!=="primitive"&&e.object.type!=="Scene"&&sR(e.object),t===void 0&&Jh(e)}function J6(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const By=[];function e8(){for(const[t]of By){const n=t.parent;if(n){t.props.attach?Bx(n,t):Da(t.object)&&Da(n.object)&&n.object.remove(t.object);for(const a of t.children)a.props.attach?Bx(t,a):Da(a.object)&&Da(t.object)&&t.object.remove(a.object)}t.isHidden&&aR(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&sR(t.object)}for(const[t,n,a]of By){t.props=n;const o=t.parent;if(o){var i,e;const u=Vh[I_(t.type)];t.object=(i=t.props.object)!=null?i:new u(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,J6(a,t.object),ol(t.object,t.props),t.props.attach?Fx(o,t):Da(t.object)&&Da(o.object)&&o.object.add(t.object);for(const d of t.children)d.props.attach?Fx(t,d):Da(d.object)&&Da(t.object)&&t.object.add(d.object);Jh(t)}}By.length=0}const _S=()=>{},ET={};let Cy=iR;const t8=0,n8=4,kx=q6({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:$6,removeChild:u1,appendChild:xS,appendInitialChild:xS,insertBefore:MT,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||xS(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||u1(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||MT(n,e,t)},getRootHostContext:()=>ET,getChildHostContext:()=>ET,commitUpdate(i,e,t,n,a){var o,u,d;rR(e,n);let h=!1;if((i.type==="primitive"&&t.object!==n.object||((o=n.args)==null?void 0:o.length)!==((u=t.args)==null?void 0:u.length)||(d=n.args)!=null&&d.some((y,v)=>{var x;return y!==((x=t.args)==null?void 0:x[v])}))&&(h=!0),h)By.push([i,{...n},a]);else{const y=N6(i,n);Object.keys(y).length&&(Object.assign(i.props,y),ol(i.object,y))}(a.sibling===null||(a.flags&n8)===t8)&&e8()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i?.object,prepareForCommit:()=>null,preparePortalMount:i=>zx(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Q6,unhideInstance:aR,createTextInstance:_S,hideTextInstance:_S,unhideTextInstance:_S,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:j.createContext(null),setCurrentUpdatePriority(i){Cy=i},getCurrentUpdatePriority(){return Cy},resolveUpdatePriority(){var i;if(Cy!==iR)return Cy;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return k6;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return F6;default:return B6}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:V6.version,applyViewTransitionName(i,e,t){},restoreViewTransitionName(i,e){},cancelViewTransitionName(i,e,t){},cancelRootViewTransitionName(i){},restoreRootViewTransitionName(i){},InstanceMeasurement:null,measureInstance:i=>null,wasInstanceInViewport:i=>!0,hasInstanceChanged:(i,e)=>!1,hasInstanceAffectedParent:(i,e)=>!1,suspendOnActiveViewTransition(i,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(i){},createViewTransitionInstance:i=>null,getCurrentGestureOffset(i){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(i,e){return i},cloneMutableTextInstance(i){return i},cloneRootViewTransitionContainer(i){throw new Error("Not implemented.")},removeRootViewTransitionClone(i,e){throw new Error("Not implemented.")},createFragmentInstance:i=>null,updateFragmentInstanceFiber(i,e){},commitNewChildToFragmentInstance(i,e){},deleteChildFromFragmentInstance(i,e){},measureClonedInstance:i=>null,maySuspendCommitOnUpdate:(i,e,t)=>!1,maySuspendCommitInSyncRender:(i,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(i,e)=>null}),Of=new Map,gh={objects:"shallow",strict:!1};function i8(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:a,left:o}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:a,left:o}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function r8(i){const e=Of.get(i),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,o=n||O6(h1,TT),u=t||kx.createContainer(o,z6,null,!1,null,"",a,a,a,null);e||Of.set(i,{fiber:u,store:o});let d,h,p=!1,y=null;return{async configure(v={}){let x;y=new Promise(Y=>x=Y);let{gl:S,size:E,scene:C,events:T,onCreated:M,shadows:R=!1,linear:I=!1,flat:L=!1,legacy:z=!1,orthographic:P=!1,frameloop:V="always",dpr:N=[1,2],performance:O,raycaster:K,camera:H,onPointerMissed:te}=v,ee=o.getState(),ae=ee.gl;if(!ee.gl){const Y={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},re=typeof S=="function"?await S(Y):S;vT(re)?ae=re:ae=new uM({...Y,...S}),ee.set({gl:ae})}let se=ee.raycaster;se||ee.set({raycaster:se=new lM});const{params:G,...$}=K||{};if(Bi.equ($,se,gh)||ol(se,{...$}),Bi.equ(G,se.params,gh)||ol(se,{params:{...se.params,...G}}),!ee.camera||ee.camera===h&&!Bi.equ(h,H,gh)){h=H;const Y=H?.isCamera,re=Y?H:P?new fl(0,0,0,0,.1,1e3):new dr(75,0,.1,1e3);Y||(re.position.z=5,H&&(ol(re,H),re.manual||("aspect"in H||"left"in H||"right"in H||"bottom"in H||"top"in H)&&(re.manual=!0,re.updateProjectionMatrix())),!ee.camera&&!(H!=null&&H.rotation)&&re.lookAt(0,0,0)),ee.set({camera:re}),se.camera=re}if(!ee.scene){let Y;C!=null&&C.isScene?(Y=C,zx(Y,o,"",{})):(Y=new Pg,zx(Y,o,"",{}),C&&ol(Y,C)),ee.set({scene:Y})}T&&!ee.events.handlers&&ee.set({events:T(o)});const le=i8(i,E);if(Bi.equ(le,ee.size,gh)||ee.setSize(le.width,le.height,le.top,le.left),N&&ee.viewport.dpr!==Q3(N)&&ee.setDpr(N),ee.frameloop!==V&&ee.setFrameloop(V),ee.onPointerMissed||ee.set({onPointerMissed:te}),O&&!Bi.equ(O,ee.performance,gh)&&ee.set(Y=>({performance:{...Y.performance,...O}})),!ee.xr){var be;const Y=(Te,Ke)=>{const he=o.getState();he.frameloop!=="never"&&TT(Te,!0,he,Ke)},re=()=>{const Te=o.getState();Te.gl.xr.enabled=Te.gl.xr.isPresenting,Te.gl.xr.setAnimationLoop(Te.gl.xr.isPresenting?Y:null),Te.gl.xr.isPresenting||h1(Te)},me={connect(){const Te=o.getState().gl;Te.xr.addEventListener("sessionstart",re),Te.xr.addEventListener("sessionend",re)},disconnect(){const Te=o.getState().gl;Te.xr.removeEventListener("sessionstart",re),Te.xr.removeEventListener("sessionend",re)}};typeof((be=ae.xr)==null?void 0:be.addEventListener)=="function"&&me.connect(),ee.set({xr:me})}if(ae.shadowMap){const Y=ae.shadowMap.enabled,re=ae.shadowMap.type;if(ae.shadowMap.enabled=!!R,Bi.boo(R))ae.shadowMap.type=Km;else if(Bi.str(R)){var Ae;const me={basic:QA,percentage:wh,soft:Km,variance:_f};ae.shadowMap.type=(Ae=me[R])!=null?Ae:Km}else Bi.obj(R)&&Object.assign(ae.shadowMap,R);(Y!==ae.shadowMap.enabled||re!==ae.shadowMap.type)&&(ae.shadowMap.needsUpdate=!0)}return Gn.enabled=!z,p||(ae.outputColorSpace=I?Eo:Fr,ae.toneMapping=L?qs:qx),ee.legacy!==z&&ee.set(()=>({legacy:z})),ee.linear!==I&&ee.set(()=>({linear:I})),ee.flat!==L&&ee.set(()=>({flat:L})),S&&!Bi.fun(S)&&!vT(S)&&!Bi.equ(S,ae,gh)&&ol(ae,S),d=M,p=!0,x(),this},render(v){return!p&&!y&&this.configure(),y.then(()=>{kx.updateContainer(J.jsx(a8,{store:o,children:v,onCreated:d,rootElement:i}),u,null,()=>{})}),o},unmount(){oR(i)}}}function a8({store:i,children:e,onCreated:t,rootElement:n}){return Wg(()=>{const a=i.getState();a.set(o=>({internal:{...o.internal,active:!0}})),t&&t(a),i.getState().events.connected||a.events.connect==null||a.events.connect(n)},[]),J.jsx(pM.Provider,{value:i,children:e})}function oR(i,e){const t=Of.get(i),n=t?.fiber;if(n){const a=t?.store.getState();a&&(a.internal.active=!1),kx.updateContainer(null,n,null,()=>{a&&setTimeout(()=>{try{var o,u,d,h;a.events.disconnect==null||a.events.disconnect(),(o=a.gl)==null||(u=o.renderLists)==null||u.dispose==null||u.dispose(),(d=a.gl)==null||d.forceContextLoss==null||d.forceContextLoss(),(h=a.gl)!=null&&h.xr&&a.xr.disconnect(),A6(a.scene),Of.delete(i)}catch{}},500)})}}function s8(i,e,t){return J.jsx(o8,{children:i,container:e,state:t})}function o8({state:i={},children:e,container:t}){const{events:n,size:a,...o}=i,u=mM(),[d]=j.useState(()=>new lM),[h]=j.useState(()=>new Ze),p=hM((v,x)=>{let S;if(x.camera&&a){const E=x.camera;S=v.viewport.getCurrentViewport(E,new Q,a),E!==v.camera&&eR(E,a)}return{...v,...x,scene:t,raycaster:d,pointer:h,mouse:h,previousRoot:u,events:{...v.events,...x.events,...n},size:{...v.size,...a},viewport:{...v.viewport,...S},setEvents:E=>x.set(C=>({...C,events:{...C.events,...E}}))}}),y=j.useMemo(()=>{const v=W3((S,E)=>({...o,set:S,get:E})),x=S=>v.setState(E=>p.current(S,E));return x(u.getState()),u.subscribe(x),v},[u,t]);return J.jsx(J.Fragment,{children:kx.createPortal(J.jsx(pM.Provider,{value:y,children:e}),y,null)})}const l8=new Set,c8=new Set,u8=new Set;function bS(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function sg(i,e){switch(i){case"before":return bS(l8,e);case"after":return bS(c8,e);case"tail":return bS(u8,e)}}let SS,MS;function f1(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),SS=e.internal.subscribers;for(let a=0;a<SS.length;a++)MS=SS[a],MS.ref.current(MS.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let Vx=!1,d1=!1,ES,wT,vh;function lR(i){wT=requestAnimationFrame(lR),Vx=!0,ES=0,sg("before",i),d1=!0;for(const t of Of.values()){var e;vh=t.store.getState(),vh.internal.active&&(vh.frameloop==="always"||vh.internal.frames>0)&&!((e=vh.gl.xr)!=null&&e.isPresenting)&&(ES+=f1(i,vh))}if(d1=!1,sg("after",i),ES===0)return sg("tail",i),Vx=!1,cancelAnimationFrame(wT)}function h1(i,e=1){var t;if(!i)return Of.forEach(n=>h1(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):d1?i.internal.frames=2:i.internal.frames=1,Vx||(Vx=!0,requestAnimationFrame(lR)))}function TT(i,e=!0,t,n){if(e&&sg("before",i),t)f1(i,t,n);else for(const a of Of.values())f1(i,a.store.getState());e&&sg("after",i)}const wS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function f8(i){const{handlePointer:e}=U6(i);return{priority:1,enabled:!0,compute(t,n,a){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(wS).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:a}=i.getState();(t=a.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(a.lastEvent.current)},connect:t=>{const{set:n,events:a}=i.getState();if(a.disconnect==null||a.disconnect(),n(o=>({events:{...o.events,connected:t}})),a.handlers)for(const o in a.handlers){const u=a.handlers[o],[d,h]=wS[o];t.addEventListener(d,u,{passive:h})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const a in n.handlers){const o=n.handlers[a],[u]=wS[a];n.connected.removeEventListener(u,o)}t(a=>({events:{...a.events,connected:void 0}}))}}}}function AT(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function d8({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const a=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,u]=j.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),d=j.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),h=i?typeof i=="number"?i:i.scroll:null,p=i?typeof i=="number"?i:i.resize:null,y=j.useRef(!1);j.useEffect(()=>(y.current=!0,()=>{y.current=!1}));const[v,x,S]=j.useMemo(()=>{const M=()=>{if(!d.current.element)return;const{left:R,top:I,width:L,height:z,bottom:P,right:V,x:N,y:O}=d.current.element.getBoundingClientRect(),K={left:R,top:I,width:L,height:z,bottom:P,right:V,x:N,y:O};d.current.element instanceof HTMLElement&&n&&(K.height=d.current.element.offsetHeight,K.width=d.current.element.offsetWidth),Object.freeze(K),y.current&&!g8(d.current.lastBounds,K)&&u(d.current.lastBounds=K)};return[M,p?AT(M,p):M,h?AT(M,h):M]},[u,n,h,p]);function E(){d.current.scrollContainers&&(d.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",S,!0)),d.current.scrollContainers=null),d.current.resizeObserver&&(d.current.resizeObserver.disconnect(),d.current.resizeObserver=null),d.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",d.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",d.current.orientationHandler))}function C(){d.current.element&&(d.current.resizeObserver=new a(S),d.current.resizeObserver.observe(d.current.element),e&&d.current.scrollContainers&&d.current.scrollContainers.forEach(M=>M.addEventListener("scroll",S,{capture:!0,passive:!0})),d.current.orientationHandler=()=>{S()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",d.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",d.current.orientationHandler))}const T=M=>{!M||M===d.current.element||(E(),d.current.element=M,d.current.scrollContainers=cR(M),C())};return p8(S,!!e),h8(x),j.useEffect(()=>{E(),C()},[e,S,x]),j.useEffect(()=>E,[]),[T,o,v]}function h8(i){j.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[i])}function p8(i,e){j.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[i,e])}function cR(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:a}=window.getComputedStyle(i);return[t,n,a].some(o=>o==="auto"||o==="scroll")&&e.push(i),[...e,...cR(i.parentElement)]}const m8=["x","y","top","bottom","left","right","width","height"],g8=(i,e)=>m8.every(t=>i[t]===e[t]);function v8({ref:i,children:e,fallback:t,resize:n,style:a,gl:o,events:u=f8,eventSource:d,eventPrefix:h,shadows:p,linear:y,flat:v,legacy:x,orthographic:S,frameloop:E,dpr:C,performance:T,raycaster:M,camera:R,scene:I,onPointerMissed:L,onCreated:z,...P}){j.useMemo(()=>gM(t6),[]);const V=M6(),[N,O]=d8({scroll:!0,debounce:{scroll:50,resize:0},...n}),K=j.useRef(null),H=j.useRef(null);j.useImperativeHandle(i,()=>K.current);const te=hM(L),[ee,ae]=j.useState(!1),[se,G]=j.useState(!1);if(ee)throw ee;if(se)throw se;const $=j.useRef(null);Wg(()=>{const be=K.current;if(O.width>0&&O.height>0&&be){$.current||($.current=r8(be));async function Ae(){await $.current.configure({gl:o,scene:I,events:u,shadows:p,linear:y,flat:v,legacy:x,orthographic:S,frameloop:E,dpr:C,performance:T,raycaster:M,camera:R,size:O,onPointerMissed:(...Y)=>te.current==null?void 0:te.current(...Y),onCreated:Y=>{Y.events.connect==null||Y.events.connect(d?b6(d)?d.current:d:H.current),h&&Y.setEvents({compute:(re,me)=>{const Te=re[h+"X"],Ke=re[h+"Y"];me.pointer.set(Te/me.size.width*2-1,-(Ke/me.size.height)*2+1),me.raycaster.setFromCamera(me.pointer,me.camera)}}),z?.(Y)}}),$.current.render(J.jsx(V,{children:J.jsx(w6,{set:G,children:J.jsx(j.Suspense,{fallback:J.jsx(E6,{set:ae}),children:e??null})})}))}Ae()}}),j.useEffect(()=>{const be=K.current;if(be)return()=>oR(be)},[]);const le=d?"none":"auto";return J.jsx("div",{ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:le,...a},...P,children:J.jsx("div",{ref:N,style:{width:"100%",height:"100%"},children:J.jsx("canvas",{ref:K,style:{display:"block"},children:t})})})}function y8(i){return J.jsx(Y3,{children:J.jsx(v8,{...i})})}function Hh(){return Hh=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Hh.apply(null,arguments)}const uR=parseInt(Yh.replace(/\D+/g,""));var js=Uint8Array,su=Uint16Array,p1=Uint32Array,fR=new js([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),dR=new js([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),x8=new js([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hR=function(i,e){for(var t=new su(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var a=new p1(t[30]),n=1;n<30;++n)for(var o=t[n];o<t[n+1];++o)a[o]=o-t[n]<<5|n;return[t,a]},pR=hR(fR,2),mR=pR[0],_8=pR[1];mR[28]=258,_8[258]=28;var b8=hR(dR,0),S8=b8[0],m1=new su(32768);for(var Ii=0;Ii<32768;++Ii){var eu=(Ii&43690)>>>1|(Ii&21845)<<1;eu=(eu&52428)>>>2|(eu&13107)<<2,eu=(eu&61680)>>>4|(eu&3855)<<4,m1[Ii]=((eu&65280)>>>8|(eu&255)<<8)>>>1}var og=(function(i,e,t){for(var n=i.length,a=0,o=new su(e);a<n;++a)++o[i[a]-1];var u=new su(e);for(a=0;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var d;if(t){d=new su(1<<e);var h=15-e;for(a=0;a<n;++a)if(i[a])for(var p=a<<4|i[a],y=e-i[a],v=u[i[a]-1]++<<y,x=v|(1<<y)-1;v<=x;++v)d[m1[v]>>>h]=p}else for(d=new su(n),a=0;a<n;++a)i[a]&&(d[a]=m1[u[i[a]-1]++]>>>15-i[a]);return d}),Xg=new js(288);for(var Ii=0;Ii<144;++Ii)Xg[Ii]=8;for(var Ii=144;Ii<256;++Ii)Xg[Ii]=9;for(var Ii=256;Ii<280;++Ii)Xg[Ii]=7;for(var Ii=280;Ii<288;++Ii)Xg[Ii]=8;var gR=new js(32);for(var Ii=0;Ii<32;++Ii)gR[Ii]=5;var M8=og(Xg,9,1),E8=og(gR,5,1),TS=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},yo=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},AS=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},w8=function(i){return(i/8|0)+(i&7&&1)},T8=function(i,e,t){(t==null||t>i.length)&&(t=i.length);var n=new(i instanceof su?su:i instanceof p1?p1:js)(t-e);return n.set(i.subarray(e,t)),n},A8=function(i,e,t){var n=i.length;if(!n||t&&!t.l&&n<5)return e||new js(0);var a=!e||t,o=!t||t.i;t||(t={}),e||(e=new js(n*3));var u=function(he){var De=e.length;if(he>De){var ze=new js(Math.max(De*2,he));ze.set(e),e=ze}},d=t.f||0,h=t.p||0,p=t.b||0,y=t.l,v=t.d,x=t.m,S=t.n,E=n*8;do{if(!y){t.f=d=yo(i,h,1);var C=yo(i,h+1,3);if(h+=3,C)if(C==1)y=M8,v=E8,x=9,S=5;else if(C==2){var I=yo(i,h,31)+257,L=yo(i,h+10,15)+4,z=I+yo(i,h+5,31)+1;h+=14;for(var P=new js(z),V=new js(19),N=0;N<L;++N)V[x8[N]]=yo(i,h+N*3,7);h+=L*3;for(var O=TS(V),K=(1<<O)-1,H=og(V,O,1),N=0;N<z;){var te=H[yo(i,h,K)];h+=te&15;var T=te>>>4;if(T<16)P[N++]=T;else{var ee=0,ae=0;for(T==16?(ae=3+yo(i,h,3),h+=2,ee=P[N-1]):T==17?(ae=3+yo(i,h,7),h+=3):T==18&&(ae=11+yo(i,h,127),h+=7);ae--;)P[N++]=ee}}var se=P.subarray(0,I),G=P.subarray(I);x=TS(se),S=TS(G),y=og(se,x,1),v=og(G,S,1)}else throw"invalid block type";else{var T=w8(h)+4,M=i[T-4]|i[T-3]<<8,R=T+M;if(R>n){if(o)throw"unexpected EOF";break}a&&u(p+M),e.set(i.subarray(T,R),p),t.b=p+=M,t.p=h=R*8;continue}if(h>E){if(o)throw"unexpected EOF";break}}a&&u(p+131072);for(var $=(1<<x)-1,le=(1<<S)-1,be=h;;be=h){var ee=y[AS(i,h)&$],Ae=ee>>>4;if(h+=ee&15,h>E){if(o)throw"unexpected EOF";break}if(!ee)throw"invalid length/literal";if(Ae<256)e[p++]=Ae;else if(Ae==256){be=h,y=null;break}else{var Y=Ae-254;if(Ae>264){var N=Ae-257,re=fR[N];Y=yo(i,h,(1<<re)-1)+mR[N],h+=re}var me=v[AS(i,h)&le],Te=me>>>4;if(!me)throw"invalid distance";h+=me&15;var G=S8[Te];if(Te>3){var re=dR[Te];G+=AS(i,h)&(1<<re)-1,h+=re}if(h>E){if(o)throw"unexpected EOF";break}a&&u(p+131072);for(var Ke=p+Y;p<Ke;p+=4)e[p]=e[p-G],e[p+1]=e[p+1-G],e[p+2]=e[p+2-G],e[p+3]=e[p+3-G];p=Ke}}t.l=y,t.p=be,t.b=p,y&&(d=1,t.m=x,t.d=v,t.n=S)}while(!d);return p==e.length?e:T8(e,0,p)},C8=new js(0),R8=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Ry(i,e){return A8((R8(i),i.subarray(2,-4)),e)}var N8=typeof TextDecoder<"u"&&new TextDecoder,D8=0;try{N8.decode(C8,{stream:!0}),D8=1}catch{}const I8=i=>i&&i.isCubeTexture;class L8 extends Ki{constructor(e,t){var n,a;const o=I8(e),d=((a=o?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?a:1024)/4,h=Math.floor(Math.log2(d)),p=Math.pow(2,h),y=3*Math.max(p,112),v=4*p,x=[o?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/y}`,`#define CUBEUV_TEXEL_HEIGHT ${1/v}`,`#define CUBEUV_MAX_MIP ${h}.0`],S=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,E=x.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${uR>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,C={map:{value:e},height:{value:t?.height||15},radius:{value:t?.radius||100}},T=new kg(1,16),M=new va({uniforms:C,fragmentShader:E,vertexShader:S,side:_o});super(T,M)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var U8=Object.defineProperty,O8=(i,e,t)=>e in i?U8(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,P8=(i,e,t)=>(O8(i,e+"",t),t);class z8{constructor(){P8(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const a=this._listeners[e];if(a!==void 0){const o=a.indexOf(t);o!==-1&&a.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const a=n.slice(0);for(let o=0,u=a.length;o<u;o++)a[o].call(this,e);e.target=null}}}var F8=Object.defineProperty,B8=(i,e,t)=>e in i?F8(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,an=(i,e,t)=>(B8(i,typeof e!="symbol"?e+"":e,t),t);const Ny=new zf,CT=new sl,k8=Math.cos(70*(Math.PI/180)),RT=(i,e)=>(i%e+e)%e;let V8=class extends z8{constructor(e,t){super(),an(this,"object"),an(this,"domElement"),an(this,"enabled",!0),an(this,"target",new Q),an(this,"minDistance",0),an(this,"maxDistance",1/0),an(this,"minZoom",0),an(this,"maxZoom",1/0),an(this,"minPolarAngle",0),an(this,"maxPolarAngle",Math.PI),an(this,"minAzimuthAngle",-1/0),an(this,"maxAzimuthAngle",1/0),an(this,"enableDamping",!1),an(this,"dampingFactor",.05),an(this,"enableZoom",!0),an(this,"zoomSpeed",1),an(this,"enableRotate",!0),an(this,"rotateSpeed",1),an(this,"enablePan",!0),an(this,"panSpeed",1),an(this,"screenSpacePanning",!0),an(this,"keyPanSpeed",7),an(this,"zoomToCursor",!1),an(this,"autoRotate",!1),an(this,"autoRotateSpeed",2),an(this,"reverseOrbit",!1),an(this,"reverseHorizontalOrbit",!1),an(this,"reverseVerticalOrbit",!1),an(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),an(this,"mouseButtons",{LEFT:gf.ROTATE,MIDDLE:gf.DOLLY,RIGHT:gf.PAN}),an(this,"touches",{ONE:vf.ROTATE,TWO:vf.DOLLY_PAN}),an(this,"target0"),an(this,"position0"),an(this,"zoom0"),an(this,"_domElementKeyEvents",null),an(this,"getPolarAngle"),an(this,"getAzimuthalAngle"),an(this,"setPolarAngle"),an(this,"setAzimuthalAngle"),an(this,"getDistance"),an(this,"getZoomScale"),an(this,"listenToKeyEvents"),an(this,"stopListenToKeyEvents"),an(this,"saveState"),an(this,"reset"),an(this,"update"),an(this,"connect"),an(this,"dispose"),an(this,"dollyIn"),an(this,"dollyOut"),an(this,"getScale"),an(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>y.phi,this.getAzimuthalAngle=()=>y.theta,this.setPolarAngle=ie=>{let we=RT(ie,2*Math.PI),tt=y.phi;tt<0&&(tt+=2*Math.PI),we<0&&(we+=2*Math.PI);let oe=Math.abs(we-tt);2*Math.PI-oe<oe&&(we<tt?we+=2*Math.PI:tt+=2*Math.PI),v.phi=we-tt,n.update()},this.setAzimuthalAngle=ie=>{let we=RT(ie,2*Math.PI),tt=y.theta;tt<0&&(tt+=2*Math.PI),we<0&&(we+=2*Math.PI);let oe=Math.abs(we-tt);2*Math.PI-oe<oe&&(we<tt?we+=2*Math.PI:tt+=2*Math.PI),v.theta=we-tt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ie=>{ie.addEventListener("keydown",Oe),this._domElementKeyEvents=ie},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Oe),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(a),n.update(),h=d.NONE},this.update=(()=>{const ie=new Q,we=new Q(0,1,0),tt=new Qr().setFromUnitVectors(e.up,we),oe=tt.clone().invert(),Me=new Q,et=new Qr,St=2*Math.PI;return function(){const _e=n.object.position;tt.setFromUnitVectors(e.up,we),oe.copy(tt).invert(),ie.copy(_e).sub(n.target),ie.applyQuaternion(tt),y.setFromVector3(ie),n.autoRotate&&h===d.NONE&&ae(te()),n.enableDamping?(y.theta+=v.theta*n.dampingFactor,y.phi+=v.phi*n.dampingFactor):(y.theta+=v.theta,y.phi+=v.phi);let ft=n.minAzimuthAngle,Nt=n.maxAzimuthAngle;isFinite(ft)&&isFinite(Nt)&&(ft<-Math.PI?ft+=St:ft>Math.PI&&(ft-=St),Nt<-Math.PI?Nt+=St:Nt>Math.PI&&(Nt-=St),ft<=Nt?y.theta=Math.max(ft,Math.min(Nt,y.theta)):y.theta=y.theta>(ft+Nt)/2?Math.max(ft,y.theta):Math.min(Nt,y.theta)),y.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,y.phi)),y.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(S,n.dampingFactor):n.target.add(S),n.zoomToCursor&&O||n.object.isOrthographicCamera?y.radius=me(y.radius):y.radius=me(y.radius*x),ie.setFromSpherical(y),ie.applyQuaternion(oe),_e.copy(n.target).add(ie),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(v.theta*=1-n.dampingFactor,v.phi*=1-n.dampingFactor,S.multiplyScalar(1-n.dampingFactor)):(v.set(0,0,0),S.set(0,0,0));let Kt=!1;if(n.zoomToCursor&&O){let cn=null;if(n.object instanceof dr&&n.object.isPerspectiveCamera){const gn=ie.length();cn=me(gn*x);const kn=gn-cn;n.object.position.addScaledVector(V,kn),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const gn=new Q(N.x,N.y,0);gn.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix(),Kt=!0;const kn=new Q(N.x,N.y,0);kn.unproject(n.object),n.object.position.sub(kn).add(gn),n.object.updateMatrixWorld(),cn=ie.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;cn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(cn).add(n.object.position):(Ny.origin.copy(n.object.position),Ny.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Ny.direction))<k8?e.lookAt(n.target):(CT.setFromNormalAndCoplanarPoint(n.object.up,n.target),Ny.intersectPlane(CT,n.target))))}else n.object instanceof fl&&n.object.isOrthographicCamera&&(Kt=x!==1,Kt&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix()));return x=1,O=!1,Kt||Me.distanceToSquared(n.object.position)>p||8*(1-et.dot(n.object.quaternion))>p?(n.dispatchEvent(a),Me.copy(n.object.position),et.copy(n.object.quaternion),Kt=!1,!0):!1}})(),this.connect=ie=>{n.domElement=ie,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Ft),n.domElement.addEventListener("pointerdown",Je),n.domElement.addEventListener("pointercancel",F),n.domElement.addEventListener("wheel",je)},this.dispose=()=>{var ie,we,tt,oe,Me,et;n.domElement&&(n.domElement.style.touchAction="auto"),(ie=n.domElement)==null||ie.removeEventListener("contextmenu",Ft),(we=n.domElement)==null||we.removeEventListener("pointerdown",Je),(tt=n.domElement)==null||tt.removeEventListener("pointercancel",F),(oe=n.domElement)==null||oe.removeEventListener("wheel",je),(Me=n.domElement)==null||Me.ownerDocument.removeEventListener("pointermove",Z),(et=n.domElement)==null||et.ownerDocument.removeEventListener("pointerup",F),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Oe)};const n=this,a={type:"change"},o={type:"start"},u={type:"end"},d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=d.NONE;const p=1e-6,y=new i1,v=new i1;let x=1;const S=new Q,E=new Ze,C=new Ze,T=new Ze,M=new Ze,R=new Ze,I=new Ze,L=new Ze,z=new Ze,P=new Ze,V=new Q,N=new Ze;let O=!1;const K=[],H={};function te(){return 2*Math.PI/60/60*n.autoRotateSpeed}function ee(){return Math.pow(.95,n.zoomSpeed)}function ae(ie){n.reverseOrbit||n.reverseHorizontalOrbit?v.theta+=ie:v.theta-=ie}function se(ie){n.reverseOrbit||n.reverseVerticalOrbit?v.phi+=ie:v.phi-=ie}const G=(()=>{const ie=new Q;return function(tt,oe){ie.setFromMatrixColumn(oe,0),ie.multiplyScalar(-tt),S.add(ie)}})(),$=(()=>{const ie=new Q;return function(tt,oe){n.screenSpacePanning===!0?ie.setFromMatrixColumn(oe,1):(ie.setFromMatrixColumn(oe,0),ie.crossVectors(n.object.up,ie)),ie.multiplyScalar(tt),S.add(ie)}})(),le=(()=>{const ie=new Q;return function(tt,oe){const Me=n.domElement;if(Me&&n.object instanceof dr&&n.object.isPerspectiveCamera){const et=n.object.position;ie.copy(et).sub(n.target);let St=ie.length();St*=Math.tan(n.object.fov/2*Math.PI/180),G(2*tt*St/Me.clientHeight,n.object.matrix),$(2*oe*St/Me.clientHeight,n.object.matrix)}else Me&&n.object instanceof fl&&n.object.isOrthographicCamera?(G(tt*(n.object.right-n.object.left)/n.object.zoom/Me.clientWidth,n.object.matrix),$(oe*(n.object.top-n.object.bottom)/n.object.zoom/Me.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function be(ie){n.object instanceof dr&&n.object.isPerspectiveCamera||n.object instanceof fl&&n.object.isOrthographicCamera?x=ie:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Ae(ie){be(x/ie)}function Y(ie){be(x*ie)}function re(ie){if(!n.zoomToCursor||!n.domElement)return;O=!0;const we=n.domElement.getBoundingClientRect(),tt=ie.clientX-we.left,oe=ie.clientY-we.top,Me=we.width,et=we.height;N.x=tt/Me*2-1,N.y=-(oe/et)*2+1,V.set(N.x,N.y,1).unproject(n.object).sub(n.object.position).normalize()}function me(ie){return Math.max(n.minDistance,Math.min(n.maxDistance,ie))}function Te(ie){E.set(ie.clientX,ie.clientY)}function Ke(ie){re(ie),L.set(ie.clientX,ie.clientY)}function he(ie){M.set(ie.clientX,ie.clientY)}function De(ie){C.set(ie.clientX,ie.clientY),T.subVectors(C,E).multiplyScalar(n.rotateSpeed);const we=n.domElement;we&&(ae(2*Math.PI*T.x/we.clientHeight),se(2*Math.PI*T.y/we.clientHeight)),E.copy(C),n.update()}function ze(ie){z.set(ie.clientX,ie.clientY),P.subVectors(z,L),P.y>0?Ae(ee()):P.y<0&&Y(ee()),L.copy(z),n.update()}function pt(ie){R.set(ie.clientX,ie.clientY),I.subVectors(R,M).multiplyScalar(n.panSpeed),le(I.x,I.y),M.copy(R),n.update()}function It(ie){re(ie),ie.deltaY<0?Y(ee()):ie.deltaY>0&&Ae(ee()),n.update()}function zt(ie){let we=!1;switch(ie.code){case n.keys.UP:le(0,n.keyPanSpeed),we=!0;break;case n.keys.BOTTOM:le(0,-n.keyPanSpeed),we=!0;break;case n.keys.LEFT:le(n.keyPanSpeed,0),we=!0;break;case n.keys.RIGHT:le(-n.keyPanSpeed,0),we=!0;break}we&&(ie.preventDefault(),n.update())}function Jt(){if(K.length==1)E.set(K[0].pageX,K[0].pageY);else{const ie=.5*(K[0].pageX+K[1].pageX),we=.5*(K[0].pageY+K[1].pageY);E.set(ie,we)}}function jt(){if(K.length==1)M.set(K[0].pageX,K[0].pageY);else{const ie=.5*(K[0].pageX+K[1].pageX),we=.5*(K[0].pageY+K[1].pageY);M.set(ie,we)}}function He(){const ie=K[0].pageX-K[1].pageX,we=K[0].pageY-K[1].pageY,tt=Math.sqrt(ie*ie+we*we);L.set(0,tt)}function nt(){n.enableZoom&&He(),n.enablePan&&jt()}function Xe(){n.enableZoom&&He(),n.enableRotate&&Jt()}function mt(ie){if(K.length==1)C.set(ie.pageX,ie.pageY);else{const tt=Tt(ie),oe=.5*(ie.pageX+tt.x),Me=.5*(ie.pageY+tt.y);C.set(oe,Me)}T.subVectors(C,E).multiplyScalar(n.rotateSpeed);const we=n.domElement;we&&(ae(2*Math.PI*T.x/we.clientHeight),se(2*Math.PI*T.y/we.clientHeight)),E.copy(C)}function ne(ie){if(K.length==1)R.set(ie.pageX,ie.pageY);else{const we=Tt(ie),tt=.5*(ie.pageX+we.x),oe=.5*(ie.pageY+we.y);R.set(tt,oe)}I.subVectors(R,M).multiplyScalar(n.panSpeed),le(I.x,I.y),M.copy(R)}function Lt(ie){const we=Tt(ie),tt=ie.pageX-we.x,oe=ie.pageY-we.y,Me=Math.sqrt(tt*tt+oe*oe);z.set(0,Me),P.set(0,Math.pow(z.y/L.y,n.zoomSpeed)),Ae(P.y),L.copy(z)}function wt(ie){n.enableZoom&&Lt(ie),n.enablePan&&ne(ie)}function kt(ie){n.enableZoom&&Lt(ie),n.enableRotate&&mt(ie)}function Je(ie){var we,tt;n.enabled!==!1&&(K.length===0&&((we=n.domElement)==null||we.ownerDocument.addEventListener("pointermove",Z),(tt=n.domElement)==null||tt.ownerDocument.addEventListener("pointerup",F)),Bt(ie),ie.pointerType==="touch"?Mt(ie):ye(ie))}function Z(ie){n.enabled!==!1&&(ie.pointerType==="touch"?ct(ie):Ue(ie))}function F(ie){var we,tt,oe;Qe(ie),K.length===0&&((we=n.domElement)==null||we.releasePointerCapture(ie.pointerId),(tt=n.domElement)==null||tt.ownerDocument.removeEventListener("pointermove",Z),(oe=n.domElement)==null||oe.ownerDocument.removeEventListener("pointerup",F)),n.dispatchEvent(u),h=d.NONE}function ye(ie){let we;switch(ie.button){case 0:we=n.mouseButtons.LEFT;break;case 1:we=n.mouseButtons.MIDDLE;break;case 2:we=n.mouseButtons.RIGHT;break;default:we=-1}switch(we){case gf.DOLLY:if(n.enableZoom===!1)return;Ke(ie),h=d.DOLLY;break;case gf.ROTATE:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(n.enablePan===!1)return;he(ie),h=d.PAN}else{if(n.enableRotate===!1)return;Te(ie),h=d.ROTATE}break;case gf.PAN:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(n.enableRotate===!1)return;Te(ie),h=d.ROTATE}else{if(n.enablePan===!1)return;he(ie),h=d.PAN}break;default:h=d.NONE}h!==d.NONE&&n.dispatchEvent(o)}function Ue(ie){if(n.enabled!==!1)switch(h){case d.ROTATE:if(n.enableRotate===!1)return;De(ie);break;case d.DOLLY:if(n.enableZoom===!1)return;ze(ie);break;case d.PAN:if(n.enablePan===!1)return;pt(ie);break}}function je(ie){n.enabled===!1||n.enableZoom===!1||h!==d.NONE&&h!==d.ROTATE||(ie.preventDefault(),n.dispatchEvent(o),It(ie),n.dispatchEvent(u))}function Oe(ie){n.enabled===!1||n.enablePan===!1||zt(ie)}function Mt(ie){switch(qe(ie),K.length){case 1:switch(n.touches.ONE){case vf.ROTATE:if(n.enableRotate===!1)return;Jt(),h=d.TOUCH_ROTATE;break;case vf.PAN:if(n.enablePan===!1)return;jt(),h=d.TOUCH_PAN;break;default:h=d.NONE}break;case 2:switch(n.touches.TWO){case vf.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;nt(),h=d.TOUCH_DOLLY_PAN;break;case vf.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Xe(),h=d.TOUCH_DOLLY_ROTATE;break;default:h=d.NONE}break;default:h=d.NONE}h!==d.NONE&&n.dispatchEvent(o)}function ct(ie){switch(qe(ie),h){case d.TOUCH_ROTATE:if(n.enableRotate===!1)return;mt(ie),n.update();break;case d.TOUCH_PAN:if(n.enablePan===!1)return;ne(ie),n.update();break;case d.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;wt(ie),n.update();break;case d.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;kt(ie),n.update();break;default:h=d.NONE}}function Ft(ie){n.enabled!==!1&&ie.preventDefault()}function Bt(ie){K.push(ie)}function Qe(ie){delete H[ie.pointerId];for(let we=0;we<K.length;we++)if(K[we].pointerId==ie.pointerId){K.splice(we,1);return}}function qe(ie){let we=H[ie.pointerId];we===void 0&&(we=new Ze,H[ie.pointerId]=we),we.set(ie.pageX,ie.pageY)}function Tt(ie){const we=ie.pointerId===K[0].pointerId?K[1]:K[0];return H[we.pointerId]}this.dollyIn=(ie=ee())=>{Y(ie),n.update()},this.dollyOut=(ie=ee())=>{Ae(ie),n.update()},this.getScale=()=>x,this.setScale=ie=>{be(ie),n.update()},this.getZoomScale=()=>ee(),t!==void 0&&this.connect(t),this.update()}};class H8 extends nM{constructor(e){super(e),this.type=ir}parse(e){const u=function(N,O){switch(N){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(O||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(O||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(O||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(O||""))}},v=function(N,O,K){O=O||1024;let te=N.pos,ee=-1,ae=0,se="",G=String.fromCharCode.apply(null,new Uint16Array(N.subarray(te,te+128)));for(;0>(ee=G.indexOf(`
`))&&ae<O&&te<N.byteLength;)se+=G,ae+=G.length,te+=128,G+=String.fromCharCode.apply(null,new Uint16Array(N.subarray(te,te+128)));return-1<ee?(N.pos+=ae+ee+1,se+G.slice(0,ee)):!1},x=function(N){const O=/^#\?(\S+)/,K=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,H=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,te=/^\s*FORMAT=(\S+)\s*$/,ee=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,ae={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let se,G;for((N.pos>=N.byteLength||!(se=v(N)))&&u(1,"no header found"),(G=se.match(O))||u(3,"bad initial token"),ae.valid|=1,ae.programtype=G[1],ae.string+=se+`
`;se=v(N),se!==!1;){if(ae.string+=se+`
`,se.charAt(0)==="#"){ae.comments+=se+`
`;continue}if((G=se.match(K))&&(ae.gamma=parseFloat(G[1])),(G=se.match(H))&&(ae.exposure=parseFloat(G[1])),(G=se.match(te))&&(ae.valid|=2,ae.format=G[1]),(G=se.match(ee))&&(ae.valid|=4,ae.height=parseInt(G[1],10),ae.width=parseInt(G[2],10)),ae.valid&2&&ae.valid&4)break}return ae.valid&2||u(3,"missing format specifier"),ae.valid&4||u(3,"missing image size specifier"),ae},S=function(N,O,K){const H=O;if(H<8||H>32767||N[0]!==2||N[1]!==2||N[2]&128)return new Uint8Array(N);H!==(N[2]<<8|N[3])&&u(3,"wrong scanline width");const te=new Uint8Array(4*O*K);te.length||u(4,"unable to allocate buffer space");let ee=0,ae=0;const se=4*H,G=new Uint8Array(4),$=new Uint8Array(se);let le=K;for(;le>0&&ae<N.byteLength;){ae+4>N.byteLength&&u(1),G[0]=N[ae++],G[1]=N[ae++],G[2]=N[ae++],G[3]=N[ae++],(G[0]!=2||G[1]!=2||(G[2]<<8|G[3])!=H)&&u(3,"bad rgbe scanline format");let be=0,Ae;for(;be<se&&ae<N.byteLength;){Ae=N[ae++];const re=Ae>128;if(re&&(Ae-=128),(Ae===0||be+Ae>se)&&u(3,"bad scanline data"),re){const me=N[ae++];for(let Te=0;Te<Ae;Te++)$[be++]=me}else $.set(N.subarray(ae,ae+Ae),be),be+=Ae,ae+=Ae}const Y=H;for(let re=0;re<Y;re++){let me=0;te[ee]=$[re+me],me+=H,te[ee+1]=$[re+me],me+=H,te[ee+2]=$[re+me],me+=H,te[ee+3]=$[re+me],ee+=4}le--}return te},E=function(N,O,K,H){const te=N[O+3],ee=Math.pow(2,te-128)/255;K[H+0]=N[O+0]*ee,K[H+1]=N[O+1]*ee,K[H+2]=N[O+2]*ee,K[H+3]=1},C=function(N,O,K,H){const te=N[O+3],ee=Math.pow(2,te-128)/255;K[H+0]=Mf.toHalfFloat(Math.min(N[O+0]*ee,65504)),K[H+1]=Mf.toHalfFloat(Math.min(N[O+1]*ee,65504)),K[H+2]=Mf.toHalfFloat(Math.min(N[O+2]*ee,65504)),K[H+3]=Mf.toHalfFloat(1)},T=new Uint8Array(e);T.pos=0;const M=x(T),R=M.width,I=M.height,L=S(T.subarray(T.pos),R,I);let z,P,V;switch(this.type){case Vi:V=L.length/4;const N=new Float32Array(V*4);for(let K=0;K<V;K++)E(L,K*4,N,K*4);z=N,P=Vi;break;case ir:V=L.length/4;const O=new Uint16Array(V*4);for(let K=0;K<V;K++)C(L,K*4,O,K*4);z=O,P=ir;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:R,height:I,data:z,header:M.string,gamma:M.gamma,exposure:M.exposure,type:P}}setDataType(e){return this.type=e,this}load(e,t,n,a){function o(u,d){switch(u.type){case Vi:case ir:"colorSpace"in u?u.colorSpace="srgb-linear":u.encoding=3e3,u.minFilter=jn,u.magFilter=jn,u.generateMipmaps=!1,u.flipY=!0;break}t&&t(u,d)}return super.load(e,o,n,a)}}const Gm=uR>=152;class G8 extends nM{constructor(e){super(e),this.type=ir}parse(e){const O=Math.pow(2.7182818,2.2);function K(B,q){for(var ce=0,Ce=0;Ce<65536;++Ce)(Ce==0||B[Ce>>3]&1<<(Ce&7))&&(q[ce++]=Ce);for(var Be=ce-1;ce<65536;)q[ce++]=0;return Be}function H(B){for(var q=0;q<16384;q++)B[q]={},B[q].len=0,B[q].lit=0,B[q].p=null}const te={l:0,c:0,lc:0};function ee(B,q,ce,Ce,Be){for(;ce<B;)q=q<<8|Tt(Ce,Be),ce+=8;ce-=B,te.l=q>>ce&(1<<B)-1,te.c=q,te.lc=ce}const ae=new Array(59);function se(B){for(var q=0;q<=58;++q)ae[q]=0;for(var q=0;q<65537;++q)ae[B[q]]+=1;for(var ce=0,q=58;q>0;--q){var Ce=ce+ae[q]>>1;ae[q]=ce,ce=Ce}for(var q=0;q<65537;++q){var Be=B[q];Be>0&&(B[q]=Be|ae[Be]++<<6)}}function G(B,q,ce,Ce,Be,Ve,dt){for(var st=ce,yt=0,vt=0;Be<=Ve;Be++){if(st.value-ce.value>Ce)return!1;ee(6,yt,vt,B,st);var bt=te.l;if(yt=te.c,vt=te.lc,dt[Be]=bt,bt==63){if(st.value-ce.value>Ce)throw"Something wrong with hufUnpackEncTable";ee(8,yt,vt,B,st);var k=te.l+6;if(yt=te.c,vt=te.lc,Be+k>Ve+1)throw"Something wrong with hufUnpackEncTable";for(;k--;)dt[Be++]=0;Be--}else if(bt>=59){var k=bt-59+2;if(Be+k>Ve+1)throw"Something wrong with hufUnpackEncTable";for(;k--;)dt[Be++]=0;Be--}}se(dt)}function $(B){return B&63}function le(B){return B>>6}function be(B,q,ce,Ce){for(;q<=ce;q++){var Be=le(B[q]),Ve=$(B[q]);if(Be>>Ve)throw"Invalid table entry";if(Ve>14){var dt=Ce[Be>>Ve-14];if(dt.len)throw"Invalid table entry";if(dt.lit++,dt.p){var st=dt.p;dt.p=new Array(dt.lit);for(var yt=0;yt<dt.lit-1;++yt)dt.p[yt]=st[yt]}else dt.p=new Array(1);dt.p[dt.lit-1]=q}else if(Ve)for(var vt=0,yt=1<<14-Ve;yt>0;yt--){var dt=Ce[(Be<<14-Ve)+vt];if(dt.len||dt.p)throw"Invalid table entry";dt.len=Ve,dt.lit=q,vt++}}return!0}const Ae={c:0,lc:0};function Y(B,q,ce,Ce){B=B<<8|Tt(ce,Ce),q+=8,Ae.c=B,Ae.lc=q}const re={c:0,lc:0};function me(B,q,ce,Ce,Be,Ve,dt,st,yt,vt){if(B==q){Ce<8&&(Y(ce,Ce,Be,dt),ce=Ae.c,Ce=Ae.lc),Ce-=8;var bt=ce>>Ce,bt=new Uint8Array([bt])[0];if(yt.value+bt>vt)return!1;for(var k=st[yt.value-1];bt-- >0;)st[yt.value++]=k}else if(yt.value<vt)st[yt.value++]=B;else return!1;re.c=ce,re.lc=Ce}function Te(B){return B&65535}function Ke(B){var q=Te(B);return q>32767?q-65536:q}const he={a:0,b:0};function De(B,q){var ce=Ke(B),Ce=Ke(q),Be=Ce,Ve=ce+(Be&1)+(Be>>1),dt=Ve,st=Ve-Be;he.a=dt,he.b=st}function ze(B,q){var ce=Te(B),Ce=Te(q),Be=ce-(Ce>>1)&65535,Ve=Ce+Be-32768&65535;he.a=Ve,he.b=Be}function pt(B,q,ce,Ce,Be,Ve,dt){for(var st=dt<16384,yt=ce>Be?Be:ce,vt=1,bt;vt<=yt;)vt<<=1;for(vt>>=1,bt=vt,vt>>=1;vt>=1;){for(var k=0,fe=k+Ve*(Be-bt),ge=Ve*vt,pe=Ve*bt,ve=Ce*vt,Ge=Ce*bt,it,at,lt,Ct;k<=fe;k+=pe){for(var Dt=k,$t=k+Ce*(ce-bt);Dt<=$t;Dt+=Ge){var gt=Dt+ve,qt=Dt+ge,On=qt+ve;st?(De(B[Dt+q],B[qt+q]),it=he.a,lt=he.b,De(B[gt+q],B[On+q]),at=he.a,Ct=he.b,De(it,at),B[Dt+q]=he.a,B[gt+q]=he.b,De(lt,Ct),B[qt+q]=he.a,B[On+q]=he.b):(ze(B[Dt+q],B[qt+q]),it=he.a,lt=he.b,ze(B[gt+q],B[On+q]),at=he.a,Ct=he.b,ze(it,at),B[Dt+q]=he.a,B[gt+q]=he.b,ze(lt,Ct),B[qt+q]=he.a,B[On+q]=he.b)}if(ce&vt){var qt=Dt+ge;st?De(B[Dt+q],B[qt+q]):ze(B[Dt+q],B[qt+q]),it=he.a,B[qt+q]=he.b,B[Dt+q]=it}}if(Be&vt)for(var Dt=k,$t=k+Ce*(ce-bt);Dt<=$t;Dt+=Ge){var gt=Dt+ve;st?De(B[Dt+q],B[gt+q]):ze(B[Dt+q],B[gt+q]),it=he.a,B[gt+q]=he.b,B[Dt+q]=it}bt=vt,vt>>=1}return k}function It(B,q,ce,Ce,Be,Ve,dt,st,yt,vt){for(var bt=0,k=0,fe=st,ge=Math.trunc(Be.value+(Ve+7)/8);Be.value<ge;)for(Y(bt,k,ce,Be),bt=Ae.c,k=Ae.lc;k>=14;){var pe=bt>>k-14&16383,ve=q[pe];if(ve.len)k-=ve.len,me(ve.lit,dt,bt,k,ce,Ce,Be,yt,vt,fe),bt=re.c,k=re.lc;else{if(!ve.p)throw"hufDecode issues";var Ge;for(Ge=0;Ge<ve.lit;Ge++){for(var it=$(B[ve.p[Ge]]);k<it&&Be.value<ge;)Y(bt,k,ce,Be),bt=Ae.c,k=Ae.lc;if(k>=it&&le(B[ve.p[Ge]])==(bt>>k-it&(1<<it)-1)){k-=it,me(ve.p[Ge],dt,bt,k,ce,Ce,Be,yt,vt,fe),bt=re.c,k=re.lc;break}}if(Ge==ve.lit)throw"hufDecode issues"}}var at=8-Ve&7;for(bt>>=at,k-=at;k>0;){var ve=q[bt<<14-k&16383];if(ve.len)k-=ve.len,me(ve.lit,dt,bt,k,ce,Ce,Be,yt,vt,fe),bt=re.c,k=re.lc;else throw"hufDecode issues"}return!0}function zt(B,q,ce,Ce,Be,Ve){var dt={value:0},st=ce.value,yt=qe(q,ce),vt=qe(q,ce);ce.value+=4;var bt=qe(q,ce);if(ce.value+=4,yt<0||yt>=65537||vt<0||vt>=65537)throw"Something wrong with HUF_ENCSIZE";var k=new Array(65537),fe=new Array(16384);H(fe);var ge=Ce-(ce.value-st);if(G(B,q,ce,ge,yt,vt,k),bt>8*(Ce-(ce.value-st)))throw"Something wrong with hufUncompress";be(k,yt,vt,fe),It(k,fe,B,q,ce,bt,vt,Ve,Be,dt)}function Jt(B,q,ce){for(var Ce=0;Ce<ce;++Ce)q[Ce]=B[q[Ce]]}function jt(B){for(var q=1;q<B.length;q++){var ce=B[q-1]+B[q]-128;B[q]=ce}}function He(B,q){for(var ce=0,Ce=Math.floor((B.length+1)/2),Be=0,Ve=B.length-1;!(Be>Ve||(q[Be++]=B[ce++],Be>Ve));)q[Be++]=B[Ce++]}function nt(B){for(var q=B.byteLength,ce=new Array,Ce=0,Be=new DataView(B);q>0;){var Ve=Be.getInt8(Ce++);if(Ve<0){var dt=-Ve;q-=dt+1;for(var st=0;st<dt;st++)ce.push(Be.getUint8(Ce++))}else{var dt=Ve;q-=2;for(var yt=Be.getUint8(Ce++),st=0;st<dt+1;st++)ce.push(yt)}}return ce}function Xe(B,q,ce,Ce,Be,Ve){var gt=new DataView(Ve.buffer),dt=ce[B.idx[0]].width,st=ce[B.idx[0]].height,yt=3,vt=Math.floor(dt/8),bt=Math.ceil(dt/8),k=Math.ceil(st/8),fe=dt-(bt-1)*8,ge=st-(k-1)*8,pe={value:0},ve=new Array(yt),Ge=new Array(yt),it=new Array(yt),at=new Array(yt),lt=new Array(yt);for(let Xt=0;Xt<yt;++Xt)lt[Xt]=q[B.idx[Xt]],ve[Xt]=Xt<1?0:ve[Xt-1]+bt*k,Ge[Xt]=new Float32Array(64),it[Xt]=new Uint16Array(64),at[Xt]=new Uint16Array(bt*64);for(let Xt=0;Xt<k;++Xt){var Ct=8;Xt==k-1&&(Ct=ge);var Dt=8;for(let pn=0;pn<bt;++pn){pn==bt-1&&(Dt=fe);for(let At=0;At<yt;++At)it[At].fill(0),it[At][0]=Be[ve[At]++],mt(pe,Ce,it[At]),ne(it[At],Ge[At]),Lt(Ge[At]);wt(Ge);for(let At=0;At<yt;++At)kt(Ge[At],at[At],pn*64)}let ut=0;for(let pn=0;pn<yt;++pn){const At=ce[B.idx[pn]].type;for(let Kn=8*Xt;Kn<8*Xt+Ct;++Kn){ut=lt[pn][Kn];for(let Ei=0;Ei<vt;++Ei){const Wn=Ei*64+(Kn&7)*8;gt.setUint16(ut+0*At,at[pn][Wn+0],!0),gt.setUint16(ut+2*At,at[pn][Wn+1],!0),gt.setUint16(ut+4*At,at[pn][Wn+2],!0),gt.setUint16(ut+6*At,at[pn][Wn+3],!0),gt.setUint16(ut+8*At,at[pn][Wn+4],!0),gt.setUint16(ut+10*At,at[pn][Wn+5],!0),gt.setUint16(ut+12*At,at[pn][Wn+6],!0),gt.setUint16(ut+14*At,at[pn][Wn+7],!0),ut+=16*At}}if(vt!=bt)for(let Kn=8*Xt;Kn<8*Xt+Ct;++Kn){const Ei=lt[pn][Kn]+8*vt*2*At,Wn=vt*64+(Kn&7)*8;for(let mi=0;mi<Dt;++mi)gt.setUint16(Ei+mi*2*At,at[pn][Wn+mi],!0)}}}for(var $t=new Uint16Array(dt),gt=new DataView(Ve.buffer),qt=0;qt<yt;++qt){ce[B.idx[qt]].decoded=!0;var On=ce[B.idx[qt]].type;if(ce[qt].type==2)for(var qn=0;qn<st;++qn){const Xt=lt[qt][qn];for(var un=0;un<dt;++un)$t[un]=gt.getUint16(Xt+un*2*On,!0);for(var un=0;un<dt;++un)gt.setFloat32(Xt+un*2*On,Me($t[un]),!0)}}}function mt(B,q,ce){for(var Ce,Be=1;Be<64;)Ce=q[B.value],Ce==65280?Be=64:Ce>>8==255?Be+=Ce&255:(ce[Be]=Ce,Be++),B.value++}function ne(B,q){q[0]=Me(B[0]),q[1]=Me(B[1]),q[2]=Me(B[5]),q[3]=Me(B[6]),q[4]=Me(B[14]),q[5]=Me(B[15]),q[6]=Me(B[27]),q[7]=Me(B[28]),q[8]=Me(B[2]),q[9]=Me(B[4]),q[10]=Me(B[7]),q[11]=Me(B[13]),q[12]=Me(B[16]),q[13]=Me(B[26]),q[14]=Me(B[29]),q[15]=Me(B[42]),q[16]=Me(B[3]),q[17]=Me(B[8]),q[18]=Me(B[12]),q[19]=Me(B[17]),q[20]=Me(B[25]),q[21]=Me(B[30]),q[22]=Me(B[41]),q[23]=Me(B[43]),q[24]=Me(B[9]),q[25]=Me(B[11]),q[26]=Me(B[18]),q[27]=Me(B[24]),q[28]=Me(B[31]),q[29]=Me(B[40]),q[30]=Me(B[44]),q[31]=Me(B[53]),q[32]=Me(B[10]),q[33]=Me(B[19]),q[34]=Me(B[23]),q[35]=Me(B[32]),q[36]=Me(B[39]),q[37]=Me(B[45]),q[38]=Me(B[52]),q[39]=Me(B[54]),q[40]=Me(B[20]),q[41]=Me(B[22]),q[42]=Me(B[33]),q[43]=Me(B[38]),q[44]=Me(B[46]),q[45]=Me(B[51]),q[46]=Me(B[55]),q[47]=Me(B[60]),q[48]=Me(B[21]),q[49]=Me(B[34]),q[50]=Me(B[37]),q[51]=Me(B[47]),q[52]=Me(B[50]),q[53]=Me(B[56]),q[54]=Me(B[59]),q[55]=Me(B[61]),q[56]=Me(B[35]),q[57]=Me(B[36]),q[58]=Me(B[48]),q[59]=Me(B[49]),q[60]=Me(B[57]),q[61]=Me(B[58]),q[62]=Me(B[62]),q[63]=Me(B[63])}function Lt(B){const q=.5*Math.cos(.7853975),ce=.5*Math.cos(3.14159/16),Ce=.5*Math.cos(3.14159/8),Be=.5*Math.cos(3*3.14159/16),Ve=.5*Math.cos(5*3.14159/16),dt=.5*Math.cos(3*3.14159/8),st=.5*Math.cos(7*3.14159/16);for(var yt=new Array(4),vt=new Array(4),bt=new Array(4),k=new Array(4),fe=0;fe<8;++fe){var ge=fe*8;yt[0]=Ce*B[ge+2],yt[1]=dt*B[ge+2],yt[2]=Ce*B[ge+6],yt[3]=dt*B[ge+6],vt[0]=ce*B[ge+1]+Be*B[ge+3]+Ve*B[ge+5]+st*B[ge+7],vt[1]=Be*B[ge+1]-st*B[ge+3]-ce*B[ge+5]-Ve*B[ge+7],vt[2]=Ve*B[ge+1]-ce*B[ge+3]+st*B[ge+5]+Be*B[ge+7],vt[3]=st*B[ge+1]-Ve*B[ge+3]+Be*B[ge+5]-ce*B[ge+7],bt[0]=q*(B[ge+0]+B[ge+4]),bt[3]=q*(B[ge+0]-B[ge+4]),bt[1]=yt[0]+yt[3],bt[2]=yt[1]-yt[2],k[0]=bt[0]+bt[1],k[1]=bt[3]+bt[2],k[2]=bt[3]-bt[2],k[3]=bt[0]-bt[1],B[ge+0]=k[0]+vt[0],B[ge+1]=k[1]+vt[1],B[ge+2]=k[2]+vt[2],B[ge+3]=k[3]+vt[3],B[ge+4]=k[3]-vt[3],B[ge+5]=k[2]-vt[2],B[ge+6]=k[1]-vt[1],B[ge+7]=k[0]-vt[0]}for(var pe=0;pe<8;++pe)yt[0]=Ce*B[16+pe],yt[1]=dt*B[16+pe],yt[2]=Ce*B[48+pe],yt[3]=dt*B[48+pe],vt[0]=ce*B[8+pe]+Be*B[24+pe]+Ve*B[40+pe]+st*B[56+pe],vt[1]=Be*B[8+pe]-st*B[24+pe]-ce*B[40+pe]-Ve*B[56+pe],vt[2]=Ve*B[8+pe]-ce*B[24+pe]+st*B[40+pe]+Be*B[56+pe],vt[3]=st*B[8+pe]-Ve*B[24+pe]+Be*B[40+pe]-ce*B[56+pe],bt[0]=q*(B[pe]+B[32+pe]),bt[3]=q*(B[pe]-B[32+pe]),bt[1]=yt[0]+yt[3],bt[2]=yt[1]-yt[2],k[0]=bt[0]+bt[1],k[1]=bt[3]+bt[2],k[2]=bt[3]-bt[2],k[3]=bt[0]-bt[1],B[0+pe]=k[0]+vt[0],B[8+pe]=k[1]+vt[1],B[16+pe]=k[2]+vt[2],B[24+pe]=k[3]+vt[3],B[32+pe]=k[3]-vt[3],B[40+pe]=k[2]-vt[2],B[48+pe]=k[1]-vt[1],B[56+pe]=k[0]-vt[0]}function wt(B){for(var q=0;q<64;++q){var ce=B[0][q],Ce=B[1][q],Be=B[2][q];B[0][q]=ce+1.5747*Be,B[1][q]=ce-.1873*Ce-.4682*Be,B[2][q]=ce+1.8556*Ce}}function kt(B,q,ce){for(var Ce=0;Ce<64;++Ce)q[ce+Ce]=Mf.toHalfFloat(Je(B[Ce]))}function Je(B){return B<=1?Math.sign(B)*Math.pow(Math.abs(B),2.2):Math.sign(B)*Math.pow(O,Math.abs(B)-1)}function Z(B){return new DataView(B.array.buffer,B.offset.value,B.size)}function F(B){var q=B.viewer.buffer.slice(B.offset.value,B.offset.value+B.size),ce=new Uint8Array(nt(q)),Ce=new Uint8Array(ce.length);return jt(ce),He(ce,Ce),new DataView(Ce.buffer)}function ye(B){var q=B.array.slice(B.offset.value,B.offset.value+B.size),ce=Ry(q),Ce=new Uint8Array(ce.length);return jt(ce),He(ce,Ce),new DataView(Ce.buffer)}function Ue(B){for(var q=B.viewer,ce={value:B.offset.value},Ce=new Uint16Array(B.width*B.scanlineBlockSize*(B.channels*B.type)),Be=new Uint8Array(8192),Ve=0,dt=new Array(B.channels),st=0;st<B.channels;st++)dt[st]={},dt[st].start=Ve,dt[st].end=dt[st].start,dt[st].nx=B.width,dt[st].ny=B.lines,dt[st].size=B.type,Ve+=dt[st].nx*dt[st].ny*dt[st].size;var yt=et(q,ce),vt=et(q,ce);if(vt>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(yt<=vt)for(var st=0;st<vt-yt+1;st++)Be[st+yt]=ie(q,ce);var bt=new Uint16Array(65536),k=K(Be,bt),fe=qe(q,ce);zt(B.array,q,ce,fe,Ce,Ve);for(var st=0;st<B.channels;++st)for(var ge=dt[st],pe=0;pe<dt[st].size;++pe)pt(Ce,ge.start+pe,ge.nx,ge.size,ge.ny,ge.nx*ge.size,k);Jt(bt,Ce,Ve);for(var ve=0,Ge=new Uint8Array(Ce.buffer.byteLength),it=0;it<B.lines;it++)for(var at=0;at<B.channels;at++){var ge=dt[at],lt=ge.nx*ge.size,Ct=new Uint8Array(Ce.buffer,ge.end*2,lt*2);Ge.set(Ct,ve),ve+=lt*2,ge.end+=lt}return new DataView(Ge.buffer)}function je(B){var q=B.array.slice(B.offset.value,B.offset.value+B.size),ce=Ry(q);const Ce=B.lines*B.channels*B.width,Be=B.type==1?new Uint16Array(Ce):new Uint32Array(Ce);let Ve=0,dt=0;const st=new Array(4);for(let yt=0;yt<B.lines;yt++)for(let vt=0;vt<B.channels;vt++){let bt=0;switch(B.type){case 1:st[0]=Ve,st[1]=st[0]+B.width,Ve=st[1]+B.width;for(let k=0;k<B.width;++k){const fe=ce[st[0]++]<<8|ce[st[1]++];bt+=fe,Be[dt]=bt,dt++}break;case 2:st[0]=Ve,st[1]=st[0]+B.width,st[2]=st[1]+B.width,Ve=st[2]+B.width;for(let k=0;k<B.width;++k){const fe=ce[st[0]++]<<24|ce[st[1]++]<<16|ce[st[2]++]<<8;bt+=fe,Be[dt]=bt,dt++}break}}return new DataView(Be.buffer)}function Oe(B){var q=B.viewer,ce={value:B.offset.value},Ce=new Uint8Array(B.width*B.lines*(B.channels*B.type*2)),Be={version:we(q,ce),unknownUncompressedSize:we(q,ce),unknownCompressedSize:we(q,ce),acCompressedSize:we(q,ce),dcCompressedSize:we(q,ce),rleCompressedSize:we(q,ce),rleUncompressedSize:we(q,ce),rleRawSize:we(q,ce),totalAcUncompressedCount:we(q,ce),totalDcUncompressedCount:we(q,ce),acCompression:we(q,ce)};if(Be.version<2)throw"EXRLoader.parse: "+ar.compression+" version "+Be.version+" is unsupported";for(var Ve=new Array,dt=et(q,ce)-2;dt>0;){var st=Mt(q.buffer,ce),yt=ie(q,ce),vt=yt>>2&3,bt=(yt>>4)-1,k=new Int8Array([bt])[0],fe=ie(q,ce);Ve.push({name:st,index:k,type:fe,compression:vt}),dt-=st.length+3}for(var ge=ar.channels,pe=new Array(B.channels),ve=0;ve<B.channels;++ve){var Ge=pe[ve]={},it=ge[ve];Ge.name=it.name,Ge.compression=0,Ge.decoded=!1,Ge.type=it.pixelType,Ge.pLinear=it.pLinear,Ge.width=B.width,Ge.height=B.lines}for(var at={idx:new Array(3)},lt=0;lt<B.channels;++lt)for(var Ge=pe[lt],ve=0;ve<Ve.length;++ve){var Ct=Ve[ve];Ge.name==Ct.name&&(Ge.compression=Ct.compression,Ct.index>=0&&(at.idx[Ct.index]=lt),Ge.offset=lt)}if(Be.acCompressedSize>0)switch(Be.acCompression){case 0:var gt=new Uint16Array(Be.totalAcUncompressedCount);zt(B.array,q,ce,Be.acCompressedSize,gt,Be.totalAcUncompressedCount);break;case 1:var Dt=B.array.slice(ce.value,ce.value+Be.totalAcUncompressedCount),$t=Ry(Dt),gt=new Uint16Array($t.buffer);ce.value+=Be.totalAcUncompressedCount;break}if(Be.dcCompressedSize>0){var qt={array:B.array,offset:ce,size:Be.dcCompressedSize},On=new Uint16Array(ye(qt).buffer);ce.value+=Be.dcCompressedSize}if(Be.rleRawSize>0){var Dt=B.array.slice(ce.value,ce.value+Be.rleCompressedSize),$t=Ry(Dt),qn=nt($t.buffer);ce.value+=Be.rleCompressedSize}for(var un=0,Xt=new Array(pe.length),ve=0;ve<Xt.length;++ve)Xt[ve]=new Array;for(var ut=0;ut<B.lines;++ut)for(var pn=0;pn<pe.length;++pn)Xt[pn].push(un),un+=pe[pn].width*B.type*2;Xe(at,Xt,pe,gt,On,Ce);for(var ve=0;ve<pe.length;++ve){var Ge=pe[ve];if(!Ge.decoded)switch(Ge.compression){case 2:for(var At=0,Kn=0,ut=0;ut<B.lines;++ut){for(var Ei=Xt[ve][At],Wn=0;Wn<Ge.width;++Wn){for(var mi=0;mi<2*Ge.type;++mi)Ce[Ei++]=qn[Kn+mi*Ge.width*Ge.height];Kn++}At++}break;default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Ce.buffer)}function Mt(B,q){for(var ce=new Uint8Array(B),Ce=0;ce[q.value+Ce]!=0;)Ce+=1;var Be=new TextDecoder().decode(ce.slice(q.value,q.value+Ce));return q.value=q.value+Ce+1,Be}function ct(B,q,ce){var Ce=new TextDecoder().decode(new Uint8Array(B).slice(q.value,q.value+ce));return q.value=q.value+ce,Ce}function Ft(B,q){var ce=Qe(B,q),Ce=qe(B,q);return[ce,Ce]}function Bt(B,q){var ce=qe(B,q),Ce=qe(B,q);return[ce,Ce]}function Qe(B,q){var ce=B.getInt32(q.value,!0);return q.value=q.value+4,ce}function qe(B,q){var ce=B.getUint32(q.value,!0);return q.value=q.value+4,ce}function Tt(B,q){var ce=B[q.value];return q.value=q.value+1,ce}function ie(B,q){var ce=B.getUint8(q.value);return q.value=q.value+1,ce}const we=function(B,q){let ce;return"getBigInt64"in DataView.prototype?ce=Number(B.getBigInt64(q.value,!0)):ce=B.getUint32(q.value+4,!0)+Number(B.getUint32(q.value,!0)<<32),q.value+=8,ce};function tt(B,q){var ce=B.getFloat32(q.value,!0);return q.value+=4,ce}function oe(B,q){return Mf.toHalfFloat(tt(B,q))}function Me(B){var q=(B&31744)>>10,ce=B&1023;return(B>>15?-1:1)*(q?q===31?ce?NaN:1/0:Math.pow(2,q-15)*(1+ce/1024):6103515625e-14*(ce/1024))}function et(B,q){var ce=B.getUint16(q.value,!0);return q.value+=2,ce}function St(B,q){return Me(et(B,q))}function rt(B,q,ce,Ce){for(var Be=ce.value,Ve=[];ce.value<Be+Ce-1;){var dt=Mt(q,ce),st=Qe(B,ce),yt=ie(B,ce);ce.value+=3;var vt=Qe(B,ce),bt=Qe(B,ce);Ve.push({name:dt,pixelType:st,pLinear:yt,xSampling:vt,ySampling:bt})}return ce.value+=1,Ve}function _e(B,q){var ce=tt(B,q),Ce=tt(B,q),Be=tt(B,q),Ve=tt(B,q),dt=tt(B,q),st=tt(B,q),yt=tt(B,q),vt=tt(B,q);return{redX:ce,redY:Ce,greenX:Be,greenY:Ve,blueX:dt,blueY:st,whiteX:yt,whiteY:vt}}function ft(B,q){var ce=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Ce=ie(B,q);return ce[Ce]}function Nt(B,q){var ce=qe(B,q),Ce=qe(B,q),Be=qe(B,q),Ve=qe(B,q);return{xMin:ce,yMin:Ce,xMax:Be,yMax:Ve}}function Kt(B,q){var ce=["INCREASING_Y"],Ce=ie(B,q);return ce[Ce]}function cn(B,q){var ce=tt(B,q),Ce=tt(B,q);return[ce,Ce]}function gn(B,q){var ce=tt(B,q),Ce=tt(B,q),Be=tt(B,q);return[ce,Ce,Be]}function kn(B,q,ce,Ce,Be){if(Ce==="string"||Ce==="stringvector"||Ce==="iccProfile")return ct(q,ce,Be);if(Ce==="chlist")return rt(B,q,ce,Be);if(Ce==="chromaticities")return _e(B,ce);if(Ce==="compression")return ft(B,ce);if(Ce==="box2i")return Nt(B,ce);if(Ce==="lineOrder")return Kt(B,ce);if(Ce==="float")return tt(B,ce);if(Ce==="v2f")return cn(B,ce);if(Ce==="v3f")return gn(B,ce);if(Ce==="int")return Qe(B,ce);if(Ce==="rational")return Ft(B,ce);if(Ce==="timecode")return Bt(B,ce);if(Ce==="preview")return ce.value+=Be,"skipped";ce.value+=Be}function Dr(B,q,ce){const Ce={};if(B.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Ce.version=B.getUint8(4);const Be=B.getUint8(5);Ce.spec={singleTile:!!(Be&2),longName:!!(Be&4),deepFormat:!!(Be&8),multiPart:!!(Be&16)},ce.value=8;for(var Ve=!0;Ve;){var dt=Mt(q,ce);if(dt==0)Ve=!1;else{var st=Mt(q,ce),yt=qe(B,ce),vt=kn(B,q,ce,st,yt);vt===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${st}'.`):Ce[dt]=vt}}if((Be&-5)!=0)throw console.error("EXRHeader:",Ce),"THREE.EXRLoader: provided file is currently unsupported.";return Ce}function Si(B,q,ce,Ce,Be){const Ve={size:0,viewer:q,array:ce,offset:Ce,width:B.dataWindow.xMax-B.dataWindow.xMin+1,height:B.dataWindow.yMax-B.dataWindow.yMin+1,channels:B.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:B.channels[0].pixelType,uncompress:null,getter:null,format:null,[Gm?"colorSpace":"encoding"]:null};switch(B.compression){case"NO_COMPRESSION":Ve.lines=1,Ve.uncompress=Z;break;case"RLE_COMPRESSION":Ve.lines=1,Ve.uncompress=F;break;case"ZIPS_COMPRESSION":Ve.lines=1,Ve.uncompress=ye;break;case"ZIP_COMPRESSION":Ve.lines=16,Ve.uncompress=ye;break;case"PIZ_COMPRESSION":Ve.lines=32,Ve.uncompress=Ue;break;case"PXR24_COMPRESSION":Ve.lines=16,Ve.uncompress=je;break;case"DWAA_COMPRESSION":Ve.lines=32,Ve.uncompress=Oe;break;case"DWAB_COMPRESSION":Ve.lines=256,Ve.uncompress=Oe;break;default:throw"EXRLoader.parse: "+B.compression+" is unsupported"}if(Ve.scanlineBlockSize=Ve.lines,Ve.type==1)switch(Be){case Vi:Ve.getter=St,Ve.inputSize=2;break;case ir:Ve.getter=et,Ve.inputSize=2;break}else if(Ve.type==2)switch(Be){case Vi:Ve.getter=tt,Ve.inputSize=4;break;case ir:Ve.getter=oe,Ve.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Ve.type+" for "+B.compression+".";Ve.blockCount=(B.dataWindow.yMax+1)/Ve.scanlineBlockSize;for(var dt=0;dt<Ve.blockCount;dt++)we(q,Ce);Ve.outputChannels=Ve.channels==3?4:Ve.channels;const st=Ve.width*Ve.height*Ve.outputChannels;switch(Be){case Vi:Ve.byteArray=new Float32Array(st),Ve.channels<Ve.outputChannels&&Ve.byteArray.fill(1,0,st);break;case ir:Ve.byteArray=new Uint16Array(st),Ve.channels<Ve.outputChannels&&Ve.byteArray.fill(15360,0,st);break;default:console.error("THREE.EXRLoader: unsupported type: ",Be);break}return Ve.bytesPerLine=Ve.width*Ve.inputSize*Ve.channels,Ve.outputChannels==4?Ve.format=pr:Ve.format=Ug,Gm?Ve.colorSpace="srgb-linear":Ve.encoding=3e3,Ve}const Li=new DataView(e),ea=new Uint8Array(e),Mi={value:0},ar=Dr(Li,e,Mi),on=Si(ar,Li,ea,Mi,this.type),Vr={value:0},pi={R:0,G:1,B:2,A:3,Y:0};for(let B=0;B<on.height/on.scanlineBlockSize;B++){const q=qe(Li,Mi);on.size=qe(Li,Mi),on.lines=q+on.scanlineBlockSize>on.height?on.height-q:on.scanlineBlockSize;const Ce=on.size<on.lines*on.bytesPerLine?on.uncompress(on):Z(on);Mi.value+=on.size;for(let Be=0;Be<on.scanlineBlockSize;Be++){const Ve=Be+B*on.scanlineBlockSize;if(Ve>=on.height)break;for(let dt=0;dt<on.channels;dt++){const st=pi[ar.channels[dt].name];for(let yt=0;yt<on.width;yt++){Vr.value=(Be*(on.channels*on.width)+dt*on.width+yt)*on.inputSize;const vt=(on.height-1-Ve)*(on.width*on.outputChannels)+yt*on.outputChannels+st;on.byteArray[vt]=on.getter(Ce,Vr)}}}}return{header:ar,width:on.width,height:on.height,data:on.byteArray,format:on.format,[Gm?"colorSpace":"encoding"]:on[Gm?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,a){function o(u,d){Gm?u.colorSpace=d.colorSpace:u.encoding=d.encoding,u.minFilter=jn,u.magFilter=jn,u.generateMipmaps=!1,u.flipY=!1,t&&t(u,d)}return super.load(e,o,n,a)}}function W8(i,e,t,n){var a;return a=class extends va{constructor(o){super({vertexShader:e,fragmentShader:t,...o});for(const u in i)this.uniforms[u]=new A_(i[u]),Object.defineProperty(this,u,{get(){return this.uniforms[u].value},set(d){this.uniforms[u].value=d}});this.uniforms=Z1.clone(this.uniforms)}},a.key=UC.generateUUID(),a}const X8=()=>parseInt(Yh.replace(/\D+/g,"")),j8=X8(),q8=j.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:a=!0,keyEvents:o=!1,onChange:u,onStart:d,onEnd:h,...p},y)=>{const v=hs(P=>P.invalidate),x=hs(P=>P.camera),S=hs(P=>P.gl),E=hs(P=>P.events),C=hs(P=>P.setEvents),T=hs(P=>P.set),M=hs(P=>P.get),R=hs(P=>P.performance),I=e||x,L=n||E.connected||S.domElement,z=j.useMemo(()=>new V8(I),[I]);return D_(()=>{z.enabled&&z.update()},-1),j.useEffect(()=>(o&&z.connect(o===!0?L:o),z.connect(L),()=>{z.dispose()}),[o,L,t,z,v]),j.useEffect(()=>{const P=O=>{v(),t&&R.regress(),u&&u(O)},V=O=>{d&&d(O)},N=O=>{h&&h(O)};return z.addEventListener("change",P),z.addEventListener("start",V),z.addEventListener("end",N),()=>{z.removeEventListener("start",V),z.removeEventListener("end",N),z.removeEventListener("change",P)}},[u,d,h,z,v,C]),j.useEffect(()=>{if(i){const P=M().controls;return T({controls:z}),()=>T({controls:P})}},[i,z]),j.createElement("primitive",Hh({ref:y,object:z,enableDamping:a},p))}),Y8=W8({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new Pt,sectionColor:new Pt,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new Q,worldPlanePosition:new Q},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${j8>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),Z8=j.forwardRef(({args:i,cellColor:e="#000000",sectionColor:t="#2080ff",cellSize:n=.5,sectionSize:a=1,followCamera:o=!1,infiniteGrid:u=!1,fadeDistance:d=100,fadeStrength:h=1,fadeFrom:p=1,cellThickness:y=.5,sectionThickness:v=1,side:x=ma,...S},E)=>{gM({GridMaterial:Y8});const C=j.useRef(null);j.useImperativeHandle(E,()=>C.current,[]);const T=new sl,M=new Q(0,1,0),R=new Q(0,0,0);D_(z=>{T.setFromNormalAndCoplanarPoint(M,R).applyMatrix4(C.current.matrixWorld);const P=C.current.material,V=P.uniforms.worldCamProjPosition,N=P.uniforms.worldPlanePosition;T.projectPoint(z.camera.position,V.value),N.value.set(0,0,0).applyMatrix4(C.current.matrixWorld)});const I={cellSize:n,sectionSize:a,cellColor:e,sectionColor:t,cellThickness:y,sectionThickness:v},L={fadeDistance:d,fadeStrength:h,fadeFrom:p,infiniteGrid:u,followCamera:o};return j.createElement("mesh",Hh({ref:C,frustumCulled:!1},S),j.createElement("gridMaterial",Hh({transparent:!0,"extensions-derivatives":!0,side:x},I,L)),j.createElement("planeGeometry",{args:i}))}),vR=(i,e,t)=>{let n;switch(i){case Br:n=new Uint8ClampedArray(e*t*4);break;case ir:n=new Uint16Array(e*t*4);break;case vs:n=new Uint32Array(e*t*4);break;case Yx:n=new Int8Array(e*t*4);break;case Zx:n=new Int16Array(e*t*4);break;case Lg:n=new Int32Array(e*t*4);break;case Vi:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let Dy;const K8=(i,e,t,n)=>{if(Dy!==void 0)return Dy;const a=new Ua(1,1,n);e.setRenderTarget(a);const o=new Ki(new hu,new nc({color:16777215}));e.render(o,t),e.setRenderTarget(null);const u=vR(i,a.width,a.height);return e.readRenderTargetPixels(a,0,0,a.width,a.height,u),a.dispose(),o.geometry.dispose(),o.material.dispose(),Dy=u[0]!==0,Dy};class yM{_renderer;_rendererIsDisposable=!1;_material;_scene;_camera;_quad;_renderTarget;_width;_height;_type;_colorSpace;_supportsReadPixels=!0;constructor(e){this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const t={format:pr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:e.renderTargetOptions?.anisotropy!==void 0?e.renderTargetOptions?.anisotropy:1,generateMipmaps:e.renderTargetOptions?.generateMipmaps!==void 0?e.renderTargetOptions?.generateMipmaps:!1,magFilter:e.renderTargetOptions?.magFilter!==void 0?e.renderTargetOptions?.magFilter:jn,minFilter:e.renderTargetOptions?.minFilter!==void 0?e.renderTargetOptions?.minFilter:jn,samples:e.renderTargetOptions?.samples!==void 0?e.renderTargetOptions?.samples:void 0,wrapS:e.renderTargetOptions?.wrapS!==void 0?e.renderTargetOptions?.wrapS:nr,wrapT:e.renderTargetOptions?.wrapT!==void 0?e.renderTargetOptions?.wrapT:nr};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=yM.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Pg,this._camera=new fl,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!K8(this._type,this._renderer,this._camera,t)){let n;this._type===ir&&(n=this._renderer.extensions.has("EXT_color_buffer_float")?Vi:void 0),n!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Vi}`),this._type=n):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Ki(new hu,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Ua(this.width,this.height,t),this._renderTarget.texture.mapping=e.renderTargetOptions?.mapping!==void 0?e.renderTargetOptions?.mapping:ou}static instantiateRenderer(){const e=new uM;return e.setSize(128,128),e}render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)};toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=vR(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Ys(this.toArray(),this.width,this.height,pr,this._type,e?.mapping||ou,e?.wrapS||nr,e?.wrapT||nr,e?.magFilter||jn,e?.minFilter||jn,e?.anisotropy||1,Eo);return t.generateMipmaps=e?.generateMipmaps!==void 0?e?.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof va&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof di&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof di&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class yR extends Error{}class xR extends Error{}const Wm=(i,e,t)=>{const n=new RegExp(`${e}="([^"]*)"`,"i").exec(i);if(n)return n[1];const a=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(i);if(a){const o=a[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return o&&o.length===3?o.map(u=>u.replace(/<\/?rdf:li>/g,"")):a[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},$8=i=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(i):e=i.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const n=e.indexOf("x:xmpmeta>",t),a=e.slice(t,n+10);try{const o=Wm(a,"hdrgm:GainMapMin","0"),u=Wm(a,"hdrgm:GainMapMax"),d=Wm(a,"hdrgm:Gamma","1"),h=Wm(a,"hdrgm:OffsetSDR","0.015625"),p=Wm(a,"hdrgm:OffsetHDR","0.015625"),y=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(a),v=y?y[1]:"0",x=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(a);if(!x)throw new Error("Incomplete gainmap metadata");const S=x[1];return{gainMapMin:Array.isArray(o)?o.map(E=>parseFloat(E)):[parseFloat(o),parseFloat(o),parseFloat(o)],gainMapMax:Array.isArray(u)?u.map(E=>parseFloat(E)):[parseFloat(u),parseFloat(u),parseFloat(u)],gamma:Array.isArray(d)?d.map(E=>parseFloat(E)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetSdr:Array.isArray(h)?h.map(E=>parseFloat(E)):[parseFloat(h),parseFloat(h),parseFloat(h)],offsetHdr:Array.isArray(p)?p.map(E=>parseFloat(E)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(v),hdrCapacityMax:parseFloat(S)}}catch{}t=e.indexOf("<x:xmpmeta",n)}};class Q8{options;constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const a=this.options.debug,o=new DataView(e.buffer);if(o.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const u=o.byteLength;let d=2,h=0,p;for(;d<u;){if(++h>250){n(new Error(`Found no marker after ${h} loops `));return}if(o.getUint8(d)!==255){n(new Error(`Not a valid marker at offset 0x${d.toString(16)}, found: 0x${o.getUint8(d).toString(16)}`));return}if(p=o.getUint8(d+1),a&&console.log(`Marker: ${p.toString(16)}`),p===226){a&&console.log("Found APP2 marker (0xffe2)");const y=d+4;if(o.getUint32(y)===1297106432){const v=y+4;let x;if(o.getUint16(v)===18761)x=!1;else if(o.getUint16(v)===19789)x=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(o.getUint16(v+2,!x)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const S=o.getUint32(v+4,!x);if(S<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const E=v+S,C=o.getUint16(E,!x),T=E+2;let M=0;for(let z=T;z<T+12*C;z+=12)o.getUint16(z,!x)===45057&&(M=o.getUint32(z+8,!x));const I=E+2+C*12+4,L=[];for(let z=I;z<I+M*16;z+=16){const P={MPType:o.getUint32(z,!x),size:o.getUint32(z+4,!x),dataOffset:o.getUint32(z+8,!x),dependantImages:o.getUint32(z+12,!x),start:-1,end:-1,isFII:!1};P.dataOffset?(P.start=v+P.dataOffset,P.isFII=!1):(P.start=0,P.isFII=!0),P.end=P.start+P.size,L.push(P)}if(this.options.extractNonFII&&L.length){const z=new Blob([o]),P=[];for(const V of L){if(V.isFII&&!this.options.extractFII)continue;const N=z.slice(V.start,V.end+1,"image/jpeg");P.push(N)}t(P)}}}d+=2+o.getUint16(d+2)}})}}const J8=async i=>{const e=$8(i);if(!e)throw new xR("Gain map XMP metadata not found");const n=await new Q8({extractFII:!0,extractNonFII:!0}).extract(i);if(n.length!==2)throw new yR("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},NT=i=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=a=>{t(a)},n.src=URL.createObjectURL(i)});class eV extends Pa{_renderer;_renderTargetOptions;_internalLoadingManager;_config;constructor(e,t){super(t),this._config=e,e.renderer&&(this._renderer=e.renderer),this._internalLoadingManager=new E_}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new di,sdr:new di});return this._config.createQuadRenderer({width:16,height:16,type:ir,colorSpace:Eo,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(e,t,n){const a=t?new Blob([t],{type:"image/jpeg"}):void 0,o=new Blob([e],{type:"image/jpeg"});let u,d,h=!1;if(typeof createImageBitmap>"u"){const p=await Promise.all([a?NT(a):Promise.resolve(void 0),NT(o)]);d=p[0],u=p[1],h=n==="flipY"}else{const p=await Promise.all([a?createImageBitmap(a,{imageOrientation:n||"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:n||"flipY"})]);d=p[0],u=p[1]}return{sdrImage:u,gainMapImage:d,needsFlip:h}}createTextures(e,t,n){const a=new di(t||new ImageData(2,2),ou,nr,nr,jn,qS,pr,Br,1,Eo);a.flipY=n,a.needsUpdate=!0;const o=new di(e,ou,nr,nr,jn,qS,pr,Br,1,Fr);return o.flipY=n,o.needsUpdate=!0,{gainMap:a,sdr:o}}updateQuadRenderer(e,t,n,a,o){e.width=t.width,e.height=t.height,e.material.gainMap=n,e.material.sdr=a,e.material.gainMapMin=o.gainMapMin,e.material.gainMapMax=o.gainMapMax,e.material.offsetHdr=o.offsetHdr,e.material.offsetSdr=o.offsetSdr,e.material.gamma=o.gamma,e.material.hdrCapacityMin=o.hdrCapacityMin,e.material.hdrCapacityMax=o.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,o.hdrCapacityMax),e.material.needsUpdate=!0}}const tV=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,nV=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class iV extends va{_maxDisplayBoost;_hdrCapacityMin;_hdrCapacityMax;constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:a,gainMapMax:o,maxDisplayBoost:u,hdrCapacityMin:d,hdrCapacityMax:h,sdr:p,gainMap:y}){super({name:"GainMapDecoderMaterial",vertexShader:tV,fragmentShader:nV,uniforms:{sdr:{value:p},gainMap:{value:y},gamma:{value:new Q(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new Q().fromArray(t)},offsetSdr:{value:new Q().fromArray(n)},gainMapMin:{value:new Q().fromArray(a)},gainMapMax:{value:new Q().fromArray(o)},weightFactor:{value:(Math.log2(u)-d)/(h-d)}},blending:So,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=u,this._hdrCapacityMin=d,this._hdrCapacityMax=h,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class _R extends eV{constructor(e,t){super({renderer:e,createMaterial:n=>new iV(n),createQuadRenderer:n=>new yM(n)},t)}async render(e,t,n,a){const{sdrImage:o,gainMapImage:u,needsFlip:d}=await this.processImages(n,a,"flipY"),{gainMap:h,sdr:p}=this.createTextures(o,u,d);this.updateQuadRenderer(e,o,h,p,t),e.render()}}class rV extends _R{load([e,t,n],a,o,u){const d=this.prepareQuadRenderer();let h,p,y;const v=async()=>{if(h&&p&&y){try{await this.render(d,y,h,p)}catch(O){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof u=="function"&&u(O),d.disposeOnDemandRenderer();return}typeof a=="function"&&a(d),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),d.disposeOnDemandRenderer()}};let x=!0,S=0,E=0,C=!0,T=0,M=0,R=!0,I=0,L=0;const z=()=>{if(typeof o=="function"){const O=S+T+I,K=E+M+L,H=x&&C&&R;o(new ProgressEvent("progress",{lengthComputable:H,loaded:K,total:O}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const P=new gs(this._internalLoadingManager);P.setResponseType("arraybuffer"),P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(e,async O=>{if(typeof O=="string")throw new Error("Invalid sdr buffer");h=O,await v()},O=>{x=O.lengthComputable,E=O.loaded,S=O.total,z()},O=>{this.manager.itemError(e),typeof u=="function"&&u(O)});const V=new gs(this._internalLoadingManager);V.setResponseType("arraybuffer"),V.setRequestHeader(this.requestHeader),V.setPath(this.path),V.setWithCredentials(this.withCredentials),V.load(t,async O=>{if(typeof O=="string")throw new Error("Invalid gainmap buffer");p=O,await v()},O=>{C=O.lengthComputable,M=O.loaded,T=O.total,z()},O=>{this.manager.itemError(t),typeof u=="function"&&u(O)});const N=new gs(this._internalLoadingManager);return N.setRequestHeader(this.requestHeader),N.setPath(this.path),N.setWithCredentials(this.withCredentials),N.load(n,async O=>{if(typeof O!="string")throw new Error("Invalid metadata string");y=JSON.parse(O),await v()},O=>{R=O.lengthComputable,L=O.loaded,I=O.total,z()},O=>{this.manager.itemError(n),typeof u=="function"&&u(O)}),d}}class aV extends _R{load(e,t,n,a){const o=this.prepareQuadRenderer(),u=new gs(this._internalLoadingManager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(this.withCredentials),this.manager.itemStart(e),u.load(e,async d=>{if(typeof d=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const h=new Uint8Array(d);let p,y,v;try{const x=await J8(h);p=x.sdr,y=x.gainMap,v=x.metadata}catch(x){if(x instanceof xR||x instanceof yR)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),v={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},p=h;else throw x}try{await this.render(o,v,p.buffer,y?.buffer)}catch(x){this.manager.itemError(e),typeof a=="function"&&a(x),o.disposeOnDemandRenderer();return}typeof t=="function"&&t(o),this.manager.itemEnd(e),o.disposeOnDemandRenderer()},n,d=>{this.manager.itemError(e),typeof a=="function"&&a(d)}),o}}const Eg={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},bR="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Ch=i=>Array.isArray(i),xM=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function L_({files:i=xM,path:e="",preset:t=void 0,colorSpace:n=void 0,extensions:a}={}){t&&(_M(t),i=Eg[t],e=bR);const o=Ch(i),{extension:u,isCubemap:d}=bM(i),h=SM(u);if(!h)throw new Error("useEnvironment: Unrecognized file extension: "+i);const p=hs(S=>S.gl);j.useLayoutEffect(()=>{if(u!=="webp"&&u!=="jpg"&&u!=="jpeg")return;function S(){kh.clear(h,o?[i]:i)}p.domElement.addEventListener("webglcontextlost",S,{once:!0})},[i,p.domElement]);const y=kh(h,o?[i]:i,S=>{(u==="webp"||u==="jpg"||u==="jpeg")&&S.setRenderer(p),S.setPath==null||S.setPath(e),a&&a(S)});let v=o?y[0]:y;if(u==="jpg"||u==="jpeg"||u==="webp"){var x;v=(x=v.renderTarget)==null?void 0:x.texture}return v.mapping=d?Mo:Th,v.colorSpace=n??(d?"srgb":"srgb-linear"),v}const sV={files:xM,path:"",preset:void 0,extensions:void 0};L_.preload=i=>{const e={...sV,...i};let{files:t,path:n=""}=e;const{preset:a,extensions:o}=e;a&&(_M(a),t=Eg[a],n=bR);const{extension:u}=bM(t);if(u==="webp"||u==="jpg"||u==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const d=SM(u);if(!d)throw new Error("useEnvironment: Unrecognized file extension: "+t);kh.preload(d,Ch(t)?[t]:t,h=>{h.setPath==null||h.setPath(n),o&&o(h)})};const oV={files:xM,preset:void 0};L_.clear=i=>{const e={...oV,...i};let{files:t}=e;const{preset:n}=e;n&&(_M(n),t=Eg[n]);const{extension:a}=bM(t),o=SM(a);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);kh.clear(o,Ch(t)?[t]:t)};function _M(i){if(!(i in Eg))throw new Error("Preset must be one of: "+Object.keys(Eg).join(", "))}function bM(i){var e;const t=Ch(i)&&i.length===6,n=Ch(i)&&i.length===3&&i.some(u=>u.endsWith("json")),a=Ch(i)?i[0]:i;return{extension:t?"cube":n?"webp":a.startsWith("data:application/exr")?"exr":a.startsWith("data:application/hdr")?"hdr":a.startsWith("data:image/jpeg")?"jpg":(e=a.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function SM(i){return i==="cube"?x3:i==="hdr"?H8:i==="exr"?G8:i==="jpg"||i==="jpeg"?aV:i==="webp"?rV:null}const lV=i=>i.current&&i.current.isScene,cV=i=>lV(i)?i.current:i;function MM(i,e,t,n,a={}){var o,u,d,h;a={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...a};const p=cV(e||t),y=p.background,v=p.environment,x={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:(o=(u=p.backgroundRotation)==null||u.clone==null?void 0:u.clone())!==null&&o!==void 0?o:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:(d=(h=p.environmentRotation)==null||h.clone==null?void 0:h.clone())!==null&&d!==void 0?d:[0,0,0]};return i!=="only"&&(p.environment=n),i&&(p.background=n),ol(p,a),()=>{i!=="only"&&(p.environment=v),i&&(p.background=y),ol(p,x)}}function EM({scene:i,background:e=!1,map:t,...n}){const a=hs(o=>o.scene);return j.useLayoutEffect(()=>{if(t)return MM(e,i,a,t,n)}),null}function SR({background:i=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:a,backgroundRotation:o,environmentIntensity:u,environmentRotation:d,...h}){const p=L_(h),y=hs(v=>v.scene);return j.useLayoutEffect(()=>MM(i,e,y,p,{backgroundBlurriness:t??n,backgroundIntensity:a,backgroundRotation:o,environmentIntensity:u,environmentRotation:d})),j.useEffect(()=>()=>{p.dispose()},[p]),null}function uV({children:i,near:e=.1,far:t=1e3,resolution:n=256,frames:a=1,map:o,background:u=!1,blur:d,backgroundBlurriness:h,backgroundIntensity:p,backgroundRotation:y,environmentIntensity:v,environmentRotation:x,scene:S,files:E,path:C,preset:T=void 0,extensions:M}){const R=hs(N=>N.gl),I=hs(N=>N.scene),L=j.useRef(null),[z]=j.useState(()=>new Pg),P=j.useMemo(()=>{const N=new R_(n);return N.texture.type=ir,N},[n]);j.useEffect(()=>()=>{P.dispose()},[P]),j.useLayoutEffect(()=>{if(a===1){const N=R.autoClear;R.autoClear=!0,L.current.update(R,z),R.autoClear=N}return MM(u,S,I,P.texture,{backgroundBlurriness:d??h,backgroundIntensity:p,backgroundRotation:y,environmentIntensity:v,environmentRotation:x})},[i,z,P.texture,S,I,u,a,R]);let V=1;return D_(()=>{if(a===1/0||V<a){const N=R.autoClear;R.autoClear=!0,L.current.update(R,z),R.autoClear=N,V++}}),j.createElement(j.Fragment,null,s8(j.createElement(j.Fragment,null,i,j.createElement("cubeCamera",{ref:L,args:[e,t,P]}),E||T?j.createElement(SR,{background:!0,files:E,preset:T,path:C,extensions:M}):o?j.createElement(EM,{background:!0,map:o,extensions:M}):null),z))}function fV(i){var e,t,n,a;const o=L_(i),u=i.map||o;j.useMemo(()=>gM({GroundProjectedEnvImpl:L8}),[]),j.useEffect(()=>()=>{o.dispose()},[o]);const d=j.useMemo(()=>[u],[u]),h=(e=i.ground)==null?void 0:e.height,p=(t=i.ground)==null?void 0:t.radius,y=(n=(a=i.ground)==null?void 0:a.scale)!==null&&n!==void 0?n:1e3;return j.createElement(j.Fragment,null,j.createElement(EM,Hh({},i,{map:u})),j.createElement("groundProjectedEnvImpl",{args:d,scale:y,height:h,radius:p}))}function dV(i){return i.ground?j.createElement(fV,i):i.map?j.createElement(EM,i):i.children?j.createElement(uV,i):j.createElement(SR,i)}function hV({textures:i,meshType:e,autoRotate:t}){const n=j.useRef(null),[a,o]=j.useState(null);return j.useEffect(()=>{const d=new _3,h=d.load(i.albedo),p=d.load(i.ao),y=d.load(i.roughness),v=d.load(i.metallic),x=d.load(i.normal);h.colorSpace=Fr,[h,p,y,v,x].forEach(E=>{E.wrapS=Nf,E.wrapT=Nf});const S=new M_({map:h,aoMap:p,roughnessMap:y,metalnessMap:v,normalMap:x,roughness:1,metalness:1});return o(S),()=>{h.dispose(),p.dispose(),y.dispose(),v.dispose(),x.dispose(),S.dispose()}},[i]),D_((d,h)=>{n.current&&t&&(n.current.rotation.y+=h*.5,n.current.rotation.x=Math.sin(Date.now()*.001)*.1)}),a?(()=>{switch(e){case"sphere":return J.jsx("mesh",{"code-path":"src/components/Viewer3D.tsx:72:11",ref:n,material:a,children:J.jsx("sphereGeometry",{"code-path":"src/components/Viewer3D.tsx:73:13",args:[1.5,64,64]})});case"cube":return J.jsx("mesh",{"code-path":"src/components/Viewer3D.tsx:78:11",ref:n,material:a,children:J.jsx("boxGeometry",{"code-path":"src/components/Viewer3D.tsx:79:13",args:[2.5,2.5,2.5]})});case"plane":return J.jsx("mesh",{"code-path":"src/components/Viewer3D.tsx:84:11",ref:n,material:a,rotation:[-Math.PI/2,0,0],children:J.jsx("planeGeometry",{"code-path":"src/components/Viewer3D.tsx:85:13",args:[4,4]})});case"torus":return J.jsx("mesh",{"code-path":"src/components/Viewer3D.tsx:90:11",ref:n,material:a,children:J.jsx("torusKnotGeometry",{"code-path":"src/components/Viewer3D.tsx:91:13",args:[1,.3,128,32]})});case"cylinder":return J.jsx("mesh",{"code-path":"src/components/Viewer3D.tsx:96:11",ref:n,material:a,children:J.jsx("cylinderGeometry",{"code-path":"src/components/Viewer3D.tsx:97:13",args:[1,1,3,64]})});default:return null}})():null}function pV({textures:i,meshType:e,autoRotate:t}){return J.jsxs(J.Fragment,{children:[J.jsx("ambientLight",{"code-path":"src/components/Viewer3D.tsx:112:7",intensity:.3}),J.jsx("directionalLight",{"code-path":"src/components/Viewer3D.tsx:113:7",position:[5,5,5],intensity:1,castShadow:!0}),J.jsx("directionalLight",{"code-path":"src/components/Viewer3D.tsx:114:7",position:[-5,3,-5],intensity:.5}),J.jsx("pointLight",{"code-path":"src/components/Viewer3D.tsx:115:7",position:[0,5,0],intensity:.5}),J.jsx(dV,{"code-path":"src/components/Viewer3D.tsx:118:7",preset:"studio"}),J.jsx(Z8,{"code-path":"src/components/Viewer3D.tsx:121:7",position:[0,-2,0],args:[10,10],cellSize:.5,cellThickness:.5,cellColor:"#444444",sectionSize:2,sectionThickness:1,sectionColor:"#666666",fadeDistance:10,fadeStrength:1,infiniteGrid:!0}),J.jsx(hV,{"code-path":"src/components/Viewer3D.tsx:136:7",textures:i,meshType:e,autoRotate:t}),J.jsx(q8,{"code-path":"src/components/Viewer3D.tsx:143:7",enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:3,maxDistance:10,target:[0,0,0]})]})}function mV({textures:i,meshType:e,autoRotate:t}){return J.jsx("div",{"code-path":"src/components/Viewer3D.tsx:163:5",className:"w-full h-full",children:J.jsx(y8,{"code-path":"src/components/Viewer3D.tsx:164:7",camera:{position:[0,0,5],fov:50},gl:{antialias:!0,alpha:!0,powerPreference:"high-performance"},dpr:[1,2],children:J.jsx(pV,{"code-path":"src/components/Viewer3D.tsx:173:9",textures:i,meshType:e,autoRotate:t})})})}function gV(i,e=globalThis?.document){const t=Dh(i);j.useEffect(()=>{const n=a=>{a.key==="Escape"&&t(a)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var vV="DismissableLayer",g1="dismissableLayer.update",yV="dismissableLayer.pointerDownOutside",xV="dismissableLayer.focusOutside",DT,MR=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ER=j.forwardRef((i,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:u,onDismiss:d,...h}=i,p=j.useContext(MR),[y,v]=j.useState(null),x=y?.ownerDocument??globalThis?.document,[,S]=j.useState({}),E=kr(e,V=>v(V)),C=Array.from(p.layers),[T]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),M=C.indexOf(T),R=y?C.indexOf(y):-1,I=p.layersWithOutsidePointerEventsDisabled.size>0,L=R>=M,z=SV(V=>{const N=V.target,O=[...p.branches].some(K=>K.contains(N));!L||O||(a?.(V),u?.(V),V.defaultPrevented||d?.())},x),P=MV(V=>{const N=V.target;[...p.branches].some(K=>K.contains(N))||(o?.(V),u?.(V),V.defaultPrevented||d?.())},x);return gV(V=>{R===p.layers.size-1&&(n?.(V),!V.defaultPrevented&&d&&(V.preventDefault(),d()))},x),j.useEffect(()=>{if(y)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(DT=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(y)),p.layers.add(y),IT(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=DT)}},[y,x,t,p]),j.useEffect(()=>()=>{y&&(p.layers.delete(y),p.layersWithOutsidePointerEventsDisabled.delete(y),IT())},[y,p]),j.useEffect(()=>{const V=()=>S({});return document.addEventListener(g1,V),()=>document.removeEventListener(g1,V)},[]),J.jsx(rr.div,{...h,ref:E,style:{pointerEvents:I?L?"auto":"none":void 0,...i.style},onFocusCapture:ki(i.onFocusCapture,P.onFocusCapture),onBlurCapture:ki(i.onBlurCapture,P.onBlurCapture),onPointerDownCapture:ki(i.onPointerDownCapture,z.onPointerDownCapture)})});ER.displayName=vV;var _V="DismissableLayerBranch",bV=j.forwardRef((i,e)=>{const t=j.useContext(MR),n=j.useRef(null),a=kr(e,n);return j.useEffect(()=>{const o=n.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),J.jsx(rr.div,{...i,ref:a})});bV.displayName=_V;function SV(i,e=globalThis?.document){const t=Dh(i),n=j.useRef(!1),a=j.useRef(()=>{});return j.useEffect(()=>{const o=d=>{if(d.target&&!n.current){let h=function(){wR(yV,t,p,{discrete:!0})};const p={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=h,e.addEventListener("click",a.current,{once:!0})):h()}else e.removeEventListener("click",a.current);n.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",o),e.removeEventListener("click",a.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function MV(i,e=globalThis?.document){const t=Dh(i),n=j.useRef(!1);return j.useEffect(()=>{const a=o=>{o.target&&!n.current&&wR(xV,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function IT(){const i=new CustomEvent(g1);document.dispatchEvent(i)}function wR(i,e,t,{discrete:n}){const a=t.originalEvent.target,o=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:t});e&&a.addEventListener(i,e,{once:!0}),n?HI(a,o):a.dispatchEvent(o)}var CS="focusScope.autoFocusOnMount",RS="focusScope.autoFocusOnUnmount",LT={bubbles:!1,cancelable:!0},EV="FocusScope",TR=j.forwardRef((i,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...u}=i,[d,h]=j.useState(null),p=Dh(a),y=Dh(o),v=j.useRef(null),x=kr(e,C=>h(C)),S=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(n){let C=function(I){if(S.paused||!d)return;const L=I.target;d.contains(L)?v.current=L:tu(v.current,{select:!0})},T=function(I){if(S.paused||!d)return;const L=I.relatedTarget;L!==null&&(d.contains(L)||tu(v.current,{select:!0}))},M=function(I){if(document.activeElement===document.body)for(const z of I)z.removedNodes.length>0&&tu(d)};document.addEventListener("focusin",C),document.addEventListener("focusout",T);const R=new MutationObserver(M);return d&&R.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",T),R.disconnect()}}},[n,d,S.paused]),j.useEffect(()=>{if(d){OT.add(S);const C=document.activeElement;if(!d.contains(C)){const M=new CustomEvent(CS,LT);d.addEventListener(CS,p),d.dispatchEvent(M),M.defaultPrevented||(wV(NV(AR(d)),{select:!0}),document.activeElement===C&&tu(d))}return()=>{d.removeEventListener(CS,p),setTimeout(()=>{const M=new CustomEvent(RS,LT);d.addEventListener(RS,y),d.dispatchEvent(M),M.defaultPrevented||tu(C??document.body,{select:!0}),d.removeEventListener(RS,y),OT.remove(S)},0)}}},[d,p,y,S]);const E=j.useCallback(C=>{if(!t&&!n||S.paused)return;const T=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,M=document.activeElement;if(T&&M){const R=C.currentTarget,[I,L]=TV(R);I&&L?!C.shiftKey&&M===L?(C.preventDefault(),t&&tu(I,{select:!0})):C.shiftKey&&M===I&&(C.preventDefault(),t&&tu(L,{select:!0})):M===R&&C.preventDefault()}},[t,n,S.paused]);return J.jsx(rr.div,{tabIndex:-1,...u,ref:x,onKeyDown:E})});TR.displayName=EV;function wV(i,{select:e=!1}={}){const t=document.activeElement;for(const n of i)if(tu(n,{select:e}),document.activeElement!==t)return}function TV(i){const e=AR(i),t=UT(e,i),n=UT(e.reverse(),i);return[t,n]}function AR(i){const e=[],t=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function UT(i,e){for(const t of i)if(!AV(t,{upTo:e}))return t}function AV(i,{upTo:e}){if(getComputedStyle(i).visibility==="hidden")return!0;for(;i;){if(e!==void 0&&i===e)return!1;if(getComputedStyle(i).display==="none")return!0;i=i.parentElement}return!1}function CV(i){return i instanceof HTMLInputElement&&"select"in i}function tu(i,{select:e=!1}={}){if(i&&i.focus){const t=document.activeElement;i.focus({preventScroll:!0}),i!==t&&CV(i)&&e&&i.select()}}var OT=RV();function RV(){let i=[];return{add(e){const t=i[0];e!==t&&t?.pause(),i=PT(i,e),i.unshift(e)},remove(e){i=PT(i,e),i[0]?.resume()}}}function PT(i,e){const t=[...i],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function NV(i){return i.filter(e=>e.tagName!=="A")}var DV="Portal",CR=j.forwardRef((i,e)=>{const{container:t,...n}=i,[a,o]=j.useState(!1);Nh(()=>o(!0),[]);const u=t||a&&globalThis?.document?.body;return u?uA.createPortal(J.jsx(rr.div,{...n,ref:e}),u):null});CR.displayName=DV;var NS=0;function IV(){j.useEffect(()=>{const i=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",i[0]??zT()),document.body.insertAdjacentElement("beforeend",i[1]??zT()),NS++,()=>{NS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),NS--}},[])}function zT(){const i=document.createElement("span");return i.setAttribute("data-radix-focus-guard",""),i.tabIndex=0,i.style.outline="none",i.style.opacity="0",i.style.position="fixed",i.style.pointerEvents="none",i}var ll=function(){return ll=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ll.apply(this,arguments)};function RR(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(i);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(i,n[a])&&(t[n[a]]=i[n[a]]);return t}function LV(i,e,t){if(t||arguments.length===2)for(var n=0,a=e.length,o;n<a;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return i.concat(o||Array.prototype.slice.call(e))}var ky="right-scroll-bar-position",Vy="width-before-scroll-bar",UV="with-scroll-bars-hidden",OV="--removed-body-scroll-bar-size";function DS(i,e){return typeof i=="function"?i(e):i&&(i.current=e),i}function PV(i,e){var t=j.useState(function(){return{value:i,callback:e,facade:{get current(){return t.value},set current(n){var a=t.value;a!==n&&(t.value=n,t.callback(n,a))}}}})[0];return t.callback=e,t.facade}var zV=typeof window<"u"?j.useLayoutEffect:j.useEffect,FT=new WeakMap;function FV(i,e){var t=PV(null,function(n){return i.forEach(function(a){return DS(a,n)})});return zV(function(){var n=FT.get(t);if(n){var a=new Set(n),o=new Set(i),u=t.current;a.forEach(function(d){o.has(d)||DS(d,null)}),o.forEach(function(d){a.has(d)||DS(d,u)})}FT.set(t,i)},[i]),t}function BV(i){return i}function kV(i,e){e===void 0&&(e=BV);var t=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:i},useMedium:function(o){var u=e(o,n);return t.push(u),function(){t=t.filter(function(d){return d!==u})}},assignSyncMedium:function(o){for(n=!0;t.length;){var u=t;t=[],u.forEach(o)}t={push:function(d){return o(d)},filter:function(){return t}}},assignMedium:function(o){n=!0;var u=[];if(t.length){var d=t;t=[],d.forEach(o),u=t}var h=function(){var y=u;u=[],y.forEach(o)},p=function(){return Promise.resolve().then(h)};p(),t={push:function(y){u.push(y),p()},filter:function(y){return u=u.filter(y),t}}}};return a}function VV(i){i===void 0&&(i={});var e=kV(null);return e.options=ll({async:!0,ssr:!1},i),e}var NR=function(i){var e=i.sideCar,t=RR(i,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return j.createElement(n,ll({},t))};NR.isSideCarExport=!0;function HV(i,e){return i.useMedium(e),NR}var DR=VV(),IS=function(){},U_=j.forwardRef(function(i,e){var t=j.useRef(null),n=j.useState({onScrollCapture:IS,onWheelCapture:IS,onTouchMoveCapture:IS}),a=n[0],o=n[1],u=i.forwardProps,d=i.children,h=i.className,p=i.removeScrollBar,y=i.enabled,v=i.shards,x=i.sideCar,S=i.noRelative,E=i.noIsolation,C=i.inert,T=i.allowPinchZoom,M=i.as,R=M===void 0?"div":M,I=i.gapMode,L=RR(i,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),z=x,P=FV([t,e]),V=ll(ll({},L),a);return j.createElement(j.Fragment,null,y&&j.createElement(z,{sideCar:DR,removeScrollBar:p,shards:v,noRelative:S,noIsolation:E,inert:C,setCallbacks:o,allowPinchZoom:!!T,lockRef:t,gapMode:I}),u?j.cloneElement(j.Children.only(d),ll(ll({},V),{ref:P})):j.createElement(R,ll({},V,{className:h,ref:P}),d))});U_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};U_.classNames={fullWidth:Vy,zeroRight:ky};var GV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function WV(){if(!document)return null;var i=document.createElement("style");i.type="text/css";var e=GV();return e&&i.setAttribute("nonce",e),i}function XV(i,e){i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}function jV(i){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(i)}var qV=function(){var i=0,e=null;return{add:function(t){i==0&&(e=WV())&&(XV(e,t),jV(e)),i++},remove:function(){i--,!i&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},YV=function(){var i=qV();return function(e,t){j.useEffect(function(){return i.add(e),function(){i.remove()}},[e&&t])}},IR=function(){var i=YV(),e=function(t){var n=t.styles,a=t.dynamic;return i(n,a),null};return e},ZV={left:0,top:0,right:0,gap:0},LS=function(i){return parseInt(i||"",10)||0},KV=function(i){var e=window.getComputedStyle(document.body),t=e[i==="padding"?"paddingLeft":"marginLeft"],n=e[i==="padding"?"paddingTop":"marginTop"],a=e[i==="padding"?"paddingRight":"marginRight"];return[LS(t),LS(n),LS(a)]},$V=function(i){if(i===void 0&&(i="margin"),typeof window>"u")return ZV;var e=KV(i),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},QV=IR(),Rh="data-scroll-locked",JV=function(i,e,t,n){var a=i.left,o=i.top,u=i.right,d=i.gap;return t===void 0&&(t="margin"),`
  .`.concat(UV,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(d,"px ").concat(n,`;
  }
  body[`).concat(Rh,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(d,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ky,` {
    right: `).concat(d,"px ").concat(n,`;
  }
  
  .`).concat(Vy,` {
    margin-right: `).concat(d,"px ").concat(n,`;
  }
  
  .`).concat(ky," .").concat(ky,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Vy," .").concat(Vy,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Rh,`] {
    `).concat(OV,": ").concat(d,`px;
  }
`)},BT=function(){var i=parseInt(document.body.getAttribute(Rh)||"0",10);return isFinite(i)?i:0},eH=function(){j.useEffect(function(){return document.body.setAttribute(Rh,(BT()+1).toString()),function(){var i=BT()-1;i<=0?document.body.removeAttribute(Rh):document.body.setAttribute(Rh,i.toString())}},[])},tH=function(i){var e=i.noRelative,t=i.noImportant,n=i.gapMode,a=n===void 0?"margin":n;eH();var o=j.useMemo(function(){return $V(a)},[a]);return j.createElement(QV,{styles:JV(o,!e,a,t?"":"!important")})},v1=!1;if(typeof window<"u")try{var Iy=Object.defineProperty({},"passive",{get:function(){return v1=!0,!0}});window.addEventListener("test",Iy,Iy),window.removeEventListener("test",Iy,Iy)}catch{v1=!1}var yh=v1?{passive:!1}:!1,nH=function(i){return i.tagName==="TEXTAREA"},LR=function(i,e){if(!(i instanceof Element))return!1;var t=window.getComputedStyle(i);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!nH(i)&&t[e]==="visible")},iH=function(i){return LR(i,"overflowY")},rH=function(i){return LR(i,"overflowX")},kT=function(i,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=UR(i,n);if(a){var o=OR(i,n),u=o[1],d=o[2];if(u>d)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},aH=function(i){var e=i.scrollTop,t=i.scrollHeight,n=i.clientHeight;return[e,t,n]},sH=function(i){var e=i.scrollLeft,t=i.scrollWidth,n=i.clientWidth;return[e,t,n]},UR=function(i,e){return i==="v"?iH(e):rH(e)},OR=function(i,e){return i==="v"?aH(e):sH(e)},oH=function(i,e){return i==="h"&&e==="rtl"?-1:1},lH=function(i,e,t,n,a){var o=oH(i,window.getComputedStyle(e).direction),u=o*n,d=t.target,h=e.contains(d),p=!1,y=u>0,v=0,x=0;do{if(!d)break;var S=OR(i,d),E=S[0],C=S[1],T=S[2],M=C-T-o*E;(E||M)&&UR(i,d)&&(v+=M,x+=E);var R=d.parentNode;d=R&&R.nodeType===Node.DOCUMENT_FRAGMENT_NODE?R.host:R}while(!h&&d!==document.body||h&&(e.contains(d)||e===d));return(y&&Math.abs(v)<1||!y&&Math.abs(x)<1)&&(p=!0),p},Ly=function(i){return"changedTouches"in i?[i.changedTouches[0].clientX,i.changedTouches[0].clientY]:[0,0]},VT=function(i){return[i.deltaX,i.deltaY]},HT=function(i){return i&&"current"in i?i.current:i},cH=function(i,e){return i[0]===e[0]&&i[1]===e[1]},uH=function(i){return`
  .block-interactivity-`.concat(i,` {pointer-events: none;}
  .allow-interactivity-`).concat(i,` {pointer-events: all;}
`)},fH=0,xh=[];function dH(i){var e=j.useRef([]),t=j.useRef([0,0]),n=j.useRef(),a=j.useState(fH++)[0],o=j.useState(IR)[0],u=j.useRef(i);j.useEffect(function(){u.current=i},[i]),j.useEffect(function(){if(i.inert){document.body.classList.add("block-interactivity-".concat(a));var C=LV([i.lockRef.current],(i.shards||[]).map(HT),!0).filter(Boolean);return C.forEach(function(T){return T.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),C.forEach(function(T){return T.classList.remove("allow-interactivity-".concat(a))})}}},[i.inert,i.lockRef.current,i.shards]);var d=j.useCallback(function(C,T){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!u.current.allowPinchZoom;var M=Ly(C),R=t.current,I="deltaX"in C?C.deltaX:R[0]-M[0],L="deltaY"in C?C.deltaY:R[1]-M[1],z,P=C.target,V=Math.abs(I)>Math.abs(L)?"h":"v";if("touches"in C&&V==="h"&&P.type==="range")return!1;var N=window.getSelection(),O=N&&N.anchorNode,K=O?O===P||O.contains(P):!1;if(K)return!1;var H=kT(V,P);if(!H)return!0;if(H?z=V:(z=V==="v"?"h":"v",H=kT(V,P)),!H)return!1;if(!n.current&&"changedTouches"in C&&(I||L)&&(n.current=z),!z)return!0;var te=n.current||z;return lH(te,T,C,te==="h"?I:L)},[]),h=j.useCallback(function(C){var T=C;if(!(!xh.length||xh[xh.length-1]!==o)){var M="deltaY"in T?VT(T):Ly(T),R=e.current.filter(function(z){return z.name===T.type&&(z.target===T.target||T.target===z.shadowParent)&&cH(z.delta,M)})[0];if(R&&R.should){T.cancelable&&T.preventDefault();return}if(!R){var I=(u.current.shards||[]).map(HT).filter(Boolean).filter(function(z){return z.contains(T.target)}),L=I.length>0?d(T,I[0]):!u.current.noIsolation;L&&T.cancelable&&T.preventDefault()}}},[]),p=j.useCallback(function(C,T,M,R){var I={name:C,delta:T,target:M,should:R,shadowParent:hH(M)};e.current.push(I),setTimeout(function(){e.current=e.current.filter(function(L){return L!==I})},1)},[]),y=j.useCallback(function(C){t.current=Ly(C),n.current=void 0},[]),v=j.useCallback(function(C){p(C.type,VT(C),C.target,d(C,i.lockRef.current))},[]),x=j.useCallback(function(C){p(C.type,Ly(C),C.target,d(C,i.lockRef.current))},[]);j.useEffect(function(){return xh.push(o),i.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:x}),document.addEventListener("wheel",h,yh),document.addEventListener("touchmove",h,yh),document.addEventListener("touchstart",y,yh),function(){xh=xh.filter(function(C){return C!==o}),document.removeEventListener("wheel",h,yh),document.removeEventListener("touchmove",h,yh),document.removeEventListener("touchstart",y,yh)}},[]);var S=i.removeScrollBar,E=i.inert;return j.createElement(j.Fragment,null,E?j.createElement(o,{styles:uH(a)}):null,S?j.createElement(tH,{noRelative:i.noRelative,gapMode:i.gapMode}):null)}function hH(i){for(var e=null;i!==null;)i instanceof ShadowRoot&&(e=i.host,i=i.host),i=i.parentNode;return e}const pH=HV(DR,dH);var PR=j.forwardRef(function(i,e){return j.createElement(U_,ll({},i,{ref:e,sideCar:pH}))});PR.classNames=U_.classNames;var mH=function(i){if(typeof document>"u")return null;var e=Array.isArray(i)?i[0]:i;return e.ownerDocument.body},_h=new WeakMap,Uy=new WeakMap,Oy={},US=0,zR=function(i){return i&&(i.host||zR(i.parentNode))},gH=function(i,e){return e.map(function(t){if(i.contains(t))return t;var n=zR(t);return n&&i.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",i,". Doing nothing"),null)}).filter(function(t){return!!t})},vH=function(i,e,t,n){var a=gH(e,Array.isArray(i)?i:[i]);Oy[t]||(Oy[t]=new WeakMap);var o=Oy[t],u=[],d=new Set,h=new Set(a),p=function(v){!v||d.has(v)||(d.add(v),p(v.parentNode))};a.forEach(p);var y=function(v){!v||h.has(v)||Array.prototype.forEach.call(v.children,function(x){if(d.has(x))y(x);else try{var S=x.getAttribute(n),E=S!==null&&S!=="false",C=(_h.get(x)||0)+1,T=(o.get(x)||0)+1;_h.set(x,C),o.set(x,T),u.push(x),C===1&&E&&Uy.set(x,!0),T===1&&x.setAttribute(t,"true"),E||x.setAttribute(n,"true")}catch(M){console.error("aria-hidden: cannot operate on ",x,M)}})};return y(e),d.clear(),US++,function(){u.forEach(function(v){var x=_h.get(v)-1,S=o.get(v)-1;_h.set(v,x),o.set(v,S),x||(Uy.has(v)||v.removeAttribute(n),Uy.delete(v)),S||v.removeAttribute(t)}),US--,US||(_h=new WeakMap,_h=new WeakMap,Uy=new WeakMap,Oy={})}},yH=function(i,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(i)?i:[i]),a=mH(i);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),vH(n,a,t,"aria-hidden")):function(){return null}};function xH(i){const e=_H(i),t=j.forwardRef((n,a)=>{const{children:o,...u}=n,d=j.Children.toArray(o),h=d.find(SH);if(h){const p=h.props.children,y=d.map(v=>v===h?j.Children.count(p)>1?j.Children.only(null):j.isValidElement(p)?p.props.children:null:v);return J.jsx(e,{...u,ref:a,children:j.isValidElement(p)?j.cloneElement(p,void 0,y):null})}return J.jsx(e,{...u,ref:a,children:o})});return t.displayName=`${i}.Slot`,t}function _H(i){const e=j.forwardRef((t,n)=>{const{children:a,...o}=t;if(j.isValidElement(a)){const u=EH(a),d=MH(o,a.props);return a.type!==j.Fragment&&(d.ref=n?Cg(n,u):u),j.cloneElement(a,d)}return j.Children.count(a)>1?j.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var bH=Symbol("radix.slottable");function SH(i){return j.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===bH}function MH(i,e){const t={...e};for(const n in e){const a=i[n],o=e[n];/^on[A-Z]/.test(n)?a&&o?t[n]=(...d)=>{const h=o(...d);return a(...d),h}:a&&(t[n]=a):n==="style"?t[n]={...a,...o}:n==="className"&&(t[n]=[a,o].filter(Boolean).join(" "))}return{...i,...t}}function EH(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}var O_="Dialog",[FR]=jh(O_),[wH,To]=FR(O_),BR=i=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:a,onOpenChange:o,modal:u=!0}=i,d=j.useRef(null),h=j.useRef(null),[p,y]=Rg({prop:n,defaultProp:a??!1,onChange:o,caller:O_});return J.jsx(wH,{scope:e,triggerRef:d,contentRef:h,contentId:Zm(),titleId:Zm(),descriptionId:Zm(),open:p,onOpenChange:y,onOpenToggle:j.useCallback(()=>y(v=>!v),[y]),modal:u,children:t})};BR.displayName=O_;var kR="DialogTrigger",VR=j.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,a=To(kR,t),o=kr(e,a.triggerRef);return J.jsx(rr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":AM(a.open),...n,ref:o,onClick:ki(i.onClick,a.onOpenToggle)})});VR.displayName=kR;var wM="DialogPortal",[TH,HR]=FR(wM,{forceMount:void 0}),GR=i=>{const{__scopeDialog:e,forceMount:t,children:n,container:a}=i,o=To(wM,e);return J.jsx(TH,{scope:e,forceMount:t,children:j.Children.map(n,u=>J.jsx(Dg,{present:t||o.open,children:J.jsx(CR,{asChild:!0,container:a,children:u})}))})};GR.displayName=wM;var Hx="DialogOverlay",WR=j.forwardRef((i,e)=>{const t=HR(Hx,i.__scopeDialog),{forceMount:n=t.forceMount,...a}=i,o=To(Hx,i.__scopeDialog);return o.modal?J.jsx(Dg,{present:n||o.open,children:J.jsx(CH,{...a,ref:e})}):null});WR.displayName=Hx;var AH=xH("DialogOverlay.RemoveScroll"),CH=j.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,a=To(Hx,t);return J.jsx(PR,{as:AH,allowPinchZoom:!0,shards:[a.contentRef],children:J.jsx(rr.div,{"data-state":AM(a.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Pf="DialogContent",XR=j.forwardRef((i,e)=>{const t=HR(Pf,i.__scopeDialog),{forceMount:n=t.forceMount,...a}=i,o=To(Pf,i.__scopeDialog);return J.jsx(Dg,{present:n||o.open,children:o.modal?J.jsx(RH,{...a,ref:e}):J.jsx(NH,{...a,ref:e})})});XR.displayName=Pf;var RH=j.forwardRef((i,e)=>{const t=To(Pf,i.__scopeDialog),n=j.useRef(null),a=kr(e,t.contentRef,n);return j.useEffect(()=>{const o=n.current;if(o)return yH(o)},[]),J.jsx(jR,{...i,ref:a,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ki(i.onCloseAutoFocus,o=>{o.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:ki(i.onPointerDownOutside,o=>{const u=o.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0;(u.button===2||d)&&o.preventDefault()}),onFocusOutside:ki(i.onFocusOutside,o=>o.preventDefault())})}),NH=j.forwardRef((i,e)=>{const t=To(Pf,i.__scopeDialog),n=j.useRef(!1),a=j.useRef(!1);return J.jsx(jR,{...i,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{i.onCloseAutoFocus?.(o),o.defaultPrevented||(n.current||t.triggerRef.current?.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{i.onInteractOutside?.(o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const u=o.target;t.triggerRef.current?.contains(u)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),jR=j.forwardRef((i,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,...u}=i,d=To(Pf,t),h=j.useRef(null),p=kr(e,h);return IV(),J.jsxs(J.Fragment,{children:[J.jsx(TR,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:J.jsx(ER,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":AM(d.open),...u,ref:p,onDismiss:()=>d.onOpenChange(!1)})}),J.jsxs(J.Fragment,{children:[J.jsx(LH,{titleId:d.titleId}),J.jsx(OH,{contentRef:h,descriptionId:d.descriptionId})]})]})}),TM="DialogTitle",DH=j.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,a=To(TM,t);return J.jsx(rr.h2,{id:a.titleId,...n,ref:e})});DH.displayName=TM;var qR="DialogDescription",IH=j.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,a=To(qR,t);return J.jsx(rr.p,{id:a.descriptionId,...n,ref:e})});IH.displayName=qR;var YR="DialogClose",ZR=j.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,a=To(YR,t);return J.jsx(rr.button,{type:"button",...n,ref:e,onClick:ki(i.onClick,()=>a.onOpenChange(!1))})});ZR.displayName=YR;function AM(i){return i?"open":"closed"}var KR="DialogTitleWarning",[aG,$R]=TI(KR,{contentName:Pf,titleName:TM,docsSlug:"dialog"}),LH=({titleId:i})=>{const e=$R(KR),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return j.useEffect(()=>{i&&(document.getElementById(i)||console.error(t))},[t,i]),null},UH="DialogDescriptionWarning",OH=({contentRef:i,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${$R(UH).contentName}}.`;return j.useEffect(()=>{const a=i.current?.getAttribute("aria-describedby");e&&a&&(document.getElementById(e)||console.warn(n))},[n,i,e]),null},PH=BR,zH=VR,FH=GR,BH=WR,kH=XR,VH=ZR;function HH({...i}){return J.jsx(PH,{"code-path":"src/components/ui/dialog.tsx:10:10","data-slot":"dialog",...i})}function GH({...i}){return J.jsx(zH,{"code-path":"src/components/ui/dialog.tsx:16:10","data-slot":"dialog-trigger",...i})}function WH({...i}){return J.jsx(FH,{"code-path":"src/components/ui/dialog.tsx:22:10","data-slot":"dialog-portal",...i})}function XH({className:i,...e}){return J.jsx(BH,{"code-path":"src/components/ui/dialog.tsx:36:5","data-slot":"dialog-overlay",className:La("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",i),...e})}function jH({className:i,children:e,showCloseButton:t=!0,...n}){return J.jsxs(WH,{"code-path":"src/components/ui/dialog.tsx:56:5","data-slot":"dialog-portal",children:[J.jsx(XH,{"code-path":"src/components/ui/dialog.tsx:57:7"}),J.jsxs(kH,{"code-path":"src/components/ui/dialog.tsx:58:7","data-slot":"dialog-content",className:La("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",i),...n,children:[e,t&&J.jsxs(VH,{"code-path":"src/components/ui/dialog.tsx:68:11","data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[J.jsx(wD,{"code-path":"src/components/ui/dialog.tsx:72:13"}),J.jsx("span",{"code-path":"src/components/ui/dialog.tsx:73:13",className:"sr-only",children:"Close"})]})]})]})}function Xm({title:i,description:e,dataUrl:t,onDownload:n}){return t?J.jsx(bh,{"code-path":"src/components/TexturePreview.tsx:26:5",className:"bg-card/50 backdrop-blur-sm border-border/50 overflow-hidden",children:J.jsxs(Wy,{"code-path":"src/components/TexturePreview.tsx:27:7",className:"p-0",children:[J.jsxs("div",{"code-path":"src/components/TexturePreview.tsx:29:9",className:"aspect-square bg-muted/30 checkerboard relative group",children:[J.jsx("img",{"code-path":"src/components/TexturePreview.tsx:30:11",src:t,alt:i,className:"w-full h-full object-contain"}),J.jsxs("div",{"code-path":"src/components/TexturePreview.tsx:37:11",className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[J.jsxs(HH,{"code-path":"src/components/TexturePreview.tsx:38:13",children:[J.jsx(GH,{"code-path":"src/components/TexturePreview.tsx:39:15",asChild:!0,children:J.jsxs(Xs,{"code-path":"src/components/TexturePreview.tsx:40:17",variant:"secondary",size:"sm",children:[J.jsx(AD,{"code-path":"src/components/TexturePreview.tsx:41:19",className:"w-4 h-4 mr-2"}),"View Full"]})}),J.jsx(jH,{"code-path":"src/components/TexturePreview.tsx:45:15",className:"max-w-4xl p-0 bg-background/95 backdrop-blur-xl",children:J.jsxs("div",{"code-path":"src/components/TexturePreview.tsx:46:17",className:"p-4",children:[J.jsx("h3",{"code-path":"src/components/TexturePreview.tsx:47:19",className:"text-lg font-semibold mb-2",children:i}),J.jsx("div",{"code-path":"src/components/TexturePreview.tsx:48:19",className:"aspect-square bg-muted/30 checkerboard rounded-lg overflow-hidden",children:J.jsx("img",{"code-path":"src/components/TexturePreview.tsx:49:21",src:t,alt:i,className:"w-full h-full object-contain"})})]})})]}),J.jsxs(Xs,{"code-path":"src/components/TexturePreview.tsx:59:13",variant:"secondary",size:"sm",onClick:n,children:[J.jsx(OS,{"code-path":"src/components/TexturePreview.tsx:60:15",className:"w-4 h-4 mr-2"}),"Download"]})]})]}),J.jsx("div",{"code-path":"src/components/TexturePreview.tsx:67:9",className:"p-4 border-t border-border/50",children:J.jsxs("div",{"code-path":"src/components/TexturePreview.tsx:68:11",className:"flex items-start justify-between gap-4",children:[J.jsxs("div",{"code-path":"src/components/TexturePreview.tsx:69:13",children:[J.jsx("h4",{"code-path":"src/components/TexturePreview.tsx:70:15",className:"font-medium text-sm",children:i}),J.jsx("p",{"code-path":"src/components/TexturePreview.tsx:71:15",className:"text-xs text-muted-foreground mt-1",children:e})]}),J.jsx(Xs,{"code-path":"src/components/TexturePreview.tsx:73:13",variant:"ghost",size:"icon",className:"shrink-0",onClick:n,children:J.jsx(OS,{"code-path":"src/components/TexturePreview.tsx:74:15",className:"w-4 h-4"})})]})})]})}):J.jsx(bh,{"code-path":"src/components/TexturePreview.tsx:16:7",className:"bg-card/50 backdrop-blur-sm border-border/50",children:J.jsxs(Wy,{"code-path":"src/components/TexturePreview.tsx:17:9",className:"p-8 text-center",children:[J.jsx("div",{"code-path":"src/components/TexturePreview.tsx:18:11",className:"w-12 h-12 mx-auto mb-4 rounded-lg bg-muted animate-pulse"}),J.jsx("p",{"code-path":"src/components/TexturePreview.tsx:19:11",className:"text-muted-foreground",children:"Generating texture..."})]})})}const qH=[[-1,0,1],[-2,0,2],[-1,0,1]],YH=[[-1,-2,-1],[0,0,0],[1,2,1]];function Gh(i,e,t,n){const a=(n*e+t)*4;return[i[a],i[a+1],i[a+2],i[a+3]]}function P_(i,e,t,n,a,o,u,d=255){const h=(n*e+t)*4;i[h]=a,i[h+1]=o,i[h+2]=u,i[h+3]=d}function wg(i,e,t){return .299*i+.587*e+.114*t}function Tg(i,e,t){return Math.max(e,Math.min(t,i))}function ZH(i,e,t,n){const a=new Uint8ClampedArray(e*t*4);for(let o=0;o<t;o++)for(let u=0;u<e;u++){const[d,h,p]=Gh(i,e,u,o),y=wg(d,h,p);let v=0,x=0;for(let C=-2;C<=2;C++)for(let T=-2;T<=2;T++){const M=u+T,R=o+C;if(M>=0&&M<e&&R>=0&&R<t){const[I,L,z]=Gh(i,e,M,R),P=wg(I,L,z);v+=Math.abs(y-P),x++}}const S=v/x,E=Tg(255-S*n*2-(255-y)*.3,0,255);P_(a,e,u,o,E,E,E)}return a}function KH(i,e,t,n){const a=new Uint8ClampedArray(e*t*4);for(let o=0;o<t;o++)for(let u=0;u<e;u++){const[d,h,p]=Gh(i,e,u,o),y=wg(d,h,p);let v=0,x=0;for(let C=-1;C<=1;C++)for(let T=-1;T<=1;T++){const M=u+T,R=o+C;if(M>=0&&M<e&&R>=0&&R<t){const[I,L,z]=Gh(i,e,M,R);v+=Math.abs(d-I)+Math.abs(h-L)+Math.abs(p-z),x++}}const S=v/x,E=Tg(S*n*.5+(255-y)*.3,0,255);P_(a,e,u,o,E,E,E)}return a}function $H(i,e,t,n){const a=new Uint8ClampedArray(e*t*4);for(let o=0;o<t;o++)for(let u=0;u<e;u++){const[d,h,p]=Gh(i,e,u,o),y=wg(d,h,p),v=Math.max(d,h,p),x=Math.min(d,h,p),S=v===0?0:(v-x)/v,E=Tg(y*n*(1-S*.5),0,255);P_(a,e,u,o,E,E,E)}return a}function QH(i,e,t,n){const a=new Uint8ClampedArray(e*t*4),o=new Float32Array(e*t);for(let u=0;u<t;u++)for(let d=0;d<e;d++){const[h,p,y]=Gh(i,e,d,u);o[u*e+d]=wg(h,p,y)/255}for(let u=0;u<t;u++)for(let d=0;d<e;d++){let h=0,p=0;for(let M=-1;M<=1;M++)for(let R=-1;R<=1;R++){const I=Tg(d+R,0,e-1),L=Tg(u+M,0,t-1),z=o[L*e+I];h+=z*qH[M+1][R+1],p+=z*YH[M+1][R+1]}const y=-h*n,v=-p*n,x=1,S=Math.sqrt(y*y+v*v+x*x),E=(y/S+1)*.5*255,C=(v/S+1)*.5*255,T=(x/S+1)*.5*255;P_(a,e,d,u,E,C,T)}return a}async function JH(i,e){return new Promise((t,n)=>{const a=new Image;a.crossOrigin="anonymous",a.onload=()=>{try{const o=document.createElement("canvas"),u=o.getContext("2d"),d=1024;let h=a.width,p=a.height;if(h>d||p>d){const ae=Math.min(d/h,d/p);h=Math.floor(h*ae),p=Math.floor(p*ae)}o.width=h,o.height=p,u.drawImage(a,0,0,h,p);const v=u.getImageData(0,0,h,p).data,x=document.createElement("canvas");x.width=h,x.height=p,x.getContext("2d").drawImage(a,0,0,h,p);const E=ZH(v,h,p,e.aoIntensity),C=document.createElement("canvas");C.width=h,C.height=p;const T=C.getContext("2d"),M=u.createImageData(h,p);M.data.set(E),T.putImageData(M,0,0);const R=KH(v,h,p,e.roughnessIntensity),I=document.createElement("canvas");I.width=h,I.height=p;const L=I.getContext("2d"),z=u.createImageData(h,p);z.data.set(R),L.putImageData(z,0,0);const P=$H(v,h,p,e.metallicIntensity),V=document.createElement("canvas");V.width=h,V.height=p;const N=V.getContext("2d"),O=u.createImageData(h,p);O.data.set(P),N.putImageData(O,0,0);const K=QH(v,h,p,e.normalStrength),H=document.createElement("canvas");H.width=h,H.height=p;const te=H.getContext("2d"),ee=u.createImageData(h,p);ee.data.set(K),te.putImageData(ee,0,0),t({albedo:x.toDataURL("image/png"),ao:C.toDataURL("image/png"),roughness:I.toDataURL("image/png"),metallic:V.toDataURL("image/png"),normal:H.toDataURL("image/png")})}catch(o){n(o)}},a.onerror=()=>n(new Error("Failed to load image")),a.src=i})}function eG(){const[i,e]=j.useState(null),[t,n]=j.useState(null),[a,o]=j.useState(!1),[u,d]=j.useState("sphere"),[h,p]=j.useState(1),[y,v]=j.useState(1),[x,S]=j.useState(.5),[E,C]=j.useState(1),[T,M]=j.useState(!0),R=j.useRef(null),I=j.useCallback(H=>{if(!H.type.startsWith("image/")){Lv.error("Please upload an image file");return}const te=new FileReader;te.onload=ee=>{const ae=ee.target?.result;e(ae),L(ae)},te.readAsDataURL(H)},[]),L=async H=>{o(!0);try{const te=await JH(H,{aoIntensity:h,roughnessIntensity:y,metallicIntensity:x,normalStrength:E});n(te),Lv.success("PBR textures generated successfully!")}catch(te){Lv.error("Failed to generate PBR textures"),console.error(te)}finally{o(!1)}},z=j.useCallback(H=>{H.preventDefault();const te=H.dataTransfer.files[0];te&&I(te)},[I]),P=H=>{H.preventDefault()},V=()=>{i&&L(i)},N=()=>{e(null),n(null),R.current&&(R.current.value="")},O=(H,te)=>{const ee=document.createElement("a");ee.href=H,ee.download=te,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),Lv.success(`Downloaded ${te}`)},K=()=>{if(!t)return;const H=Date.now();O(t.albedo,`fabrik_albedo_${H}.png`),O(t.ao,`fabrik_ao_${H}.png`),O(t.roughness,`fabrik_roughness_${H}.png`),O(t.metallic,`fabrik_metallic_${H}.png`),O(t.normal,`fabrik_normal_${H}.png`)};return J.jsxs("div",{"code-path":"src/App.tsx:121:5",className:"min-h-screen bg-gradient-radial text-foreground",children:[J.jsx(MU,{"code-path":"src/App.tsx:122:7",position:"top-right",theme:"dark"}),J.jsx("header",{"code-path":"src/App.tsx:125:7",className:"border-b border-border/50 backdrop-blur-sm sticky top-0 z-50 bg-background/80",children:J.jsxs("div",{"code-path":"src/App.tsx:126:9",className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[J.jsxs("div",{"code-path":"src/App.tsx:127:11",className:"flex items-center gap-3",children:[J.jsx("div",{"code-path":"src/App.tsx:128:13",className:"w-10 h-10 rounded-xl bg-gradient-to-br from-orange-500 to-amber-600 flex items-center justify-center glow-orange",children:J.jsx(SE,{"code-path":"src/App.tsx:129:15",className:"w-5 h-5 text-white"})}),J.jsxs("div",{"code-path":"src/App.tsx:131:13",children:[J.jsx("h1",{"code-path":"src/App.tsx:132:15",className:"text-xl font-bold tracking-tight",children:"Fabrik"}),J.jsx("p",{"code-path":"src/App.tsx:133:15",className:"text-xs text-muted-foreground",children:"PBR Texture Generator"})]})]}),J.jsxs("div",{"code-path":"src/App.tsx:137:11",className:"flex items-center gap-3",children:[i&&J.jsxs(Xs,{"code-path":"src/App.tsx:139:15",variant:"ghost",size:"sm",onClick:N,className:"text-muted-foreground hover:text-destructive",children:[J.jsx(vD,{"code-path":"src/App.tsx:140:17",className:"w-4 h-4 mr-2"}),"Clear"]}),J.jsx("a",{"code-path":"src/App.tsx:144:13",href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-foreground transition-colors",children:J.jsx("svg",{"code-path":"src/App.tsx:150:15",className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:J.jsx("path",{"code-path":"src/App.tsx:151:17",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})})]})]})}),J.jsx("main",{"code-path":"src/App.tsx:158:7",className:"max-w-7xl mx-auto px-6 py-8",children:i?J.jsxs("div",{"code-path":"src/App.tsx:198:11",className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[J.jsxs("div",{"code-path":"src/App.tsx:200:13",className:"space-y-4",children:[J.jsxs(bh,{"code-path":"src/App.tsx:201:15",className:"overflow-hidden bg-card/50 backdrop-blur-sm border-border/50",children:[J.jsxs("div",{"code-path":"src/App.tsx:202:17",className:"p-4 border-b border-border/50 flex items-center justify-between",children:[J.jsxs("div",{"code-path":"src/App.tsx:203:19",className:"flex items-center gap-2",children:[J.jsx(qN,{"code-path":"src/App.tsx:204:21",className:"w-4 h-4 text-primary"}),J.jsx("span",{"code-path":"src/App.tsx:205:21",className:"font-medium",children:"3D Preview"})]}),J.jsxs("div",{"code-path":"src/App.tsx:207:19",className:"flex items-center gap-2",children:[J.jsx(Xs,{"code-path":"src/App.tsx:208:21",variant:"ghost",size:"icon",className:`h-8 w-8 ${u==="sphere"?"bg-primary/20 text-primary":""}`,onClick:()=>d("sphere"),children:J.jsx($N,{"code-path":"src/App.tsx:214:23",className:"w-4 h-4"})}),J.jsx(Xs,{"code-path":"src/App.tsx:216:21",variant:"ghost",size:"icon",className:`h-8 w-8 ${u==="cube"?"bg-primary/20 text-primary":""}`,onClick:()=>d("cube"),children:J.jsx(mD,{"code-path":"src/App.tsx:222:23",className:"w-4 h-4"})}),J.jsx(Xs,{"code-path":"src/App.tsx:224:21",variant:"ghost",size:"icon",className:`h-8 w-8 ${u==="plane"?"bg-primary/20 text-primary":""}`,onClick:()=>d("plane"),children:J.jsx(SE,{"code-path":"src/App.tsx:230:23",className:"w-4 h-4"})}),J.jsx(Xs,{"code-path":"src/App.tsx:232:21",variant:"ghost",size:"icon",className:`h-8 w-8 ${u==="torus"?"bg-primary/20 text-primary":""}`,onClick:()=>d("torus"),children:J.jsx(bD,{"code-path":"src/App.tsx:238:23",className:"w-4 h-4"})}),J.jsx(Xs,{"code-path":"src/App.tsx:240:21",variant:"ghost",size:"icon",className:`h-8 w-8 ${u==="cylinder"?"bg-primary/20 text-primary":""}`,onClick:()=>d("cylinder"),children:J.jsx(JN,{"code-path":"src/App.tsx:246:23",className:"w-4 h-4"})})]})]}),J.jsx("div",{"code-path":"src/App.tsx:250:17",className:"aspect-square bg-gradient-to-b from-muted/30 to-muted/10 checkerboard",children:t&&J.jsx(mV,{"code-path":"src/App.tsx:252:21",textures:t,meshType:u,autoRotate:T})}),J.jsxs("div",{"code-path":"src/App.tsx:259:17",className:"p-3 border-t border-border/50 flex items-center justify-between",children:[J.jsx("div",{"code-path":"src/App.tsx:260:19",className:"flex items-center gap-4",children:J.jsxs("div",{"code-path":"src/App.tsx:261:21",className:"flex items-center gap-2",children:[J.jsx(VL,{"code-path":"src/App.tsx:262:23",id:"autorotate",checked:T,onCheckedChange:M}),J.jsx(Rm,{"code-path":"src/App.tsx:267:23",htmlFor:"autorotate",className:"text-sm cursor-pointer",children:"Auto-rotate"})]})}),J.jsxs(Xs,{"code-path":"src/App.tsx:270:19",variant:"outline",size:"sm",onClick:V,disabled:a,children:[J.jsx(fD,{"code-path":"src/App.tsx:276:21",className:`w-4 h-4 mr-2 ${a?"animate-spin":""}`}),"Regenerate"]})]})]}),J.jsx(bh,{"code-path":"src/App.tsx:283:15",className:"bg-card/50 backdrop-blur-sm border-border/50",children:J.jsxs(Wy,{"code-path":"src/App.tsx:284:17",className:"p-4 space-y-4",children:[J.jsxs("div",{"code-path":"src/App.tsx:285:19",className:"flex items-center gap-2 mb-2",children:[J.jsx(hD,{"code-path":"src/App.tsx:286:21",className:"w-4 h-4 text-primary"}),J.jsx("span",{"code-path":"src/App.tsx:287:21",className:"font-medium",children:"Generation Parameters"})]}),J.jsxs("div",{"code-path":"src/App.tsx:290:19",className:"space-y-3",children:[J.jsxs("div",{"code-path":"src/App.tsx:291:21",className:"space-y-2",children:[J.jsxs("div",{"code-path":"src/App.tsx:292:23",className:"flex justify-between text-sm",children:[J.jsx(Rm,{"code-path":"src/App.tsx:293:25",children:"AO Intensity"}),J.jsx("span",{"code-path":"src/App.tsx:294:25",className:"text-muted-foreground",children:h.toFixed(1)})]}),J.jsx(Iv,{"code-path":"src/App.tsx:296:23",value:[h],onValueChange:([H])=>p(H),min:0,max:2,step:.1})]}),J.jsxs("div",{"code-path":"src/App.tsx:305:21",className:"space-y-2",children:[J.jsxs("div",{"code-path":"src/App.tsx:306:23",className:"flex justify-between text-sm",children:[J.jsx(Rm,{"code-path":"src/App.tsx:307:25",children:"Roughness"}),J.jsx("span",{"code-path":"src/App.tsx:308:25",className:"text-muted-foreground",children:y.toFixed(1)})]}),J.jsx(Iv,{"code-path":"src/App.tsx:310:23",value:[y],onValueChange:([H])=>v(H),min:0,max:2,step:.1})]}),J.jsxs("div",{"code-path":"src/App.tsx:319:21",className:"space-y-2",children:[J.jsxs("div",{"code-path":"src/App.tsx:320:23",className:"flex justify-between text-sm",children:[J.jsx(Rm,{"code-path":"src/App.tsx:321:25",children:"Metallic"}),J.jsx("span",{"code-path":"src/App.tsx:322:25",className:"text-muted-foreground",children:x.toFixed(1)})]}),J.jsx(Iv,{"code-path":"src/App.tsx:324:23",value:[x],onValueChange:([H])=>S(H),min:0,max:1,step:.05})]}),J.jsxs("div",{"code-path":"src/App.tsx:333:21",className:"space-y-2",children:[J.jsxs("div",{"code-path":"src/App.tsx:334:23",className:"flex justify-between text-sm",children:[J.jsx(Rm,{"code-path":"src/App.tsx:335:25",children:"Normal Strength"}),J.jsx("span",{"code-path":"src/App.tsx:336:25",className:"text-muted-foreground",children:E.toFixed(1)})]}),J.jsx(Iv,{"code-path":"src/App.tsx:338:23",value:[E],onValueChange:([H])=>C(H),min:0,max:2,step:.1})]})]})]})})]}),J.jsxs("div",{"code-path":"src/App.tsx:352:13",className:"space-y-4",children:[J.jsxs("div",{"code-path":"src/App.tsx:353:15",className:"flex items-center justify-between",children:[J.jsx("h3",{"code-path":"src/App.tsx:354:17",className:"font-semibold text-lg",children:"Generated Textures"}),J.jsxs(Xs,{"code-path":"src/App.tsx:355:17",onClick:K,disabled:!t,className:"bg-primary hover:bg-primary/90",children:[J.jsx(OS,{"code-path":"src/App.tsx:356:19",className:"w-4 h-4 mr-2"}),"Download All"]})]}),J.jsxs(pL,{"code-path":"src/App.tsx:361:15",defaultValue:"albedo",className:"w-full",children:[J.jsxs(mL,{"code-path":"src/App.tsx:362:17",className:"grid grid-cols-5 mb-4",children:[J.jsx(Am,{"code-path":"src/App.tsx:363:19",value:"albedo",children:"Albedo"}),J.jsx(Am,{"code-path":"src/App.tsx:364:19",value:"ao",children:"AO"}),J.jsx(Am,{"code-path":"src/App.tsx:365:19",value:"roughness",children:"Rough"}),J.jsx(Am,{"code-path":"src/App.tsx:366:19",value:"metallic",children:"Metal"}),J.jsx(Am,{"code-path":"src/App.tsx:367:19",value:"normal",children:"Normal"})]}),J.jsx(Cm,{"code-path":"src/App.tsx:370:17",value:"albedo",children:J.jsx(Xm,{"code-path":"src/App.tsx:371:19",title:"Albedo / Base Color",description:"The base color of the material without lighting information.",dataUrl:t?.albedo,onDownload:()=>t?.albedo&&O(t.albedo,"fabrik_albedo.png")})}),J.jsx(Cm,{"code-path":"src/App.tsx:379:17",value:"ao",children:J.jsx(Xm,{"code-path":"src/App.tsx:380:19",title:"Ambient Occlusion",description:"Shadows in crevices and corners where light is occluded.",dataUrl:t?.ao,onDownload:()=>t?.ao&&O(t.ao,"fabrik_ao.png")})}),J.jsx(Cm,{"code-path":"src/App.tsx:388:17",value:"roughness",children:J.jsx(Xm,{"code-path":"src/App.tsx:389:19",title:"Roughness",description:"How rough or smooth the surface appears. White = rough, Black = smooth.",dataUrl:t?.roughness,onDownload:()=>t?.roughness&&O(t.roughness,"fabrik_roughness.png")})}),J.jsx(Cm,{"code-path":"src/App.tsx:397:17",value:"metallic",children:J.jsx(Xm,{"code-path":"src/App.tsx:398:19",title:"Metallic",description:"Whether the material is metallic or dielectric. White = metal, Black = non-metal.",dataUrl:t?.metallic,onDownload:()=>t?.metallic&&O(t.metallic,"fabrik_metallic.png")})}),J.jsx(Cm,{"code-path":"src/App.tsx:406:17",value:"normal",children:J.jsx(Xm,{"code-path":"src/App.tsx:407:19",title:"Normal Map",description:"Surface detail and bump information for lighting calculations.",dataUrl:t?.normal,onDownload:()=>t?.normal&&O(t.normal,"fabrik_normal.png")})})]}),J.jsxs(bh,{"code-path":"src/App.tsx:417:15",className:"bg-card/50 backdrop-blur-sm border-border/50 overflow-hidden",children:[J.jsx("div",{"code-path":"src/App.tsx:418:17",className:"p-3 border-b border-border/50",children:J.jsx("span",{"code-path":"src/App.tsx:419:19",className:"font-medium text-sm",children:"Original Image"})}),J.jsx("div",{"code-path":"src/App.tsx:421:17",className:"aspect-video bg-muted/30 flex items-center justify-center p-4",children:J.jsx("img",{"code-path":"src/App.tsx:422:19",src:i,alt:"Original",className:"max-w-full max-h-full object-contain rounded-lg"})})]})]})]}):J.jsx("div",{"code-path":"src/App.tsx:161:11",className:"min-h-[60vh] flex items-center justify-center",onDrop:z,onDragOver:P,children:J.jsx(bh,{"code-path":"src/App.tsx:166:13",className:"w-full max-w-2xl border-2 border-dashed border-border hover:border-primary/50 transition-all duration-300 bg-card/50 backdrop-blur-sm",children:J.jsxs(Wy,{"code-path":"src/App.tsx:167:15",className:"p-12 text-center",children:[J.jsx("input",{"code-path":"src/App.tsx:168:17",ref:R,type:"file",accept:"image/*",className:"hidden",onChange:H=>H.target.files?.[0]&&I(H.target.files[0])}),J.jsx("div",{"code-path":"src/App.tsx:175:17",className:"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-orange-500/20 to-amber-600/20 flex items-center justify-center animate-pulse-glow",children:J.jsx(MD,{"code-path":"src/App.tsx:176:19",className:"w-10 h-10 text-primary"})}),J.jsx("h2",{"code-path":"src/App.tsx:178:17",className:"text-2xl font-semibold mb-3",children:"Drop your texture here"}),J.jsx("p",{"code-path":"src/App.tsx:179:17",className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"Upload an image to automatically generate PBR textures including Ambient Occlusion, Metallic, Roughness, and Normal maps."}),J.jsxs(Xs,{"code-path":"src/App.tsx:182:17",size:"lg",onClick:()=>R.current?.click(),className:"bg-primary hover:bg-primary/90",children:[J.jsx(nD,{"code-path":"src/App.tsx:187:19",className:"w-4 h-4 mr-2"}),"Select Image"]}),J.jsx("p",{"code-path":"src/App.tsx:190:17",className:"text-xs text-muted-foreground mt-4",children:"Supports PNG, JPG, WEBP  Max 10MB"})]})})})}),J.jsx("footer",{"code-path":"src/App.tsx:435:7",className:"border-t border-border/50 mt-12 py-6",children:J.jsx("div",{"code-path":"src/App.tsx:436:9",className:"max-w-7xl mx-auto px-6 text-center text-sm text-muted-foreground",children:J.jsx("p",{"code-path":"src/App.tsx:437:11",children:"Fabrik PBR Generator  Built with React, Three.js & Tailwind CSS"})})})]})}kN.createRoot(document.getElementById("root")).render(J.jsx(j.StrictMode,{"code-path":"src/main.tsx:7:3",children:J.jsx(eG,{"code-path":"src/main.tsx:8:5"})}));
